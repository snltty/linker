---
sidebar_position: 2
slug: /p2p/relay
---

# 3.2、中继

## 1、主服务器中继

:::tip[说明]

1. 如果你自建信标服务器，填写你服务器的管理密钥和管理密码，则可以管理服务器的中继cdkey，发布cdkey给别人使用
2. 如果你使用别人的服务器，你没有密钥可以不填写，则需要使用别人服务器的公开中继节点，或使用他提供的cdkey
3. `按喜好调整好即可，往后的所有通信都是自动的，无需其它操作`
:::


## 2、多服务器中继节点
:::tip[说明]

1. 如果你有多个服务器，希望将这些服务器作为一个中继节点
2. 在主服务器外的其它服务器部署一个服务端
3. 然后 `configs/server.json` 中(`Relay->Distributed`)下修改配置

```json
//中继
"Relay": {
    //多节点
    "Distributed": {
        //作为节点时
        "Node": {
            //节点Id
            "Id": "279DBACF-6F0B-46D4-9BA9-902EB6824849",
            //节点名称
            "Name": "default",
            //节点地址 域名/IP:端口 或 域名/IP，当只填写域名/IP时，默认使用 ServicePort
            "Host": "0.0.0.0:1802",
            //节点最大连接数
            "MaxConnection": 0,
            //节点连接最大带宽
            "MaxBandwidth": 0,
            //节点最大总带宽
            "MaxBandwidthTotal": 0,
            //节点最大流量
            "MaxGbTotal": 0,
            //节点剩余流量
            "MaxGbTotalLastBytes": 0,
            //当前月份，月份变化时重置剩余流量
            "MaxGbTotalMonth": 0,
            //节点是否公开
            "Public": false,
            //主机地址
            "MasterHost": "127.0.0.1:1802",
            //主机密钥
            "MasterSecretKey": "snltty",
            //随便url，管理页面展示时点击跳转
            "Url": "https://linker-doc.snltty.com",
            //支持TCP
            "AllowTcp": true,
            //支持UDP
            "AllowUdp": false,
            //与主机同步版本
            "Sync2Server": false,
            //主机备用地址，默认不填即可
            "MasterHosts": []
        },
        //作为主机时
        "Master": {
            "SecretKey": "snltty"
        }
    }
}
```
:::