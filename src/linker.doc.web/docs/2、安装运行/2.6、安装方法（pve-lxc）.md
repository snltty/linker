---
sidebar_position: 6
slug: /install/pve-lxc
---

#  2.6、安装方法（pve-lxc）

#### **镜像包： [linker-lxc.tar.xz](/linker-lxc.tar.xz)**

------------
> 下载镜像 - 安装镜像 - 修改配置文件挂载TUN - 启动 - IP:1804
------------

1、将容器上传到宿主机 使用LXC本地模板创建容器`lxc-create -n <容器名> -t local -- -f linker.tar.xz`

2、创建好后打开容器目录 默认：`/var/lib/lxc/<容器名>` 打开容器文件夹中的 `config` 文件

3、以下是提供的 `config` 配置文件 按需使用 **（挂载配置必须要有 不然无法使用 ）** 无特权模式涉及权限 需要给镜像`chown -R 100000:100000 <容器路径>` 这方面归容器使用管 可以问AI解决问题

    # 路径 名称
    lxc.rootfs.path = dir:/os/1/rootfs
    lxc.uts.name = 1
    # 网络
    lxc.net.0.type = macvlan
    lxc.net.0.link = eth0
    lxc.net.0.flags = up
    lxc.net.0.hwaddr = 00:11:22:33:08:ea
    # ip
    lxc.net.0.ipv4.address = 192.168.3.199/24
    lxc.net.0.ipv4.gateway = 192.168.3.1
    
    # 自动启动 延迟启动
    lxc.start.auto = 1
    lxc.start.delay = 5
    
    # 无特权模式核心配置
    #lxc.idmap = u 0 100000 65536
    #lxc.idmap = g 0 100000 65536
    
    # 初始化命令（默认即可 可以不要）
    #lxc.init.cmd = /sbin/init
    
    # 挂载配置（简化，避免自动挂载问题）
    lxc.mount.auto = proc:rw sys:rw cgroup:rw
    lxc.cgroup.devices.allow = c 10:200 rwm
    # 挂载宿主机的 /dev/net/tun 到容器内（绑定挂载）
    lxc.mount.entry = /dev/net/tun dev/net/tun none bind,create=file 0 0
    
4、配置好后 `lxc-start <容器名>` 启动即可 启动成功后 `IP:1804` 使用
