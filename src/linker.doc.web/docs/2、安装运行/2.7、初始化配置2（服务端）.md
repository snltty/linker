---
sidebar_position: 7
slug: /install/config-server
---

# 2.7、初始化配置2（服务端）

## 1、服务端手动修改配置文件

这是自建服务器需要配置的，没有服务器则跳过

:::tip[服务端运行流程]
1. 运行程序，在configs目录下会生成 common.json server.json
2. 关闭程序
3. 修改common.json，Modes 只保留 server
4. 修改server.json，可以去在线生成一些GUID作为各个功能的密钥
5. 再次运行程序

server.json
```
{
    "Relay": {
        //分享key，自动生成，【无需修改】
        "ShareKey": "",
        //管理密钥，自动生成，第一个导入此节点的信标服务可以修改本节点配置，【无需修改】
        "MasterKey": "d763f00a21cd1e0a71e7d833ed2a4e51",
        //自动生成，【无需修改】
        "DataMonth": 0,
       
        //节点id，自动生成，，【无需修改】
        "NodeId": "111FF038-C0D6-422C-9076-B8A47A81F1C0",
        //节点名称
        "Name": "default",
        //主机，默认为空会自动获取公网IP，比较建议手动填写公网IP或域名
        "Host": "",
        //节点协议，1为TCP，2为UDP，3为TCP+UDP
        "Protocol": 1,
        //最大连接数，0为不限制
        "Connections": 0,
        //带宽限制，0为不限制
        "Bandwidth": 0,
        //月流量，0为不限制
        "DataEachMonth": 0,
        //剩余流量，自动生成，【无需修改】
        "DataRemain": 0,
        //跳转地址，可以填写你喜欢的地址，在节点列表中点击节点名称跳转到此地址
        "Url": "https://linker.snltty.com",
        //节点图标，可以填写你喜欢的图标，在节点列表中展示
        "Logo": "https://linker.snltty.com/img/logo.png"
    },
    //服务端口
    "ServicePort": 1802,
    //API端口，公开一些信息
    "ApiPort": 1803,
    //主机列表，客户端会读取，当主机不可用时按顺序尝试连接此列表内地址
    "Hosts": [],
    //内网穿透
    "SForward": {
        //分享key，自动生成，【无需修改】
        "ShareKey": "",
        //管理密钥，自动生成，第一个导入此节点的信标服务可以修改本节点配置，【无需修改】
        "MasterKey": "66f54039c618da829b16c1007f6e5f30",
        //自动生成，【无需修改】
        "DataMonth": 0,
        //主机，默认为空会自动获取公网IP，比较建议手动填写公网IP或域名
        "Host": "",
        /节点id，自动生成，，【无需修改】
        "NodeId": "2A277A9E-DC4D-4CF3-B029-04A02F1F032F",
        //节点名称
        "Name": "default",
        //域名，为空则使用公网ip访问
        "Domain": "",
        //web端口，为0则不启用
        "WebPort": 0,
        //隧道端口范围，为空不限制，多个逗号隔开，-表示范围，比如 80,8080,10000-60000
        "TunnelPorts": "1024-65535",
        //最大连接数，0为不限制
        "Connections": 0,
        //带宽限制，0为不限制
        "Bandwidth": 0,
        //月流量，0为不限制
        "DataEachMonth": 0,
        //剩余流量，自动生成，【无需修改】
        "DataRemain": 0,
        //跳转地址，可以填写你喜欢的地址，在节点列表中点击节点名称跳转到此地址
        "Url": "https://linker.snltty.com",
        //节点图标，可以填写你喜欢的图标，在节点列表中展示
        "Logo": "https://linker.snltty.com/img/logo.png"

    },
    //登入
    "SignIn": {
        //清理超过7天不上线的客户端
        "CleanDays": 7,
        //启用登入，不启用时客户端无法连接
        "Enabled": true,
        //允许匿名登入，不允许匿名时需要填写正确的密钥+密码
        "Anonymous": true,
        //超级密钥，客户端填写正确后，拥有完全权限，可以对服务端做一些管理更改
        "SuperKey": "snltty",
        //超级密码
        "SuperPassword": "snltty"
    },
    //虚拟网卡
    "Tuntap": {
        //ip租约
        "Lease": {
            //ip租约时间
            "IPDays": 7,
            //网络租约时间
            "NetworkDays": 30
        }
    },
    //更新
    "Updater": {
        //要求客户端与服务端同步版本
        "Sync2Server": false
    },
    //白名单
    "WhiteList": {
        "Type": "afdian",
        "Value": ""
    }
}
```
action.json，这个可以不管，等用得上自定义验证的时候就知道了
```
{
    "SignInActionUrl": "", //登入信标的验证接口
    "RelayActionUrl": "", //中继验证接口
    "RelayNodeUrl": "", //中继节点验证接口
    "SForwardActionUrl": ""//服务器穿透的验证接口
}
```
:::
