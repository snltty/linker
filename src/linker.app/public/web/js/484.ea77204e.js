"use strict";(self["webpackChunklinker_web"]=self["webpackChunklinker_web"]||[]).push([[484],{3363:function(e,t,n){n.d(t,{EQ:function(){return o},QI:function(){return i},ZK:function(){return s},gv:function(){return c}});var a=n(4);const i=e=>(0,a.zG)("access/GetAccesss",e),s=e=>(0,a.zG)("access/SetAccess",e),o=()=>(0,a.zG)("access/refresh"),c=e=>(0,a.zG)("access/SetApiPassword",e)},5241:function(e,t,n){n.d(t,{AE:function(){return p},Gn:function(){return f},Iu:function(){return m},Jd:function(){return u},Nj:function(){return v},PR:function(){return c},Yh:function(){return r},_:function(){return d},ac:function(){return l},bP:function(){return i},en:function(){return o},w0:function(){return h},zi:function(){return s}});var a=n(4);const i=e=>(0,a.zG)("tuntap/routes",e),s=(e="0")=>(0,a.zG)("tuntap/get",e),o=e=>(0,a.zG)("tuntap/run",e),c=e=>(0,a.zG)("tuntap/stop",e),l=e=>(0,a.zG)("tuntap/update",e),r=()=>(0,a.zG)("tuntap/refresh"),u=()=>(0,a.zG)("tuntap/SubscribePing"),d=e=>(0,a.zG)("tuntap/SubscribeForwardTest",e),h=e=>(0,a.zG)("tuntap/CalcNetwork",e),v=()=>(0,a.zG)("tuntap/GetNetwork"),p=e=>(0,a.zG)("tuntap/AddNetwork",e),f=e=>(0,a.zG)("tuntap/getid",e),m=e=>(0,a.zG)("tuntap/setid",e)},6057:function(e,t,n){n.d(t,{Y:function(){return c}});var a=n(3363),i=n(144),s=n(6768);const o=Symbol(),c=()=>{const e=(0,i.KR)({list:null,timer:0,hashcode:0});(0,s.Gt)(o,e);const t=()=>{(0,a.EQ)()},n=()=>new Promise(((t,n)=>{(0,a.QI)(e.value.hashcode.toString()).then((n=>{if(e.value.hashcode=n.HashCode,n.List)return e.value.list=n.List,void t(!0);t(!1)})).catch((()=>{t(!1)}))})),c=(t,n)=>{e.value.list&&Object.assign(n,{hook_accesss:e.value.list[t.MachineId]||"",hook_accesss_load:!0})};return{access:e,accessDataFn:n,accessProcessFn:c,accessRefreshFn:t}}},4373:function(e,t,n){n.d(t,{Y:function(){return r},r:function(){return l}});var a=n(9299),i=n(3830),s=n(6768),o=n(144);const c=Symbol(),l=()=>{const e=(0,i.B)(),t=(0,s.EW)((()=>e.value.config.Client.Id)),n=(0,s.EW)((()=>e.value.hasAccess("FullList"))),l=+(localStorage.getItem("ps")||"10"),r=+(localStorage.getItem("device-count")||"10"),u=(0,o.Kh)({timer:0,timer1:0,page:{Request:{Page:1,Size:l,Name:"",Ids:[],Prop:"",Asc:!0},Count:r,List:Array(r).fill().map((e=>({})))},loadTimer:0,showDeviceEdit:!1,showAccessEdit:!1,deviceInfo:null});(0,s.Gt)(c,u);const d={},h=(e,t,n,a)=>{d[e]={dataFn:t,processFn:n,refreshFn:a,changed:!0,refresh:!0}},v=e=>{d[e]&&(d[e].refresh=!0,d[e].changed=!0)},p=()=>{const e=e=>new Promise(((t,n)=>{e.dataFn(u.page.List.filter((e=>e))).then((n=>{e.changed=e.changed||n,t()}))})),t=async()=>{clearTimeout(u.timer1);const n=Object.values(d).filter((e=>e.refresh));n.forEach((e=>{e.refresh=!1,e.refreshFn(u.page.List)}));const a=Object.values(d).filter((e=>e.changed));if(a.forEach((e=>{e.changed=!1})),a.length>0)for(let e=0;e<u.page.List.length;e++){const t=u.page.List[e];if(t){const t={_index:e};for(let n=0;n<a.length;n++){const i=a[n];i.processFn(u.page.List[e],t)}Object.assign(u.page.List[e],t)}}await Promise.all(Object.values(d).map((t=>e(t)))),u.timer1=setTimeout(t,1e3)};t()};p();const f=()=>{m().then((()=>{p(),g()}))},m=()=>new Promise(((i,o)=>{(0,a.nD)(u.page.Request).then((a=>{u.page.Request=a.Request,u.page.Count=a.Count;for(let i in a.List)Object.assign(a.List[i],{showDel:t.value!=a.List[i].MachineId&&0==a.List[i].Connected,showAccess:t.value!=a.List[i].MachineId&&a.List[i].Connected,showReboot:a.List[i].Connected,isSelf:t.value==a.List[i].MachineId,animationDelay:50*i}),a.List[i].isSelf&&(e.value.self=a.List[i]),n.value||Object.assign(a.List[i],{MachineId:t.value==a.List[i].MachineId?a.List[i].MachineId:"",isHide:t.value!=a.List[i].MachineId});u.page.List=a.List;for(let e in d)d[e].changed=!0;localStorage.setItem("device-count",u.page.Count),(0,s.dY)((()=>{window.dispatchEvent(new Event("resize"))})),i()})).catch((e=>{i()}))})),g=()=>{clearTimeout(u.timer),(0,a.nD)(u.page.Request).then((n=>{for(let a in n.List){const i=u.page.List.filter((e=>e.MachineId==n.List[a].MachineId))[0];i&&(Object.assign(i,{Connected:n.List[a].Connected,Version:n.List[a].Version,LastSignIn:n.List[a].LastSignIn,Args:n.List[a].Args,showDel:t.value!=n.List[a].MachineId&&0==n.List[a].Connected,showAccess:t.value!=n.List[a].MachineId&&n.List[a].Connected,showReboot:n.List[a].Connected,isSelf:t.value==n.List[a].MachineId}),i.isSelf&&(e.value.self=i))}u.timer=setTimeout(g,5e3)})).catch((e=>{u.timer=setTimeout(g,5e3)}))},k=e=>{e&&(u.page.Request.Page=e),clearTimeout(u.loadTimer),u.loadTimer=setTimeout(m,300)},I=e=>{e&&(u.page.Request.Size=e,localStorage.setItem("ps",e)),clearTimeout(u.loadTimer),u.loadTimer=setTimeout(m,300)},_=()=>{clearTimeout(u.timer),clearTimeout(u.timer1),u.timer=0,u.timer1=0},L=e=>(0,a.VN)(e);return{devices:u,deviceAddHook:h,deviceRefreshHook:v,deviceStartProcess:f,handlePageChange:k,handlePageSizeChange:I,deviceClearTimeout:_,setSort:L}},r=()=>(0,s.WQ)(c)},8651:function(e,t,n){n.d(t,{L:function(){return c},Z:function(){return l}});var a=n(144),i=n(6768),s=n(83);const o=Symbol(),c=()=>{const e=(0,a.KR)({speedCache:{},showEdit:!1,device:{},transactionId:"",timer:0,list:null,hashcode:0,_updateRealTime:!1,updateRealTime:t=>{e.value.hashcode=0,e.value._updateRealTime=t}});(0,i.Gt)(o,e);const t=t=>{const a={},i=e.value.speedCache;for(let e in t)for(let s in t[e]){const o=t[e][s];a[s]=a[s]||{},a[s][e]=o;const c=`${s}-${e}`,l=i[c]||{SendBytes:0,ReceiveBytes:0};o.SendBytesText=n(o.SendBytes-l.SendBytes,"/s"),o.ReceiveBytesText=n(o.ReceiveBytes-l.ReceiveBytes,"/s"),o.SendBufferRemainingText=n(o.SendBufferRemaining,""),o.RecvBufferRemainingText=n(o.RecvBufferRemaining||0,""),l.SendBytes=o.SendBytes,l.ReceiveBytes=o.ReceiveBytes,i[c]=l}return a},n=(e,t="")=>{let n=0;while(e>=1024)e/=1024,n++;return`${e.toFixed(2)}${["B","KB","MB","GB","TB"][n]}${t}`},c=()=>new Promise(((n,a)=>{(0,s.Uu)(e.value.hashcode.toString()).then((a=>{if(0==e.value._updateRealTime&&(e.value.hashcode=a.HashCode),a.List)return e.value.list=t(a.List),void n(!0);n(!1)})).catch((()=>{n(!1)}))})),l=()=>{},r=(t,n)=>{e.value.list&&Object.assign(n,{hook_connection:e.value.list[t.MachineId],hook_connection_load:!0})};return{connections:e,connectionDataFn:c,connectionProcessFn:r,connectionRefreshFn:l}},l=()=>(0,i.WQ)(o)},5234:function(e,t,n){n.d(t,{O:function(){return c},W:function(){return l}});n(3375),n(9225),n(3972),n(9209),n(5714),n(7561),n(6197);var a=n(144),i=n(6768),s=n(5241);const o=Symbol(),c=()=>{const e=(0,a.KR)({timer:0,showEdit:!1,current:null,list:null,hashcode:0,showLease:!1,device:{id:"",name:""},showRoutes:!1,showFirewall:!1,showWakeup:!1});(0,i.Gt)(o,e);const t=/pve|ikuai|fnos|iphone|samsung|vivo|oppo|google|huawei|xiaomi|ios|android|windows|ubuntu|openwrt|armbian|archlinux|fedora|centos|rocky|alpine|debian|linux|docker/g,n=()=>new Promise(((n,a)=>{(0,s.zi)(e.value.hashcode.toString()).then((a=>{if((0,s.Jd)(),e.value.hashcode=a.HashCode,a.List){for(let e in a.List){const n=a.List[e].SystemInfo.toLowerCase(),i=[...new Set(n.match(t))];Object.assign(a.List[e],{running:2==a.List[e].Status,loading:1==a.List[e].Status,systems:i})}return e.value.list=a.List,void n(!0)}n(!1)})).catch((e=>{n(!1)}))})),c=()=>{(0,s.Yh)()},l=(t,n)=>{e.value.list&&Object.assign(n,{hook_tuntap:e.value.list[t.MachineId],hook_tuntap_load:!0})},r=t=>Object.values(e.value.list).filter((e=>e.IP.indexOf(t)>=0||e.Lans.filter((e=>e.IP.indexOf(t)>=0)).length>0)).map((e=>e.MachineId)),u=t=>{const n=Object.values(e.value.list).filter((e=>e.IP)).sort(((e,t)=>{const n=e.IP.split(".").map((e=>Number(e))),a=t.IP.split(".").map((e=>Number(e)));for(let i=0;i<n.length;i++)if(n[i]!=a[i])return n[i]-a[i];return 0}));return n.map((e=>e.MachineId))};return{tuntap:e,tuntapDataFn:n,tuntapProcessFn:l,tuntapRefreshFn:c,getTuntapMachines:r,sortTuntapIP:u}},l=()=>(0,i.WQ)(o)},6641:function(e,t,n){n.d(t,{A:function(){return m}});var a=n(6768),i=n(4232);const s=["onClick","title"],o={key:0,class:"self gateway"},c={key:1,class:"hide gateway"};function l(e,t,n,l,r,u){const d=(0,a.g2)("StarFilled"),h=(0,a.g2)("el-icon"),v=(0,a.g2)("Hide"),p=(0,a.g2)("AccessBoolean"),f=(0,a.g2)("el-skeleton-item"),m=(0,a.g2)("el-skeleton");return void 0!==l.item.MachineName?((0,a.uX)(),(0,a.Wv)(p,{key:0,value:"RenameSelf,RenameOther"},{default:(0,a.k6)((({values:e})=>[(0,a.Lk)("a",{href:"javascript:;",onClick:t=>l.handleEdit(l.item,e),title:l.item.IP,class:"a-line"},[(0,a.Lk)("strong",{class:(0,i.C4)(["gateway",{green:l.item.Connected}])},(0,i.v_)(l.item.MachineName||"null"),3)],8,s),l.item.isSelf?((0,a.uX)(),(0,a.CE)("strong",o,[(0,a.eW)("("),(0,a.bF)(h,{size:"16"},{default:(0,a.k6)((()=>[(0,a.bF)(d)])),_:1}),(0,a.eW)(")")])):(0,a.Q3)("",!0),l.item.isHide?((0,a.uX)(),(0,a.CE)("strong",c,[(0,a.eW)("("),(0,a.bF)(h,{size:"16"},{default:(0,a.k6)((()=>[(0,a.bF)(v)])),_:1}),(0,a.eW)(")")])):(0,a.Q3)("",!0)])),_:1})):((0,a.uX)(),(0,a.Wv)(m,{key:1,animated:""},{template:(0,a.k6)((()=>[(0,a.bF)(f,{variant:"text",style:{"vertical-align":"middle",width:"50%"}})])),_:1}))}var r=n(3830),u=n(7477),d=n(1219),h=n(4373),v={props:["item","config"],components:{StarFilled:u.BQ2,Hide:u.LdN},setup(e){const t=(0,h.Y)(),n=(0,r.B)(),i=(0,a.EW)((()=>n.value.config.Client.Id)),s=(n,a)=>{if(n.MachineId&&e.config){if(i.value===e.item.MachineId){if(!a.RenameSelf)return void d.nk.success("æ— æƒé™")}else if(!a.RenameOther)return void d.nk.success("æ— æƒé™");t.deviceInfo=e.item,t.showDeviceEdit=!0}};return{item:(0,a.EW)((()=>e.item)),handleEdit:s}}},p=n(1241);const f=(0,p.A)(v,[["render",l],["__scopeId","data-v-31fb7eba"]]);var m=f},3025:function(e,t,n){n.d(t,{A:function(){return h}});var a=n(6768),i=n(4232);const s=["title"];function o(e,t,n,o,c,l){const r=(0,a.gN)("loading");return(0,a.uX)(),(0,a.CE)("div",{class:"connect-point",onClick:t[0]||(t[0]=(...e)=>o.handleShow&&o.handleShow(...e))},[(0,a.bo)((0,a.Lk)("span",{class:(0,i.C4)(`connect-point ${o.state.className}`),title:o.state.title},null,10,s),[[r,o.state.connecting]])])}var c=n(144),l=n(8651),r={props:["row","transactionId"],setup(e){const t=(0,l.Z)(),n=(0,a.EW)((()=>e.row.hook_connection&&e.row.hook_connection[e.transactionId]||{})),i=(0,c.Kh)({transactionId:e.transactionId,connecting:(0,a.EW)((()=>!!e.row.hook_operating&&e.row.hook_operating[e.transactionId])),className:(0,a.EW)((()=>n.value.Connected?["p2p","relay","node"][n.value.Type]:"default")),title:(0,a.EW)((()=>n.value.Connected?["æ‰“æ´žç›´è¿ž","ä¸­ç»§è¿žæŽ¥","èŠ‚ç‚¹è¿žæŽ¥"][n.value.Type]:"æœªè¿žæŽ¥"))}),s=()=>{t.value.device=e.row,t.value.transactionId=e.transactionId,t.value.showEdit=!0};return{state:i,handleShow:s}}},u=n(1241);const d=(0,u.A)(r,[["render",o],["__scopeId","data-v-5bf12413"]]);var h=d},3348:function(e,t,n){n.d(t,{A:function(){return X}});var a=n(6768),i=n(4232);const s={class:"flex"},o={class:"flex-1"},c=["onClick"],l=["title"],r={key:1,class:"red",title:"IPå­˜åœ¨å†²çªï¼Œè¯·ä½¿ç”¨æ–°IP"},u={key:2,class:"disable",title:"IPä¸ç”Ÿæ•ˆï¼Œå¯èƒ½æ˜¯è®¾å¤‡ä¸åœ¨çº¿"},d=["title"],h={key:4,class:"app-nat",title:"è™šæ‹Ÿç½‘å¡IP\r\nåº”ç”¨å±‚DNAT"},v={key:5,class:"green gateway",title:"è™šæ‹Ÿç½‘å¡IP\r\nç³»ç»ŸNAT"},p={key:6},f={key:1,class:"disable",title:"IPä¸ç”Ÿæ•ˆï¼Œå¯èƒ½æ˜¯è®¾å¤‡ä¸åœ¨çº¿"},m={key:0},g={key:0,class:"lan flex disable",title:"IPä¸ç”Ÿæ•ˆï¼Œå¯èƒ½æ˜¯è®¾å¤‡ä¸åœ¨çº¿"},k=["title"],I={key:1,class:"lan flex disable",title:"å·²ç¦ç”¨"},_=["title"],L={key:2,class:"lan flex yellow",title:"ä¸Žå…¶å®ƒè®¾å¤‡å¡«å†™IPã€æˆ–æœ¬æœºå±€åŸŸç½‘IPæœ‰å†²çªã€æˆ–ä¸Žæœ¬æœºå¤–ç½‘IPä¸€è‡´"},w=["title"],C={key:3,class:"lan flex green",title:"æ­£å¸¸ä½¿ç”¨"},y=["title"],S={key:0,class:"delay green"},P={key:1,class:"delay yellow"};function E(e,t,n,E,b,R){const T=(0,a.g2)("ConnectionShow"),F=(0,a.g2)("Loading"),x=(0,a.g2)("el-icon"),A=(0,a.g2)("el-switch"),M=(0,a.g2)("AccessBoolean");return(0,a.uX)(),(0,a.Wv)(M,{value:"TuntapChangeSelf,TuntapChangeOther,TuntapStatusSelf,TuntapStatusOther"},{default:(0,a.k6)((({values:e})=>[(0,a.Lk)("div",s,[(0,a.Lk)("div",o,[(0,a.bF)(T,{row:E.item,transactionId:"tuntap"},null,8,["row"]),(0,a.Lk)("a",{href:"javascript:;",class:"a-line",onClick:t=>E.handleTuntapIP(E.item.hook_tuntap,e),title:"è™šæ‹Ÿç½‘å¡IP"},[E.item.Connected?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[E.item.hook_tuntap.SetupError?((0,a.uX)(),(0,a.CE)("strong",{key:0,class:"red",title:`setup ${E.item.hook_tuntap.SetupError}`},(0,i.v_)(E.item.hook_tuntap.IP),9,l)):E.item.hook_tuntap.Exists?((0,a.uX)(),(0,a.CE)("strong",r,(0,i.v_)(E.item.hook_tuntap.IP),1)):0==E.item.hook_tuntap.Available?((0,a.uX)(),(0,a.CE)("strong",u,(0,i.v_)(E.item.hook_tuntap.IP),1)):E.item.hook_tuntap.NatError?((0,a.uX)(),(0,a.CE)("strong",{key:3,class:"yellow",title:`nat ${E.item.hook_tuntap.NatError}`},(0,i.v_)(E.item.hook_tuntap.IP),9,d)):E.item.hook_tuntap.AppNat&&E.item.hook_tuntap.running?((0,a.uX)(),(0,a.CE)("strong",h,(0,i.v_)(E.item.hook_tuntap.IP),1)):E.item.hook_tuntap.running?((0,a.uX)(),(0,a.CE)("strong",v,(0,i.v_)(E.item.hook_tuntap.IP),1)):((0,a.uX)(),(0,a.CE)("strong",p,(0,i.v_)(E.item.hook_tuntap.IP),1))],64)):((0,a.uX)(),(0,a.CE)("strong",f,(0,i.v_)(E.item.hook_tuntap.IP),1))],8,c)]),E.item.hook_tuntap.loading?((0,a.uX)(),(0,a.CE)("div",m,[(0,a.bF)(x,{size:"14",class:"loading"},{default:(0,a.k6)((()=>[(0,a.bF)(F)])),_:1})])):((0,a.uX)(),(0,a.Wv)(A,{key:1,"model-value":E.item.Connected&&E.item.hook_tuntap.running,loading:E.item.hook_tuntap.loading,disabled:"",onClick:t=>E.handleTuntap(E.item.hook_tuntap,e),size:"small","inline-prompt":"","active-text":"ðŸ˜€","inactive-text":"ðŸ˜£"},null,8,["model-value","loading","onClick"]))]),(0,a.Lk)("div",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(E.item.hook_tuntap.Lans,((e,t)=>((0,a.uX)(),(0,a.CE)(a.FK,{key:t},[0==E.item.hook_tuntap.Available?((0,a.uX)(),(0,a.CE)("div",g,[(0,a.Lk)("span",null,(0,i.v_)(e.IP)+"/"+(0,i.v_)(e.PrefixLength),1),(0,a.Lk)("span",{class:"flex-1 remark",title:e.Remark},(0,i.v_)(e.Remark),9,k)])):e.Disabled?((0,a.uX)(),(0,a.CE)("div",I,[(0,a.Lk)("span",null,(0,i.v_)(e.IP)+"/"+(0,i.v_)(e.PrefixLength),1),(0,a.Lk)("span",{class:"flex-1 remark",title:e.Remark},(0,i.v_)(e.Remark),9,_)])):e.Exists?((0,a.uX)(),(0,a.CE)("div",L,[(0,a.Lk)("span",null,(0,i.v_)(e.IP)+"/"+(0,i.v_)(e.PrefixLength),1),(0,a.Lk)("span",{class:"flex-1 remark",title:e.Remark},(0,i.v_)(e.Remark),9,w)])):((0,a.uX)(),(0,a.CE)("div",C,[(0,a.Lk)("span",null,(0,i.v_)(e.IP)+"/"+(0,i.v_)(e.PrefixLength),1),(0,a.Lk)("span",{class:"flex-1 remark",title:e.Remark},(0,i.v_)(e.Remark),9,y)]))],64)))),128))]),E.showDelay?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[E.item.hook_tuntap.Delay>=0&&E.item.hook_tuntap.Delay<=100?((0,a.uX)(),(0,a.CE)("div",S,(0,i.v_)(E.item.hook_tuntap.Delay)+"ms",1)):((0,a.uX)(),(0,a.CE)("div",P,(0,i.v_)(E.item.hook_tuntap.Delay)+"ms",1))],64)):(0,a.Q3)("",!0)])),_:1})}var b=n(5241),R=n(1219),T=n(5234),F=n(7477),x=n(3830),A=n(3025),M={props:["item","config"],components:{Loading:F.Rhj,Share:F.SYj,ConnectionShow:A.A},setup(e){const t=(0,T.W)(),n=(0,x.B)(),i=(0,a.EW)((()=>n.value.config.Client.Id)),s=(0,a.EW)((()=>2==(2&(n.value.config.Running.Tuntap||{Switch:0}).Switch))),o=(t,n)=>{if(!e.config)return;if(i.value===t.MachineId){if(!n.TuntapStatusSelf)return void R.nk.success("æ— æƒé™")}else if(!n.TuntapStatusOther)return void R.nk.success("æ— æƒé™");const a=e.item.Connected&&t.running?(0,b.PR)(t.MachineId):(0,b.en)(t.MachineId);t.loading=!0,a.then((()=>{R.nk.success("æ“ä½œæˆåŠŸï¼")})).catch((e=>{console.log(e),R.nk.error("æ“ä½œå¤±è´¥ï¼")}))},c=(n,a)=>{if(e.config||i.value==n.MachineId){if(i.value===n.MachineId){if(!a.TuntapChangeSelf)return void R.nk.success("æ— æƒé™")}else if(!a.TuntapChangeOther)return void R.nk.success("æ— æƒé™");n.device=e.item,t.value.current=n,t.value.showEdit=!0}else R.nk.success("æ— æƒé™")},l=()=>{(0,b.Yh)()};return{item:(0,a.EW)((()=>e.item)),tuntap:t,showDelay:s,handleTuntap:o,handleTuntapIP:c,handleTuntapRefresh:l}}},z=n(1241);const B=(0,z.A)(M,[["render",E],["__scopeId","data-v-161b529a"]]);var X=B}}]);