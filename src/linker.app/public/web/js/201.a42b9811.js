"use strict";(self["webpackChunklinker_web"]=self["webpackChunklinker_web"]||[]).push([[201],{9481:function(e,t,a){a.d(t,{A:function(){return y}});var n=a(6768),s=a(4232);const o={class:"flex"},c={class:"flex-1"},l={class:"absolute scrollbar"},r={class:"t-c"};function d(e,t,a,d,i,u){const m=(0,n.g2)("Sync"),h=(0,n.g2)("el-input"),f=(0,n.g2)("el-button"),v=(0,n.g2)("el-card"),k=(0,n.gN)("trim");return(0,n.uX)(),(0,n.Wv)(v,{shadow:"never",class:"h-100 flex flex-column flex-nowrap"},{header:(0,n.k6)((()=>[(0,n.Lk)("div",o,[(0,n.Lk)("span",c,(0,s.v_)(e.$t("action.text")),1),d.state.isSelf?((0,n.uX)(),(0,n.Wv)(m,{key:0,name:"ActionStatic"})):(0,n.Q3)("",!0)])])),footer:(0,n.k6)((()=>[(0,n.Lk)("div",r,[(0,n.bF)(f,{type:"success",onClick:d.handleSave},{default:(0,n.k6)((()=>[(0,n.eW)((0,s.v_)(e.$t("common.confirm")),1)])),_:1},8,["onClick"])])])),default:(0,n.k6)((()=>[(0,n.Lk)("div",l,[(0,n.bo)((0,n.bF)(h,{modelValue:d.state.data,"onUpdate:modelValue":t[0]||(t[0]=e=>d.state.data=e),type:"textarea",resize:"none",onChange:d.handleSave,class:"h-100"},null,8,["modelValue","onChange"]),[[k]])])])),_:1})}var i=a(4);const u=e=>(0,i.zG)("action/GetServerArgs",e),m=e=>(0,i.zG)("action/SetServerArgs",e);var h=a(3830),f=a(1219),v=a(144),k=a(5931),p=a(2322),g={props:["machineId"],components:{Sync:p.A},setup(e){const{t:t}=(0,k.s9)(),a=(0,h.B)(),s=(0,v.Kh)({data:"",machineId:e.machineId||a.value.config.Client.Id,isSelf:(0,n.EW)((()=>s.machineId==a.value.config.Client.Id))}),o=()=>{u(s.machineId).then((e=>{s.data=e}))},c=()=>{try{if(s.data&&"object"!=typeof JSON.parse(s.data))return void f.nk.error(t("action.jsonError"))}catch(e){return void f.nk.error(t("action.jsonError"))}m({Key:s.machineId,Value:s.data}).then((()=>{f.nk.success(t("common.oper"))})).catch((e=>{console.log(e),f.nk.error(t("common.operFail"))}))};return(0,n.sV)((()=>{o()})),{state:s,handleSave:c}}},I=a(1241);const b=(0,I.A)(g,[["render",d],["__scopeId","data-v-07cd30af"]]);var y=b},2322:function(e,t,a){a.d(t,{A:function(){return I}});var n=a(6768),s=a(4232);const o={class:"t-c"},c={class:"t-c w-100 mgt-1"};function l(e,t,a,l,r,d){const i=(0,n.g2)("Share"),u=(0,n.g2)("el-icon"),m=(0,n.g2)("el-button"),h=(0,n.g2)("el-transfer"),f=(0,n.g2)("el-dialog"),v=(0,n.g2)("AccessBoolean");return(0,n.uX)(),(0,n.Wv)(v,{value:"Sync"},{default:(0,n.k6)((({values:a})=>[(0,n.Lk)("div",null,[(0,n.RG)(e.$slots,"default",{},(()=>[(0,n.bF)(m,{class:"btn",size:"small",onClick:e=>l.handleShowSync(a)},{default:(0,n.k6)((()=>[(0,n.bF)(u,null,{default:(0,n.k6)((()=>[(0,n.bF)(i)])),_:1})])),_:2},1032,["onClick"])])),(0,n.bF)(f,{class:"options-center",title:e.$t("server.sync"),"destroy-on-close":"",modelValue:l.state.showNames,"onUpdate:modelValue":t[2]||(t[2]=e=>l.state.showNames=e),width:"54rem",top:"2vh"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",null,[(0,n.Lk)("div",o,(0,s.v_)(`${e.$t("server.sync")}【${e.$t(`server.async${l.state.name}`)}】${e.$t("server.asyncText")}`),1),(0,n.bF)(h,{class:"src-tranfer mgt-1",modelValue:l.state.srcIdValues,"onUpdate:modelValue":t[0]||(t[0]=e=>l.state.srcIdValues=e),filterable:"","filter-method":l.srcFilterMethod,data:l.state.srcIds,titles:[e.$t("firewall.unselect"),e.$t("firewall.selected")],props:{key:"MachineId",label:"MachineName"}},null,8,["modelValue","filter-method","data","titles"]),(0,n.Lk)("div",c,[(0,n.bF)(m,{onClick:t[1]||(t[1]=e=>l.state.showNames=!1)},{default:(0,n.k6)((()=>[(0,n.eW)((0,s.v_)(e.$t("common.cancel")),1)])),_:1}),(0,n.bF)(m,{type:"primary",onClick:l.handleConfirm},{default:(0,n.k6)((()=>[(0,n.eW)((0,s.v_)(e.$t("common.confirm")),1)])),_:1},8,["onClick"])])])])),_:1},8,["title","modelValue"])])])),_:3})}var r=a(9299),d=a(4);const i=e=>(0,d.zG)("sync/Sync",e);var u=a(3830),m=a(7477),h=a(1219),f=a(144),v=a(5931),k={props:["name"],components:{Share:m.SYj},setup(e){const{t:t}=(0,v.s9)(),a=((0,u.B)(),(0,f.Kh)({name:e.name,loading:!1,showNames:!1,srcIdValues:[],srcIds:[]})),n=()=>{i({names:[e.name],ids:a.srcIdValues}).then((e=>{h.nk.success(t("common.oper")),a.showNames=!1}))},s=e=>{e.Sync?(a.showNames=!0,o()):h.nk.success(t("common.access"))},o=()=>{a.loading=!0,(0,r.NT)().then((e=>{a.loading=!1,a.srcIds=e})).catch((e=>{a.loading=!1}))},c=(e,t)=>t.MachineName.toLowerCase().includes(e.toLowerCase());return{state:a,handleShowSync:s,srcFilterMethod:c,handleConfirm:n}}},p=a(1241);const g=(0,p.A)(k,[["render",l]]);var I=g},9201:function(e,t,a){a.r(t),a.d(t,{default:function(){return u}});var n=a(6768);const s={class:"action-wrap h-100"};function o(e,t,a,o,c,l){const r=(0,n.g2)("Action");return(0,n.uX)(),(0,n.CE)("div",s,[(0,n.bF)(r,{machineId:o.state.machineId},null,8,["machineId"])])}var c=a(144),l=a(9481),r={props:["machineId"],components:{Action:l.A},setup(e){const t=(0,c.Kh)({machineId:e.machineId});return{state:t}}},d=a(1241);const i=(0,d.A)(r,[["render",o],["__scopeId","data-v-e8f3ef04"]]);var u=i}}]);