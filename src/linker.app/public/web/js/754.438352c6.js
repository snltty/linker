"use strict";(self["webpackChunklinker_web"]=self["webpackChunklinker_web"]||[]).push([[754],{4921:function(e,t,a){a.d(t,{B8:function(){return i},Hb:function(){return u},Qj:function(){return o},a6:function(){return c},iN:function(){return d},id:function(){return p},mb:function(){return n},xy:function(){return r},zq:function(){return s}});var l=a(4);const o=(e="")=>(0,l.zG)("flow/GetFlows",e),s=(e="")=>(0,l.zG)("flow/GetMessengerFlows",e),n=e=>(0,l.zG)("flow/GetSForwardFlows",e),r=e=>(0,l.zG)("flow/GetRelayFlows",e),i=()=>(0,l.zG)("flow/GetCitys"),d=(e="")=>(0,l.zG)("flow/GetStopwatch",e),u=e=>(0,l.zG)("flow/GetForwardFlows",e),c=e=>(0,l.zG)("flow/GetSocks5Flows",e),p=e=>(0,l.zG)("flow/GetTunnelFlows",e)},83:function(e,t,a){a.d(t,{$M:function(){return u},G7:function(){return n},KW:function(){return i},Uu:function(){return p},Zu:function(){return c},eh:function(){return s},pH:function(){return g},r7:function(){return o},xN:function(){return r},xT:function(){return d}});var l=a(4);const o=(e="0")=>(0,l.zG)("tunnel/get",e),s=()=>(0,l.zG)("tunnel/refresh"),n=e=>(0,l.zG)("tunnel/Operating",e),r=e=>(0,l.zG)("tunnel/connect",e),i=e=>(0,l.zG)("tunnel/SetRouteLevel",e),d=e=>(0,l.zG)("tunnel/GetTransports",e),u=e=>(0,l.zG)("tunnel/SetTransports",e),c=e=>(0,l.zG)("tunnel/GetNetwork",e),p=e=>(0,l.zG)("channel/get",e),g=(e,t)=>(0,l.zG)("channel/remove",{machineid:e,transactionId:t})},920:function(e,t,a){a.d(t,{BJ:function(){return i},NS:function(){return n},UB:function(){return p},aP:function(){return c},lJ:function(){return s},mK:function(){return o},rD:function(){return r},rL:function(){return d},y2:function(){return u}});var l=a(4);const o=(e="0")=>(0,l.zG)("updater/get",e),s=e=>(0,l.zG)("updater/confirm",e),n=e=>(0,l.zG)("updater/exit",e),r=e=>(0,l.zG)("updater/SetSync2Server",e),i=()=>(0,l.zG)("updater/getserver"),d=()=>(0,l.zG)("updater/getmsg"),u=e=>(0,l.zG)("updater/confirmserver",e),c=()=>(0,l.zG)("updater/exitserver"),p=()=>(0,l.zG)("updater/Subscribe")},6046:function(e,t,a){a.d(t,{Y:function(){return n},q:function(){return r}});var l=a(144),o=a(6768);const s=Symbol(),n=()=>{const e=(0,l.KR)({count:!1,map:!1,allmap:!1,overallSendtSpeed:"0000.00KB",overallReceiveSpeed:"0000.00KB",overallOnline:"0/0",serverOnline:"",machineId:"",device:{id:"",name:""},showStopwatch:!1,show:!1});return(0,o.Gt)(s,e),{flow:e}},r=()=>(0,o.WQ)(s)},5304:function(e,t,a){a.d(t,{T:function(){return d},d:function(){return i}});var l=a(920),o=a(3830),s=a(144),n=a(6768);const r=Symbol(),i=()=>{const e=(0,o.B)(),t=(0,s.KR)({timer:0,list:null,hashcode:0,subscribeTimer:0,current:{Version:"",Msg:[],DateTime:"",Status:0,Length:0,Current:0},device:{},show:!1});(0,n.Gt)(r,t);const a=()=>new Promise(((a,o)=>{(0,l.mK)(t.value.hashcode.toString()).then((l=>{if(t.value.hashcode=l.HashCode,l.List){const o=Object.values(l.List).filter((e=>!!e.Version))[0];return o&&(Object.assign(t.value.current,{Version:o.Version,Status:o.Status,Length:o.Length,Current:o.Current}),e.value.updater=t.value.current),t.value.list=l.List,void a(!0)}a(!1)})).catch((()=>{a(!1)}))})),i=()=>{},d=(e,a)=>{t.value.list&&Object.assign(a,{hook_updater:t.value.list[e.MachineId]||{},hook_updater_load:!0})},u=()=>{(0,l.UB)().then((()=>{t.value.subscribeTimer=setTimeout(u,5e3)})).catch((()=>{t.value.subscribeTimer=setTimeout(u,5e3)}))},c=()=>{clearTimeout(t.value.subscribeTimer)};return{updater:t,updaterDataFn:a,updaterProcessFn:d,updaterRefreshFn:i,updaterSubscribe:u,updaterClearTimeout:c}},d=()=>(0,n.WQ)(r)},1257:function(e,t,a){a.d(t,{A:function(){return ce}});var l=a(6768),o=a(4232);function s(e,t,a,s,n,r){const i=(0,l.g2)("el-table-column"),d=(0,l.g2)("el-button"),u=(0,l.g2)("el-table"),c=(0,l.g2)("el-dialog"),p=(0,l.g2)("ServerFlowMessenger"),g=(0,l.g2)("ServerFlowSForward"),f=(0,l.g2)("ServerFlowForward"),m=(0,l.g2)("ServerFlowSocks5"),h=(0,l.g2)("ServerFlowTunnel"),v=(0,l.g2)("ServerFlowRelay"),w=(0,l.g2)("OnlineMap"),y=(0,l.g2)("OnlineAllMap");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(c,{title:s.state.time,"destroy-on-close":"",modelValue:s.flow.count,"onUpdate:modelValue":t[0]||(t[0]=e=>s.flow.count=e),width:"640"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.bF)(u,{data:s.state.list,border:"",size:"small",width:"100%"},{default:(0,l.k6)((()=>[(0,l.bF)(i,{prop:"text",label:e.$t("status.flowType")},null,8,["label"]),(0,l.bF)(i,{prop:"sendtBytes",label:e.$t("status.flowUpload"),sortable:""},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(e.row.sendtBytesText),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"sendtSpeed",label:e.$t("status.flowUpload"),sortable:""},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(e.row.sendtSpeedText),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"receiveBytes",label:e.$t("status.flowDownload"),sortable:""},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(e.row.receiveBytesText),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"receiveSpeed",label:e.$t("status.flowDownload"),sortable:""},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(e.row.receiveSpeedText),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"oper",label:e.$t("status.flowOper"),width:"70"},{default:(0,l.k6)((t=>[t.row.detail?((0,l.uX)(),(0,l.Wv)(d,{key:0,size:"small",onClick:e=>s.handleShowDetail(t.row.id)},{default:(0,l.k6)((()=>[(0,l.eW)((0,o.v_)(e.$t("status.flowDetail")),1)])),_:2},1032,["onClick"])):(0,l.Q3)("",!0)])),_:1},8,["label"])])),_:1},8,["data"])])])),_:1},8,["title","modelValue"]),s.state.details.Messenger?((0,l.uX)(),(0,l.Wv)(p,{key:0,config:s.config,machineId:s.flow.machineId,modelValue:s.state.details.Messenger,"onUpdate:modelValue":t[1]||(t[1]=e=>s.state.details.Messenger=e)},null,8,["config","machineId","modelValue"])):(0,l.Q3)("",!0),s.state.details.SForward?((0,l.uX)(),(0,l.Wv)(g,{key:1,config:s.config,machineId:s.flow.machineId,modelValue:s.state.details.SForward,"onUpdate:modelValue":t[2]||(t[2]=e=>s.state.details.SForward=e)},null,8,["config","machineId","modelValue"])):(0,l.Q3)("",!0),s.state.details.Forward?((0,l.uX)(),(0,l.Wv)(f,{key:2,config:s.config,machineId:s.flow.machineId,modelValue:s.state.details.Forward,"onUpdate:modelValue":t[3]||(t[3]=e=>s.state.details.Forward=e)},null,8,["config","machineId","modelValue"])):(0,l.Q3)("",!0),s.state.details.Socks5?((0,l.uX)(),(0,l.Wv)(m,{key:3,config:s.config,machineId:s.flow.machineId,modelValue:s.state.details.Socks5,"onUpdate:modelValue":t[4]||(t[4]=e=>s.state.details.Socks5=e)},null,8,["config","machineId","modelValue"])):(0,l.Q3)("",!0),s.state.details.Tunnel?((0,l.uX)(),(0,l.Wv)(h,{key:4,config:s.config,machineId:s.flow.machineId,modelValue:s.state.details.Tunnel,"onUpdate:modelValue":t[5]||(t[5]=e=>s.state.details.Tunnel=e)},null,8,["config","machineId","modelValue"])):(0,l.Q3)("",!0),s.state.details.Relay?((0,l.uX)(),(0,l.Wv)(v,{key:5,config:s.config,modelValue:s.state.details.Relay,"onUpdate:modelValue":t[6]||(t[6]=e=>s.state.details.Relay=e)},null,8,["config","modelValue"])):(0,l.Q3)("",!0),s.flow.map?((0,l.uX)(),(0,l.Wv)(w,{key:6,config:s.config,modelValue:s.flow.map,"onUpdate:modelValue":t[7]||(t[7]=e=>s.flow.map=e)},null,8,["config","modelValue"])):(0,l.Q3)("",!0),s.flow.allmap?((0,l.uX)(),(0,l.Wv)(y,{key:7,config:s.config,modelValue:s.flow.allmap,"onUpdate:modelValue":t[8]||(t[8]=e=>s.flow.allmap=e)},null,8,["config","modelValue"])):(0,l.Q3)("",!0)],64)}a(4114);var n=a(4921),r=a(144);function i(e,t,a,s,n,r){const i=(0,l.g2)("el-table-column"),d=(0,l.g2)("el-table"),u=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.Wv)(u,{title:e.$t("status.flowMessenger"),class:"options-center",top:"1vh","destroy-on-close":"",modelValue:s.state.show,"onUpdate:modelValue":t[0]||(t[0]=e=>s.state.show=e),width:"680"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.bF)(d,{data:s.state.list,stripe:"",border:"",size:"small",width:"100%",height:"60vh"},{default:(0,l.k6)((()=>[(0,l.bF)(i,{prop:"id",label:"id",width:"200"}),(0,l.bF)(i,{prop:"sendtBytes",label:e.$t("status.flowUpload"),sortable:""},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(e.row.sendtBytesText),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"sendtSpeed",label:e.$t("status.flowUpload"),sortable:""},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(e.row.sendtSpeedText)+"/s",1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"receiveBytes",label:e.$t("status.flowDownload"),sortable:""},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(e.row.receiveBytesText),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"receiveSpeed",label:e.$t("status.flowDownload"),sortable:""},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(e.row.receiveSpeedText)+"/s",1)])),_:1},8,["label"])])),_:1},8,["data"])])])),_:1},8,["title","modelValue"])}var d=a(5931),u={props:["modelValue","config","machineId"],emits:["update:modelValue"],setup(e,{emit:t}){const{t:a}=(0,d.s9)(),o=(0,r.Kh)({show:!0,timer:0,list:[],old:null});(0,l.wB)((()=>o.show),(e=>{e||setTimeout((()=>{t("update:modelValue",e)}),300)}));const s=()=>{clearTimeout(o.timer),(0,n.zq)(e.machineId).then((e=>{const t=o.old||e,l=[];for(let o in e){const s=e[o],n=t[o],r=`[${o}]${a(`status.messenger${o}`)||"unknown"}`;l.push({id:r,sendtBytes:s.SendtBytes,sendtBytesText:i(s.SendtBytes),sendtSpeed:s.SendtBytes-n.SendtBytes,sendtSpeedText:i(s.SendtBytes-n.SendtBytes),receiveBytes:s.ReceiveBytes,receiveBytesText:i(s.ReceiveBytes),receiveSpeed:s.ReceiveBytes-n.ReceiveBytes,receiveSpeedText:i(s.ReceiveBytes-n.ReceiveBytes)})}o.list=l.filter((e=>!!e.id)),o.old=e,o.timer=setTimeout(s,1e3)})).catch((e=>{o.timer=setTimeout(s,1e3)}))},i=e=>{let t=0;while(e>=1024)e/=1024,t++;return`${e.toFixed(2)}${["B","KB","MB","GB","TB"][t]}`};return(0,l.sV)((()=>{s()})),(0,l.hi)((()=>{clearTimeout(o.timer)})),{config:e.config,state:o}}},c=a(1241);const p=(0,c.A)(u,[["render",i],["__scopeId","data-v-5b253342"]]);var g=p;const f={class:"head"},m={class:"page t-c"},h={class:"page-wrap"};function v(e,t,a,s,n,r){const i=(0,l.g2)("el-input"),d=(0,l.g2)("el-table-column"),u=(0,l.g2)("el-table"),c=(0,l.g2)("el-pagination"),p=(0,l.g2)("el-dialog"),g=(0,l.gN)("trim");return(0,l.uX)(),(0,l.Wv)(p,{title:e.$t("status.flowServerForward"),class:"options-center",top:"1vh","destroy-on-close":"",modelValue:s.state.show,"onUpdate:modelValue":t[1]||(t[1]=e=>s.state.show=e),width:"680"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.Lk)("div",f,[(0,l.bo)((0,l.bF)(i,{modelValue:s.state.page.Key,"onUpdate:modelValue":t[0]||(t[0]=e=>s.state.page.Key=e),placeholder:e.$t("status.flowSearchDomainPort")},null,8,["modelValue","placeholder"]),[[g]])]),(0,l.bF)(u,{data:s.state.list,stripe:"",border:"",size:"small",width:"100%",height:"60vh",onSortChange:s.handleSort},{default:(0,l.k6)((()=>[(0,l.bF)(d,{prop:"Key",label:e.$t("status.flowSearchDomainPort"),width:"200"},null,8,["label"]),(0,l.bF)(d,{prop:"SendtBytes",label:e.$t("status.flowUpload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(e.row.SendtBytesText),1)])),_:1},8,["label"]),(0,l.bF)(d,{prop:"DiffSendtBytes",label:e.$t("status.flowUpload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(e.row.DiffSendtBytesText)+"/s",1)])),_:1},8,["label"]),(0,l.bF)(d,{prop:"ReceiveBytes",label:e.$t("status.flowDownload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(e.row.ReceiveBytesText),1)])),_:1},8,["label"]),(0,l.bF)(d,{prop:"DiffReceiveBytes",label:e.$t("status.flowDownload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(e.row.DiffReceiveBytesText)+"/s",1)])),_:1},8,["label"])])),_:1},8,["data","onSortChange"]),(0,l.Lk)("div",m,[(0,l.Lk)("div",h,[(0,l.bF)(c,{small:"",background:"",layout:"total,prev,pager, next",total:s.state.page.Count,"page-size":s.state.page.PageSize,"current-page":s.state.page.Page,onCurrentChange:s.handlePageChange},null,8,["total","page-size","current-page","onCurrentChange"])])])])])),_:1},8,["title","modelValue"])}var w={props:["modelValue","config","machineId"],emits:["update:modelValue"],setup(e,{emit:t}){const a=(0,r.Kh)({show:!0,timer:0,list:[],page:{Key:"",Page:1,PageSize:15,Count:0,Order:1,OrderType:0}});(0,l.wB)((()=>a.show),(e=>{e||setTimeout((()=>{t("update:modelValue",e)}),300)}));const o=()=>{clearTimeout(a.timer),(0,n.mb)({Key:a.page.Key,Page:a.page.Page,PageSize:a.page.PageSize,Order:a.page.Order,OrderType:a.page.OrderType,MachineId:e.machineId}).then((e=>{try{a.page.Page=e.Page,a.page.PageSize=e.PageSize,a.page.Count=e.Count;const t=[];for(let a=0;a<e.Data.length;a++){const l=e.Data[a];Object.assign(l,{SendtBytesText:s(l.SendtBytes),ReceiveBytesText:s(l.ReceiveBytes),DiffSendtBytesText:s(l.DiffSendtBytes),DiffReceiveBytesText:s(l.DiffReceiveBytes)}),t.push(l)}a.list=t}catch(t){console.log(t)}a.timer=setTimeout(o,1e3)})).catch((e=>{a.timer=setTimeout(o,1e3)}))},s=e=>{let t=0;while(e>=1024)e/=1024,t++;return`${e.toFixed(2)}${["B","KB","MB","GB","TB"][t]}`},i=e=>{e&&(a.page.Page=e)},d=e=>{const t={ascending:1,descending:0}[e.order],l={SendtBytes:1,DiffSendtBytes:2,ReceiveBytes:3,DiffReceiveBytes:4}[e.prop];a.page.Order=l,a.page.OrderType=t};return(0,l.sV)((()=>{o()})),(0,l.hi)((()=>{clearTimeout(a.timer)})),{config:e.config,state:a,handlePageChange:i,handleSort:d}}};const y=(0,c.A)(w,[["render",v],["__scopeId","data-v-7a85ea80"]]);var b=y;const k={class:"page t-c"},S={class:"page-wrap"};function B(e,t,a,s,n,r){const i=(0,l.g2)("el-table-column"),d=(0,l.g2)("el-table"),u=(0,l.g2)("el-pagination"),c=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.Wv)(c,{title:e.$t("status.flowForward"),class:"options-center",top:"1vh","destroy-on-close":"",modelValue:s.state.show,"onUpdate:modelValue":t[0]||(t[0]=e=>s.state.show=e),width:"90%"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.bF)(d,{data:s.state.list,stripe:"",border:"",size:"small",width:"100%",height:"60vh",onSortChange:s.handleSort},{default:(0,l.k6)((()=>[(0,l.bF)(i,{prop:"Key",label:e.$t("status.flowMachineName"),width:"100"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(s.state.names[e.row.Key]||"unknow"),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"Target",label:e.$t("status.flowTarget"),width:"120"},null,8,["label"]),(0,l.bF)(i,{prop:"SendtBytes",label:e.$t("status.flowUpload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(e.row.SendtBytesText),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"DiffSendtBytes",label:e.$t("status.flowUpload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(e.row.DiffSendtBytesText)+"/s",1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"ReceiveBytes",label:e.$t("status.flowDownload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(e.row.ReceiveBytesText),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"DiffReceiveBytes",label:e.$t("status.flowDownload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(e.row.DiffReceiveBytesText)+"/s",1)])),_:1},8,["label"])])),_:1},8,["data","onSortChange"]),(0,l.Lk)("div",k,[(0,l.Lk)("div",S,[(0,l.bF)(u,{small:"",background:"",layout:"total,prev,pager, next",total:s.state.page.Count,"page-size":s.state.page.PageSize,"current-page":s.state.page.Page,onCurrentChange:s.handlePageChange},null,8,["total","page-size","current-page","onCurrentChange"])])])])])),_:1},8,["title","modelValue"])}var T=a(9299),_={props:["modelValue","config","machineId"],emits:["update:modelValue"],setup(e,{emit:t}){const a=(0,r.Kh)({show:!0,timer:0,names:{},list:[],page:{Page:1,PageSize:15,Count:0,Order:1,OrderType:0}});(0,l.wB)((()=>a.show),(e=>{e||setTimeout((()=>{t("update:modelValue",e)}),300)}));const o=()=>{clearTimeout(a.timer),(0,n.Hb)({Page:a.page.Page,PageSize:a.page.PageSize,Order:a.page.Order,OrderType:a.page.OrderType,MachineId:e.machineId}).then((e=>{try{a.page.Page=e.Page,a.page.PageSize=e.PageSize,a.page.Count=e.Count;const t=[];for(let a=0;a<e.Data.length;a++){const l=e.Data[a];Object.assign(l,{SendtBytesText:s(l.SendtBytes),ReceiveBytesText:s(l.ReceiveBytes),DiffSendtBytesText:s(l.DiffSendtBytes),DiffReceiveBytesText:s(l.DiffReceiveBytes)}),t.push(l)}a.list=t}catch(t){console.log(t)}a.timer=setTimeout(o,1e3)})).catch((e=>{a.timer=setTimeout(o,1e3)}))},s=e=>{let t=0;while(e>=1024)e/=1024,t++;return`${e.toFixed(2)}${["B","KB","MB","GB","TB"][t]}`},i=e=>{e&&(a.page.Page=e)},d=e=>{const t={ascending:1,descending:0}[e.order],l={SendtBytes:1,DiffSendtBytes:2,ReceiveBytes:3,DiffReceiveBytes:4}[e.prop];a.page.Order=l,a.page.OrderType=t},u=()=>{(0,T.NT)().then((e=>{a.names=e.reduce(((e,t,a)=>(e[t.MachineId]=t.MachineName,e)),{})}))};return(0,l.sV)((()=>{o(),u()})),(0,l.hi)((()=>{clearTimeout(a.timer)})),{config:e.config,state:a,handlePageChange:i,handleSort:d}}};const F=(0,c.A)(_,[["render",B],["__scopeId","data-v-0f2107fe"]]);var V=F;const x={class:"page t-c"},z={class:"page-wrap"};function C(e,t,a,s,n,r){const i=(0,l.g2)("el-table-column"),d=(0,l.g2)("el-table"),u=(0,l.g2)("el-pagination"),c=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.Wv)(c,{title:e.$t("status.flowSocks5"),class:"options-center",top:"1vh","destroy-on-close":"",modelValue:s.state.show,"onUpdate:modelValue":t[0]||(t[0]=e=>s.state.show=e),width:"90%"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.bF)(d,{data:s.state.list,stripe:"",border:"",size:"small",width:"100%",height:"60vh",onSortChange:s.handleSort},{default:(0,l.k6)((()=>[(0,l.bF)(i,{prop:"Key",label:e.$t("status.flowMachineName"),width:"100"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(s.state.names[e.row.Key]||"unknow"),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"Target",label:e.$t("status.flowTarget"),width:"120"},null,8,["label"]),(0,l.bF)(i,{prop:"SendtBytes",label:e.$t("status.flowUpload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(e.row.SendtBytesText),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"DiffSendtBytes",label:e.$t("status.flowUpload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(e.row.DiffSendtBytesText)+"/s",1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"ReceiveBytes",label:e.$t("status.flowDownload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(e.row.ReceiveBytesText),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"DiffReceiveBytes",label:e.$t("status.flowDownload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(e.row.DiffReceiveBytesText)+"/s",1)])),_:1},8,["label"])])),_:1},8,["data","onSortChange"]),(0,l.Lk)("div",x,[(0,l.Lk)("div",z,[(0,l.bF)(u,{small:"",background:"",layout:"total,prev,pager, next",total:s.state.page.Count,"page-size":s.state.page.PageSize,"current-page":s.state.page.Page,onCurrentChange:s.handlePageChange},null,8,["total","page-size","current-page","onCurrentChange"])])])])])),_:1},8,["title","modelValue"])}var $={props:["modelValue","config","machineId"],emits:["update:modelValue"],setup(e,{emit:t}){const a=(0,r.Kh)({show:!0,timer:0,names:{},list:[],page:{Page:1,PageSize:15,Count:0,Order:1,OrderType:0}});(0,l.wB)((()=>a.show),(e=>{e||setTimeout((()=>{t("update:modelValue",e)}),300)}));const o=()=>{clearTimeout(a.timer),(0,n.a6)({Page:a.page.Page,PageSize:a.page.PageSize,Order:a.page.Order,OrderType:a.page.OrderType,MachineId:e.machineId}).then((e=>{try{a.page.Page=e.Page,a.page.PageSize=e.PageSize,a.page.Count=e.Count;const t=[];for(let a=0;a<e.Data.length;a++){const l=e.Data[a];Object.assign(l,{SendtBytesText:s(l.SendtBytes),ReceiveBytesText:s(l.ReceiveBytes),DiffSendtBytesText:s(l.DiffSendtBytes),DiffReceiveBytesText:s(l.DiffReceiveBytes)}),t.push(l)}a.list=t}catch(t){console.log(t)}a.timer=setTimeout(o,1e3)})).catch((e=>{a.timer=setTimeout(o,1e3)}))},s=e=>{let t=0;while(e>=1024)e/=1024,t++;return`${e.toFixed(2)}${["B","KB","MB","GB","TB"][t]}`},i=e=>{e&&(a.page.Page=e)},d=e=>{const t={ascending:1,descending:0}[e.order],l={SendtBytes:1,DiffSendtBytes:2,ReceiveBytes:3,DiffReceiveBytes:4}[e.prop];a.page.Order=l,a.page.OrderType=t},u=()=>{(0,T.NT)().then((e=>{a.names=e.reduce(((e,t,a)=>(e[t.MachineId]=t.MachineName,e)),{})}))};return(0,l.sV)((()=>{o(),u()})),(0,l.hi)((()=>{clearTimeout(a.timer)})),{config:e.config,state:a,handlePageChange:i,handleSort:d}}};const I=(0,c.A)($,[["render",C],["__scopeId","data-v-55d6858b"]]);var R=I;const P={class:"page t-c"},D={class:"page-wrap"};function O(e,t,a,s,n,r){const i=(0,l.g2)("el-table-column"),d=(0,l.g2)("el-table"),u=(0,l.g2)("el-pagination"),c=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.Wv)(c,{title:e.$t("status.flowTunnel"),class:"options-center",top:"1vh","destroy-on-close":"",modelValue:s.state.show,"onUpdate:modelValue":t[0]||(t[0]=e=>s.state.show=e),width:"90%"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.bF)(d,{data:s.state.list,stripe:"",border:"",size:"small",width:"100%",height:"60vh",onSortChange:s.handleSort},{default:(0,l.k6)((()=>[(0,l.bF)(i,{prop:"Key",label:e.$t("status.flowMachineName"),width:"100"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(s.state.names[e.row.Key]||"unknow"),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"TransitionId",label:e.$t("status.flowTransitionId")},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(s.state.transitions[e.row.TransitionId]||"unknow"),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"Direction",label:e.$t("status.flowDirection")},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(s.state.dirs[e.row.Direction]||"unknow"),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"Type",label:e.$t("status.flowType")},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(s.state.types[e.row.Type]||"unknow"),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"Mode",label:e.$t("status.flowMode")},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(s.state.modes[e.row.Mode]||"unknow"),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"ReceiveBytes",label:e.$t("status.flowNum"),width:"80"},null,8,["label"])])),_:1},8,["data","onSortChange"]),(0,l.Lk)("div",P,[(0,l.Lk)("div",D,[(0,l.bF)(u,{small:"",background:"",layout:"total,prev,pager, next",total:s.state.page.Count,"page-size":s.state.page.PageSize,"current-page":s.state.page.Page,onCurrentChange:s.handlePageChange},null,8,["total","page-size","current-page","onCurrentChange"])])])])])),_:1},8,["title","modelValue"])}var M={props:["modelValue","config","machineId"],emits:["update:modelValue"],setup(e,{emit:t}){const a=(0,r.Kh)({show:!0,timer:0,names:{},list:[],page:{Page:1,PageSize:15,Count:0,Order:1,OrderType:0},transitions:{socks5:"代理",forward:"端口转发",tuntap:"虚拟网卡"},dirs:["正向","反向"],types:["打洞","中继","节点"],modes:["客户端","服务端"]});(0,l.wB)((()=>a.show),(e=>{e||setTimeout((()=>{t("update:modelValue",e)}),300)}));const o=()=>{clearTimeout(a.timer),(0,n.id)({Page:a.page.Page,PageSize:a.page.PageSize,Order:a.page.Order,OrderType:a.page.OrderType,MachineId:e.machineId}).then((e=>{try{a.page.Page=e.Page,a.page.PageSize=e.PageSize,a.page.Count=e.Count;const t=[];for(let a=0;a<e.Data.length;a++){const l=e.Data[a];Object.assign(l,{SendtBytesText:l.SendtBytes,ReceiveBytesText:l.ReceiveBytes,DiffSendtBytesText:l.DiffSendtBytes,DiffReceiveBytesText:l.DiffReceiveBytes}),t.push(l)}a.list=t}catch(t){console.log(t)}a.timer=setTimeout(o,1e3)})).catch((e=>{a.timer=setTimeout(o,1e3)}))},s=e=>{e&&(a.page.Page=e)},i=e=>{const t={ascending:1,descending:0}[e.order],l={SendtBytes:1,DiffSendtBytes:2,ReceiveBytes:3,DiffReceiveBytes:4}[e.prop];a.page.Order=l,a.page.OrderType=t},d=()=>{(0,T.NT)().then((e=>{a.names=e.reduce(((e,t,a)=>(e[t.MachineId]=t.MachineName,e)),{})}))};return(0,l.sV)((()=>{o(),d()})),(0,l.hi)((()=>{clearTimeout(a.timer)})),{config:e.config,state:a,handlePageChange:s,handleSort:i}}};const G=(0,c.A)(M,[["render",O],["__scopeId","data-v-b5a30d1e"]]);var U=G;const K={class:"head"},W={class:"page t-c"},N={class:"page-wrap"};function A(e,t,a,s,n,r){const i=(0,l.g2)("el-input"),d=(0,l.g2)("el-table-column"),u=(0,l.g2)("el-table"),c=(0,l.g2)("el-pagination"),p=(0,l.g2)("el-dialog"),g=(0,l.gN)("trim");return(0,l.uX)(),(0,l.Wv)(p,{title:e.$t("status.flowRelay"),class:"options-center",top:"1vh","destroy-on-close":"",modelValue:s.state.show,"onUpdate:modelValue":t[1]||(t[1]=e=>s.state.show=e),width:"680"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.Lk)("div",K,[(0,l.bo)((0,l.bF)(i,{modelValue:s.state.page.Key,"onUpdate:modelValue":t[0]||(t[0]=e=>s.state.page.Key=e),placeholder:"名字搜索"},null,8,["modelValue"]),[[g]])]),(0,l.bF)(u,{data:s.state.list,stripe:"",border:"",size:"small",width:"100%",height:"60vh",onSortChange:s.handleSort},{default:(0,l.k6)((()=>[(0,l.bF)(d,{prop:"FromName",label:e.$t("status.flowRelaySource"),width:"120"},null,8,["label"]),(0,l.bF)(d,{prop:"ToName",label:e.$t("status.flowRelayTarget"),width:"120"},null,8,["label"]),(0,l.bF)(d,{prop:"SendtBytes",label:e.$t("status.flowUpload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(e.row.SendtBytesText),1)])),_:1},8,["label"]),(0,l.bF)(d,{prop:"DiffSendtBytes",label:e.$t("status.flowUpload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(e.row.DiffSendtBytesText)+"/s",1)])),_:1},8,["label"]),(0,l.bF)(d,{prop:"ReceiveBytes",label:e.$t("status.flowDownload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(e.row.ReceiveBytesText),1)])),_:1},8,["label"]),(0,l.bF)(d,{prop:"DiffReceiveBytes",label:e.$t("status.flowDownload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(e.row.DiffReceiveBytesText)+"/s",1)])),_:1},8,["label"])])),_:1},8,["data","onSortChange"]),(0,l.Lk)("div",W,[(0,l.Lk)("div",N,[(0,l.bF)(c,{small:"",background:"",layout:"total,prev,pager, next",total:s.state.page.Count,"page-size":s.state.page.PageSize,"current-page":s.state.page.Page,onCurrentChange:s.handlePageChange},null,8,["total","page-size","current-page","onCurrentChange"])])])])])),_:1},8,["title","modelValue"])}var X={props:["modelValue","config"],emits:["update:modelValue"],setup(e,{emit:t}){const a=(0,r.Kh)({show:!0,timer:0,list:[],page:{Key:"",Page:1,PageSize:15,Count:0,Order:1,OrderType:0}});(0,l.wB)((()=>a.show),(e=>{e||setTimeout((()=>{t("update:modelValue",e)}),300)}));const o=()=>{clearTimeout(a.timer),(0,n.xy)({Key:a.page.Key,Page:a.page.Page,PageSize:a.page.PageSize,Order:a.page.Order,OrderType:a.page.OrderType}).then((e=>{try{a.page.Page=e.Page,a.page.PageSize=e.PageSize,a.page.Count=e.Count;const t=[];for(let a=0;a<e.Data.length;a++){const l=e.Data[a];Object.assign(l,{SendtBytesText:s(l.SendtBytes),ReceiveBytesText:s(l.ReceiveBytes),DiffSendtBytesText:s(l.DiffSendtBytes),DiffReceiveBytesText:s(l.DiffReceiveBytes)}),t.push(l)}a.list=t}catch(t){console.log(t)}a.timer=setTimeout(o,1e3)})).catch((e=>{a.timer=setTimeout(o,1e3)}))},s=e=>{let t=0;while(e>=1024)e/=1024,t++;return`${e.toFixed(2)}${["B","KB","MB","GB","TB"][t]}`},i=e=>{e&&(a.page.Page=e)},d=e=>{const t={ascending:1,descending:0}[e.order],l={SendtBytes:1,DiffSendtBytes:2,ReceiveBytes:3,DiffReceiveBytes:4}[e.prop];a.page.Order=l,a.page.OrderType=t};return(0,l.sV)((()=>{o()})),(0,l.hi)((()=>{clearTimeout(a.timer)})),{config:e.config,state:a,handlePageChange:i,handleSort:d}}};const E=(0,c.A)(X,[["render",A],["__scopeId","data-v-1098928d"]]);var Q=E,j=a(3830);const q=e=>((0,l.Qi)("data-v-128e55db"),e=e(),(0,l.jt)(),e),H=q((()=>(0,l.Lk)("div",{class:"map-wrap",id:"map"},null,-1)));function Y(e,t,a,o,s,n){const r=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.Wv)(r,{class:"options-center",title:e.$t("status.flowOnline"),"destroy-on-close":"",modelValue:o.state.show,"onUpdate:modelValue":t[0]||(t[0]=e=>o.state.show=e),width:"77rem",top:"2vh"},{default:(0,l.k6)((()=>[H])),_:1},8,["title","modelValue"])}var Z=a(83),J={props:["modelValue"],emits:["update:modelValue"],setup(e,{emit:t}){const{t:a}=(0,d.s9)(),o=(0,r.Kh)({show:!0});(0,l.wB)((()=>o.show),(e=>{e||setTimeout((()=>{t("update:modelValue",e)}),300)}));const s=(e,t)=>{const l=L.map("map").setView([38,105],4);L.tileLayer("https://webrd01.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}",{attribution:"linker",maxZoom:10}).addTo(l);for(let s=0;s<t.length;s++)try{const o=t[s];if(!e[o.MachineId])continue;const n=e[o.MachineId].Net;if(0==n.Lat||0==n.Lon)continue;const r=new L.Icon({iconSize:[18,28],iconAnchor:[9,28],shadowAnchor:[0,0],popupAnchor:[0,-27],shadowSize:[0,0],iconUrl:o.Online?"/marker-green.png":"/marker-grey.png",shadowUrl:"/marker-shadow.png"}),i=`\n                        <div class="marker-content" >\n                            <h3 class="marker-title" style="font-size:1.6rem">${o.MachineName}</h3>\n                            <div class="marker-text" style="font-size:1.3rem">${a("status.flowArea")} : ${n.CountryCode}、${n.City}</div>\n                            <div class="marker-text" style="font-size:1.3rem">${a("status.flowNet")} : ${n.Isp}</div>\n                        </div>\n                    `;new L.marker(new L.latLng([n.Lat+Math.random()/5,n.Lon+Math.random()/5]),{icon:r}).bindPopup(i,{}).on("mouseover",(function(e){this.openPopup()})).on("mouseout",(function(e){this.closePopup()})).addTo(l)}catch(o){console.log(o)}};return(0,l.sV)((()=>{(0,l.dY)((()=>{(0,Z.r7)().then((e=>{(0,T.NT)().then((t=>{s(e.List,t)})).catch((()=>{}))})).catch((()=>{}))}))})),{state:o}}};const ee=(0,c.A)(J,[["render",Y],["__scopeId","data-v-128e55db"]]);var te=ee;const ae=e=>((0,l.Qi)("data-v-46898e22"),e=e(),(0,l.jt)(),e),le=ae((()=>(0,l.Lk)("div",{class:"map-wrap",id:"map"},null,-1)));function oe(e,t,a,o,s,n){const r=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.Wv)(r,{class:"options-center",title:e.$t("status.flowOnline"),"destroy-on-close":"",modelValue:o.state.show,"onUpdate:modelValue":t[0]||(t[0]=e=>o.state.show=e),width:"77rem",top:"2vh"},{default:(0,l.k6)((()=>[le])),_:1},8,["title","modelValue"])}var se={props:["modelValue"],emits:["update:modelValue"],setup(e,{emit:t}){const{t:a}=(0,d.s9)(),o=(0,r.Kh)({show:!0});(0,l.wB)((()=>o.show),(e=>{e||setTimeout((()=>{t("update:modelValue",e)}),300)}));const s=e=>{const t=L.map("map").setView([38,105],4);L.tileLayer("https://webrd01.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}",{attribution:"linker",maxZoom:10}).addTo(t);for(let a=0;a<e.length;a++){const l=e[a],o=new L.Icon({iconSize:[18,28],iconAnchor:[9,28],shadowAnchor:[0,0],popupAnchor:[0,-27],shadowSize:[0,0],iconUrl:"/marker-green.png",shadowUrl:"/marker-shadow.png"}),s=`\n                    <div class="marker-content" >\n                        <h3 class="marker-title" style="font-size:1.6rem">${l.City} ${l.Count}</h3>\n                    </div>\n                `;new L.marker(new L.latLng([l.Lat,l.Lon]),{icon:o}).bindPopup(s,{}).on("mouseover",(function(e){this.openPopup()})).on("mouseout",(function(e){this.closePopup()})).addTo(t)}};return(0,l.sV)((()=>{(0,l.dY)((()=>{(0,n.B8)().then((e=>{s(e)})).catch((()=>{}))}))})),{state:o}}};const ne=(0,c.A)(se,[["render",oe],["__scopeId","data-v-46898e22"]]);var re=ne,ie=a(6046),de={props:["config","title"],components:{ServerFlowMessenger:g,ServerFlowSForward:b,ServerFlowForward:V,ServerFlowSocks5:R,ServerFlowTunnel:U,ServerFlowRelay:Q,OnlineMap:te,OnlineAllMap:re},setup(e,{emit:t}){const a=(0,ie.q)(),{t:o}=(0,d.s9)(),s=(0,j.B)(),i=(0,l.EW)((()=>s.value.hasAccess("SForwardFlow"))),u=(0,l.EW)((()=>s.value.hasAccess("RelayFlow"))),c=(0,l.EW)((()=>s.value.hasAccess("SigninFlow"))),p=(0,l.EW)((()=>s.value.hasAccess("ForwardFlow"))),g=(0,l.EW)((()=>s.value.hasAccess("Socks5Flow"))),f=(0,l.EW)((()=>s.value.hasAccess("TunnelFlow"))),m=(0,r.Kh)({timer:0,time:"",list:[],old:null,details:{Messenger:!1,SForward:!1,Forward:!1,Socks5:!1,Tunnel:!1,Relay:!1}}),h=e=>{m.details[e]=!0},v={External:{text:o("status.flowWanPort"),detail:!1,format:!0,suffix:"/s"},RelayReport:{text:o("status.flowRelayNode"),detail:!1,format:!0,suffix:"/s"},Relay:{text:o("status.flowRelay"),detail:u.value,format:!0,suffix:"/s"},Messenger:{text:o("status.flowMessenger"),detail:c.value,format:!0,suffix:"/s"},SForward:{text:o("status.flowServerForward"),detail:i.value,format:!0,suffix:"/s"},flow:{text:"",detail:!1},Forward:{text:o("status.flowForward"),detail:p.value,format:!0,suffix:"/s"},Socks5:{text:o("status.flowSocks5"),detail:g.value,format:!0,suffix:"/s"},Tunnel:{text:o("status.flowTunnel"),detail:f.value}},w=()=>{clearTimeout(m.timer),(0,n.Qj)(a.value.machineId).then((t=>{const l=m.old||t;if(t.Items["_"]&&(a.value.overallOnline=`${t.Items["_"].SendtBytes}/${t.Items["_"].ReceiveBytes}`,delete t.Items["_"]),t.Items["flow"]&&t.Items["flow"].ReceiveBytes>0){const e=(BigInt(t.Items["flow"].ReceiveBytes)>>BigInt(32)).toString(),l=(BigInt(t.Items["flow"].ReceiveBytes)&BigInt(4294967295)).toString(),o=t.Items["flow"].SendtBytes;a.value.serverOnline=`、${e}/${l}/${o}`,delete t.Items["flow"]}let o=0,s=0,n=0,r=0;for(let e in l.Items)o+=l.Items[e].ReceiveBytes,s+=l.Items[e].SendtBytes;for(let e in t.Items)n+=t.Items[e].ReceiveBytes,r+=t.Items[e].SendtBytes;a.value.overallSendtSpeed=y(r-s,!0,"/s"),a.value.overallReceiveSpeed=y(n-o,!0,"/s"),m.time=`[${e.title}]${t.Start}`;const i=[];for(let e in t.Items){const a=t.Items[e],o=l.Items[e],s=v[`${e}`]||{text:`Unknow${e}`,detail:!1};s.text&&i.push({id:e,text:s.text,detail:s.detail,sendtBytes:a.SendtBytes,sendtBytesText:y(a.SendtBytes,s.format,""),sendtSpeed:a.SendtBytes-o.SendtBytes,sendtSpeedText:y(a.SendtBytes-o.SendtBytes,s.format,s.suffix),receiveBytes:a.ReceiveBytes,receiveBytesText:y(a.ReceiveBytes,s.format,""),receiveSpeed:a.ReceiveBytes-o.ReceiveBytes,receiveSpeedText:y(a.ReceiveBytes-o.ReceiveBytes,s.format,s.suffix)})}m.list=i.filter((e=>!!e.id)),m.old=t,m.timer=setTimeout(w,1e3)})).catch((e=>{m.timer=setTimeout(w,1e3)}))},y=(e,t,a)=>{if(void 0===t)return e;let l=0;while(e>=1024)e/=1024,l++;return`${e.toFixed(2)}${["B","KB","MB","GB","TB"][l]}${a}`};return(0,l.sV)((()=>{w()})),(0,l.hi)((()=>{clearTimeout(m.timer)})),{config:e.config,state:m,flow:a,handleShowDetail:h}}};const ue=(0,c.A)(de,[["render",s],["__scopeId","data-v-187fc3f2"]]);var ce=ue},2322:function(e,t,a){a.d(t,{A:function(){return y}});var l=a(6768),o=a(4232);const s={class:"t-c"},n={class:"t-c w-100 mgt-1"};function r(e,t,a,r,i,d){const u=(0,l.g2)("Share"),c=(0,l.g2)("el-icon"),p=(0,l.g2)("el-button"),g=(0,l.g2)("el-transfer"),f=(0,l.g2)("el-dialog"),m=(0,l.g2)("AccessBoolean");return(0,l.uX)(),(0,l.Wv)(m,{value:"Sync"},{default:(0,l.k6)((({values:a})=>[(0,l.Lk)("div",null,[(0,l.RG)(e.$slots,"default",{},(()=>[(0,l.bF)(p,{class:"btn",size:"small",onClick:e=>r.handleShowSync(a)},{default:(0,l.k6)((()=>[(0,l.bF)(c,null,{default:(0,l.k6)((()=>[(0,l.bF)(u)])),_:1})])),_:2},1032,["onClick"])])),(0,l.bF)(f,{class:"options-center",title:e.$t("server.sync"),"destroy-on-close":"",modelValue:r.state.showNames,"onUpdate:modelValue":t[2]||(t[2]=e=>r.state.showNames=e),width:"54rem",top:"2vh"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.Lk)("div",s,(0,o.v_)(`${e.$t("server.sync")}【${e.$t(`server.async${r.state.name}`)}】${e.$t("server.asyncText")}`),1),(0,l.bF)(g,{class:"src-tranfer mgt-1",modelValue:r.state.srcIdValues,"onUpdate:modelValue":t[0]||(t[0]=e=>r.state.srcIdValues=e),filterable:"","filter-method":r.srcFilterMethod,data:r.state.srcIds,titles:[e.$t("firewall.unselect"),e.$t("firewall.selected")],props:{key:"MachineId",label:"MachineName"}},null,8,["modelValue","filter-method","data","titles"]),(0,l.Lk)("div",n,[(0,l.bF)(p,{onClick:t[1]||(t[1]=e=>r.state.showNames=!1)},{default:(0,l.k6)((()=>[(0,l.eW)((0,o.v_)(e.$t("common.cancel")),1)])),_:1}),(0,l.bF)(p,{type:"primary",onClick:r.handleConfirm},{default:(0,l.k6)((()=>[(0,l.eW)((0,o.v_)(e.$t("common.confirm")),1)])),_:1},8,["onClick"])])])])),_:1},8,["title","modelValue"])])])),_:3})}var i=a(9299),d=a(4);const u=e=>(0,d.zG)("sync/Sync",e);var c=a(3830),p=a(7477),g=a(1219),f=a(144),m=a(5931),h={props:["name"],components:{Share:p.SYj},setup(e){const{t:t}=(0,m.s9)(),a=((0,c.B)(),(0,f.Kh)({name:e.name,loading:!1,showNames:!1,srcIdValues:[],srcIds:[]})),l=()=>{u({names:[e.name],ids:a.srcIdValues}).then((e=>{g.nk.success(t("common.oper")),a.showNames=!1}))},o=e=>{e.Sync?(a.showNames=!0,s()):g.nk.success(t("common.access"))},s=()=>{a.loading=!0,(0,i.NT)().then((e=>{a.loading=!1,a.srcIds=e})).catch((e=>{a.loading=!1}))},n=(e,t)=>t.MachineName.toLowerCase().includes(e.toLowerCase());return{state:a,handleShowSync:o,srcFilterMethod:n,handleConfirm:l}}},v=a(1241);const w=(0,v.A)(h,[["render",r]]);var y=w},6777:function(e,t,a){a.d(t,{A:function(){return y}});var l=a(6768),o=a(4232);const s=["onClick","title"],n={key:0,class:"progress"},r={key:1,class:"progress"};function i(e,t,a,i,d,u){const c=(0,l.g2)("Loading"),p=(0,l.g2)("el-icon"),g=(0,l.g2)("Download"),f=(0,l.g2)("CircleCheck"),m=(0,l.g2)("AccessBoolean");return(0,l.uX)(),(0,l.Wv)(m,{value:"UpdateSelf,UpdateOther"},{default:(0,l.k6)((({values:e})=>[(0,l.Lk)("a",{href:"javascript:;",class:(0,o.C4)(["download",i.updaterColor]),onClick:t=>i.handleUpdate(e),title:i.updaterText},[(0,l.Lk)("span",null,[(0,l.Lk)("span",null,(0,o.v_)(a.item.Version),1),a.item.hook_updater?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[1==a.item.hook_updater.Status?((0,l.uX)(),(0,l.Wv)(p,{key:0,size:"14",class:"loading"},{default:(0,l.k6)((()=>[(0,l.bF)(c)])),_:1})):2==a.item.hook_updater.Status?((0,l.uX)(),(0,l.Wv)(p,{key:1,size:"14"},{default:(0,l.k6)((()=>[(0,l.bF)(g)])),_:1})):3==a.item.hook_updater.Status||5==a.item.hook_updater.Status?((0,l.uX)(),(0,l.CE)(l.FK,{key:2},[(0,l.bF)(p,{size:"14",class:"loading"},{default:(0,l.k6)((()=>[(0,l.bF)(c)])),_:1}),0==a.item.hook_updater.Length?((0,l.uX)(),(0,l.CE)("span",n,"0%")):((0,l.uX)(),(0,l.CE)("span",r,(0,o.v_)(parseInt(a.item.hook_updater.Current/a.item.hook_updater.Length*100))+"%",1))],64)):6==a.item.hook_updater.Status?((0,l.uX)(),(0,l.Wv)(p,{key:3,size:"14",class:"yellow"},{default:(0,l.k6)((()=>[(0,l.bF)(f)])),_:1})):(0,l.Q3)("",!0)],64)):((0,l.uX)(),(0,l.Wv)(p,{key:1,size:"14"},{default:(0,l.k6)((()=>[(0,l.bF)(g)])),_:1}))])],10,s)])),_:1})}var d=a(3830),u=a(1219),c=a(2933),p=a(920),g=a(7477),f=a(5304),m=a(5931),h={props:["item","config"],components:{Download:g.f5X,Loading:g.Rhj,CircleCheck:g.rW7},setup(e){const{t:t}=(0,m.s9)(),a=(0,d.B)(),o=(0,f.T)(),s=(0,l.EW)((()=>a.value.signin.Version)),n=(0,l.EW)((()=>o.value.current.Version)),r=(0,l.EW)((()=>e.item.hook_updater?e.item.hook_updater.Status<=2?e.item.Version!=s.value?`与服务器版本(${s.value})不一致，建议更新`:n.value!=e.item.Version?`不是最新版本(${n.value})，建议更新`:"是最新版本，但我无法阻止你喜欢更新":{3:"正在下载",4:"已下载",5:"正在解压",6:"已解压，请重启"}[e.item.hook_updater.Status]:"未检测到更新")),i=(0,l.EW)((()=>e.item.Version!=s.value?"red":e.item.hook_updater&&n.value!=e.item.Version?"yellow":"green")),g=t=>{o.value.device=e.item,e.config?t.UpdateSelf&&(e.item.MachineId==a.value.self.MachineId||t.UpdateOther)?e.item.hook_updater?[0,1,3,5].indexOf(e.item.hook_updater.Status)>=0?u.nk.error("操作中，请稍后!"):6!=e.item.hook_updater.Status?o.value.show=2==e.item.hook_updater.Status:c.s.confirm("确定关闭程序吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{(0,p.NS)(e.item.MachineId)})).catch((()=>{})):u.nk.error("未检测到更新"):u.nk.error("无权限"):u.nk.error("?")};return{updater:o,updaterText:r,updaterColor:i,handleUpdate:g}}},v=a(1241);const w=(0,v.A)(h,[["render",i],["__scopeId","data-v-ff1f3b5e"]]);var y=w}}]);