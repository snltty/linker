"use strict";(self["webpackChunklinker_web"]=self["webpackChunklinker_web"]||[]).push([[431],{83:function(e,t,n){n.d(t,{$M:function(){return i},G7:function(){return s},KW:function(){return c},Uu:function(){return m},Zu:function(){return u},eh:function(){return o},pH:function(){return h},r7:function(){return a},xN:function(){return r},xT:function(){return d}});var l=n(4);const a=(e="0")=>(0,l.zG)("tunnel/get",e),o=()=>(0,l.zG)("tunnel/refresh"),s=e=>(0,l.zG)("tunnel/Operating",e),r=e=>(0,l.zG)("tunnel/connect",e),c=e=>(0,l.zG)("tunnel/SetRouteLevel",e),d=e=>(0,l.zG)("tunnel/GetTransports",e),i=e=>(0,l.zG)("tunnel/SetTransports",e),u=e=>(0,l.zG)("tunnel/GetNetwork",e),m=e=>(0,l.zG)("channel/get",e),h=(e,t)=>(0,l.zG)("channel/remove",{machineid:e,transactionId:t})},2322:function(e,t,n){n.d(t,{A:function(){return g}});var l=n(6768),a=n(4232);const o={class:"t-c"},s={class:"t-c w-100 mgt-1"};function r(e,t,n,r,c,d){const i=(0,l.g2)("Share"),u=(0,l.g2)("el-icon"),m=(0,l.g2)("el-button"),h=(0,l.g2)("el-transfer"),p=(0,l.g2)("el-dialog"),b=(0,l.g2)("AccessBoolean");return(0,l.uX)(),(0,l.Wv)(b,{value:"Sync"},{default:(0,l.k6)((({values:n})=>[(0,l.Lk)("div",null,[(0,l.RG)(e.$slots,"default",{},(()=>[(0,l.bF)(m,{class:"btn",size:"small",onClick:e=>r.handleShowSync(n)},{default:(0,l.k6)((()=>[(0,l.bF)(u,null,{default:(0,l.k6)((()=>[(0,l.bF)(i)])),_:1})])),_:2},1032,["onClick"])])),(0,l.bF)(p,{class:"options-center",title:e.$t("server.sync"),"destroy-on-close":"",modelValue:r.state.showNames,"onUpdate:modelValue":t[2]||(t[2]=e=>r.state.showNames=e),width:"54rem",top:"2vh"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.Lk)("div",o,(0,a.v_)(`${e.$t("server.sync")}【${e.$t(`server.async${r.state.name}`)}】${e.$t("server.asyncText")}`),1),(0,l.bF)(h,{class:"src-tranfer mgt-1",modelValue:r.state.srcIdValues,"onUpdate:modelValue":t[0]||(t[0]=e=>r.state.srcIdValues=e),filterable:"","filter-method":r.srcFilterMethod,data:r.state.srcIds,titles:[e.$t("firewall.unselect"),e.$t("firewall.selected")],props:{key:"MachineId",label:"MachineName"}},null,8,["modelValue","filter-method","data","titles"]),(0,l.Lk)("div",s,[(0,l.bF)(m,{onClick:t[1]||(t[1]=e=>r.state.showNames=!1)},{default:(0,l.k6)((()=>[(0,l.eW)((0,a.v_)(e.$t("common.cancel")),1)])),_:1}),(0,l.bF)(m,{type:"primary",onClick:r.handleConfirm},{default:(0,l.k6)((()=>[(0,l.eW)((0,a.v_)(e.$t("common.confirm")),1)])),_:1},8,["onClick"])])])])),_:1},8,["title","modelValue"])])])),_:3})}var c=n(9299),d=n(4);const i=e=>(0,d.zG)("sync/Sync",e);var u=n(3830),m=n(7477),h=n(1219),p=n(144),b=n(5931),v={props:["name"],components:{Share:m.SYj},setup(e){const{t:t}=(0,b.s9)(),n=((0,u.B)(),(0,p.Kh)({name:e.name,loading:!1,showNames:!1,srcIdValues:[],srcIds:[]})),l=()=>{i({names:[e.name],ids:n.srcIdValues}).then((e=>{h.nk.success(t("common.oper")),n.showNames=!1}))},a=e=>{e.Sync?(n.showNames=!0,o()):h.nk.success(t("common.access"))},o=()=>{n.loading=!0,(0,c.NT)().then((e=>{n.loading=!1,n.srcIds=e})).catch((e=>{n.loading=!1}))},s=(e,t)=>t.MachineName.toLowerCase().includes(e.toLowerCase());return{state:n,handleShowSync:a,srcFilterMethod:s,handleConfirm:l}}},f=n(1241);const k=(0,f.A)(v,[["render",r]]);var g=k},4304:function(e,t,n){n.d(t,{A:function(){return w}});var l=n(6768),a=n(4232);const o={key:0,class:"head t-c mgb-1"},s={class:"flex"},r=(0,l.Lk)("span",{class:"flex-1"},null,-1);function c(e,t,n,c,d,i){const u=(0,l.g2)("el-button"),m=(0,l.g2)("el-table-column"),h=(0,l.g2)("el-checkbox-button"),p=(0,l.g2)("el-checkbox-group"),b=(0,l.g2)("el-switch"),v=(0,l.g2)("Sync"),f=(0,l.g2)("el-input-number"),k=(0,l.g2)("el-table");return(0,l.uX)(),(0,l.CE)(l.FK,null,[n.machineId?((0,l.uX)(),(0,l.CE)("div",o,[(0,l.bF)(u,{size:"small",onClick:c.handleReset},{default:(0,l.k6)((()=>[(0,l.eW)("重置配置")])),_:1},8,["onClick"])])):(0,l.Q3)("",!0),(0,l.bF)(k,{stripe:"",data:c.state.list,border:"",size:"small",width:"100%",height:"100%"},{default:(0,l.k6)((()=>[(0,l.bF)(m,{prop:"Name",label:e.$t("status.tunnelName"),width:"100"},null,8,["label"]),(0,l.bF)(m,{prop:"ProtocolType",label:e.$t("status.tunnelProtocol"),width:"60"},null,8,["label"]),(0,l.bF)(m,{prop:"Label",label:e.$t("status.tunnelLabel"),"show-overflow-tooltip":""},null,8,["label"]),(0,l.bF)(m,{prop:"Addr",label:e.$t("status.tunnelAddr"),width:"155"},{default:(0,l.k6)((e=>["TcpRelay"!=e.row.Name?((0,l.uX)(),(0,l.Wv)(p,{key:0,size:"small",modelValue:e.row._addr,"onUpdate:modelValue":t=>e.row._addr=t,onChange:c.handleSave},{default:(0,l.k6)((()=>[(0,l.bF)(h,{value:1,label:"ipv6"}),(0,l.bF)(h,{value:2,label:"ipv4"}),(0,l.bF)(h,{value:4,label:"lan"})])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])):((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[(0,l.eW)(" -- ")],64))])),_:1},8,["label"]),(0,l.bF)(m,{property:"Reverse",label:e.$t("status.tunnelReverse"),width:"64"},{default:(0,l.k6)((t=>[(0,l.bF)(b,{disabled:t.row.DisableReverse,modelValue:t.row.Reverse,"onUpdate:modelValue":e=>t.row.Reverse=e,onChange:c.handleSave,"inline-prompt":"","active-text":e.$t("status.tunnelYes"),"inactive-text":e.$t("status.tunnelNo")},null,8,["disabled","modelValue","onUpdate:modelValue","onChange","active-text","inactive-text"])])),_:1},8,["label"]),(0,l.bF)(m,{property:"SSL",label:e.$t("status.tunnelSSL"),width:"60"},{default:(0,l.k6)((t=>[(0,l.bF)(b,{disabled:t.row.DisableSSL,modelValue:t.row.SSL,"onUpdate:modelValue":e=>t.row.SSL=e,onChange:c.handleSave,"inline-prompt":"","active-text":e.$t("status.tunnelYes"),"inactive-text":e.$t("status.tunnelNo")},null,8,["disabled","modelValue","onUpdate:modelValue","onChange","active-text","inactive-text"])])),_:1},8,["label"]),(0,l.bF)(m,{property:"Disabled",label:e.$t("status.tunnelDisanbled"),width:"64"},{default:(0,l.k6)((t=>[(0,l.bF)(b,{modelValue:t.row.Disabled,"onUpdate:modelValue":e=>t.row.Disabled=e,onChange:c.handleSave,"inline-prompt":"","active-text":e.$t("status.tunnelYes"),"inactive-text":e.$t("status.tunnelNo"),style:{"--el-switch-on-color":"red","--el-switch-off-color":"#ddd"}},null,8,["modelValue","onUpdate:modelValue","onChange","active-text","inactive-text"])])),_:1},8,["label"]),(0,l.bF)(m,{prop:"Order",label:e.$t("status.tunnelSort"),width:"104",fixed:"right"},{header:(0,l.k6)((()=>[(0,l.Lk)("div",s,[(0,l.Lk)("strong",null,(0,a.v_)(e.$t("status.tunnelSort")),1),r,c.state.isSelf?((0,l.uX)(),(0,l.Wv)(v,{key:0,name:"TunnelTransports"})):(0,l.Q3)("",!0)])])),default:(0,l.k6)((e=>[(0,l.Lk)("div",null,[(0,l.bF)(f,{modelValue:e.row.Order,"onUpdate:modelValue":t=>e.row.Order=t,min:1,max:255,onChange:c.handleOrderChange,size:"small"},null,8,["modelValue","onUpdate:modelValue","onChange"])])])),_:1},8,["label"])])),_:1},8,["data"])],64)}var d=n(83),i=n(3830),u=n(1219),m=n(2933),h=n(144),p=n(7477),b=n(5931),v=n(2322),f={props:["machineId","height"],components:{Delete:p.epd,Plus:p.FWt,Top:p.EjV,Bottom:p.i5o,Sync:v.A},setup(e){const{t:t}=(0,b.s9)(),n=(0,i.B)(),a=(0,h.Kh)({list:[],height:(0,l.EW)((()=>e.height)),bufferSize:n.value.bufferSize,machineid:e.machineId||n.value.config.Client.Id,isSelf:(0,l.EW)((()=>a.machineid===n.value.config.Client.Id))}),o=()=>{(0,d.xT)(a.machineid).then((e=>{const t=e.sort(((e,t)=>e.Order-t.Order));t.forEach(((e,t)=>{e._addr=[1&e.Addr,2&e.Addr,4&e.Addr].filter((e=>e>0))})),a.list=t}))},s=()=>{r(a.list)},r=()=>{a.list=a.list.slice().sort(((e,t)=>e.Order-t.Order)),a.list.forEach(((e,t)=>{e.Addr=e._addr.reduce(((e,t)=>e|t),0)})),console.log(a.list),(0,d.$M)({machineid:a.machineid,data:a.list}).then((()=>{u.nk.success(t("common.oper"))})).catch((e=>{console.log(e),u.nk.error(t("common.operFail"))}))},c=()=>{m.s.confirm(t("common.confirm"),t("common.tips"),{confirmButtonText:t("common.confirm"),cancelButtonText:t("common.cancel"),type:"warning"}).then((()=>{(0,d.$M)({machineid:a.machineid,data:[]}).then((()=>{o(),u.nk.success(t("common.oper"))})).catch((e=>{console.log(e),u.nk.error(t("common.operFail"))}))})).catch((()=>{}))};return(0,l.sV)((()=>{o()})),{state:a,handleOrderChange:s,handleSave:r,handleReset:c}}},k=n(1241);const g=(0,k.A)(f,[["render",c]]);var w=g},7812:function(e,t,n){n.r(t),n.d(t,{default:function(){return p}});var l=n(6768);const a={class:"transport-wrap relative h-100"},o={class:"relative h-100"},s={class:"absolute"};function r(e,t,n,r,c,d){const i=(0,l.g2)("Transport");return(0,l.uX)(),(0,l.CE)("div",a,[(0,l.Lk)("div",o,[(0,l.Lk)("div",s,[(0,l.bF)(i,{machineId:r.state.machineId},null,8,["machineId"])])])])}var c=n(144),d=n(4304),i=n(3830),u={props:["machineId"],components:{Transport:d.A},setup(e){(0,i.B)();const t=(0,c.Kh)({machineId:e.machineId});return{state:t}}},m=n(1241);const h=(0,m.A)(u,[["render",r],["__scopeId","data-v-475126bb"]]);var p=h}}]);