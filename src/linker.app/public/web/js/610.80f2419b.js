"use strict";(self["webpackChunklinker_web"]=self["webpackChunklinker_web"]||[]).push([[610],{88204:function(e,t,o){o.d(t,{A:function(){return Me}});var a=o(56768),l=o(24232),n=o.p+"img/dianchi.2949547b.svg",s=o.p+"img/pay.dc868752.jpg";const r=e=>((0,a.Qi)("data-v-577d1218"),e=e(),(0,a.jt)(),e),i={class:"status-wrap flex"},u={class:"copy flex"},d=["title"],c=r((()=>(0,a.Lk)("img",{src:n,alt:"memory"},null,-1))),p={href:"javascript:;"},m={key:0,href:"https://github.com/snltty/linker",target:"_blank"},g={key:1,href:"https://linker.snltty.com",target:"_blank"},v={key:2,href:"https://linker-doc.snltty.com",target:"_blank"},f=r((()=>(0,a.Lk)("div",{class:"flex-1"},null,-1))),k={class:"export"},h={key:0,class:"api"},w={class:"server"},b={class:"pay"},C={class:"t-c"},y=["title"],_=r((()=>(0,a.Lk)("img",{src:n,alt:"memory"},null,-1))),F=r((()=>(0,a.Lk)("p",{class:"t-c"}," OR ",-1))),V=r((()=>(0,a.Lk)("p",null,[(0,a.Lk)("img",{src:s,alt:"pay",width:"100%"})],-1)));function $(e,t,o,n,s,r){const $=(0,a.g2)("Export"),x=(0,a.g2)("Api"),S=(0,a.g2)("Server"),E=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.CE)("div",i,[(0,a.Lk)("div",u,[(0,a.Lk)("a",{href:"javascript:;",class:"memory",title:e.$t("status.support"),onClick:t[0]||(t[0]=e=>n.state.showPay=!0)},[c,(0,a.Lk)("span",null,(0,l.v_)(e.$t("status.support")),1)],8,d),(0,a.Lk)("a",p,"©linker "+(0,l.v_)(n.self.Version),1),n.globalData.isPc?((0,a.uX)(),(0,a.CE)("a",m,"Github")):(0,a.Q3)("",!0),n.globalData.isPc?((0,a.uX)(),(0,a.CE)("a",g,(0,l.v_)(e.$t("status.website")),1)):(0,a.Q3)("",!0),n.globalData.isPc?((0,a.uX)(),(0,a.CE)("a",v,(0,l.v_)(e.$t("status.doc")),1)):(0,a.Q3)("",!0)]),f,(0,a.Lk)("div",k,[(0,a.bF)($,{config:n.config},null,8,["config"])]),n.globalData.isPc?((0,a.uX)(),(0,a.CE)("div",h,[(0,a.bF)(x,{config:n.config},null,8,["config"])])):(0,a.Q3)("",!0),(0,a.Lk)("div",w,[(0,a.bF)(S,{config:n.config},null,8,["config"])]),(0,a.bF)(E,{modelValue:n.state.showPay,"onUpdate:modelValue":t[1]||(t[1]=e=>n.state.showPay=e),title:e.$t("status.support"),width:"80%"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",b,[(0,a.Lk)("p",C,[(0,a.Lk)("a",{href:"https://afdian.com/a/snltty",class:"memory a-line",title:e.$t("status.support"),target:"_blank"},[_,(0,a.Lk)("span",null,(0,l.v_)(e.$t("status.support")),1)],8,y)]),F,V])])),_:1},8,["modelValue","title"])])}var x=o(90144);const S={href:"javascript:;"};function E(e,t,o,n,s,r){const i=(0,a.g2)("Tools"),u=(0,a.g2)("el-icon"),d=(0,a.g2)("el-popconfirm");return n.config?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,l.C4)(["status-api-wrap",{connected:n.connected}])},[(0,a.bF)(d,{"confirm-button-text":e.$t("status.apiClear"),"cancel-button-text":e.$t("status.apiAlter"),title:e.$t("status.apiAlterConfirm"),onCancel:n.handleShow,onConfirm:n.handleResetConnect},{reference:(0,a.k6)((()=>[(0,a.Lk)("a",S,[(0,a.bF)(u,{size:"16"},{default:(0,a.k6)((()=>[(0,a.bF)(i)])),_:1}),(0,a.Lk)("span",null,(0,l.v_)(e.$t("status.api")),1)])])),_:1},8,["confirm-button-text","cancel-button-text","title","onCancel","onConfirm"])],2)):(0,a.Q3)("",!0)}var L=o(53830),A=o(10004),W=o(57477),U={components:{Tools:W.S0q},props:["config"],setup(e){const t=(0,L.B)(),o=(0,a.EW)((()=>t.value.api.connected)),l=()=>{localStorage.setItem("api-cache",""),sessionStorage.setItem("api-cache",""),window.location.reload()},n=()=>{(0,A.e3)(),(0,A.a1)(`ws${"https:"===window.location.protocol?"s":""}://${window.location.hostname}:12345`,"snltty")};return{config:e.config,connected:o,handleShow:n,handleResetConnect:l}}},X=o(71241);const P=(0,X.A)(U,[["render",E],["__scopeId","data-v-129a484d"]]);var I=P;const N={class:"status-server-wrap"};function B(e,t,o,l,n,s){const r=(0,a.g2)("Groups"),i=(0,a.g2)("ServerVersion"),u=(0,a.g2)("Flow");return(0,a.uX)(),(0,a.CE)("div",N,[(0,a.bF)(r,{config:l.config},null,8,["config"]),(0,a.bF)(i,{config:l.config},null,8,["config"]),l.config&&l.hasFlow?((0,a.uX)(),(0,a.Wv)(u,{key:0,config:l.config},null,8,["config"])):(0,a.Q3)("",!0)])}function D(e,t,o,n,s,r){const i=(0,a.g2)("Avatar"),u=(0,a.g2)("el-icon"),d=(0,a.g2)("ArrowDown"),c=(0,a.g2)("el-dropdown-item"),p=(0,a.g2)("el-dropdown-menu"),m=(0,a.g2)("el-dropdown"),g=(0,a.g2)("Groups");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(m,null,{dropdown:(0,a.k6)((()=>[n.hasGroup?((0,a.uX)(),(0,a.Wv)(p,{key:0},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.state.groups,(e=>((0,a.uX)(),(0,a.Wv)(c,{onClick:t=>n.handleGroupChange(e.Id)},{default:(0,a.k6)((()=>[(0,a.eW)((0,l.v_)(e.Name||"未知"),1)])),_:2},1032,["onClick"])))),256)),(0,a.bF)(c,{onClick:t[0]||(t[0]=e=>n.state.showGroups=!0)},{default:(0,a.k6)((()=>[(0,a.eW)((0,l.v_)(e.$t("status.group")),1)])),_:1})])),_:1})):(0,a.Q3)("",!0)])),default:(0,a.k6)((()=>[(0,a.Lk)("span",{class:(0,l.C4)(["el-dropdown-link",{connected:n.state.connected}])},[(0,a.bF)(u,{class:"left"},{default:(0,a.k6)((()=>[(0,a.bF)(i)])),_:1}),(0,a.Lk)("span",null,(0,l.v_)(n.state.groupName||"未知"),1),(0,a.bF)(u,{class:"right"},{default:(0,a.k6)((()=>[(0,a.bF)(d)])),_:1})],2)])),_:1}),n.state.showGroups?((0,a.uX)(),(0,a.Wv)(g,{key:0,modelValue:n.state.showGroups,"onUpdate:modelValue":t[1]||(t[1]=e=>n.state.showGroups=e)},null,8,["modelValue"])):(0,a.Q3)("",!0)],64)}var T=o(69299),G=o(51219),j=o(35931);const z={class:"group-wrap"},Q=["onClick"],K=["onClick"],O=["onClick"],R={key:0},Y={key:1},q={class:"flex"},Z=(0,a.Lk)("span",{class:"flex-1"},null,-1);function H(e,t,o,n,s,r){const i=(0,a.g2)("el-input"),u=(0,a.g2)("el-table-column"),d=(0,a.g2)("Sync"),c=(0,a.g2)("Delete"),p=(0,a.g2)("el-icon"),m=(0,a.g2)("el-button"),g=(0,a.g2)("el-popconfirm"),v=(0,a.g2)("Plus"),f=(0,a.g2)("el-table"),k=(0,a.g2)("el-dialog"),h=(0,a.gN)("trim");return(0,a.uX)(),(0,a.Wv)(k,{class:"options-center",title:e.$t("status.group"),"destroy-on-close":"",modelValue:n.state.show,"onUpdate:modelValue":t[0]||(t[0]=e=>n.state.show=e),width:"77rem",top:"2vh"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",z,[(0,a.bF)(f,{stripe:"",data:n.state.list,border:"",size:"small",width:"100%",height:"70vh",onCellDblclick:n.handleCellClick},{default:(0,a.k6)((()=>[(0,a.bF)(u,{prop:"Name",label:e.$t("status.groupName"),width:"100"},{default:(0,a.k6)((e=>[e.row.NameEditing?(0,a.bo)(((0,a.uX)(),(0,a.Wv)(i,{key:0,autofocus:"",size:"small",modelValue:e.row.Name,"onUpdate:modelValue":t=>e.row.Name=t,onBlur:t=>n.handleEditBlur(e.row,"Name")},null,8,["modelValue","onUpdate:modelValue","onBlur"])),[[h]]):((0,a.uX)(),(0,a.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:t=>n.handleEdit(e.row,"Name")},(0,l.v_)(e.row.Name||"未知"),9,Q))])),_:1},8,["label"]),(0,a.bF)(u,{prop:"Id",label:"Id"},{default:(0,a.k6)((e=>[e.row.IdEditing?(0,a.bo)(((0,a.uX)(),(0,a.Wv)(i,{key:0,autofocus:"",size:"small",modelValue:e.row.Id,"onUpdate:modelValue":t=>e.row.Id=t,onBlur:t=>n.handleEditBlur(e.row,"Id")},null,8,["modelValue","onUpdate:modelValue","onBlur"])),[[h]]):((0,a.uX)(),(0,a.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:t=>n.handleEdit(e.row,"Id")},(0,l.v_)(e.row.Id),9,K))])),_:1}),(0,a.bF)(u,{prop:"Password",label:e.$t("status.groupPassword")},{default:(0,a.k6)((e=>[e.row.PasswordEditing?(0,a.bo)(((0,a.uX)(),(0,a.Wv)(i,{key:0,type:"password","show-password":"",size:"small",modelValue:e.row.Password,"onUpdate:modelValue":t=>e.row.Password=t,onBlur:t=>n.handleEditBlur(e.row,"Password")},null,8,["modelValue","onUpdate:modelValue","onBlur"])),[[h]]):((0,a.uX)(),(0,a.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:t=>n.handleEdit(e.row,"Password")},[n.globalData.isPhone?((0,a.uX)(),(0,a.CE)("span",R,"***")):((0,a.uX)(),(0,a.CE)("span",Y,(0,l.v_)(e.row.Password.replace(/.{1}/g,"*")),1))],8,O))])),_:1},8,["label"]),(0,a.bF)(u,{prop:"Oper",label:e.$t("status.groupOper"),width:"110",fixed:"right"},{header:(0,a.k6)((()=>[(0,a.Lk)("div",q,[(0,a.Lk)("strong",null,(0,l.v_)(e.$t("status.groupOper")),1),Z,(0,a.bF)(d,{name:"GroupSecretKey"})])])),default:(0,a.k6)((t=>[(0,a.Lk)("div",null,[(0,a.bF)(g,{title:e.$t("status.groupDelConfirm"),onConfirm:e=>n.handleDel(t.$index)},{reference:(0,a.k6)((()=>[(0,a.bF)(m,{type:"danger",size:"small"},{default:(0,a.k6)((()=>[(0,a.bF)(p,null,{default:(0,a.k6)((()=>[(0,a.bF)(c)])),_:1})])),_:1})])),_:2},1032,["title","onConfirm"]),(0,a.bF)(m,{size:"small",onClick:e=>n.handleAdd(t.$index)},{default:(0,a.k6)((()=>[(0,a.bF)(p,null,{default:(0,a.k6)((()=>[(0,a.bF)(v)])),_:1})])),_:2},1032,["onClick"])])])),_:1},8,["label"])])),_:1},8,["data","onCellDblclick"])])])),_:1},8,["title","modelValue"])}var J=o(35377),M={props:["modelValue"],emits:["update:modelValue"],components:{Delete:W.epd,Plus:W.FWt,Select:W.l6P,Sync:J.A},setup(e,{emit:t}){const{t:o}=(0,j.s9)(),l=(0,L.B)(),n=(0,x.Kh)({list:l.value.config.Client.Groups,show:!0});(0,a.wB)((()=>l.value.config.Client.Groups),(()=>{0==n.list.filter((e=>e["__editing"])).length&&(n.list=l.value.config.Client.Groups)})),(0,a.wB)((()=>n.show),(e=>{e||setTimeout((()=>{t("update:modelValue",e)}),300)}));const s=(e,t)=>{r(e,t.property)},r=(e,t)=>{n.list.forEach((e=>{e["NameEditing"]=!1,e["IdEditing"]=!1,e["PasswordEditing"]=!1})),e[`${t}Editing`]=!0,e["__editing"]=!0},i=(e,t)=>{e[`${t}Editing`]=!1,e["__editing"]=!1;try{e[t]=e[t].trim()}catch(o){}p()},u=e=>{n.list.splice(e,1),p()},d=e=>{n.list.filter((e=>""==e.Id||""==e.Name)).length>0?G.nk.error(o("status.groupValidate")):(n.list.splice(e+1,0,{Name:"",Id:"",Password:""}),p())},c=e=>{const t=n.list.slice(),a=t[e];t[e]=t[0],t[0]=a,(0,T.rd)({name:l.value.config.Client.Name.trim(),groups:t}).then((()=>{G.nk.success(o("common.oper")),setTimeout((()=>{window.location.reload()}),1e3)})).catch((e=>{console.log(e),G.nk.error(o("common.operFail"))}))},p=()=>{(0,T.zp)(n.list).then((()=>{G.nk.success(o("common.oper"))})).catch((e=>{console.log(e),G.nk.error(o("common.operFail"))}))};return{globalData:l,state:n,handleCellClick:s,handleEditBlur:i,handleEdit:r,handleDel:u,handleAdd:d,handleUse:c}}};const ee=(0,X.A)(M,[["render",H]]);var te=ee,oe={components:{ArrowDown:W.yd$,Avatar:W.euF,Groups:te},props:["config"],setup(e){const{t:t}=(0,j.s9)(),o=(0,L.B)(),l=(0,a.EW)((()=>o.value.hasAccess("Group"))),n=(0,x.Kh)({loading:!1,connected:(0,a.EW)((()=>o.value.signin.Connected)),groupName:(0,a.EW)((()=>o.value.config.Client.Group.Name)),groups:(0,a.EW)((()=>o.value.config.Client.Groups)),showGroups:!1}),s=e=>{const t=o.value.config.Client.Groups,a=t.map(((e,t)=>(e.$index=t,e))).filter((t=>t.Id==e))[0].$index,l=t[a];t[a]=t[0],t[0]=l,r(t)},r=e=>{n.loading=!0,(0,T.rd)({Name:o.value.config.Client.Name,Groups:e}).then((()=>{n.loading=!1,n.show=!1,G.nk.success(t("common.oper")),setTimeout((()=>{window.location.reload()}),1e3)})).catch((e=>{console.log(e),n.loading=!1,G.nk.error(t("common.operFail"))}))};return{config:e.config,hasGroup:l,state:n,handleGroupChange:s}}};const ae=(0,X.A)(oe,[["render",D],["__scopeId","data-v-74bb5e43"]]);var le=ae;const ne={key:0,class:"flow-wrap"},se=["title"],re=["title"],ie=["title"],ue=["title"];function de(e,t,o,n,s,r){const i=(0,a.g2)("Flow",!0);return(0,a.uX)(),(0,a.CE)(a.FK,null,[n.config?((0,a.uX)(),(0,a.CE)("div",ne,[(0,a.Lk)("p",null,[(0,a.eW)((0,l.v_)(e.$t("status.flowOnline"))+" ",1),(0,a.Lk)("a",{href:"javascript:;",onClick:t[0]||(t[0]=e=>n.flow.map=!0),title:`${e.$t("status.flowThisServer")}\r\n${e.$t("status.flowOnline")}/${e.$t("status.flowOnline7Day")}`},(0,l.v_)(n.flow.overallOnline),9,se),(0,a.Lk)("a",{href:"javascript:;",onClick:t[1]||(t[1]=e=>n.flow.allmap=!0),title:`${e.$t("status.flowAllServer")}\r\n${e.$t("status.flowOnline")}/${e.$t("status.flowOnline7Day")}/${e.$t("status.flowServer")}`},(0,l.v_)(n.flow.serverOnline),9,re)]),(0,a.Lk)("p",null,[(0,a.eW)((0,l.v_)(e.$t("status.flowUpload"))+" ",1),(0,a.Lk)("a",{href:"javascript:;",onClick:t[2]||(t[2]=e=>n.flow.count=!0),title:`${e.$t("status.flowThisServer")}\r\n${e.$t("status.flowAllSend")}`},(0,l.v_)(n.flow.overallSendtSpeed),9,ie)]),(0,a.Lk)("p",null,[(0,a.eW)((0,l.v_)(e.$t("status.flowDownload"))+" ",1),(0,a.Lk)("a",{href:"javascript:;",onClick:t[3]||(t[3]=e=>n.flow.count=!0),title:`${e.$t("status.flowThisServer")}\r\n${e.$t("status.flowAllReceive")}`},(0,l.v_)(n.flow.overallReceiveSpeed),9,ue)])])):(0,a.Q3)("",!0),(0,a.bF)(i,{config:n.config,title:"服务器"},null,8,["config"])],64)}var ce=o(1257),pe=o(66046),me={props:["config"],components:{Flow:ce.A},setup(e){const{flow:t}=(0,pe.Y)();return{config:e.config,flow:t}}};const ge=(0,X.A)(me,[["render",de],["__scopeId","data-v-6d5a2f7a"]]);var ve=ge;const fe=["title"],ke={key:0,class:"progress"},he={key:1,class:"progress"};function we(e,t,o,n,s,r){const i=(0,a.g2)("Loading"),u=(0,a.g2)("el-icon"),d=(0,a.g2)("Download"),c=(0,a.g2)("CircleCheck");return(0,a.uX)(),(0,a.CE)("a",{href:"javascript:;",onClick:t[0]||(t[0]=(...e)=>n.handleUpdate&&n.handleUpdate(...e)),class:(0,l.C4)(["download",n.updateColor()]),title:n.updateText()},[(0,a.Lk)("span",null,(0,l.v_)(n.state.version),1),n.updaterServer.Version?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[1==n.updaterServer.Status?((0,a.uX)(),(0,a.Wv)(u,{key:0,size:"14",class:"loading"},{default:(0,a.k6)((()=>[(0,a.bF)(i)])),_:1})):2==n.updaterServer.Status?((0,a.uX)(),(0,a.Wv)(u,{key:1,size:"14"},{default:(0,a.k6)((()=>[(0,a.bF)(d)])),_:1})):3==n.updaterServer.Status||5==n.updaterServer.Status?((0,a.uX)(),(0,a.CE)(a.FK,{key:2},[(0,a.bF)(u,{size:"14",class:"loading"},{default:(0,a.k6)((()=>[(0,a.bF)(i)])),_:1}),0==n.updaterServer.Length?((0,a.uX)(),(0,a.CE)("span",ke,"0%")):((0,a.uX)(),(0,a.CE)("span",he,(0,l.v_)(parseInt(n.updaterServer.Current/n.updaterServer.Length*100))+"%",1))],64)):6==n.updaterServer.Status?((0,a.uX)(),(0,a.Wv)(u,{key:3,size:"14",class:"yellow"},{default:(0,a.k6)((()=>[(0,a.bF)(c)])),_:1})):(0,a.Q3)("",!0)],64)):((0,a.uX)(),(0,a.Wv)(u,{key:1,size:"14"},{default:(0,a.k6)((()=>[(0,a.bF)(d)])),_:1}))],10,fe)}var be=o(12933),Ce=o(80920),ye={components:{Promotion:W.Yk4,Download:W.f5X,Loading:W.Rhj,CircleCheck:W.rW7,ServerFlow:ce.A},props:["config"],setup(e){const{t:t}=(0,j.s9)(),o=(0,L.B)(),l=(0,a.EW)((()=>o.value.hasAccess("UpdateServer"))),n=(0,x.KR)({Version:"",Status:0,Length:0,Current:0,Msg:[],DateTime:""}),s=(0,x.Kh)({show:!1,loading:!1,connected:(0,a.EW)((()=>o.value.signin.Connected)),version:(0,a.EW)((()=>o.value.signin.Version)),timer:0}),r=()=>{clearTimeout(s.timer),(0,Ce.BJ)().then((e=>{n.value.Version=e.Version,n.value.Status=e.Status,n.value.Length=e.Length,n.value.Current=e.Current,n.value.Status>2&&n.value.Status<6&&(s.timer=setTimeout((()=>{r()}),1e3))})).catch((()=>{s.timer=setTimeout((()=>{r()}),1e3)}))},i=()=>n.value.Version?n.value.Status<=2?s.version!=n.value.Version?`${t("status.serverNotNew")}(${n.value.Version})`:`${t("status.serverNew")}`:{3:t("status.serverDownloading"),4:t("status.serverDownloaded"),5:t("status.serverUnZipIng"),6:t("status.serverUnZip")}[n.value.Status]:t("status.serverNoUpdate"),u=()=>s.version!=n.value.Version?"yellow":"green",d=()=>{e.config&&l.value&&([0,1,3,5].indexOf(n.value.Status)>=0?G.nk.error(t("common.operating")):6!=n.value.Status?2==n.value.Status&&be.s.confirm(t("status.serverConfirm"),t("common.tips"),{confirmButtonText:t("common.confirm"),cancelButtonText:t("common.cancel"),type:"warning"}).then((()=>{(0,Ce.y2)(n.value.Version||o.value.signin.Version).then((()=>{setTimeout((()=>{r()}),1e3)}))})).catch((()=>{})):be.s.confirm(t("status.serverCloseConfirm"),t("common.tips"),{confirmButtonText:t("common.confirm"),cancelButtonText:t("common.cancel"),type:"warning"}).then((()=>{(0,Ce.aP)()})).catch((()=>{})))};return(0,a.sV)((()=>{r()})),{config:e.config,state:s,updaterServer:n,handleUpdate:d,updateText:i,updateColor:u}}};const _e=(0,X.A)(ye,[["render",we],["__scopeId","data-v-3886bb74"]]);var Fe=_e,Ve={components:{Groups:le,Flow:ve,ServerVersion:Fe},props:["config"],setup(e){const t=(0,L.B)(),o=(0,a.EW)((()=>t.value.hasAccess("Flow"))),l=(0,x.Kh)({show:!1,loading:!1});return{config:e.config,hasFlow:o,state:l}}};const $e=(0,X.A)(Ve,[["render",B],["__scopeId","data-v-b198f5e0"]]);var xe=$e;const Se={key:0,class:"status-export-wrap"},Ee=["title"],Le={key:0},Ae={class:"port-wrap"},We={class:"text"},Ue={class:"body"},Xe={class:"card-header"},Pe={class:"flex flex-nowrap"},Ie={style:{width:"11rem"}},Ne={class:"flex flex-nowrap mgt-1"},Be={style:{width:"11rem"}},De={class:"flex flex-nowrap mgt-1"},Te={style:{width:"11rem"}},Ge={class:"port-wrap"},je={class:"port-wrap"},ze={style:{"margin-top":"1rem"}};function Qe(e,t,o,n,s,r){const i=(0,a.g2)("Share"),u=(0,a.g2)("el-icon"),d=(0,a.g2)("el-checkbox"),c=(0,a.g2)("el-col"),p=(0,a.g2)("el-input"),m=(0,a.g2)("el-row"),g=(0,a.g2)("Access"),v=(0,a.g2)("el-card"),f=(0,a.g2)("el-button"),k=(0,a.g2)("el-dialog"),h=(0,a.gN)("trim");return n.config&&n.hasExport?((0,a.uX)(),(0,a.CE)("div",Se,[(0,a.Lk)("a",{href:"javascript:;",title:e.$t("status.export"),onClick:t[0]||(t[0]=e=>n.state.show=!0)},[(0,a.bF)(u,{size:"16"},{default:(0,a.k6)((()=>[(0,a.bF)(i)])),_:1}),n.globalData.isPc?((0,a.uX)(),(0,a.CE)("span",Le,(0,l.v_)(e.$t("status.export")),1)):(0,a.Q3)("",!0)],8,Ee),(0,a.bF)(k,{class:"options-center",title:e.$t("status.export"),"destroy-on-close":"",modelValue:n.state.show,"onUpdate:modelValue":t[12]||(t[12]=e=>n.state.show=e),center:"",width:"580",top:"1vh"},{footer:(0,a.k6)((()=>[(0,a.bF)(f,{plain:"",onClick:t[11]||(t[11]=e=>n.state.show=!1),loading:n.state.loading},{default:(0,a.k6)((()=>[(0,a.eW)((0,l.v_)(e.$t("common.cancel")),1)])),_:1},8,["loading"]),(0,a.bF)(f,{type:"default",plain:"",onClick:n.handleExport,loading:n.state.loading},{default:(0,a.k6)((()=>[(0,a.eW)((0,l.v_)(e.$t("status.exportDownload")),1)])),_:1},8,["onClick","loading"]),(0,a.bF)(f,{type:"info",plain:"",onClick:n.handleCopy,loading:n.state.loading},{default:(0,a.k6)((()=>[(0,a.eW)((0,l.v_)(e.$t("status.exportCopy")),1)])),_:1},8,["onClick","loading"]),(0,a.bF)(f,{type:"success",plain:"",onClick:n.handleSave,loading:n.state.loading},{default:(0,a.k6)((()=>[(0,a.eW)((0,l.v_)(e.$t("status.exportSave")),1)])),_:1},8,["onClick","loading"])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",Ae,[(0,a.Lk)("div",We,(0,l.v_)(e.$t("status.exportText")),1),(0,a.Lk)("div",Ue,[(0,a.bF)(v,{shadow:"never"},{header:(0,a.k6)((()=>[(0,a.Lk)("div",Xe,[(0,a.Lk)("div",null,[(0,a.bF)(m,null,{default:(0,a.k6)((()=>[(0,a.bF)(c,{span:12},{default:(0,a.k6)((()=>[(0,a.bF)(d,{disabled:n.onlyNode,modelValue:n.state.single,"onUpdate:modelValue":t[1]||(t[1]=e=>n.state.single=e),label:e.$t("status.exportSingle")},null,8,["disabled","modelValue","label"])])),_:1}),(0,a.bF)(c,{span:12},{default:(0,a.k6)((()=>[(0,a.Lk)("div",Pe,[(0,a.Lk)("span",Ie,(0,l.v_)(e.$t("status.exportName"))+" : ",1),(0,a.bo)((0,a.bF)(p,{disabled:!n.state.single,modelValue:n.state.name,"onUpdate:modelValue":t[2]||(t[2]=e=>n.state.name=e),maxlength:"32","show-word-limit":""},null,8,["disabled","modelValue"]),[[h]])])])),_:1})])),_:1})]),(0,a.Lk)("div",null,[(0,a.bF)(m,null,{default:(0,a.k6)((()=>[(0,a.bF)(c,{span:12},{default:(0,a.k6)((()=>[(0,a.Lk)("div",Ne,[(0,a.Lk)("span",Be,(0,l.v_)(e.$t("status.exportWebport"))+" : ",1),(0,a.bo)((0,a.bF)(p,{disabled:n.onlyNode,modelValue:n.state.webport,"onUpdate:modelValue":t[3]||(t[3]=e=>n.state.webport=e)},null,8,["disabled","modelValue"]),[[h]])])])),_:1}),(0,a.bF)(c,{span:12},{default:(0,a.k6)((()=>[(0,a.Lk)("div",De,[(0,a.Lk)("span",Te,(0,l.v_)(e.$t("status.exportApiPassword"))+" : ",1),(0,a.bo)((0,a.bF)(p,{type:"password","show-password":"",disabled:n.onlyNode,modelValue:n.state.apipassword,"onUpdate:modelValue":t[4]||(t[4]=e=>n.state.apipassword=e),maxlength:"36","show-word-limit":""},null,8,["disabled","modelValue"]),[[h]])])])),_:1})])),_:1})]),(0,a.Lk)("div",null,[(0,a.bF)(m,null,{default:(0,a.k6)((()=>[(0,a.bF)(c,{xs:12,sm:8},{default:(0,a.k6)((()=>[(0,a.bF)(d,{modelValue:n.state.relay,"onUpdate:modelValue":t[5]||(t[5]=e=>n.state.relay=e),label:e.$t("status.exportRelay")},null,8,["modelValue","label"])])),_:1}),(0,a.bF)(c,{xs:12,sm:8},{default:(0,a.k6)((()=>[(0,a.bF)(d,{modelValue:n.state.updater,"onUpdate:modelValue":t[6]||(t[6]=e=>n.state.updater=e),label:e.$t("status.exportUpdater")},null,8,["modelValue","label"])])),_:1}),(0,a.bF)(c,{xs:12,sm:8},{default:(0,a.k6)((()=>[(0,a.bF)(d,{modelValue:n.state.group,"onUpdate:modelValue":t[7]||(t[7]=e=>n.state.group=e),label:e.$t("status.exportGroup")},null,8,["modelValue","label"])])),_:1}),(0,a.bF)(c,{xs:12,sm:8},{default:(0,a.k6)((()=>[(0,a.bF)(d,{modelValue:n.state.server,"onUpdate:modelValue":t[8]||(t[8]=e=>n.state.server=e),label:e.$t("status.exportServer")},null,8,["modelValue","label"])])),_:1}),(0,a.bF)(c,{xs:12,sm:8},{default:(0,a.k6)((()=>[(0,a.bF)(d,{modelValue:n.state.super,"onUpdate:modelValue":t[9]||(t[9]=e=>n.state.super=e),label:e.$t("status.exportSuper")},null,8,["modelValue","label"])])),_:1}),(0,a.bF)(c,{xs:12,sm:8},{default:(0,a.k6)((()=>[(0,a.bF)(d,{modelValue:n.state.tunnel,"onUpdate:modelValue":t[10]||(t[10]=e=>n.state.tunnel=e),label:e.$t("status.exportTunnel")},null,8,["modelValue","label"])])),_:1})])),_:1})])])])),default:(0,a.k6)((()=>[(0,a.bF)(g,{ref:"accessDom",machineid:n.machineId,height:30},null,8,["machineid"])])),_:1})])])])),_:1},8,["title","modelValue"]),(0,a.bF)(k,{class:"options-center",title:e.$t("status.export"),"destroy-on-close":"",modelValue:n.state.showCopy,"onUpdate:modelValue":t[14]||(t[14]=e=>n.state.showCopy=e),center:"",width:"580",top:"1vh"},{footer:(0,a.k6)((()=>[(0,a.bF)(f,{plain:"",onClick:n.copyToClipboard},{default:(0,a.k6)((()=>[(0,a.eW)((0,l.v_)(e.$t("status.exportCopy")),1)])),_:1},8,["onClick"])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",Ge,[(0,a.bo)((0,a.bF)(p,{modelValue:n.state.copyContent,"onUpdate:modelValue":t[13]||(t[13]=e=>n.state.copyContent=e),type:"textarea",rows:10,resize:"none",readonly:""},null,8,["modelValue"]),[[h]])])])),_:1},8,["title","modelValue"]),(0,a.bF)(k,{class:"options-center",title:e.$t("status.export"),"destroy-on-close":"",modelValue:n.state.showSave,"onUpdate:modelValue":t[17]||(t[17]=e=>n.state.showSave=e),center:"",width:"300",top:"1vh"},{footer:(0,a.k6)((()=>[(0,a.bF)(f,{plain:"",onClick:n.copySaveToClipboard},{default:(0,a.k6)((()=>[(0,a.eW)((0,l.v_)(e.$t("status.exportCopy")),1)])),_:1},8,["onClick"])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",je,[(0,a.Lk)("div",null,[(0,a.bo)((0,a.bF)(p,{modelValue:n.state.saveServer,"onUpdate:modelValue":t[15]||(t[15]=e=>n.state.saveServer=e),readonly:""},null,8,["modelValue"]),[[h]])]),(0,a.Lk)("div",ze,[(0,a.bo)((0,a.bF)(p,{modelValue:n.state.saveContent,"onUpdate:modelValue":t[16]||(t[16]=e=>n.state.saveContent=e),readonly:""},null,8,["modelValue"]),[[h]])])])])),_:1},8,["title","modelValue"])])):(0,a.Q3)("",!0)}var Ke=o(88835),Oe=o(87586),Re={components:{Share:W.SYj,Access:Oe.A},props:["config"],setup(e){const{t:t}=(0,j.s9)(),o=(0,L.B)(),l=(0,a.EW)((()=>o.value.hasAccess("Export"))),n=(0,a.EW)((()=>o.value.config.Client.OnlyNode)),s=(0,a.EW)((()=>o.value.config.Client.Id)),r=(0,x.Kh)({show:!1,loading:!1,single:!0,name:"",apipassword:n.value?o.value.config.Client.CApi.ApiPassword:"",webport:o.value.config.Client.CApi.WebPort,relay:!0,updater:!0,server:!0,super:!1,group:!0,tunnel:!0,copyContent:"",showCopy:!1,saveServer:o.value.config.Client.Server.Host,saveContent:"",showSave:!1}),i=(0,x.KR)(null),u=()=>{if(!l.value)return void G.nk.success("无权限");const e=i.value.getValue(),o={access:e[0],fullAccess:e[1],single:r.single,name:r.name,apipassword:r.apipassword,webport:+r.webport,relay:r.relay,updater:r.updater,server:r.server,super:r.super,group:r.group,tunnel:r.tunnel};if(o.single){if(!o.name)return void G.nk.error(t("status.exportNamePlease"))}else o.name="";if(o.apipassword){if(!(!o.webport||isNaN(o.webport)||o.webport<=0||o.webport>65535))return o;G.nk.error(t("status.exportWebportPlease"))}else G.nk.error(t("status.exportApiPasswordPlease"))},d=()=>{const e=document.createElement("a");r.single?e.download=`client-node-export-${r.name}.zip`:e.download="client-node-export.zip",e.href="/client-node-export.zip",document.body.appendChild(e),e.click(),document.body.removeChild(e)},c=()=>{const e=u();e&&(r.loading=!0,(0,Ke.ql)(e).then((e=>{r.loading=!1,e?(r.show=!1,G.nk.success(t("common.oper")),r.saveContent=e,r.showSave=!0):G.nk.error(t("common.operFail"))})).catch((()=>{G.nk.error(t("common.operFail")),r.loading=!1})))},p=async()=>{try{return await navigator.clipboard.writeText(`在初始化linker客户端时，填写服务器和密钥，导入配置\n服务器: ${r.saveServer}\n密钥: ${r.saveContent}`),G.nk.success(t("common.oper")),!0}catch(e){return G.nk.error(t("common.operFail")),!1}},m=()=>{const e=u();e&&(r.loading=!0,(0,Ke.P$)(e).then((()=>{r.loading=!1,r.show=!1,G.nk.success(t("common.oper")),d()})).catch((()=>{G.nk.error(t("common.operFail")),r.loading=!1})))},g=()=>{const e=u();e&&(r.loading=!0,(0,Ke.om)(e).then((e=>{r.loading=!1,r.show=!1,G.nk.success(t("common.oper")),r.copyContent=e,r.showCopy=!0})).catch((()=>{G.nk.error(t("common.operFail")),r.loading=!1})))},v=async()=>{try{return await navigator.clipboard.writeText(r.copyContent),G.nk.success(t("common.oper")),!0}catch(e){return G.nk.error(t("common.operFail")),!1}};return{globalData:o,config:e.config,onlyNode:n,hasExport:l,machineId:s,state:r,accessDom:i,handleSave:c,handleExport:m,handleCopy:g,copyToClipboard:v,copySaveToClipboard:p}}};const Ye=(0,X.A)(Re,[["render",Qe],["__scopeId","data-v-74a0500e"]]);var qe=Ye,Ze=o(31480),He={components:{Api:I,Server:xe,Export:qe,UpdaterBtn:Ze.A},props:["config"],setup(e){const t=(0,L.B)(),o=(0,a.EW)((()=>t.value.self)),l=(0,x.Kh)({showPay:!1});return{globalData:t,state:l,config:e.config,self:o}}};const Je=(0,X.A)(He,[["render",$],["__scopeId","data-v-577d1218"]]);var Me=Je},7199:function(e,t,o){o.d(t,{A:function(){return g}});var a=o(56768);const l=e=>((0,a.Qi)("data-v-4b6a124c"),e=e(),(0,a.jt)(),e),n={key:0,class:"image"},s=l((()=>(0,a.Lk)("input",{type:"file",id:"file-input"},null,-1)));function r(e,t,o,l,r,i){const u=(0,a.g2)("PictureRounded"),d=(0,a.g2)("el-icon");return l.globalData.isPc?((0,a.uX)(),(0,a.CE)("div",n,[(0,a.Lk)("a",{href:"javascript:;",onClick:t[0]||(t[0]=(...e)=>l.handleBg&&l.handleBg(...e))},[(0,a.bF)(d,null,{default:(0,a.k6)((()=>[(0,a.bF)(u)])),_:1})]),s])):(0,a.Q3)("",!0)}var i=o(53830),u=o(57477),d=o(12933),c={components:{PictureRounded:u.syp},props:["name"],setup(e){const t=(0,i.B)(),o=`bg-${e.name}`,l=()=>{localStorage.getItem(o)?d.s.confirm("清除背景？","Warning",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{s()})).catch((()=>{})):document.getElementById("file-input").click()},n=e=>{const t=e.target.files[0];if(t)try{const e=new FileReader;e.onload=function(e){s(e.target.result)},e.readAsDataURL(t)}catch(o){}e.target.value=""},s=e=>{e?(document.body.className="sunny",localStorage.setItem(o,e),document.body.style=`background-image:url(${e})`):(document.body.className="",document.body.style="",localStorage.setItem(o,""))};return(0,a.sV)((()=>{const e=document.getElementById("file-input");e&&e.addEventListener("change",n),s(localStorage.getItem(o))})),{globalData:t,handleBg:l}}},p=o(71241);const m=(0,p.A)(c,[["render",r],["__scopeId","data-v-4b6a124c"]]);var g=m}}]);