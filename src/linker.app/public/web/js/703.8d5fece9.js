"use strict";(self["webpackChunklinker_web"]=self["webpackChunklinker_web"]||[]).push([[703],{3606:function(e,t,o){o.d(t,{A:function(){return Je}});var l=o(6768),a=o(4232),n=o.p+"img/dianchi.2949547b.svg",s=o.p+"img/pay.dc868752.jpg";const r=e=>((0,l.Qi)("data-v-1dfd2a68"),e=e(),(0,l.jt)(),e),i={class:"status-wrap flex"},u={class:"copy flex"},d=["title"],c=r((()=>(0,l.Lk)("img",{src:n,alt:"memory"},null,-1))),p={href:"javascript:;"},m=r((()=>(0,l.Lk)("a",{href:"https://github.com/snltty/linker",target:"_blank"},"Github",-1))),g={href:"https://linker.snltty.com",target:"_blank"},v={href:"https://linker-doc.snltty.com",target:"_blank"},f=r((()=>(0,l.Lk)("div",{class:"flex-1"},null,-1))),k={class:"export"},w={class:"api"},h={class:"server"},b={class:"pay"},C={class:"t-c"},_=["title"],y=r((()=>(0,l.Lk)("img",{src:n,alt:"memory"},null,-1))),F=r((()=>(0,l.Lk)("p",{class:"t-c"}," OR ",-1))),V=r((()=>(0,l.Lk)("p",null,[(0,l.Lk)("img",{src:s,alt:"pay",width:"100%"})],-1)));function $(e,t,o,n,s,r){const $=(0,l.g2)("PcShow"),S=(0,l.g2)("Export"),x=(0,l.g2)("Api"),L=(0,l.g2)("Server"),E=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.CE)("div",i,[(0,l.Lk)("div",u,[(0,l.Lk)("a",{href:"javascript:;",class:"memory",title:e.$t("status.support"),onClick:t[0]||(t[0]=e=>n.state.showPay=!0)},[c,(0,l.Lk)("span",null,(0,a.v_)(e.$t("status.support")),1)],8,d),(0,l.Lk)("a",p,"©linker "+(0,a.v_)(n.self.Version),1),(0,l.bF)($,null,{default:(0,l.k6)((()=>[m,(0,l.Lk)("a",g,(0,a.v_)(e.$t("status.website")),1),(0,l.Lk)("a",v,(0,a.v_)(e.$t("status.doc")),1)])),_:1})]),f,(0,l.Lk)("div",k,[(0,l.bF)(S,{config:n.config},null,8,["config"])]),(0,l.bF)($,null,{default:(0,l.k6)((()=>[(0,l.Lk)("div",w,[(0,l.bF)(x,{config:n.config},null,8,["config"])])])),_:1}),(0,l.Lk)("div",h,[(0,l.bF)(L,{config:n.config},null,8,["config"])]),(0,l.bF)(E,{modelValue:n.state.showPay,"onUpdate:modelValue":t[1]||(t[1]=e=>n.state.showPay=e),title:e.$t("status.support"),width:"80%"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",b,[(0,l.Lk)("p",C,[(0,l.Lk)("a",{href:"https://afdian.com/a/snltty",class:"memory a-line",title:e.$t("status.support"),target:"_blank"},[y,(0,l.Lk)("span",null,(0,a.v_)(e.$t("status.support")),1)],8,_)]),F,V])])),_:1},8,["modelValue","title"])])}var S=o(144);const x={href:"javascript:;"};function L(e,t,o,n,s,r){const i=(0,l.g2)("Tools"),u=(0,l.g2)("el-icon"),d=(0,l.g2)("el-popconfirm");return n.config?((0,l.uX)(),(0,l.CE)("div",{key:0,class:(0,a.C4)(["status-api-wrap",{connected:n.connected}])},[(0,l.bF)(d,{"confirm-button-text":e.$t("status.apiClear"),"cancel-button-text":e.$t("status.apiAlter"),title:e.$t("status.apiAlterConfirm"),onCancel:n.handleShow,onConfirm:n.handleResetConnect},{reference:(0,l.k6)((()=>[(0,l.Lk)("a",x,[(0,l.bF)(u,{size:"16"},{default:(0,l.k6)((()=>[(0,l.bF)(i)])),_:1}),(0,l.Lk)("span",null,(0,a.v_)(e.$t("status.api")),1)])])),_:1},8,["confirm-button-text","cancel-button-text","title","onCancel","onConfirm"])],2)):(0,l.Q3)("",!0)}var E=o(3830),A=o(4),W=o(7477),U={components:{Tools:W.S0q},props:["config"],setup(e){const t=(0,E.B)(),o=(0,l.EW)((()=>t.value.api.connected)),a=()=>{localStorage.setItem("api-cache",""),sessionStorage.setItem("api-cache",""),window.location.reload()},n=()=>{(0,A.e3)(),(0,A.a1)(`ws${"https:"===window.location.protocol?"s":""}://${window.location.hostname}:12345`,"snltty")};return{config:e.config,connected:o,handleShow:n,handleResetConnect:a}}},I=o(1241);const N=(0,I.A)(U,[["render",L],["__scopeId","data-v-129a484d"]]);var B=N;const P={class:"status-server-wrap"};function X(e,t,o,a,n,s){const r=(0,l.g2)("Groups"),i=(0,l.g2)("ServerVersion"),u=(0,l.g2)("Flow"),d=(0,l.g2)("AccessShow");return(0,l.uX)(),(0,l.CE)("div",P,[(0,l.bF)(r,{config:a.config},null,8,["config"]),(0,l.bF)(i,{config:a.config},null,8,["config"]),(0,l.bF)(d,{value:"Flow"},{default:(0,l.k6)((()=>[a.config?((0,l.uX)(),(0,l.Wv)(u,{key:0,config:a.config},null,8,["config"])):(0,l.Q3)("",!0)])),_:1})])}function T(e,t,o,n,s,r){const i=(0,l.g2)("Avatar"),u=(0,l.g2)("el-icon"),d=(0,l.g2)("ArrowDown"),c=(0,l.g2)("el-dropdown-item"),p=(0,l.g2)("el-dropdown-menu"),m=(0,l.g2)("AccessShow"),g=(0,l.g2)("el-dropdown"),v=(0,l.g2)("Groups");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(g,null,{dropdown:(0,l.k6)((()=>[(0,l.bF)(m,{value:"Group"},{default:(0,l.k6)((()=>[(0,l.bF)(p,null,{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.state.groups,(e=>((0,l.uX)(),(0,l.Wv)(c,{onClick:t=>n.handleGroupChange(e.Id)},{default:(0,l.k6)((()=>[(0,l.eW)((0,a.v_)(e.Name||"未知"),1)])),_:2},1032,["onClick"])))),256)),(0,l.bF)(c,{onClick:t[0]||(t[0]=e=>n.state.showGroups=!0)},{default:(0,l.k6)((()=>[(0,l.eW)((0,a.v_)(e.$t("status.group")),1)])),_:1})])),_:1})])),_:1})])),default:(0,l.k6)((()=>[(0,l.Lk)("span",{class:(0,a.C4)(["el-dropdown-link",{connected:n.state.connected}])},[(0,l.bF)(u,{class:"left"},{default:(0,l.k6)((()=>[(0,l.bF)(i)])),_:1}),(0,l.Lk)("span",null,(0,a.v_)(n.state.groupName||"未知"),1),(0,l.bF)(u,{class:"right"},{default:(0,l.k6)((()=>[(0,l.bF)(d)])),_:1})],2)])),_:1}),n.state.showGroups?((0,l.uX)(),(0,l.Wv)(v,{key:0,modelValue:n.state.showGroups,"onUpdate:modelValue":t[1]||(t[1]=e=>n.state.showGroups=e)},null,8,["modelValue"])):(0,l.Q3)("",!0)],64)}var D=o(9299),G=o(1219),j=o(5931);const z={class:"group-wrap"},K=["onClick"],O=["onClick"],R=["onClick"],Q=(0,l.Lk)("template",null,[(0,l.Lk)("span",null,"***")],-1),Y=[Q],q={class:"flex"},Z=(0,l.Lk)("span",{class:"flex-1"},null,-1);function H(e,t,o,n,s,r){const i=(0,l.g2)("el-input"),u=(0,l.g2)("el-table-column"),d=(0,l.g2)("Sync"),c=(0,l.g2)("Delete"),p=(0,l.g2)("el-icon"),m=(0,l.g2)("el-button"),g=(0,l.g2)("el-popconfirm"),v=(0,l.g2)("Plus"),f=(0,l.g2)("el-table"),k=(0,l.g2)("el-dialog"),w=(0,l.gN)("trim");return(0,l.uX)(),(0,l.Wv)(k,{class:"options-center",title:e.$t("status.group"),"destroy-on-close":"",modelValue:n.state.show,"onUpdate:modelValue":t[0]||(t[0]=e=>n.state.show=e),width:"77rem",top:"2vh"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",z,[(0,l.bF)(f,{stripe:"",data:n.state.list,border:"",size:"small",width:"100%",height:"70vh",onCellDblclick:n.handleCellClick},{default:(0,l.k6)((()=>[(0,l.bF)(u,{prop:"Name",label:e.$t("status.groupName"),width:"100"},{default:(0,l.k6)((e=>[e.row.NameEditing?(0,l.bo)(((0,l.uX)(),(0,l.Wv)(i,{key:0,autofocus:"",size:"small",modelValue:e.row.Name,"onUpdate:modelValue":t=>e.row.Name=t,onBlur:t=>n.handleEditBlur(e.row,"Name")},null,8,["modelValue","onUpdate:modelValue","onBlur"])),[[w]]):((0,l.uX)(),(0,l.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:t=>n.handleEdit(e.row,"Name")},(0,a.v_)(e.row.Name||"未知"),9,K))])),_:1},8,["label"]),(0,l.bF)(u,{prop:"Id",label:"Id"},{default:(0,l.k6)((e=>[e.row.IdEditing?(0,l.bo)(((0,l.uX)(),(0,l.Wv)(i,{key:0,autofocus:"",size:"small",modelValue:e.row.Id,"onUpdate:modelValue":t=>e.row.Id=t,onBlur:t=>n.handleEditBlur(e.row,"Id")},null,8,["modelValue","onUpdate:modelValue","onBlur"])),[[w]]):((0,l.uX)(),(0,l.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:t=>n.handleEdit(e.row,"Id")},(0,a.v_)(e.row.Id),9,O))])),_:1}),(0,l.bF)(u,{prop:"Password",label:e.$t("status.groupPassword")},{default:(0,l.k6)((e=>[e.row.PasswordEditing?(0,l.bo)(((0,l.uX)(),(0,l.Wv)(i,{key:0,type:"password","show-password":"",size:"small",modelValue:e.row.Password,"onUpdate:modelValue":t=>e.row.Password=t,onBlur:t=>n.handleEditBlur(e.row,"Password")},null,8,["modelValue","onUpdate:modelValue","onBlur"])),[[w]]):((0,l.uX)(),(0,l.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:t=>n.handleEdit(e.row,"Password")},Y,8,R))])),_:1},8,["label"]),(0,l.bF)(u,{prop:"Oper",label:e.$t("status.groupOper"),width:"110",fixed:"right"},{header:(0,l.k6)((()=>[(0,l.Lk)("div",q,[(0,l.Lk)("strong",null,(0,a.v_)(e.$t("status.groupOper")),1),Z,(0,l.bF)(d,{name:"GroupSecretKey"})])])),default:(0,l.k6)((t=>[(0,l.Lk)("div",null,[(0,l.bF)(g,{title:e.$t("status.groupDelConfirm"),onConfirm:e=>n.handleDel(t.$index)},{reference:(0,l.k6)((()=>[(0,l.bF)(m,{type:"danger",size:"small"},{default:(0,l.k6)((()=>[(0,l.bF)(p,null,{default:(0,l.k6)((()=>[(0,l.bF)(c)])),_:1})])),_:1})])),_:2},1032,["title","onConfirm"]),(0,l.bF)(m,{size:"small",onClick:e=>n.handleAdd(t.$index)},{default:(0,l.k6)((()=>[(0,l.bF)(p,null,{default:(0,l.k6)((()=>[(0,l.bF)(v)])),_:1})])),_:2},1032,["onClick"])])])),_:1},8,["label"])])),_:1},8,["data","onCellDblclick"])])])),_:1},8,["title","modelValue"])}var J=o(2322),M={props:["modelValue"],emits:["update:modelValue"],components:{Delete:W.epd,Plus:W.FWt,Select:W.l6P,Sync:J.A},setup(e,{emit:t}){const{t:o}=(0,j.s9)(),a=(0,E.B)(),n=(0,S.Kh)({list:a.value.config.Client.Groups,show:!0});(0,l.wB)((()=>a.value.config.Client.Groups),(()=>{0==n.list.filter((e=>e["__editing"])).length&&(n.list=a.value.config.Client.Groups)})),(0,l.wB)((()=>n.show),(e=>{e||setTimeout((()=>{t("update:modelValue",e)}),300)}));const s=(e,t)=>{r(e,t.property)},r=(e,t)=>{n.list.forEach((e=>{e["NameEditing"]=!1,e["IdEditing"]=!1,e["PasswordEditing"]=!1})),e[`${t}Editing`]=!0,e["__editing"]=!0},i=(e,t)=>{e[`${t}Editing`]=!1,e["__editing"]=!1;try{e[t]=e[t].trim()}catch(o){}p()},u=e=>{n.list.splice(e,1),p()},d=e=>{n.list.filter((e=>""==e.Id||""==e.Name)).length>0?G.nk.error(o("status.groupValidate")):(n.list.splice(e+1,0,{Name:"",Id:"",Password:""}),p())},c=e=>{const t=n.list.slice(),l=t[e];t[e]=t[0],t[0]=l,(0,D.rd)({name:a.value.config.Client.Name.trim(),groups:t}).then((()=>{G.nk.success(o("common.oper")),setTimeout((()=>{window.location.reload()}),1e3)})).catch((e=>{console.log(e),G.nk.error(o("common.operFail"))}))},p=()=>{(0,D.zp)(n.list).then((()=>{G.nk.success(o("common.oper"))})).catch((e=>{console.log(e),G.nk.error(o("common.operFail"))}))};return{globalData:a,state:n,handleCellClick:s,handleEditBlur:i,handleEdit:r,handleDel:u,handleAdd:d,handleUse:c}}};const ee=(0,I.A)(M,[["render",H]]);var te=ee,oe={components:{ArrowDown:W.yd$,Avatar:W.euF,Groups:te},props:["config"],setup(e){const{t:t}=(0,j.s9)(),o=(0,E.B)(),a=(0,S.Kh)({loading:!1,connected:(0,l.EW)((()=>o.value.signin.Connected)),groupName:(0,l.EW)((()=>o.value.config.Client.Group.Name)),groups:(0,l.EW)((()=>o.value.config.Client.Groups)),showGroups:!1}),n=e=>{const t=o.value.config.Client.Groups,l=t.map(((e,t)=>(e.$index=t,e))).filter((t=>t.Id==e))[0].$index,a=t[l];t[l]=t[0],t[0]=a,s(t)},s=e=>{a.loading=!0,(0,D.rd)({Name:o.value.config.Client.Name,Groups:e}).then((()=>{a.loading=!1,a.show=!1,G.nk.success(t("common.oper")),setTimeout((()=>{window.location.reload()}),1e3)})).catch((e=>{console.log(e),a.loading=!1,G.nk.error(t("common.operFail"))}))};return{config:e.config,state:a,handleGroupChange:n}}};const le=(0,I.A)(oe,[["render",T],["__scopeId","data-v-259d6774"]]);var ae=le;const ne={key:0,class:"flow-wrap"},se=["title"],re=["title"],ie=["title"],ue=["title"];function de(e,t,o,n,s,r){const i=(0,l.g2)("Flow",!0);return(0,l.uX)(),(0,l.CE)(l.FK,null,[n.config?((0,l.uX)(),(0,l.CE)("div",ne,[(0,l.Lk)("p",null,[(0,l.eW)((0,a.v_)(e.$t("status.flowOnline"))+" ",1),(0,l.Lk)("a",{href:"javascript:;",onClick:t[0]||(t[0]=e=>n.flow.map=!0),title:`${e.$t("status.flowThisServer")}\r\n${e.$t("status.flowOnline")}/${e.$t("status.flowOnline7Day")}`},(0,a.v_)(n.flow.overallOnline),9,se),(0,l.Lk)("a",{href:"javascript:;",onClick:t[1]||(t[1]=e=>n.flow.allmap=!0),title:`${e.$t("status.flowAllServer")}\r\n${e.$t("status.flowOnline")}/${e.$t("status.flowOnline7Day")}/${e.$t("status.flowServer")}`},(0,a.v_)(n.flow.serverOnline),9,re)]),(0,l.Lk)("p",null,[(0,l.eW)((0,a.v_)(e.$t("status.flowUpload"))+" ",1),(0,l.Lk)("a",{href:"javascript:;",onClick:t[2]||(t[2]=e=>n.flow.count=!0),title:`${e.$t("status.flowThisServer")}\r\n${e.$t("status.flowAllSend")}`},(0,a.v_)(n.flow.overallSendtSpeed),9,ie)]),(0,l.Lk)("p",null,[(0,l.eW)((0,a.v_)(e.$t("status.flowDownload"))+" ",1),(0,l.Lk)("a",{href:"javascript:;",onClick:t[3]||(t[3]=e=>n.flow.count=!0),title:`${e.$t("status.flowThisServer")}\r\n${e.$t("status.flowAllReceive")}`},(0,a.v_)(n.flow.overallReceiveSpeed),9,ue)])])):(0,l.Q3)("",!0),(0,l.bF)(i,{config:n.config,title:"服务器"},null,8,["config"])],64)}var ce=o(1257),pe=o(6046),me={props:["config"],components:{Flow:ce.A},setup(e){const{flow:t}=(0,pe.Y)();return{config:e.config,flow:t}}};const ge=(0,I.A)(me,[["render",de],["__scopeId","data-v-6d5a2f7a"]]);var ve=ge;const fe=["onClick","title"],ke={key:0,class:"progress"},we={key:1,class:"progress"};function he(e,t,o,n,s,r){const i=(0,l.g2)("Loading"),u=(0,l.g2)("el-icon"),d=(0,l.g2)("Download"),c=(0,l.g2)("CircleCheck"),p=(0,l.g2)("AccessBoolean");return(0,l.uX)(),(0,l.Wv)(p,{value:"UpdateServer"},{default:(0,l.k6)((({values:e})=>[(0,l.Lk)("a",{href:"javascript:;",onClick:t=>n.handleUpdate(e),class:(0,a.C4)(["download",n.updateColor()]),title:n.updateText()},[(0,l.Lk)("span",null,(0,a.v_)(n.state.version),1),n.updaterServer.Version?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[1==n.updaterServer.Status?((0,l.uX)(),(0,l.Wv)(u,{key:0,size:"14",class:"loading"},{default:(0,l.k6)((()=>[(0,l.bF)(i)])),_:1})):2==n.updaterServer.Status?((0,l.uX)(),(0,l.Wv)(u,{key:1,size:"14"},{default:(0,l.k6)((()=>[(0,l.bF)(d)])),_:1})):3==n.updaterServer.Status||5==n.updaterServer.Status?((0,l.uX)(),(0,l.CE)(l.FK,{key:2},[(0,l.bF)(u,{size:"14",class:"loading"},{default:(0,l.k6)((()=>[(0,l.bF)(i)])),_:1}),0==n.updaterServer.Length?((0,l.uX)(),(0,l.CE)("span",ke,"0%")):((0,l.uX)(),(0,l.CE)("span",we,(0,a.v_)(parseInt(n.updaterServer.Current/n.updaterServer.Length*100))+"%",1))],64)):6==n.updaterServer.Status?((0,l.uX)(),(0,l.Wv)(u,{key:3,size:"14",class:"yellow"},{default:(0,l.k6)((()=>[(0,l.bF)(c)])),_:1})):(0,l.Q3)("",!0)],64)):((0,l.uX)(),(0,l.Wv)(u,{key:1,size:"14"},{default:(0,l.k6)((()=>[(0,l.bF)(d)])),_:1}))],10,fe)])),_:1})}var be=o(2933),Ce=o(920),_e={components:{Promotion:W.Yk4,Download:W.f5X,Loading:W.Rhj,CircleCheck:W.rW7,ServerFlow:ce.A},props:["config"],setup(e){const{t:t}=(0,j.s9)(),o=(0,E.B)(),a=(0,S.KR)({Version:"",Status:0,Length:0,Current:0,Msg:[],DateTime:""}),n=(0,S.Kh)({show:!1,loading:!1,connected:(0,l.EW)((()=>o.value.signin.Connected)),version:(0,l.EW)((()=>o.value.signin.Version)),timer:0}),s=()=>{clearTimeout(n.timer),(0,Ce.BJ)().then((e=>{a.value.Version=e.Version,a.value.Status=e.Status,a.value.Length=e.Length,a.value.Current=e.Current,a.value.Status>2&&a.value.Status<6&&(n.timer=setTimeout((()=>{s()}),1e3))})).catch((()=>{n.timer=setTimeout((()=>{s()}),1e3)}))},r=()=>a.value.Version?a.value.Status<=2?n.version!=a.value.Version?`${t("status.serverNotNew")}(${a.value.Version})`:`${t("status.serverNew")}`:{3:t("status.serverDownloading"),4:t("status.serverDownloaded"),5:t("status.serverUnZipIng"),6:t("status.serverUnZip")}[a.value.Status]:t("status.serverNoUpdate"),i=()=>n.version!=a.value.Version?"yellow":"green",u=l=>{e.config&&l.UpdateServer&&([0,1,3,5].indexOf(a.value.Status)>=0?G.nk.error(t("common.operating")):6!=a.value.Status?2==a.value.Status&&be.s.confirm(t("status.serverConfirm"),t("common.tips"),{confirmButtonText:t("common.confirm"),cancelButtonText:t("common.cancel"),type:"warning"}).then((()=>{(0,Ce.y2)(a.value.Version||o.value.signin.Version).then((()=>{setTimeout((()=>{s()}),1e3)}))})).catch((()=>{})):be.s.confirm(t("status.serverCloseConfirm"),t("common.tips"),{confirmButtonText:t("common.confirm"),cancelButtonText:t("common.cancel"),type:"warning"}).then((()=>{(0,Ce.aP)()})).catch((()=>{})))};return(0,l.sV)((()=>{s()})),{config:e.config,state:n,updaterServer:a,handleUpdate:u,updateText:r,updateColor:i}}};const ye=(0,I.A)(_e,[["render",he],["__scopeId","data-v-a84aaa66"]]);var Fe=ye,Ve={components:{Groups:ae,Flow:ve,ServerVersion:Fe},props:["config"],setup(e){const t=(0,S.Kh)({show:!1,loading:!1});return{config:e.config,state:t}}};const $e=(0,I.A)(Ve,[["render",X],["__scopeId","data-v-1a3b5705"]]);var Se=$e;const xe={key:0,class:"status-export-wrap"},Le=["title"],Ee={class:"port-wrap"},Ae={class:"text"},We={class:"body"},Ue={class:"card-header"},Ie={class:"flex flex-nowrap"},Ne={style:{width:"11rem"}},Be={class:"flex flex-nowrap mgt-1"},Pe={style:{width:"11rem"}},Xe={class:"flex flex-nowrap mgt-1"},Te={style:{width:"11rem"}},De={class:"port-wrap"},Ge={class:"port-wrap"},je={style:{"margin-top":"1rem"}};function ze(e,t,o,n,s,r){const i=(0,l.g2)("Share"),u=(0,l.g2)("el-icon"),d=(0,l.g2)("PcShow"),c=(0,l.g2)("el-checkbox"),p=(0,l.g2)("el-col"),m=(0,l.g2)("el-input"),g=(0,l.g2)("el-row"),v=(0,l.g2)("Access"),f=(0,l.g2)("el-card"),k=(0,l.g2)("el-button"),w=(0,l.g2)("el-dialog"),h=(0,l.g2)("AccessShow"),b=(0,l.gN)("trim");return(0,l.uX)(),(0,l.Wv)(h,{value:"Export"},{default:(0,l.k6)((()=>[n.config?((0,l.uX)(),(0,l.CE)("div",xe,[(0,l.Lk)("a",{href:"javascript:;",title:e.$t("status.export"),onClick:t[0]||(t[0]=e=>n.state.show=!0)},[(0,l.bF)(u,{size:"16"},{default:(0,l.k6)((()=>[(0,l.bF)(i)])),_:1}),(0,l.bF)(d,null,{default:(0,l.k6)((()=>[(0,l.Lk)("span",null,(0,a.v_)(e.$t("status.export")),1)])),_:1})],8,Le),(0,l.bF)(w,{class:"options-center",title:e.$t("status.export"),"destroy-on-close":"",modelValue:n.state.show,"onUpdate:modelValue":t[12]||(t[12]=e=>n.state.show=e),center:"",width:"580",top:"1vh"},{footer:(0,l.k6)((()=>[(0,l.bF)(k,{plain:"",onClick:t[11]||(t[11]=e=>n.state.show=!1),loading:n.state.loading},{default:(0,l.k6)((()=>[(0,l.eW)((0,a.v_)(e.$t("common.cancel")),1)])),_:1},8,["loading"]),(0,l.bF)(k,{type:"default",plain:"",onClick:n.handleExport,loading:n.state.loading},{default:(0,l.k6)((()=>[(0,l.eW)((0,a.v_)(e.$t("status.exportDownload")),1)])),_:1},8,["onClick","loading"]),(0,l.bF)(k,{type:"info",plain:"",onClick:n.handleCopy,loading:n.state.loading},{default:(0,l.k6)((()=>[(0,l.eW)((0,a.v_)(e.$t("status.exportCopy")),1)])),_:1},8,["onClick","loading"]),(0,l.bF)(k,{type:"success",plain:"",onClick:n.handleSave,loading:n.state.loading},{default:(0,l.k6)((()=>[(0,l.eW)((0,a.v_)(e.$t("status.exportSave")),1)])),_:1},8,["onClick","loading"])])),default:(0,l.k6)((()=>[(0,l.Lk)("div",Ee,[(0,l.Lk)("div",Ae,(0,a.v_)(e.$t("status.exportText")),1),(0,l.Lk)("div",We,[(0,l.bF)(f,{shadow:"never"},{header:(0,l.k6)((()=>[(0,l.Lk)("div",Ue,[(0,l.Lk)("div",null,[(0,l.bF)(g,null,{default:(0,l.k6)((()=>[(0,l.bF)(p,{span:12},{default:(0,l.k6)((()=>[(0,l.bF)(c,{disabled:n.onlyNode,modelValue:n.state.single,"onUpdate:modelValue":t[1]||(t[1]=e=>n.state.single=e),label:e.$t("status.exportSingle")},null,8,["disabled","modelValue","label"])])),_:1}),(0,l.bF)(p,{span:12},{default:(0,l.k6)((()=>[(0,l.Lk)("div",Ie,[(0,l.Lk)("span",Ne,(0,a.v_)(e.$t("status.exportName"))+" : ",1),(0,l.bo)((0,l.bF)(m,{disabled:!n.state.single,modelValue:n.state.name,"onUpdate:modelValue":t[2]||(t[2]=e=>n.state.name=e),maxlength:"32","show-word-limit":""},null,8,["disabled","modelValue"]),[[b]])])])),_:1})])),_:1})]),(0,l.Lk)("div",null,[(0,l.bF)(g,null,{default:(0,l.k6)((()=>[(0,l.bF)(p,{span:12},{default:(0,l.k6)((()=>[(0,l.Lk)("div",Be,[(0,l.Lk)("span",Pe,(0,a.v_)(e.$t("status.exportWebport"))+" : ",1),(0,l.bo)((0,l.bF)(m,{disabled:n.onlyNode,modelValue:n.state.webport,"onUpdate:modelValue":t[3]||(t[3]=e=>n.state.webport=e)},null,8,["disabled","modelValue"]),[[b]])])])),_:1}),(0,l.bF)(p,{span:12},{default:(0,l.k6)((()=>[(0,l.Lk)("div",Xe,[(0,l.Lk)("span",Te,(0,a.v_)(e.$t("status.exportApiPassword"))+" : ",1),(0,l.bo)((0,l.bF)(m,{type:"password","show-password":"",disabled:n.onlyNode,modelValue:n.state.apipassword,"onUpdate:modelValue":t[4]||(t[4]=e=>n.state.apipassword=e),maxlength:"36","show-word-limit":""},null,8,["disabled","modelValue"]),[[b]])])])),_:1})])),_:1})]),(0,l.Lk)("div",null,[(0,l.bF)(g,null,{default:(0,l.k6)((()=>[(0,l.bF)(p,{xs:12,sm:8},{default:(0,l.k6)((()=>[(0,l.bF)(c,{modelValue:n.state.relay,"onUpdate:modelValue":t[5]||(t[5]=e=>n.state.relay=e),label:e.$t("status.exportRelay")},null,8,["modelValue","label"])])),_:1}),(0,l.bF)(p,{xs:12,sm:8},{default:(0,l.k6)((()=>[(0,l.bF)(c,{modelValue:n.state.updater,"onUpdate:modelValue":t[6]||(t[6]=e=>n.state.updater=e),label:e.$t("status.exportUpdater")},null,8,["modelValue","label"])])),_:1}),(0,l.bF)(p,{xs:12,sm:8},{default:(0,l.k6)((()=>[(0,l.bF)(c,{modelValue:n.state.group,"onUpdate:modelValue":t[7]||(t[7]=e=>n.state.group=e),label:e.$t("status.exportGroup")},null,8,["modelValue","label"])])),_:1}),(0,l.bF)(p,{xs:12,sm:8},{default:(0,l.k6)((()=>[(0,l.bF)(c,{modelValue:n.state.server,"onUpdate:modelValue":t[8]||(t[8]=e=>n.state.server=e),label:e.$t("status.exportServer")},null,8,["modelValue","label"])])),_:1}),(0,l.bF)(p,{xs:12,sm:8},{default:(0,l.k6)((()=>[(0,l.bF)(c,{modelValue:n.state.super,"onUpdate:modelValue":t[9]||(t[9]=e=>n.state.super=e),label:e.$t("status.exportSuper")},null,8,["modelValue","label"])])),_:1}),(0,l.bF)(p,{xs:12,sm:8},{default:(0,l.k6)((()=>[(0,l.bF)(c,{modelValue:n.state.tunnel,"onUpdate:modelValue":t[10]||(t[10]=e=>n.state.tunnel=e),label:e.$t("status.exportTunnel")},null,8,["modelValue","label"])])),_:1})])),_:1})])])])),default:(0,l.k6)((()=>[(0,l.bF)(v,{ref:"accessDom",machineid:n.machineId,height:30},null,8,["machineid"])])),_:1})])])])),_:1},8,["title","modelValue"]),(0,l.bF)(w,{class:"options-center",title:e.$t("status.export"),"destroy-on-close":"",modelValue:n.state.showCopy,"onUpdate:modelValue":t[14]||(t[14]=e=>n.state.showCopy=e),center:"",width:"580",top:"1vh"},{footer:(0,l.k6)((()=>[(0,l.bF)(k,{plain:"",onClick:n.copyToClipboard},{default:(0,l.k6)((()=>[(0,l.eW)((0,a.v_)(e.$t("status.exportCopy")),1)])),_:1},8,["onClick"])])),default:(0,l.k6)((()=>[(0,l.Lk)("div",De,[(0,l.bo)((0,l.bF)(m,{modelValue:n.state.copyContent,"onUpdate:modelValue":t[13]||(t[13]=e=>n.state.copyContent=e),type:"textarea",rows:10,resize:"none",readonly:""},null,8,["modelValue"]),[[b]])])])),_:1},8,["title","modelValue"]),(0,l.bF)(w,{class:"options-center",title:e.$t("status.export"),"destroy-on-close":"",modelValue:n.state.showSave,"onUpdate:modelValue":t[17]||(t[17]=e=>n.state.showSave=e),center:"",width:"300",top:"1vh"},{footer:(0,l.k6)((()=>[(0,l.bF)(k,{plain:"",onClick:n.copySaveToClipboard},{default:(0,l.k6)((()=>[(0,l.eW)((0,a.v_)(e.$t("status.exportCopy")),1)])),_:1},8,["onClick"])])),default:(0,l.k6)((()=>[(0,l.Lk)("div",Ge,[(0,l.Lk)("div",null,[(0,l.bo)((0,l.bF)(m,{modelValue:n.state.saveServer,"onUpdate:modelValue":t[15]||(t[15]=e=>n.state.saveServer=e),readonly:""},null,8,["modelValue"]),[[b]])]),(0,l.Lk)("div",je,[(0,l.bo)((0,l.bF)(m,{modelValue:n.state.saveContent,"onUpdate:modelValue":t[16]||(t[16]=e=>n.state.saveContent=e),readonly:""},null,8,["modelValue"]),[[b]])])])])),_:1},8,["title","modelValue"])])):(0,l.Q3)("",!0)])),_:1})}var Ke=o(8835),Oe=o(7586),Re={components:{Share:W.SYj,Access:Oe.A},props:["config"],setup(e){const{t:t}=(0,j.s9)(),o=(0,E.B)(),a=(0,l.EW)((()=>o.value.config.Client.OnlyNode)),n=(0,l.EW)((()=>o.value.config.Client.Id)),s=(0,S.Kh)({show:!1,loading:!1,single:!0,name:"",apipassword:a.value?o.value.config.Client.CApi.ApiPassword:"",webport:o.value.config.Client.CApi.WebPort,relay:!0,updater:!0,server:!0,super:!1,group:!0,tunnel:!0,copyContent:"",showCopy:!1,saveServer:o.value.config.Client.Server.Host,saveContent:"",showSave:!1}),r=(0,S.KR)(null),i=()=>{const e=r.value.getValue(),o={access:e[0],fullAccess:e[1],single:s.single,name:s.name,apipassword:s.apipassword,webport:+s.webport,relay:s.relay,updater:s.updater,server:s.server,super:s.super,group:s.group,tunnel:s.tunnel};if(o.single){if(!o.name)return void G.nk.error(t("status.exportNamePlease"))}else o.name="";if(o.apipassword){if(!(!o.webport||isNaN(o.webport)||o.webport<=0||o.webport>65535))return o;G.nk.error(t("status.exportWebportPlease"))}else G.nk.error(t("status.exportApiPasswordPlease"))},u=()=>{const e=document.createElement("a");s.single?e.download=`client-node-export-${s.name}.zip`:e.download="client-node-export.zip",e.href="/client-node-export.zip",document.body.appendChild(e),e.click(),document.body.removeChild(e)},d=()=>{const e=i();e&&(s.loading=!0,(0,Ke.ql)(e).then((e=>{s.loading=!1,e?(s.show=!1,G.nk.success(t("common.oper")),s.saveContent=e,s.showSave=!0):G.nk.error(t("common.operFail"))})).catch((()=>{G.nk.error(t("common.operFail")),s.loading=!1})))},c=async()=>{try{return await navigator.clipboard.writeText(`在初始化linker客户端时，填写服务器和密钥，导入配置\n服务器: ${s.saveServer}\n密钥: ${s.saveContent}`),G.nk.success(t("common.oper")),!0}catch(e){return G.nk.error(t("common.operFail")),!1}},p=()=>{const e=i();e&&(s.loading=!0,(0,Ke.P$)(e).then((()=>{s.loading=!1,s.show=!1,G.nk.success(t("common.oper")),u()})).catch((()=>{G.nk.error(t("common.operFail")),s.loading=!1})))},m=()=>{const e=i();e&&(s.loading=!0,(0,Ke.om)(e).then((e=>{s.loading=!1,s.show=!1,G.nk.success(t("common.oper")),s.copyContent=e,s.showCopy=!0})).catch((()=>{G.nk.error(t("common.operFail")),s.loading=!1})))},g=async()=>{try{return await navigator.clipboard.writeText(s.copyContent),G.nk.success(t("common.oper")),!0}catch(e){return G.nk.error(t("common.operFail")),!1}};return{globalData:o,config:e.config,onlyNode:a,machineId:n,state:s,accessDom:r,handleSave:d,handleExport:p,handleCopy:m,copyToClipboard:g,copySaveToClipboard:c}}};const Qe=(0,I.A)(Re,[["render",ze],["__scopeId","data-v-4d695ac4"]]);var Ye=Qe,qe=o(749),Ze={components:{Api:B,Server:Se,Export:Ye,UpdaterBtn:qe.A},props:["config"],setup(e){const t=(0,E.B)(),o=(0,l.EW)((()=>t.value.self)),a=(0,S.Kh)({showPay:!1});return{state:a,config:e.config,self:o}}};const He=(0,I.A)(Ze,[["render",$],["__scopeId","data-v-1dfd2a68"]]);var Je=He},8442:function(e,t,o){o.d(t,{A:function(){return m}});var l=o(6768);const a=e=>((0,l.Qi)("data-v-4bce2848"),e=e(),(0,l.jt)(),e),n={class:"image"},s=a((()=>(0,l.Lk)("input",{type:"file",id:"file-input"},null,-1)));function r(e,t,o,a,r,i){const u=(0,l.g2)("PictureRounded"),d=(0,l.g2)("el-icon"),c=(0,l.g2)("PcShow");return(0,l.uX)(),(0,l.Wv)(c,null,{default:(0,l.k6)((()=>[(0,l.Lk)("div",n,[(0,l.Lk)("a",{href:"javascript:;",onClick:t[0]||(t[0]=(...e)=>a.handleBg&&a.handleBg(...e))},[(0,l.bF)(d,null,{default:(0,l.k6)((()=>[(0,l.bF)(u)])),_:1})]),s])])),_:1})}var i=o(7477),u=o(2933),d={components:{PictureRounded:i.syp},props:["name"],setup(e){const t=`bg-${e.name}`,o=()=>{localStorage.getItem(t)?u.s.confirm("清除背景？","Warning",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{n()})).catch((()=>{})):document.getElementById("file-input").click()},a=e=>{const t=e.target.files[0];if(t)try{const e=new FileReader;e.onload=function(e){n(e.target.result)},e.readAsDataURL(t)}catch(o){}e.target.value=""},n=e=>{e?(document.body.className="sunny",localStorage.setItem(t,e),document.body.style=`background-image:url(${e})`):(document.body.className="",document.body.style="",localStorage.setItem(t,""))};return(0,l.sV)((()=>{const e=document.getElementById("file-input");e&&e.addEventListener("change",a),n(localStorage.getItem(t))})),{handleBg:o}}},c=o(1241);const p=(0,c.A)(d,[["render",r],["__scopeId","data-v-4bce2848"]]);var m=p}}]);