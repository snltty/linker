"use strict";(self["webpackChunklinker_web"]=self["webpackChunklinker_web"]||[]).push([[767],{6271:function(e,l,a){a.d(l,{A:function(){return b}});var t=a(6768),o=a(4232);const n={class:"flex"},r={class:"flex-1"},s={class:"t-c"};function d(e,l,a,d,u,i){const c=(0,t.g2)("Sync"),m=(0,t.g2)("el-input"),h=(0,t.g2)("el-button"),p=(0,t.g2)("el-card"),k=(0,t.gN)("trim");return(0,t.uX)(),(0,t.Wv)(p,{shadow:"never"},{header:(0,t.k6)((()=>[(0,t.Lk)("div",n,[(0,t.Lk)("span",r,(0,o.v_)(e.$t("action.text")),1),d.state.isSelf?((0,t.uX)(),(0,t.Wv)(c,{key:0,name:"ActionStatic"})):(0,t.Q3)("",!0)])])),footer:(0,t.k6)((()=>[(0,t.Lk)("div",s,[(0,t.bF)(h,{type:"success",onClick:d.handleSave},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.$t("common.confirm")),1)])),_:1},8,["onClick"])])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bo)((0,t.bF)(m,{modelValue:d.state.data,"onUpdate:modelValue":l[0]||(l[0]=e=>d.state.data=e),rows:10,type:"textarea",resize:"none",onChange:d.handleSave},null,8,["modelValue","onChange"]),[[k]])])])),_:1})}var u=a(4);const i=e=>(0,u.zG)("action/GetServerArgs",e),c=e=>(0,u.zG)("action/SetServerArgs",e);var m=a(3830),h=a(1219),p=a(144),k=a(5931),v=a(2322),g={props:["machineId"],components:{Sync:v.A},setup(e){const{t:l}=(0,k.s9)(),a=(0,m.B)(),o=(0,p.Kh)({data:"",machineId:e.machineId||a.value.config.Client.Id,isSelf:(0,t.EW)((()=>o.machineId==a.value.config.Client.Id))}),n=()=>{i(o.machineId).then((e=>{o.data=e}))},r=()=>{try{if(o.data&&"object"!=typeof JSON.parse(o.data))return void h.nk.error(l("action.jsonError"))}catch(e){return void h.nk.error(l("action.jsonError"))}c({Key:o.machineId,Value:o.data}).then((()=>{h.nk.success(l("common.oper"))})).catch((e=>{console.log(e),h.nk.error(l("common.operFail"))}))};return(0,t.sV)((()=>{n()})),{state:o,handleSave:r}}},w=a(1241);const f=(0,w.A)(g,[["render",d]]);var b=f},3391:function(e,l,a){a.d(l,{A:function(){return w}});var t=a(6768),o=a(4232);const n={class:"flex"},r=(0,t.Lk)("span",{class:"flex-1"},null,-1);function s(e,l,a,s,d,u){const i=(0,t.g2)("el-table-column"),c=(0,t.g2)("el-option"),m=(0,t.g2)("el-select"),h=(0,t.g2)("el-switch"),p=(0,t.g2)("Sync"),k=(0,t.g2)("el-input-number"),v=(0,t.g2)("el-table");return(0,t.uX)(),(0,t.Wv)(v,{stripe:"",data:s.state.list,border:"",size:"small",width:"100%",height:`${s.state.height}px`},{default:(0,t.k6)((()=>[(0,t.bF)(i,{prop:"Name",label:e.$t("status.tunnelName"),width:"120"},null,8,["label"]),(0,t.bF)(i,{prop:"Label",label:e.$t("status.tunnelLabel")},null,8,["label"]),(0,t.bF)(i,{prop:"ProtocolType",label:e.$t("status.tunnelProtocol"),width:"60"},null,8,["label"]),(0,t.bF)(i,{prop:"BufferSize",label:e.$t("status.tunnelBuffer"),width:"100"},{default:(0,t.k6)((e=>[(0,t.bF)(m,{modelValue:e.row.BufferSize,"onUpdate:modelValue":l=>e.row.BufferSize=l,placeholder:"Select",size:"small",onChange:s.handleSave},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(s.state.bufferSize,((e,l)=>((0,t.uX)(),(0,t.Wv)(c,{key:l,label:e,value:l},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])),_:1},8,["label"]),(0,t.bF)(i,{property:"Reverse",label:e.$t("status.tunnelReverse"),width:"64"},{default:(0,t.k6)((l=>[(0,t.bF)(h,{disabled:l.row.DisableReverse,modelValue:l.row.Reverse,"onUpdate:modelValue":e=>l.row.Reverse=e,onChange:s.handleSave,"inline-prompt":"","active-text":e.$t("status.tunnelYes"),"inactive-text":e.$t("status.tunnelNo")},null,8,["disabled","modelValue","onUpdate:modelValue","onChange","active-text","inactive-text"])])),_:1},8,["label"]),(0,t.bF)(i,{property:"SSL",label:e.$t("status.tunnelSSL"),width:"60"},{default:(0,t.k6)((l=>[(0,t.bF)(h,{disabled:l.row.DisableSSL,modelValue:l.row.SSL,"onUpdate:modelValue":e=>l.row.SSL=e,onChange:s.handleSave,"inline-prompt":"","active-text":e.$t("status.tunnelYes"),"inactive-text":e.$t("status.tunnelNo")},null,8,["disabled","modelValue","onUpdate:modelValue","onChange","active-text","inactive-text"])])),_:1},8,["label"]),(0,t.bF)(i,{property:"Disabled",label:e.$t("status.tunnelDisanbled"),width:"64"},{default:(0,t.k6)((l=>[(0,t.bF)(h,{modelValue:l.row.Disabled,"onUpdate:modelValue":e=>l.row.Disabled=e,onChange:s.handleSave,"inline-prompt":"","active-text":e.$t("status.tunnelYes"),"inactive-text":e.$t("status.tunnelNo"),style:{"--el-switch-on-color":"red","--el-switch-off-color":"#ddd"}},null,8,["modelValue","onUpdate:modelValue","onChange","active-text","inactive-text"])])),_:1},8,["label"]),(0,t.bF)(i,{prop:"Order",label:e.$t("status.tunnelSort"),width:"104",fixed:"right"},{header:(0,t.k6)((()=>[(0,t.Lk)("div",n,[(0,t.Lk)("strong",null,(0,o.v_)(e.$t("status.tunnelSort")),1),r,s.state.isSelf?((0,t.uX)(),(0,t.Wv)(p,{key:0,name:"TunnelTransports"})):(0,t.Q3)("",!0)])])),default:(0,t.k6)((e=>[(0,t.Lk)("div",null,[(0,t.bF)(k,{modelValue:e.row.Order,"onUpdate:modelValue":l=>e.row.Order=l,min:1,max:255,onChange:s.handleOrderChange,size:"small"},null,8,["modelValue","onUpdate:modelValue","onChange"])])])),_:1},8,["label"])])),_:1},8,["data","height"])}var d=a(83),u=a(3830),i=a(1219),c=a(144),m=a(7477),h=a(5931),p=a(2322),k={props:["machineId","height"],components:{Delete:m.epd,Plus:m.FWt,Top:m.EjV,Bottom:m.i5o,Sync:p.A},setup(e){const{t:l}=(0,h.s9)(),a=(0,u.B)(),o=(0,c.Kh)({list:[],height:(0,t.EW)((()=>e.height)),bufferSize:a.value.bufferSize,machineid:e.machineId||a.value.config.Client.Id,isSelf:(0,t.EW)((()=>o.machineid===a.value.config.Client.Id))}),n=()=>{(0,d.xT)(o.machineid).then((e=>{o.list=e.sort(((e,l)=>e.Order-l.Order))}))},r=()=>{s(o.list)},s=()=>{o.list=o.list.slice().sort(((e,l)=>e.Order-l.Order)),(0,d.$M)({machineid:o.machineid,data:o.list}).then((()=>{i.nk.success(l("common.oper"))})).catch((e=>{console.log(e),i.nk.error(l("common.operFail"))}))};return(0,t.sV)((()=>{n()})),{state:o,handleOrderChange:r,handleSave:s}}},v=a(1241);const g=(0,v.A)(k,[["render",s]]);var w=g},1329:function(e,l,a){a.r(l),a.d(l,{default:function(){return As}});var t=a(6768),o=a(4232);const n={class:"home-list-wrap absolute"},r={class:"page-wrap"};function s(e,l,a,s,d,u){const i=(0,t.g2)("Sort"),c=(0,t.g2)("Device"),m=(0,t.g2)("Tunnel"),h=(0,t.g2)("Tuntap"),p=(0,t.g2)("Socks5"),k=(0,t.g2)("Forward"),v=(0,t.g2)("Oper"),g=(0,t.g2)("el-table"),w=(0,t.g2)("el-pagination"),f=(0,t.g2)("DeviceEdit"),b=(0,t.g2)("AccessEdit"),C=(0,t.g2)("TunnelEdit"),F=(0,t.g2)("ConnectionsEdit"),_=(0,t.g2)("TuntapEdit"),y=(0,t.g2)("TuntapLease"),V=(0,t.g2)("Socks5Edit"),E=(0,t.g2)("ForwardEdit"),L=(0,t.g2)("SForwardEdit"),I=(0,t.g2)("UpdaterConfirm"),P=(0,t.g2)("OperFirewall"),S=(0,t.g2)("OperWakeup"),W=(0,t.g2)("OperTransport"),X=(0,t.g2)("OperAction"),T=(0,t.g2)("Stopwatch"),A=(0,t.g2)("OperFlow"),N=(0,t.g2)("OperWlist");return(0,t.uX)(),(0,t.CE)("div",n,[(0,t.bF)(i,{onSort:s.handleSortChange},null,8,["onSort"]),(0,t.bF)(g,{data:s.devices.page.List,stripe:"",border:"",style:{width:"100%"},height:s.state.height,size:"small"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{onRefresh:s.handlePageRefresh},null,8,["onRefresh"]),(0,t.bF)(m,{onRefresh:l[0]||(l[0]=e=>s.deviceRefreshHook("tunnel"))}),(0,t.bF)(h),(0,t.bF)(p,{onRefresh:l[1]||(l[1]=e=>s.deviceRefreshHook("socks5"))}),(0,t.bF)(k),(0,t.bF)(v,{onRefresh:s.handlePageRefresh},null,8,["onRefresh"])])),_:1},8,["data","height"]),(0,t.Lk)("div",{class:(0,o.C4)(["page",{"t-c":s.state.center}])},[(0,t.Lk)("div",r,[(0,t.bF)(w,{small:"",background:"",total:s.devices.page.Count,"pager-count":s.state.paperCount,layout:s.state.paperLayout,"page-size":s.devices.page.Request.Size,"current-page":s.devices.page.Request.Page,onCurrentChange:s.handlePageChange,onSizeChange:s.handlePageSizeChange,"page-sizes":[10,20,50,100,255]},null,8,["total","pager-count","layout","page-size","current-page","onCurrentChange","onSizeChange"])])],2),s.devices.showDeviceEdit?((0,t.uX)(),(0,t.Wv)(f,{key:0,modelValue:s.devices.showDeviceEdit,"onUpdate:modelValue":l[2]||(l[2]=e=>s.devices.showDeviceEdit=e),onChange:s.handlePageChange,data:s.devices.deviceInfo},null,8,["modelValue","onChange","data"])):(0,t.Q3)("",!0),s.devices.showAccessEdit?((0,t.uX)(),(0,t.Wv)(b,{key:1,modelValue:s.devices.showAccessEdit,"onUpdate:modelValue":l[3]||(l[3]=e=>s.devices.showAccessEdit=e),onChange:s.handlePageChange,data:s.devices.deviceInfo},null,8,["modelValue","onChange","data"])):(0,t.Q3)("",!0),s.tunnel.showEdit?((0,t.uX)(),(0,t.Wv)(C,{key:2,modelValue:s.tunnel.showEdit,"onUpdate:modelValue":l[4]||(l[4]=e=>s.tunnel.showEdit=e),onChange:l[5]||(l[5]=e=>s.deviceRefreshHook("tunnel"))},null,8,["modelValue"])):(0,t.Q3)("",!0),s.connections.showEdit?((0,t.uX)(),(0,t.Wv)(F,{key:3,modelValue:s.connections.showEdit,"onUpdate:modelValue":l[6]||(l[6]=e=>s.connections.showEdit=e)},null,8,["modelValue"])):(0,t.Q3)("",!0),s.tuntap.showEdit?((0,t.uX)(),(0,t.Wv)(_,{key:4,modelValue:s.tuntap.showEdit,"onUpdate:modelValue":l[7]||(l[7]=e=>s.tuntap.showEdit=e),onChange:l[8]||(l[8]=e=>s.deviceRefreshHook("tuntap"))},null,8,["modelValue"])):(0,t.Q3)("",!0),s.tuntap.showLease?((0,t.uX)(),(0,t.Wv)(y,{key:5,modelValue:s.tuntap.showLease,"onUpdate:modelValue":l[9]||(l[9]=e=>s.tuntap.showLease=e),onChange:l[10]||(l[10]=e=>s.deviceRefreshHook("tuntap"))},null,8,["modelValue"])):(0,t.Q3)("",!0),s.socks5.showEdit?((0,t.uX)(),(0,t.Wv)(V,{key:6,modelValue:s.socks5.showEdit,"onUpdate:modelValue":l[11]||(l[11]=e=>s.socks5.showEdit=e),onChange:l[12]||(l[12]=e=>s.deviceRefreshHook("socks5"))},null,8,["modelValue"])):(0,t.Q3)("",!0),s.forward.showEdit?((0,t.uX)(),(0,t.Wv)(E,{key:7,modelValue:s.forward.showEdit,"onUpdate:modelValue":l[13]||(l[13]=e=>s.forward.showEdit=e)},null,8,["modelValue"])):(0,t.Q3)("",!0),s.sforward.showEdit?((0,t.uX)(),(0,t.Wv)(L,{key:8,modelValue:s.sforward.showEdit,"onUpdate:modelValue":l[14]||(l[14]=e=>s.sforward.showEdit=e)},null,8,["modelValue"])):(0,t.Q3)("",!0),s.updater.show?((0,t.uX)(),(0,t.Wv)(I,{key:9,modelValue:s.updater.show,"onUpdate:modelValue":l[15]||(l[15]=e=>s.updater.show=e)},null,8,["modelValue"])):(0,t.Q3)("",!0),s.firewall.show?((0,t.uX)(),(0,t.Wv)(P,{key:10,modelValue:s.firewall.show,"onUpdate:modelValue":l[16]||(l[16]=e=>s.firewall.show=e)},null,8,["modelValue"])):(0,t.Q3)("",!0),s.wakeup.show?((0,t.uX)(),(0,t.Wv)(S,{key:11,modelValue:s.wakeup.show,"onUpdate:modelValue":l[17]||(l[17]=e=>s.wakeup.show=e)},null,8,["modelValue"])):(0,t.Q3)("",!0),s.transport.show?((0,t.uX)(),(0,t.Wv)(W,{key:12,modelValue:s.transport.show,"onUpdate:modelValue":l[18]||(l[18]=e=>s.transport.show=e)},null,8,["modelValue"])):(0,t.Q3)("",!0),s.action.show?((0,t.uX)(),(0,t.Wv)(X,{key:13,modelValue:s.action.show,"onUpdate:modelValue":l[19]||(l[19]=e=>s.action.show=e)},null,8,["modelValue"])):(0,t.Q3)("",!0),s.flow.showStopwatch?((0,t.uX)(),(0,t.Wv)(T,{key:14,modelValue:s.flow.showStopwatch,"onUpdate:modelValue":l[20]||(l[20]=e=>s.flow.showStopwatch=e)},null,8,["modelValue"])):(0,t.Q3)("",!0),s.flow.show?((0,t.uX)(),(0,t.Wv)(A,{key:15,modelValue:s.flow.show,"onUpdate:modelValue":l[21]||(l[21]=e=>s.flow.show=e)},null,8,["modelValue"])):(0,t.Q3)("",!0),s.wlist.show?((0,t.uX)(),(0,t.Wv)(N,{key:16,modelValue:s.wlist.show,"onUpdate:modelValue":l[22]||(l[22]=e=>s.wlist.show=e),onChange:l[23]||(l[23]=e=>s.deviceRefreshHook("wlist"))},null,8,["modelValue"])):(0,t.Q3)("",!0)])}a(4114);var d=a(3830),u=a(144);function i(e,l,a,o,n,r){const s=(0,t.g2)("el-table-column"),d=(0,t.g2)("el-table");return(0,t.uX)(),(0,t.Wv)(d,{border:"",style:{width:"100%"},height:"32px",size:"small",onSortChange:o.handleSortChange,class:"table-sort"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{prop:"MachineId",label:e.$t("home.device"),width:"90",sortable:"custom"},null,8,["label"]),(0,t.bF)(s,{prop:"Version",label:e.$t("home.version"),width:"90",sortable:"custom"},null,8,["label"]),(0,t.bF)(s,{prop:"tunnel",label:e.$t("home.tunnel"),width:"86",sortable:"custom"},null,8,["label"]),(0,t.bF)(s,{prop:"tuntap",label:e.$t("home.tuntapIP"),width:"160",sortable:"custom"},null,8,["label"]),(0,t.bF)(s,{prop:"socks5",label:e.$t("home.proxy"),width:"160",sortable:"custom"},null,8,["label"]),(0,t.bF)(s,{label:"...",fixed:"right","min-width":"110"},{header:(0,t.k6)((()=>[])),_:1})])),_:1},8,["onSortChange"])}const c=Symbol(),m=()=>{const e=(0,u.KR)({show:!0,showEdit:!1,machineId:null});return(0,t.Gt)(c,e),{forward:e}},h=()=>(0,t.WQ)(c);var p=a(4);const k=(e="0")=>(0,p.zG)("socks5/get",e),v=e=>(0,p.zG)("socks5/run",e),g=e=>(0,p.zG)("socks5/stop",e),w=e=>(0,p.zG)("socks5/update",e),f=()=>(0,p.zG)("socks5/refresh"),b=Symbol(),C=()=>{const e=(0,u.KR)({show:!0,timer:0,showEdit:!1,current:null,list:null,hashcode:0});(0,t.Gt)(b,e);const l=()=>new Promise(((l,a)=>{k(e.value.hashcode.toString()).then((a=>{if(e.value.hashcode=a.HashCode,a.List){for(let e in a.List)Object.assign(a.List[e],{running:2==a.List[e].Status,loading:1==a.List[e].Status});return e.value.list=a.List,void l(!0)}l(!1)})).catch((e=>{l(!1)}))})),a=(l,a)=>{e.value.list&&Object.assign(a,{hook_socks5:e.value.list[l.MachineId]||"",hook_socks5_load:!0})},o=()=>{f()},n=l=>Object.values(e.value.list).filter((e=>e.Port.toString().indexOf(l)>=0||e.Lans.filter((e=>e.IP.indexOf(l)>=0)).length>0)).map((e=>e.MachineId)),r=l=>{const a=Object.values(e.value.list).sort(((e,l)=>e.Port-l.Port));return a.map((e=>e.MachineId))};return{socks5:e,socks5DataFn:l,socks5ProcessFn:a,socks5RefreshFn:o,getSocks5Machines:n,sortSocks5:r}},F=()=>(0,t.WQ)(b);var _=a(5234),y=a(7477),V={emits:["sort"],components:{ArrowDownBold:y.$bU},setup(e,{emit:l}){const a=(0,_.W)();a.value.show="false"!=localStorage.getItem("tuntap.show");const t=F();t.value.show="false"!=localStorage.getItem("socks5.show");const o=h();o.value.show="false"!=localStorage.getItem("forward.show");const n=e=>{l("sort",e)},r=()=>{localStorage.setItem("tuntap.show",a.value.show)},s=()=>{localStorage.setItem("socks5.show",t.value.show)},d=()=>{localStorage.setItem("forward.show",o.value.show)};return{tuntap:a,socks5:t,forward:o,handleSortChange:n,handleTuntapShow:r,handleSocks5Show:s,handleForwardShow:d}}},E=a(1241);const L=(0,E.A)(V,[["render",i],["__scopeId","data-v-1bc7a535"]]);var I=L;const P=e=>((0,t.Qi)("data-v-16451cba"),e=e(),(0,t.jt)(),e),S={class:"flex"},W={class:"flex-1"},X={class:"flex"},T={key:1},A={class:"flex"},N=P((()=>(0,t.Lk)("span",{class:"flex-1"},null,-1))),M=P((()=>(0,t.Lk)("div",{class:"device-remark"},null,-1)));function x(e,l,a,n,r,s){const d=(0,t.g2)("el-input"),u=(0,t.g2)("DeviceName"),i=(0,t.g2)("SystemInfo"),c=(0,t.g2)("WlistShow"),m=(0,t.g2)("UpdaterBtn"),h=(0,t.g2)("el-skeleton-item"),p=(0,t.g2)("el-skeleton"),k=(0,t.g2)("el-table-column"),v=(0,t.gN)("trim");return(0,t.uX)(),(0,t.Wv)(k,{prop:"MachineId",label:e.$t("home.device"),width:"180"},{header:(0,t.k6)((()=>[(0,t.Lk)("div",S,[(0,t.Lk)("span",null,(0,o.v_)(e.$t("home.device")),1),(0,t.Lk)("span",W,[(0,t.bo)((0,t.bF)(d,{size:"small",modelValue:n.name,"onUpdate:modelValue":l[0]||(l[0]=e=>n.name=e),clearable:"",onInput:n.handleRefresh,class:"w-100"},null,8,["modelValue","onInput"]),[[v]])])])])),default:(0,t.k6)((e=>[e.row?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[(0,t.Lk)("p",null,[(0,t.bF)(u,{config:!0,item:e.row},null,8,["item"])]),(0,t.Lk)("p",X,[e.row.Connected?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[(0,t.bF)(i,{item:e.row},null,8,["item"]),(0,t.bF)(c,{type:"Relay",item:e.row},null,8,["item"]),(0,t.bF)(m,{config:!0,item:e.row},null,8,["item"])],64)):e.row.LastSignIn?((0,t.uX)(),(0,t.CE)("span",T,(0,o.v_)(e.row.LastSignIn)+"-"+(0,o.v_)(e.row.Version),1)):((0,t.uX)(),(0,t.Wv)(p,{key:2,animated:""},{template:(0,t.k6)((()=>[(0,t.Lk)("div",A,[(0,t.bF)(h,{variant:"text",class:"el-skeleton-item"}),(0,t.bF)(h,{variant:"text",class:"el-skeleton-item"}),N,(0,t.bF)(h,{variant:"text",class:"el-skeleton-item"})])])),_:1}))])],64)):(0,t.Q3)("",!0),M])),_:1},8,["label"])}var R=a(6777),$=a(6641);const U=["title"],B=["src"],D={key:1,class:"flex-1 relative skeleton-animation"},z={key:2,class:"flex-1"};function O(e,l,a,n,r,s){const d=(0,t.g2)("el-skeleton-item"),u=(0,t.g2)("el-skeleton");return a.item.hook_tuntap&&a.item.hook_tuntap.systems?((0,t.uX)(),(0,t.CE)("div",{key:0,class:"flex-1 relative skeleton-animation",style:(0,o.Tr)(`animation-delay:${a.item.animationDelay}ms`)},[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(a.item.hook_tuntap.systems,(e=>((0,t.uX)(),(0,t.CE)("span",{title:a.item.hook_tuntap.SystemInfo},[(0,t.Lk)("img",{src:`./${e}.svg`},null,8,B)],8,U)))),256))],4)):a.item.hook_tuntap_load?((0,t.uX)(),(0,t.CE)("div",z)):((0,t.uX)(),(0,t.CE)("div",D,[(0,t.bF)(u,{animated:""},{template:(0,t.k6)((()=>[(0,t.bF)(d,{variant:"text",class:"el-skeleton-item"}),(0,t.bF)(d,{variant:"text",class:"el-skeleton-item"}),(0,t.bF)(d,{variant:"text",class:"el-skeleton-item"})])),_:1})]))}var Q={props:["item"],setup(){return{}}};const j=(0,E.A)(Q,[["render",O],["__scopeId","data-v-4a4e8e1e"]]);var K=j;const G={key:0},H=["title"],q=["src"];function J(e,l,a,o,n,r){return a.item.MachineId?((0,t.uX)(),(0,t.CE)("span",G,[(0,t.Lk)("a",{href:"javascript:;",title:o.wlist.title,onClick:l[0]||(l[0]=(...e)=>o.handleWlist&&o.handleWlist(...e))},[(0,t.Lk)("img",{src:o.wlist.img},null,8,q)],8,H)])):(0,t.Q3)("",!0)}var Z=a(5316);const Y=Symbol(),ee=()=>{const e=(0,u.KR)({device:{id:"",name:"",type:"",typeText:""},show:!1,list:null});(0,t.Gt)(Y,e);const l=l=>new Promise(((a,t)=>{null===e.value.list?(0,Z.Im)({Key:"Relay",Value:l.map((e=>e.MachineId))}).then((l=>{e.value.list=l,a(!0)})).catch((()=>{a(!1)})):a(!1)})),a=()=>{e.value.list=null},o=(l,a)=>{e.value.list&&Object.assign(a,{hook_wlist:e.value.list[`m_${l.MachineId}`]||e.value.list[`u_${l.Args.userid}`]||{},hook_wlist_load:!0})};return{wlist:e,wlistDataFn:l,wlistProcessFn:o,wlistRefreshFn:a}},le=()=>(0,t.WQ)(Y);var ae={props:["item","type"],setup(e){const l=le(),a={Relay:"‰∏≠Áªß",SForward:"Á©øÈÄè"}[e.type],o=e=>{const l=Object.keys(e).reduce(((l,a)=>(l.push({id:a,value:e[a]}),l)),[]),t=l.filter((e=>e.value<=0)),o=t.length>0?t.sort(((e,l)=>e.value-l.value))[0]:l.sort(((e,l)=>l.value-e.value))[0];return{id:o.id,value:o.value,title:o.value<0?`ÊãíÁªù${a}`:0==o.value?`ÂÖÅËÆ∏Êó†ÈôêÈÄü${a}`:`ÂÖÅËÆ∏${o.value}MbpsÈôêÈÄü${a}`,img:o.value<0?"blist.svg":"wlist.svg"}},n=(0,t.EW)((()=>void 0===e.item.hook_wlist||0==Object.keys(e.item.hook_wlist).length?{id:0,value:0,title:`Êó†${a}ÈôêÂà∂ÈÖçÁΩÆ`,img:"wlist-none.svg"}:o(e.item.hook_wlist))),r=()=>{e.item.MachineId&&(l.value.device.id=e.item.MachineId,l.value.device.name=e.item.MachineName,l.value.device.type=e.type,l.value.device.typeText=a,l.value.show=!0)};return{wlist:n,handleWlist:r}}};const te=(0,E.A)(ae,[["render",J],["__scopeId","data-v-bc8c0332"]]);var oe=te,ne={emits:["refresh"],components:{Search:y.vji,UpdaterBtn:R.A,DeviceName:$.A,SystemInfo:K,WlistShow:oe},setup(e,{emit:l}){const a=(0,u.KR)(sessionStorage.getItem("search-name")||""),t=()=>{sessionStorage.setItem("search-name",a.value),l("refresh",a.value)};return{name:a,handleRefresh:t}}};const re=(0,E.A)(ne,[["render",x],["__scopeId","data-v-16451cba"]]);var se=re;const de=(0,t.Lk)("div",null,"‰øÆÊîπÂêéÊúÄÂ•ΩËÉΩÈáçÂêØ‰∏ÄÊ¨°ÂÆ¢Êà∑Á´Ø",-1),ue={class:"t-c w-100"};function ie(e,l,a,o,n,r){const s=(0,t.g2)("el-form-item"),d=(0,t.g2)("el-input"),u=(0,t.g2)("el-button"),i=(0,t.g2)("el-form"),c=(0,t.g2)("el-dialog"),m=(0,t.gN)("trim");return(0,t.uX)(),(0,t.Wv)(c,{modelValue:o.state.show,"onUpdate:modelValue":l[2]||(l[2]=e=>o.state.show=e),"close-on-click-modal":!1,"append-to":".app-wrap",title:`ËÆæÁΩÆ[${o.state.ruleForm.MachineName}]ËÆæÂ§á`,width:"360"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(i,{ref:"ruleFormRef",model:o.state.ruleForm,rules:o.state.rules,"label-width":"auto"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{label:""},{default:(0,t.k6)((()=>[de])),_:1}),(0,t.bF)(s,{label:"ËÆæÂ§áÂêç",prop:"MachineName"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(d,{maxlength:"32","show-word-limit":"",modelValue:o.state.ruleForm.MachineName,"onUpdate:modelValue":l[0]||(l[0]=e=>o.state.ruleForm.MachineName=e)},null,8,["modelValue"]),[[m]])])),_:1}),(0,t.bF)(s,{label:"",prop:"Btns"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",ue,[(0,t.bF)(u,{onClick:l[1]||(l[1]=e=>o.state.show=!1)},{default:(0,t.k6)((()=>[(0,t.eW)("ÂèñÊ∂à")])),_:1}),(0,t.bF)(u,{type:"primary",onClick:o.handleSave},{default:(0,t.k6)((()=>[(0,t.eW)("Á°ÆËÆ§")])),_:1},8,["onClick"])])])),_:1})])),_:1},8,["model","rules"])])])),_:1},8,["modelValue","title"])}var ce=a(9299),me=a(1219),he={props:["data","modelValue"],emits:["change","update:modelValue"],setup(e,{emit:l}){const a=(0,u.KR)(null),o=(0,u.Kh)({show:!0,ruleForm:{MachineName1:e.data.MachineName,MachineName:e.data.MachineName},rules:{}});(0,t.wB)((()=>o.show),(e=>{e||setTimeout((()=>{l("update:modelValue",e)}),300)}));const n=()=>{e.data.MachineName!=o.ruleForm.MachineName&&(0,ce.gC)({Id:e.data.MachineId,newName:o.ruleForm.MachineName}).then((()=>{o.show=!1,me.nk.success("Â∑≤Êìç‰ΩúÔºÅ"),l("change")})).catch((e=>{console.log(e),me.nk.error("Êìç‰ΩúÂ§±Ë¥•ÔºÅ")}))};return{state:o,ruleFormRef:a,handleSave:n}}};const pe=(0,E.A)(he,[["render",ie]]);var ke=pe,ve=a(4373);function ge(e,l,a,o,n,r){const s=(0,t.g2)("Access"),d=(0,t.g2)("el-button"),u=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(u,{modelValue:o.state.show,"onUpdate:modelValue":l[1]||(l[1]=e=>o.state.show=e),"close-on-click-modal":!1,center:"","append-to":".app-wrap",title:`ËÆæÁΩÆ[${o.state.machineName}]ÁöÑÊùÉÈôê`,width:"580",top:"1vh"},{footer:(0,t.k6)((()=>[(0,t.bF)(d,{plain:"",onClick:l[0]||(l[0]=e=>o.state.show=!1),loading:o.state.loading},{default:(0,t.k6)((()=>[(0,t.eW)("ÂèñÊ∂à")])),_:1},8,["loading"]),(0,t.bF)(d,{type:"success",plain:"",onClick:o.handleSave,loading:o.state.loading},{default:(0,t.k6)((()=>[(0,t.eW)("Á°ÆÂÆö‰øùÂ≠ò")])),_:1},8,["onClick","loading"])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(s,{accesss:o.state.accesss,ref:"accessDom"},null,8,["accesss"])])])),_:1},8,["modelValue","title"])}var we=a(3363),fe=a(3766),be={props:["data","modelValue"],emits:["change","update:modelValue"],components:{Access:fe.A},setup(e,{emit:l}){const a=(0,u.Kh)({show:!0,loading:!1,machineName:e.data.MachineName,accesss:e.data.hook_accesss});(0,t.wB)((()=>a.show),(e=>{e||setTimeout((()=>{l("update:modelValue",e)}),300)}));const o=(0,u.KR)(null),n=()=>{a.loading=!0;const t=o.value.getValue();(0,we.ZK)({ToMachineId:e.data.MachineId,Access:t[0],FullAccess:t[1]}).then((()=>{a.loading=!1,a.show=!1,me.nk.success("Â∑≤Êìç‰ΩúÔºÅ"),l("change")})).catch((e=>{console.log(e),a.loading=!1,me.nk.error("Êìç‰ΩúÂ§±Ë¥•ÔºÅ")}))};return{state:a,accessDom:o,handleSave:n}}};const Ce=(0,E.A)(be,[["render",ge]]);var Fe=Ce,_e=a(6057);const ye={key:1,class:"skeleton-animation"},Ve=(0,t.Lk)("div",{class:"device-remark"},null,-1);function Ee(e,l,a,n,r,s){const d=(0,t.g2)("Socks5Show"),u=(0,t.g2)("el-skeleton-item"),i=(0,t.g2)("el-skeleton"),c=(0,t.g2)("el-table-column");return(0,t.uX)(),(0,t.Wv)(c,{prop:"socks5",label:e.$t("home.proxy"),width:"160"},{default:(0,t.k6)((e=>[e.row&&e.row.hook_socks5?((0,t.uX)(),(0,t.CE)("div",{key:0,class:"skeleton-animation",style:(0,o.Tr)(`animation-delay:${e.row.animationDelay}ms`)},[(0,t.bF)(d,{config:!0,item:e.row},null,8,["item"])],4)):e.row&&!e.row.hook_socks5_load?((0,t.uX)(),(0,t.CE)("div",ye,[(0,t.bF)(i,{animated:""},{template:(0,t.k6)((()=>[(0,t.bF)(u,{variant:"text",style:{width:"60%"}}),(0,t.bF)(u,{variant:"text",style:{width:"20%","margin-left":"20%"}})])),_:1})])):(0,t.Q3)("",!0),Ve])),_:1},8,["label"])}const Le={class:"flex"},Ie={class:"flex-1"},Pe=["onClick"],Se=["title"],We={key:0,class:"green gateway"},Xe={key:1},Te={key:0},Ae={key:0,class:"flex disable",title:"Â∑≤Á¶ÅÁî®"},Ne=["title"],Me={key:1,class:"flex yellow",title:"‰∏éÂÖ∂ÂÆÉËÆæÂ§áÂ°´ÂÜôIP„ÄÅÊàñÊú¨Êú∫Â±ÄÂüüÁΩëIPÊúâÂÜ≤Á™Å"},xe=["title"],Re=["title"];function $e(e,l,a,n,r,s){const d=(0,t.g2)("ConnectionShow"),u=(0,t.g2)("Loading"),i=(0,t.g2)("el-icon"),c=(0,t.g2)("el-switch"),m=(0,t.g2)("AccessBoolean");return(0,t.uX)(),(0,t.Wv)(m,{value:"Socks5ChangeSelf,Socks5ChangeOther,Socks5StatusSelf,Socks5StatusOther"},{default:(0,t.k6)((({values:e})=>[(0,t.Lk)("div",Le,[(0,t.Lk)("div",Ie,[(0,t.bF)(d,{row:a.item,transactionId:"socks5"},null,8,["row"]),(0,t.Lk)("a",{href:"javascript:;",class:"a-line",onClick:l=>n.handleSocks5Port(a.item.hook_socks5,e),title:"Ê≠§ËÆæÂ§áÁöÑsocks5‰ª£ÁêÜ"},[a.item.hook_socks5.SetupError?((0,t.uX)(),(0,t.CE)("strong",{key:0,class:"red",title:a.item.hook_socks5.SetupError}," socks5://*:"+(0,o.v_)(a.item.hook_socks5.Port),9,Se)):((0,t.uX)(),(0,t.CE)(t.FK,{key:1},[a.item.Connected&&a.item.hook_socks5.running?((0,t.uX)(),(0,t.CE)("strong",We,"socks5://*:"+(0,o.v_)(a.item.hook_socks5.Port),1)):((0,t.uX)(),(0,t.CE)("span",Xe,"socks5://*:"+(0,o.v_)(a.item.hook_socks5.Port),1))],64))],8,Pe)]),a.item.hook_socks5.loading?((0,t.uX)(),(0,t.CE)("div",Te,[(0,t.bF)(i,{size:"14",class:"loading"},{default:(0,t.k6)((()=>[(0,t.bF)(u)])),_:1})])):((0,t.uX)(),(0,t.Wv)(c,{key:1,"model-value":a.item.Connected&&a.item.hook_socks5.running,loading:a.item.hook_socks5.loading,disabled:"",onClick:l=>n.handleSocks5(a.item.hook_socks5,e),size:"small","inline-prompt":"","active-text":"üòÄ","inactive-text":"üò£"},null,8,["model-value","loading","onClick"]))]),(0,t.Lk)("div",null,[(0,t.Lk)("div",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(a.item.hook_socks5.Lans,((e,l)=>((0,t.uX)(),(0,t.CE)(t.FK,{key:l},[e.Disabled?((0,t.uX)(),(0,t.CE)("div",Ae,[(0,t.Lk)("span",null,(0,o.v_)(e.IP)+"/"+(0,o.v_)(e.PrefixLength),1),(0,t.Lk)("span",{class:"flex-1 remark",title:e.Remark},(0,o.v_)(e.Remark),9,Ne)])):e.Exists?((0,t.uX)(),(0,t.CE)("div",Me,[(0,t.Lk)("span",null,(0,o.v_)(e.IP)+"/"+(0,o.v_)(e.PrefixLength),1),(0,t.Lk)("span",{class:"flex-1 remark",title:e.Remark},(0,o.v_)(e.Remark),9,xe)])):((0,t.uX)(),(0,t.CE)("div",{key:2,class:(0,o.C4)(["flex green",{green:a.item.Connected&&a.item.hook_socks5.running}]),title:"Ê≠£Â∏∏‰ΩøÁî®"},[(0,t.Lk)("span",null,(0,o.v_)(e.IP)+"/"+(0,o.v_)(e.PrefixLength),1),(0,t.Lk)("span",{class:"flex-1 remark",title:e.Remark},(0,o.v_)(e.Remark),9,Re)],2))],64)))),128))])])])),_:1})}var Ue=a(5611),Be={props:["item","config"],components:{Loading:y.Rhj,ConnectionShow:Ue.A},setup(e){const l=F(),a=(0,d.B)(),o=(0,t.EW)((()=>a.value.config.Client.Id)),n=(l,a)=>{if(!e.config)return;if(o.value===l.MachineId){if(!a.Socks5StatusSelf)return void me.nk.success("Êó†ÊùÉÈôê")}else if(!a.Socks5StatusOther)return void me.nk.success("Êó†ÊùÉÈôê");const t=e.item.Connected&&l.running?g(l.MachineId):v(l.MachineId);l.loading=!0,t.then((()=>{me.nk.success("Êìç‰ΩúÊàêÂäüÔºÅ")})).catch((e=>{console.log(e),me.nk.error("Êìç‰ΩúÂ§±Ë¥•ÔºÅ")}))},r=(a,t)=>{if(e.config||o.value==a.MachineId){if(o.value===a.MachineId){if(!t.Socks5ChangeSelf)return void me.nk.success("Êó†ÊùÉÈôê")}else if(!t.Socks5ChangeOther)return void me.nk.success("Êó†ÊùÉÈôê");a.device=e.item,l.value.current=a,l.value.showEdit=!0}};return{socks5:l,handleSocks5:n,handleSocks5Port:r}}};const De=(0,E.A)(Be,[["render",$e],["__scopeId","data-v-ac769c2e"]]);var ze=De,Oe={emits:["edit","refresh"],components:{Socks5Show:ze},setup(){return{}}};const Qe=(0,E.A)(Oe,[["render",Ee]]);var je=Qe;const Ke={class:"upgrade-wrap"},Ge={class:"t-c w-100"};function He(e,l,a,o,n,r){const s=(0,t.g2)("el-form-item"),d=(0,t.g2)("el-input"),u=(0,t.g2)("Socks5Lan"),i=(0,t.g2)("el-button"),c=(0,t.g2)("el-form"),m=(0,t.g2)("el-dialog"),h=(0,t.gN)("trim");return(0,t.uX)(),(0,t.Wv)(m,{modelValue:o.state.show,"onUpdate:modelValue":l[2]||(l[2]=e=>o.state.show=e),"close-on-click-modal":!1,"append-to":".app-wrap",title:`ËÆæÁΩÆ[${o.state.machineName}]‰ª£ÁêÜ`,top:"1vh",width:"780"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(c,{ref:"ruleFormRef",model:o.state.ruleForm,rules:o.state.rules,"label-width":"140"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{prop:"gateway",style:{"margin-bottom":"0"}},{default:(0,t.k6)((()=>[(0,t.eW)(" ÈÖçÁΩÆ‰ª£ÁêÜÔºåÈÄöËøá‰ª£ÁêÜËÆøÈóÆÂÖ∂ÂÆÉËÆæÂ§á ")])),_:1}),(0,t.bF)(s,{label:"‰ª£ÁêÜÁ´ØÂè£",prop:"Port"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(d,{modelValue:o.state.ruleForm.Port,"onUpdate:modelValue":l[0]||(l[0]=e=>o.state.ruleForm.Port=e),style:{width:"14rem"}},null,8,["modelValue"]),[[h]])])),_:1}),(0,t.Lk)("div",Ke,[(0,t.bF)(u,{ref:"socks5Dom"},null,512)]),(0,t.bF)(s,{label:"",prop:"Btns","label-width":"0"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",Ge,[(0,t.bF)(i,{onClick:l[1]||(l[1]=e=>o.state.show=!1)},{default:(0,t.k6)((()=>[(0,t.eW)("ÂèñÊ∂à")])),_:1}),(0,t.bF)(i,{type:"primary",onClick:o.handleSave},{default:(0,t.k6)((()=>[(0,t.eW)("Á°ÆËÆ§")])),_:1},8,["onClick"])])])),_:1})])),_:1},8,["model","rules"])])])),_:1},8,["modelValue","title"])}var qe=a(5130);const Je={class:"w-100"},Ze={class:"wrap"},Ye=["onClick"],el=["title"],ll={key:1},al=["onClick"],tl=["onClick"],ol=["title"],nl={key:1},rl=["onClick"],sl=["title"],dl={key:1},ul=["onClick"],il=["onClick"],cl=["title"],ml={key:1},hl=["onClick"];function pl(e,l,a,n,r,s){const d=(0,t.g2)("el-input"),u=(0,t.g2)("Delete"),i=(0,t.g2)("el-icon"),c=(0,t.g2)("el-table-column"),m=(0,t.g2)("el-checkbox"),h=(0,t.g2)("el-button"),p=(0,t.g2)("el-popconfirm"),k=(0,t.g2)("Plus"),v=(0,t.g2)("el-table"),g=(0,t.gN)("trim");return(0,t.uX)(),(0,t.CE)("div",Je,[(0,t.Lk)("div",Ze,[(0,t.bF)(v,{stripe:"",data:n.state.lans,border:"",size:"small",width:"100%",height:"400px",onCellDblclick:n.handleCellClick},{default:(0,t.k6)((()=>[(0,t.bF)(c,{prop:"IP",label:"Ë∑ØÁî±IP",width:"120"},{default:(0,t.k6)((e=>[e.row.IPEditing?(0,t.bo)(((0,t.uX)(),(0,t.Wv)(d,{key:0,autofocus:"",size:"small",modelValue:e.row.IP,"onUpdate:modelValue":l=>e.row.IP=l,onBlur:l=>n.handleEditBlur(e.row,"IP")},null,8,["modelValue","onUpdate:modelValue","onBlur"])),[[g]]):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>n.handleEdit(e.row,"IP")},[e.row.Error?((0,t.uX)(),(0,t.CE)("strong",{key:0,title:e.row.Error,class:"red"},(0,o.v_)(e.row.IP),9,el)):((0,t.uX)(),(0,t.CE)("span",ll,[(0,t.eW)((0,o.v_)(e.row.IP)+" ",1),(0,t.Lk)("a",{href:"javascript:;",onClick:(0,qe.D$)((l=>e.row.IP="0.0.0.0"),["stop"])},[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(u)])),_:1})],8,al)]))],8,Ye))])),_:1}),(0,t.bF)(c,{prop:"PrefixLength",label:"Ë∑ØÁî±Êé©Á†Å",width:"80"},{default:(0,t.k6)((e=>[e.row.PrefixLengthEditing?(0,t.bo)(((0,t.uX)(),(0,t.Wv)(d,{key:0,autofocus:"",size:"small",modelValue:e.row.PrefixLength,"onUpdate:modelValue":l=>e.row.PrefixLength=l,onBlur:l=>n.handleEditBlur(e.row,"PrefixLength")},null,8,["modelValue","onUpdate:modelValue","onBlur"])),[[g]]):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>n.handleEdit(e.row,"PrefixLength")},[e.row.Error?((0,t.uX)(),(0,t.CE)("strong",{key:0,title:e.row.Error,class:"red"},(0,o.v_)(e.row.PrefixLength),9,ol)):((0,t.uX)(),(0,t.CE)("span",nl,(0,o.v_)(e.row.PrefixLength),1))],8,tl))])),_:1}),(0,t.bF)(c,{prop:"MapIP",label:"ÁõÆÊ†áIP",width:"120"},{default:(0,t.k6)((e=>[e.row.MapIPEditing?(0,t.bo)(((0,t.uX)(),(0,t.Wv)(d,{key:0,autofocus:"",size:"small",modelValue:e.row.MapIP,"onUpdate:modelValue":l=>e.row.MapIP=l,onBlur:l=>n.handleEditBlur(e.row,"MapIP")},null,8,["modelValue","onUpdate:modelValue","onBlur"])),[[g]]):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>n.handleEdit(e.row,"MapIP")},[e.row.Error?((0,t.uX)(),(0,t.CE)("strong",{key:0,title:e.row.Error,class:"red"},(0,o.v_)(e.row.MapIP),9,sl)):((0,t.uX)(),(0,t.CE)("span",dl,[(0,t.eW)((0,o.v_)(e.row.MapIP)+" ",1),(0,t.Lk)("a",{href:"javascript:;",onClick:(0,qe.D$)((l=>e.row.MapIP="0.0.0.0"),["stop"])},[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(u)])),_:1})],8,ul)]))],8,rl))])),_:1}),(0,t.bF)(c,{prop:"MapPrefixLength",label:"ÁõÆÊ†áÊé©Á†Å",width:"80"},{default:(0,t.k6)((e=>[e.row.MapPrefixLengthEditing?(0,t.bo)(((0,t.uX)(),(0,t.Wv)(d,{key:0,autofocus:"",size:"small",modelValue:e.row.MapPrefixLength,"onUpdate:modelValue":l=>e.row.MapPrefixLength=l,onBlur:l=>n.handleEditBlur(e.row,"MapPrefixLength")},null,8,["modelValue","onUpdate:modelValue","onBlur"])),[[g]]):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>n.handleEdit(e.row,"MapPrefixLength")},[e.row.Error?((0,t.uX)(),(0,t.CE)("strong",{key:0,title:e.row.Error,class:"red"},(0,o.v_)(e.row.MapPrefixLength),9,cl)):((0,t.uX)(),(0,t.CE)("span",ml,(0,o.v_)(e.row.MapPrefixLength),1))],8,il))])),_:1}),(0,t.bF)(c,{prop:"Remark",label:"Â§áÊ≥®"},{default:(0,t.k6)((e=>[e.row.RemarkEditing?(0,t.bo)(((0,t.uX)(),(0,t.Wv)(d,{key:0,autofocus:"",size:"small",modelValue:e.row.Remark,"onUpdate:modelValue":l=>e.row.Remark=l,onBlur:l=>n.handleEditBlur(e.row,"Remark")},null,8,["modelValue","onUpdate:modelValue","onBlur"])),[[g]]):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>n.handleEdit(e.row,"Remark")},[(0,t.Lk)("span",null,(0,o.v_)(e.row.Remark),1)],8,hl))])),_:1}),(0,t.bF)(c,{prop:"Disabled",label:"Á¶ÅÁî®"},{default:(0,t.k6)((e=>[(0,t.bF)(m,{modelValue:e.row.Disabled,"onUpdate:modelValue":l=>e.row.Disabled=l,label:"Á¶ÅÁî®"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.bF)(c,{prop:"Oper",label:"Êìç‰Ωú",width:"110"},{default:(0,t.k6)((e=>[(0,t.Lk)("div",null,[(0,t.bF)(p,{title:"Âà†Èô§‰∏çÂèØÈÄÜÔºåÊòØÂê¶Á°ÆËÆ§?",onConfirm:l=>n.handleDel(e.$index)},{reference:(0,t.k6)((()=>[(0,t.bF)(h,{type:"danger",size:"small"},{default:(0,t.k6)((()=>[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(u)])),_:1})])),_:1})])),_:2},1032,["onConfirm"]),(0,t.bF)(h,{type:"primary",size:"small",onClick:l=>n.handleAdd(e.$index)},{default:(0,t.k6)((()=>[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(k)])),_:1})])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data","onCellDblclick"])])])}var kl={props:["modelValue"],emits:["update:modelValue"],components:{Delete:y.epd,Plus:y.FWt,Warning:y.N5l,Refresh:y.C42},setup(e){const l=F(),a=(0,u.Kh)({lans:l.value.current.Lans.slice(0).map((e=>(e.MapIP=e.MapIP||"0.0.0.0",e.MapPrefixLength=e.MapPrefixLength||24,e)))});0==a.lans.length&&a.lans.push({IP:"0.0.0.0",PrefixLength:24,MapIP:"0.0.0.0",MapPrefixLength:24,Remark:""});const t=(e,l)=>{o(e,l.property)},o=(e,l)=>{a.lans.forEach((e=>{e["IPEditing"]=!1,e["PrefixLengthEditing"]=!1,e["MapIPEditing"]=!1,e["MapPrefixLengthEditing"]=!1,e["RemarkEditing"]=!1})),e[`${l}Editing`]=!0,e["__editing"]=!0},n=(e,l)=>{e[`${l}Editing`]=!1,e["__editing"]=!1;try{e[l]=e[l].trim()}catch(t){}if("PrefixLength"==l||"MapPrefixLength"==l){var a=+e[l];(a>32||a<0||isNaN(a))&&(a=24),e[l]=a}},r=e=>{a.lans.splice(e,1),0==a.lans.length&&s(0)},s=e=>{a.lans.splice(e+1,0,{IP:"0.0.0.0",PrefixLength:24,MapIP:"0.0.0.0",MapPrefixLength:24,Remark:""})},d=()=>a.lans.map((e=>(e.PrefixLength=+e.PrefixLength,e)));return{state:a,handleDel:r,handleAdd:s,getData:d,handleCellClick:t,handleEditBlur:n,handleEdit:o}}};const vl=(0,E.A)(kl,[["render",pl]]);var gl=vl,wl={props:["modelValue"],emits:["change","update:modelValue"],components:{Socks5Lan:gl},setup(e,{emit:l}){const a=(0,d.B)(),o=F(),n=(0,u.KR)(null),r=(0,u.Kh)({show:!0,machineName:o.value.current.device.MachineName,bufferSize:a.value.bufferSize,ruleForm:{Port:o.value.current.Port,Lans:[]},rules:{}});0==r.ruleForm.Lans.length&&r.ruleForm.Lans.push({IP:"0.0.0.0",PrefixLength:24}),(0,t.wB)((()=>r.show),(e=>{e||setTimeout((()=>{l("update:modelValue",e)}),300)}));const s=(0,u.KR)(null),i=()=>{const e=JSON.parse(JSON.stringify(o.value.current,((e,l)=>"device"==e?"":l)));e.Port=+(r.ruleForm.Port||"1805"),e.Lans=s.value.getData(),w(e).then((()=>{r.show=!1,me.nk.success("Â∑≤Êìç‰ΩúÔºÅ"),l("change")})).catch((e=>{console.log(e),me.nk.error("Êìç‰ΩúÂ§±Ë¥•ÔºÅ")}))};return{state:r,ruleFormRef:n,socks5Dom:s,handleSave:i}}};const fl=(0,E.A)(wl,[["render",He],["__scopeId","data-v-009dce2e"]]);var bl=fl;const Cl=e=>((0,t.Qi)("data-v-5bc4e560"),e=e(),(0,t.jt)(),e),Fl=["title","src"],_l={key:1,title:"?",class:"system",src:"/system.svg"},yl=["title","src"],Vl={key:3,title:"?",class:"system",src:"/system.svg"},El=["title"],Ll={key:5,title:"?",class:"system",src:"/system.svg"},Il={class:"flex"},Pl=["title","onClick"],Sl={key:1,class:"skeleton-animation"},Wl=Cl((()=>(0,t.Lk)("div",{class:"device-remark"},null,-1)));function Xl(e,l,a,n,r,s){const d=(0,t.g2)("el-skeleton-item"),u=(0,t.g2)("el-skeleton"),i=(0,t.g2)("el-table-column"),c=(0,t.g2)("AccessBoolean");return(0,t.uX)(),(0,t.Wv)(c,{value:"TunnelChangeSelf,TunnelChangeOther"},{default:(0,t.k6)((({values:l})=>[(0,t.bF)(i,{prop:"tunnel",label:e.$t("home.tunnel"),width:"86"},{default:(0,t.k6)((a=>[a.row&&a.row.hook_tunnel?((0,t.uX)(),(0,t.CE)("div",{key:0,class:"skeleton-animation",style:(0,o.Tr)(`animation-delay:${a.row.animationDelay}ms`)},[(0,t.Lk)("div",null,[a.row.hook_tunnel.Net.CountryCode?((0,t.uX)(),(0,t.CE)("img",{key:0,title:`${a.row.hook_tunnel.Net.CountryCode}„ÄÅ${a.row.hook_tunnel.Net.City}`,class:"system",src:`https://unpkg.com/flag-icons@7.2.3/flags/4x3/${a.row.hook_tunnel.Net.CountryCode.toLowerCase()}.svg`},null,8,Fl)):((0,t.uX)(),(0,t.CE)("img",_l)),a.row.hook_tunnel.Net.Isp?((0,t.uX)(),(0,t.CE)("img",{key:2,title:`${a.row.hook_tunnel.Net.Isp}`,class:"system",src:n.netImg(a.row.hook_tunnel.Net)},null,8,yl)):((0,t.uX)(),(0,t.CE)("img",Vl)),a.row.hook_tunnel.Net.Nat?((0,t.uX)(),(0,t.CE)("span",{key:4,class:"nat",title:a.row.hook_tunnel.Net.Nat},(0,o.v_)(n.natMap[a.row.hook_tunnel.Net.Nat]),9,El)):((0,t.uX)(),(0,t.CE)("img",Ll))]),(0,t.Lk)("div",Il,[(0,t.Lk)("a",{href:"javascript:;",class:(0,o.C4)(["a-line",{yellow:a.row.hook_tunnel.NeedReboot}]),title:e.$t("home.holeText"),onClick:e=>n.handleTunnel(a.row.hook_tunnel,a.row,l)},[(0,t.Lk)("span",null,(0,o.v_)(e.$t("home.jump"))+":"+(0,o.v_)(a.row.hook_tunnel.RouteLevel)+"+"+(0,o.v_)(a.row.hook_tunnel.RouteLevelPlus),1)],10,Pl)])],4)):a.row&&!a.row.hook_tunnel_load?((0,t.uX)(),(0,t.CE)("div",Sl,[(0,t.bF)(u,{animated:""},{template:(0,t.k6)((()=>[(0,t.bF)(d,{variant:"text",class:"el-skeleton-item"}),(0,t.bF)(d,{variant:"text",class:"el-skeleton-item"}),(0,t.bF)(d,{variant:"text",class:"el-skeleton-item-last"}),(0,t.bF)(d,{variant:"text",class:"el-skeleton-item2"})])),_:1})])):(0,t.Q3)("",!0),Wl])),_:2},1032,["label"])])),_:1})}var Tl=a(83);const Al=Symbol(),Nl=()=>{const e=(0,u.KR)({list:null,hashcode:0,operatings:{},hashcode1:0,showEdit:!1,current:null});(0,t.Gt)(Al,e);const l=()=>new Promise(((l,a)=>{(0,Tl.r7)(e.value.hashcode.toString()).then((a=>{if(e.value.hashcode=a.HashCode,a.List)return e.value.list=a.List,void l(!0);l(!1)})).catch((()=>{l(!1)}))})),a=e=>{const l={};for(let a in e){let t=a.split("@");l[t[0]]=l[t[0]]||{},l[t[0]][t[1]]=e[a]}return l},o=()=>new Promise(((l,t)=>{(0,Tl.G7)(e.value.hashcode1.toString()).then((t=>{if(e.value.hashcode1=t.HashCode,t.List)return e.value.operatings=a(t.List),void l(!0);l(!1)})).catch((()=>{l(!1)}))})),n=()=>new Promise(((e,a)=>{Promise.all([l(),o()]).then((l=>{e(l.filter((e=>1==e)).length>0)})).catch((()=>{e(!1)}))})),r=()=>{(0,Tl.eh)()},s=(l,a)=>{e.value.list&&e.value.operatings&&Object.assign(a,{hook_tunnel:e.value.list[l.MachineId],hook_tunnel_load:!0,hook_operating:e.value.operatings[l.MachineId],hook_operating_load:!0})},d=l=>Object.values(e.value.list).sort(((e,l)=>e.RouteLevel+e.RouteLevelPlus-l.RouteLevel+l.RouteLevelPlus)).map((e=>e.MachineId));return{tunnel:e,tunnelDataFn:n,tunnelProcessFn:s,tunnelRefreshFn:r,sortTunnel:d}},Ml=()=>(0,t.WQ)(Al);var xl=a(5931),Rl={emits:["edit","refresh"],setup(){const e=(0,xl.s9)(),l=(0,d.B)(),a=(0,t.EW)((()=>l.value.config.Client.Id)),o=Ml(),n={chinanet:"chinanet.svg",china169:"chinanet.svg","china telecom":"chinanet.svg","china unicom":"chinaunicom.svg","china mobile":"chinamobile.svg",huawei:"huawei.svg",amazon:"amazon.svg",aliyun:"aliyun.svg",alibaba:"aliyun.svg",jdcom:"jdcom.svg"},r=new RegExp(Object.keys(n).map((e=>`\\b${e}\\b`)).join("|")),s=e=>{const l=e.Isp.toLowerCase();if(l){const e=l.match(r);if(e)return`./${n[e[0]]}`}return"./system.svg"},u={Unknown:"?",UnsupportedServer:"?",UdpBlocked:"?",OpenInternet:"?",SymmetricUdpFirewall:"?",FullCone:"1",RestrictedCone:"2",PortRestrictedCone:"3",Symmetric:"4"},i=(l,t,n)=>{if(a.value===l.MachineId){if(!n.TunnelChangeSelf)return void me.nk.success(e("common.access"))}else if(!n.TunnelChangeOther)return void me.nk.success(e("common.access"));l.device=t,o.value.current=l,o.value.showEdit=!0};return{handleTunnel:i,netImg:s,natMap:u}}};const $l=(0,E.A)(Rl,[["render",Xl],["__scopeId","data-v-5bc4e560"]]);var Ul=$l;const Bl=e=>((0,t.Qi)("data-v-78ef3354"),e=e(),(0,t.jt)(),e),Dl=Bl((()=>(0,t.Lk)("div",null,"ÁΩëÂÖ≥Â±ÇÁ∫ß‰∏∫‰Ω†ÁöÑËÆæÂ§á‰∏éÂ§ñÁΩëÁöÑË∑ùÁ¶ªÔºå‰Ω†ÂèØ‰ª•ÊâãÂä®Ë∞ÉÊï¥Êï∞ÂÄº",-1))),zl={class:"pdl-20"},Ol=Bl((()=>(0,t.Lk)("h3",null,"Ë∑≥Ë∑ÉÁÇπ",-1))),Ql={class:"pdl-20"},jl={class:"t-c w-100"};function Kl(e,l,a,n,r,s){const d=(0,t.g2)("el-form-item"),u=(0,t.g2)("el-input"),i=(0,t.g2)("el-col"),c=(0,t.g2)("el-input-number"),m=(0,t.g2)("el-row"),h=(0,t.g2)("el-button"),p=(0,t.g2)("el-form"),k=(0,t.g2)("el-dialog"),v=(0,t.gN)("trim");return(0,t.uX)(),(0,t.Wv)(k,{modelValue:n.state.show,"onUpdate:modelValue":l[5]||(l[5]=e=>n.state.show=e),"close-on-click-modal":!1,"append-to":".app-wrap",title:`ËÆæÁΩÆ[${n.state.machineName}]ÁΩëÂÖ≥`,width:"560",top:"2vh"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(p,{ref:"ruleFormRef",model:n.state.ruleForm,rules:n.state.rules,"label-width":"auto"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{label:"",prop:"alert"},{default:(0,t.k6)((()=>[Dl])),_:1}),(0,t.bF)(d,{label:""},{default:(0,t.k6)((()=>[(0,t.bF)(m,null,{default:(0,t.k6)((()=>[(0,t.bF)(i,{span:12},{default:(0,t.k6)((()=>[(0,t.bF)(d,{label:"ÁΩëÂÖ≥Â±ÇÁ∫ß",prop:"RouteLevel"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(u,{readonly:"",modelValue:n.state.ruleForm.RouteLevel,"onUpdate:modelValue":l[0]||(l[0]=e=>n.state.ruleForm.RouteLevel=e),style:{width:"15rem"}},null,8,["modelValue"]),[[v]])])),_:1})])),_:1}),(0,t.bF)(i,{span:12},{default:(0,t.k6)((()=>[(0,t.bF)(d,{label:"Âä†‰∏ä",prop:"RouteLevelPlus"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:n.state.ruleForm.RouteLevelPlus,"onUpdate:modelValue":l[1]||(l[1]=e=>n.state.ruleForm.RouteLevelPlus=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,t.bF)(d,{label:""},{default:(0,t.k6)((()=>[(0,t.bF)(m,null,{default:(0,t.k6)((()=>[(0,t.bF)(i,{span:12},{default:(0,t.k6)((()=>[(0,t.bF)(d,{label:"Â§ñÁΩëÁ´ØÂè£",prop:"PortMapWan"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:n.state.ruleForm.PortMapWan,"onUpdate:modelValue":l[2]||(l[2]=e=>n.state.ruleForm.PortMapWan=e)},null,8,["modelValue"])])),_:1})])),_:1}),(0,t.bF)(i,{span:12},{default:(0,t.k6)((()=>[(0,t.bF)(d,{label:"ÂÜÖÁΩëÁ´ØÂè£",prop:"PortMapLan"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:n.state.ruleForm.PortMapLan,"onUpdate:modelValue":l[3]||(l[3]=e=>n.state.ruleForm.PortMapLan=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1}),n.state.net.HostName?((0,t.uX)(),(0,t.Wv)(d,{key:0,label:"",prop:"alert"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.Lk)("h3",null,(0,o.v_)(n.state.net.HostName),1),(0,t.Lk)("ul",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(n.state.net.Lans.filter((e=>e.Ips.length>0)),((e,l)=>((0,t.uX)(),(0,t.CE)("li",null,[(0,t.Lk)("div",null,"„Äê"+(0,o.v_)(e.Mac||"00-00-00-00-00-00")+"„Äë"+(0,o.v_)(e.Desc),1),(0,t.Lk)("div",zl,(0,o.v_)(e.Ips.join("„ÄÅ")),1)])))),256))]),Ol,(0,t.Lk)("div",Ql,(0,o.v_)(n.state.net.Routes.join("„ÄÅ")),1)])])),_:1})):(0,t.Q3)("",!0),(0,t.bF)(d,{label:"",prop:"Btns"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",jl,[(0,t.bF)(h,{onClick:l[4]||(l[4]=e=>n.state.show=!1)},{default:(0,t.k6)((()=>[(0,t.eW)("ÂèñÊ∂à")])),_:1}),(0,t.bF)(h,{type:"primary",onClick:n.handleSave},{default:(0,t.k6)((()=>[(0,t.eW)("Á°ÆËÆ§")])),_:1},8,["onClick"])])])),_:1})])),_:1},8,["model","rules"])])])),_:1},8,["modelValue","title"])}var Gl={props:["modelValue"],emits:["change","update:modelValue"],setup(e,{emit:l}){const a=Ml(),o=(0,u.KR)(null),n=(0,u.Kh)({show:!0,machineName:a.value.current.device.MachineName,ruleForm:{RouteLevel:a.value.current.RouteLevel,RouteLevelPlus:a.value.current.RouteLevelPlus,PortMapWan:a.value.current.PortMapWan,PortMapLan:a.value.current.PortMapLan},rules:{},net:{}});(0,t.wB)((()=>n.show),(e=>{e||setTimeout((()=>{l("update:modelValue",e)}),300)}));const r=()=>{const e=JSON.parse(JSON.stringify(a.value.current,((e,l)=>"device"==e?"":l)));e.RouteLevel=+n.ruleForm.RouteLevel,e.RouteLevelPlus=+n.ruleForm.RouteLevelPlus,e.PortMapWan=+n.ruleForm.PortMapWan,e.PortMapLan=+n.ruleForm.PortMapLan,(0,Tl.KW)(e).then((()=>{n.show=!1,me.nk.success("Â∑≤Êìç‰ΩúÔºÅ"),l("change")})).catch((e=>{console.log(e),me.nk.error("Êìç‰ΩúÂ§±Ë¥•ÔºÅ")}))};return(0,t.sV)((()=>{(0,Tl.Zu)(a.value.current.MachineId).then((e=>{n.net=e})).catch((()=>{}))})),{state:n,ruleFormRef:o,handleSave:r,tunnel:a}}};const Hl=(0,E.A)(Gl,[["render",Kl],["__scopeId","data-v-78ef3354"]]);var ql=Hl,Jl=a(5304);const Zl={class:"updater-wrap t-c"},Yl={class:"t-l"},ea={class:"flex mgt-1"},la={class:"mgt-1 t-c"};function aa(e,l,a,n,r,s){const d=(0,t.g2)("el-option"),u=(0,t.g2)("el-select"),i=(0,t.g2)("el-col"),c=(0,t.g2)("el-row"),m=(0,t.g2)("el-button"),h=(0,t.g2)("AccessBoolean"),p=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(p,{class:"options-center",title:"Êõ¥Êñ∞","destroy-on-close":"",modelValue:n.state.show,"onUpdate:modelValue":l[2]||(l[2]=e=>n.state.show=e),width:"40rem",top:"2vh"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",Zl,[(0,t.bF)(h,{value:"UpdateSelf,UpdateOther"},{default:(0,t.k6)((({values:e})=>[(0,t.Lk)("div",Yl,[(0,t.Lk)("ul",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(n.state.msg,(e=>((0,t.uX)(),(0,t.CE)("li",null,(0,o.v_)(e),1)))),256))])]),(0,t.Lk)("div",ea,[(0,t.bF)(c,{class:"w-100"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{span:10},{default:(0,t.k6)((()=>[(0,t.bF)(u,{modelValue:n.state.type,"onUpdate:modelValue":l[0]||(l[0]=e=>n.state.type=e),size:"large"},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(n.getTypes(e),(e=>((0,t.uX)(),(0,t.Wv)(d,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue"])])),_:2},1024),(0,t.bF)(i,{span:4},{default:(0,t.k6)((()=>[(0,t.eW)(" -> ")])),_:1}),(0,t.bF)(i,{span:10},{default:(0,t.k6)((()=>[(0,t.bF)(u,{modelValue:n.state.version,"onUpdate:modelValue":l[1]||(l[1]=e=>n.state.version=e),size:"large",filterable:"","allow-create":"","default-first-option":""},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(n.state.versions,(e=>((0,t.uX)(),(0,t.Wv)(d,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:2},1024)]),(0,t.Lk)("div",la,[(0,t.bF)(m,{type:"success",onClick:l=>n.handleUpdate(e),plain:""},{default:(0,t.k6)((()=>[(0,t.eW)("Á°Æ ÂÆö")])),_:2},1032,["onClick"])])])),_:1})])])),_:1},8,["modelValue"])}var ta=a(920),oa={props:["modelValue"],emits:["update:modelValue"],setup(e,{emit:l}){const a=(0,d.B)(),o=(0,Jl.T)(),n=(0,t.EW)((()=>a.value.signin.Version)),r=(0,t.EW)((()=>o.value.current.Version)),s=[{label:`${r.value}„ÄêÊúÄÊñ∞ÁâàÊú¨„Äë`,value:r.value},{label:`${n.value}„ÄêÊúçÂä°Âô®ÁâàÊú¨„Äë`,value:n.value}].filter((e=>e.value)),i=(0,u.Kh)({show:!0,type:"",version:s[0]||{},versions:s,msg:[]});(0,t.wB)((()=>i.show),(e=>{e||setTimeout((()=>{l("update:modelValue",e)}),300)}));const c=e=>{const l=[{label:`‰ªÖ„Äê${o.value.device.MachineName}„Äë`,value:o.value.device.MachineId},e.UpdateOther?{label:"Êú¨ÁªÑÊâÄÊúâ",value:"g-all"}:{},e.UpdateOther?{label:"Êú¨ÊúçÂä°Âô®ÊâÄÊúâ",value:"s-all"}:{}].filter((e=>e.value));return i.type||(i.type=l[0]||""),l},m=e=>{const l={MachineId:o.value.device.MachineId,Version:i.version.value||i.version,GroupAll:"g-all"==i.type,All:"s-all"==i.type};(l.All||l.GroupAll)&&(l.MachineId=""),(0,ta.lJ)(l).then((()=>{})).catch((()=>{})),i.show=!1};return(0,t.sV)((()=>{(0,ta.rL)().then((e=>{i.msg=e.Msg}))})),{state:i,getTypes:c,handleUpdate:m}}};const na=(0,E.A)(oa,[["render",aa]]);var ra=na;const sa={key:0},da={key:1,class:"skeleton-animation"},ua=(0,t.Lk)("div",{class:"device-remark"},null,-1);function ia(e,l,a,n,r,s){const d=(0,t.g2)("TuntapShow"),u=(0,t.g2)("el-skeleton-item"),i=(0,t.g2)("el-skeleton"),c=(0,t.g2)("el-table-column");return(0,t.uX)(),(0,t.Wv)(c,{prop:"tuntap",label:e.$t("home.tuntap"),width:"160"},{header:(0,t.k6)((()=>[(0,t.Lk)("a",{href:"javascript:;",class:"a-line",onClick:l[0]||(l[0]=(...e)=>n.handleShowLease&&n.handleShowLease(...e))},(0,o.v_)(e.$t("home.tuntap")),1)])),default:(0,t.k6)((e=>[e.row?((0,t.uX)(),(0,t.CE)("div",sa,[e.row.hook_tuntap?((0,t.uX)(),(0,t.CE)("div",{key:0,class:"skeleton-animation",style:(0,o.Tr)(`animation-delay:${e.row.animationDelay}ms`)},[(0,t.bF)(d,{config:!0,item:e.row},null,8,["item"])],4)):e.row.hook_tuntap_load?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("div",da,[(0,t.bF)(i,{animated:""},{template:(0,t.k6)((()=>[(0,t.bF)(u,{variant:"text",style:{width:"60%"}}),(0,t.bF)(u,{variant:"text",style:{width:"20%","margin-left":"20%"}}),(0,t.bF)(u,{variant:"text",style:{width:"70%"}})])),_:1})]))])):(0,t.Q3)("",!0),ua])),_:1},8,["label"])}var ca=a(3348),ma={components:{TuntapShow:ca.A},setup(e,{emit:l}){const a=(0,_.W)(),t=()=>{a.value.showLease=!0};return{tuntap:a,handleShowLease:t}}};const ha=(0,E.A)(ma,[["render",ia]]);var pa=ha;const ka={class:"foot t-c"};function va(e,l,a,o,n,r){const s=(0,t.g2)("TuntapIP"),d=(0,t.g2)("el-tab-pane"),u=(0,t.g2)("TuntapLan"),i=(0,t.g2)("TuntapForward"),c=(0,t.g2)("TuntapRoutes"),m=(0,t.g2)("el-tabs"),h=(0,t.g2)("el-button"),p=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(p,{modelValue:o.state.show,"onUpdate:modelValue":l[1]||(l[1]=e=>o.state.show=e),"close-on-click-modal":!1,"append-to":".app-wrap",title:`ËÆæÁΩÆ[${o.state.machineName}]ÁªÑÁΩë`,top:"1vh",width:"780"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(m,{type:"border-card"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{label:"ÁΩëÂç°"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{ref:"ipDom"},null,512)])),_:1}),(0,t.bF)(d,{label:"ÁÇπ/ÁΩëÂØπÁΩë"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{ref:"lanDom"},null,512)])),_:1}),(0,t.bF)(d,{label:"Á´ØÂè£ËΩ¨Âèë"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{ref:"forwardDom"},null,512)])),_:1}),(0,t.bF)(d,{label:"Ë∑ØÁî±"},{default:(0,t.k6)((()=>[(0,t.bF)(c)])),_:1})])),_:1}),(0,t.Lk)("div",ka,[(0,t.bF)(h,{onClick:l[0]||(l[0]=e=>o.state.show=!1),loading:o.state.loading},{default:(0,t.k6)((()=>[(0,t.eW)("ÂèñÊ∂à")])),_:1},8,["loading"]),(0,t.bF)(h,{type:"primary",onClick:o.handleSave,loading:o.state.loading},{default:(0,t.k6)((()=>[(0,t.eW)("Á°ÆÂÆö‰øùÂ≠ò")])),_:1},8,["onClick","loading"])])])])),_:1},8,["modelValue","title"])}var ga=a(5241);const wa=e=>((0,t.Qi)("data-v-ef024968"),e=e(),(0,t.jt)(),e),fa={class:"w-100"},ba=wa((()=>(0,t.Lk)("span",{class:"yellow"},"‰ΩøÁî®Á≥ªÁªüÁ´ØÂè£ËΩ¨Âèë",-1))),Ca={key:0,class:"green"},Fa={class:"wrap"},_a=["onClick"],ya=["title"],Va={key:1},Ea=["onClick"],La=["onClick"],Ia=["title"],Pa={key:1},Sa=["onClick"],Wa=["onClick"],Xa=["title"],Ta={key:1},Aa=["onClick"],Na={key:1,class:"remark"},Ma=["onClick"];function xa(e,l,a,n,r,s){const d=(0,t.g2)("el-input"),u=(0,t.g2)("Delete"),i=(0,t.g2)("el-icon"),c=(0,t.g2)("el-table-column"),m=(0,t.g2)("el-button"),h=(0,t.g2)("el-popconfirm"),p=(0,t.g2)("Plus"),k=(0,t.g2)("el-table"),v=(0,t.gN)("trim");return(0,t.uX)(),(0,t.CE)("div",fa,[(0,t.Lk)("div",null,[ba,n.state.testing?((0,t.uX)(),(0,t.CE)("span",Ca,"„ÄÅtesting")):(0,t.Q3)("",!0)]),(0,t.Lk)("div",Fa,[(0,t.bF)(k,{stripe:"",data:n.state.forwards,border:"",size:"small",width:"100%",height:"400px",onCellDblclick:n.handleCellClick},{default:(0,t.k6)((()=>[(0,t.bF)(c,{prop:"ListenPort",label:"Ê∫êÁ´ØÂè£",width:"80"},{default:(0,t.k6)((e=>[e.row.ListenPortEditing?(0,t.bo)(((0,t.uX)(),(0,t.Wv)(d,{key:0,autofocus:"",size:"small",modelValue:e.row.ListenPort,"onUpdate:modelValue":l=>e.row.ListenPort=l,onBlur:l=>n.handleEditBlur(e.row,"ListenPort")},null,8,["modelValue","onUpdate:modelValue","onBlur"])),[[v]]):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>n.handleEdit(e.row,"ListenPort")},[e.row.Error?((0,t.uX)(),(0,t.CE)("strong",{key:0,title:e.row.Error,class:"red"},(0,o.v_)(e.row.ListenPort),9,ya)):((0,t.uX)(),(0,t.CE)("span",Va,[(0,t.eW)((0,o.v_)(e.row.ListenPort)+" ",1),(0,t.Lk)("a",{href:"javascript:;",onClick:(0,qe.D$)((l=>e.row.ListenPort=0),["stop"])},[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(u)])),_:1})],8,Ea)]))],8,_a))])),_:1}),(0,t.bF)(c,{prop:"ConnectAddr",label:"ÁõÆÊ†áIP",width:"140"},{default:(0,t.k6)((e=>[e.row.ConnectAddrEditing?(0,t.bo)(((0,t.uX)(),(0,t.Wv)(d,{key:0,autofocus:"",size:"small",modelValue:e.row.ConnectAddr,"onUpdate:modelValue":l=>e.row.ConnectAddr=l,onBlur:l=>n.handleEditBlur(e.row,"ConnectAddr")},null,8,["modelValue","onUpdate:modelValue","onBlur"])),[[v]]):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>n.handleEdit(e.row,"ConnectAddr")},[e.row.Error?((0,t.uX)(),(0,t.CE)("strong",{key:0,title:e.row.Error,class:"red"},(0,o.v_)(e.row.ConnectAddr),9,Ia)):((0,t.uX)(),(0,t.CE)("span",Pa,[(0,t.eW)((0,o.v_)(e.row.ConnectAddr)+" ",1),(0,t.Lk)("a",{href:"javascript:;",onClick:(0,qe.D$)((l=>e.row.ConnectAddr="0.0.0.0"),["stop"])},[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(u)])),_:1})],8,Sa)]))],8,La))])),_:1}),(0,t.bF)(c,{prop:"ConnectPort",label:"ÁõÆÊ†áÁ´ØÂè£",width:"80"},{default:(0,t.k6)((e=>[e.row.ConnectPortEditing?(0,t.bo)(((0,t.uX)(),(0,t.Wv)(d,{key:0,autofocus:"",size:"small",modelValue:e.row.ConnectPort,"onUpdate:modelValue":l=>e.row.ConnectPort=l,onBlur:l=>n.handleEditBlur(e.row,"ConnectPort")},null,8,["modelValue","onUpdate:modelValue","onBlur"])),[[v]]):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>n.handleEdit(e.row,"ConnectPort")},[e.row.Error?((0,t.uX)(),(0,t.CE)("strong",{key:0,title:e.row.Error,class:"red"},(0,o.v_)(e.row.ConnectPort),9,Xa)):((0,t.uX)(),(0,t.CE)("span",Ta,[(0,t.eW)((0,o.v_)(e.row.ConnectPort)+" ",1),(0,t.Lk)("a",{href:"javascript:;",onClick:(0,qe.D$)((l=>e.row.ConnectPort=0),["stop"])},[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(u)])),_:1})],8,Aa)]))],8,Wa))])),_:1}),(0,t.bF)(c,{prop:"Remark",label:"Â§áÊ≥®"},{default:(0,t.k6)((e=>[e.row.RemarkEditing?(0,t.bo)(((0,t.uX)(),(0,t.Wv)(d,{key:0,autofocus:"",size:"small",modelValue:e.row.Remark,"onUpdate:modelValue":l=>e.row.Remark=l,onBlur:l=>n.handleEditBlur(e.row,"Remark")},null,8,["modelValue","onUpdate:modelValue","onBlur"])),[[v]]):((0,t.uX)(),(0,t.CE)("div",Na,[(0,t.Lk)("a",{href:"javascript:;",class:"a-line",onClick:l=>n.handleEdit(e.row,"Remark")},(0,o.v_)(e.row.Remark||"Êó†"),9,Ma)]))])),_:1}),(0,t.bF)(c,{prop:"Oper",label:"Êìç‰Ωú",width:"110"},{default:(0,t.k6)((e=>[(0,t.Lk)("div",null,[(0,t.bF)(h,{title:"Âà†Èô§‰∏çÂèØÈÄÜÔºåÊòØÂê¶Á°ÆËÆ§?",onConfirm:l=>n.handleDel(e.$index)},{reference:(0,t.k6)((()=>[(0,t.bF)(m,{type:"danger",size:"small"},{default:(0,t.k6)((()=>[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(u)])),_:1})])),_:1})])),_:2},1032,["onConfirm"]),(0,t.bF)(m,{type:"primary",size:"small",onClick:l=>n.handleAdd(e.$index)},{default:(0,t.k6)((()=>[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(p)])),_:1})])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data","onCellDblclick"])])])}var Ra={props:["modelValue"],emits:["update:modelValue"],components:{Delete:y.epd,Plus:y.FWt,Warning:y.N5l,Refresh:y.C42},setup(e){const l=(0,_.W)(),a=(0,u.Kh)({machineName:l.value.current.device.MachineName,forwards:0==l.value.current.Forwards.length?[{ListenAddr:"0.0.0.0",ListenPort:0,ConnectAddr:"0.0.0.0",ConnectPort:0,Remark:""}]:l.value.current.Forwards.slice(0),timer:0,testing:!1}),o=(e,l)=>{n(e,l.property)},n=(e,l)=>{a.forwards.forEach((e=>{e["ListenAddrEditing"]=!1,e["ListenPortEditing"]=!1,e["ConnectAddrEditing"]=!1,e["ConnectPortEditing"]=!1,e["RemarkEditing"]=!1})),e[`${l}Editing`]=!0,e["__editing"]=!0},r=(e,l)=>{e[`${l}Editing`]=!1,e["__editing"]=!1;try{e[l]=e[l].trim()}catch(a){}},s=e=>{1==a.forwards.length?a.forwards[0]={ListenAddr:"0.0.0.0",ListenPort:0,ConnectAddr:"0.0.0.0",ConnectPort:0,Remark:""}:a.forwards.splice(e,1)},d=e=>{a.forwards.filter((e=>"0.0.0.0"==e.ConnectAddr||0==e.ConnectPort||0==e.ListenPort)).length>0||a.forwards.splice(e+1,0,{ListenAddr:"0.0.0.0",ListenPort:0,ConnectAddr:"0.0.0.0",ConnectPort:0,Remark:""})},i=()=>{clearTimeout(a.timer),a.testing=!0,(0,ga._)({MachineId:l.value.current.MachineId,List:a.forwards.map((e=>({ListenAddr:e.ListenAddr,ListenPort:+e.ListenPort,ConnectAddr:e.ConnectAddr,ConnectPort:+e.ConnectPort})))}).then((e=>{var l=e.List;for(let t=0;t<l.length;t++){const e=l[t],o=`${e.ListenPort}->${e.ConnectAddr}:${e.ConnectPort}`,n=a.forwards.filter((e=>`${e.ListenPort}->${e.ConnectAddr}:${e.ConnectPort}`==o));for(let l=0;l<n.length;l++)n[l].Error=e.Error}a.testing=!1,a.timer=setTimeout(i,3e3)})).catch((()=>{a.testing=!1,a.timer=setTimeout(i,3e3)}))};(0,t.sV)((()=>{i()})),(0,t.hi)((()=>{clearTimeout(a.timer)}));const c=()=>a.forwards.map((e=>(e.ListenPort=+e.ListenPort,e.ConnectPort=+e.ConnectPort,e)));return{state:a,handleCellClick:o,handleEditBlur:r,handleEdit:n,handleDel:s,handleAdd:d,getData:c}}};const $a=(0,E.A)(Ra,[["render",xa],["__scopeId","data-v-ef024968"]]);var Ua=$a;const Ba={class:"w-100"},Da=(0,t.Lk)("div",null,[(0,t.Lk)("span",{class:"yellow"},"‰ΩøÁî®Á≥ªÁªüNATÊàñÂ∫îÁî®Â±ÇDNAT")],-1),za={class:"wrap"},Oa=["onClick"],Qa=["title"],ja={key:1},Ka=["onClick"],Ga=["onClick"],Ha=["title"],qa={key:1},Ja=["onClick"],Za=["title"],Ya={key:1},et=["onClick"],lt=["onClick"],at=["title"],tt={key:1},ot=["onClick"];function nt(e,l,a,n,r,s){const d=(0,t.g2)("el-input"),u=(0,t.g2)("Delete"),i=(0,t.g2)("el-icon"),c=(0,t.g2)("el-table-column"),m=(0,t.g2)("el-checkbox"),h=(0,t.g2)("el-button"),p=(0,t.g2)("el-popconfirm"),k=(0,t.g2)("Plus"),v=(0,t.g2)("el-table"),g=(0,t.gN)("trim");return(0,t.uX)(),(0,t.CE)("div",Ba,[Da,(0,t.Lk)("div",za,[(0,t.bF)(v,{stripe:"",data:n.state.lans,border:"",size:"small",width:"100%",height:"400px",onCellDblclick:n.handleCellClick},{default:(0,t.k6)((()=>[(0,t.bF)(c,{prop:"IP",label:"Ë∑ØÁî±IP",width:"130"},{default:(0,t.k6)((e=>[e.row.IPEditing?(0,t.bo)(((0,t.uX)(),(0,t.Wv)(d,{key:0,autofocus:"",size:"small",modelValue:e.row.IP,"onUpdate:modelValue":l=>e.row.IP=l,onBlur:l=>n.handleEditBlur(e.row,"IP")},null,8,["modelValue","onUpdate:modelValue","onBlur"])),[[g]]):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>n.handleEdit(e.row,"IP")},[e.row.Error?((0,t.uX)(),(0,t.CE)("strong",{key:0,title:e.row.Error,class:"red"},(0,o.v_)(e.row.IP),9,Qa)):((0,t.uX)(),(0,t.CE)("span",ja,[(0,t.eW)((0,o.v_)(e.row.IP)+" ",1),(0,t.Lk)("a",{href:"javascript:;",onClick:(0,qe.D$)((l=>e.row.IP="0.0.0.0"),["stop"])},[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(u)])),_:1})],8,Ka)]))],8,Oa))])),_:1}),(0,t.bF)(c,{prop:"PrefixLength",label:"Ë∑ØÁî±Êé©Á†Å",width:"70"},{default:(0,t.k6)((e=>[e.row.PrefixLengthEditing?(0,t.bo)(((0,t.uX)(),(0,t.Wv)(d,{key:0,autofocus:"",size:"small",modelValue:e.row.PrefixLength,"onUpdate:modelValue":l=>e.row.PrefixLength=l,onBlur:l=>n.handleEditBlur(e.row,"PrefixLength")},null,8,["modelValue","onUpdate:modelValue","onBlur"])),[[g]]):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>n.handleEdit(e.row,"PrefixLength")},[e.row.Error?((0,t.uX)(),(0,t.CE)("strong",{key:0,title:e.row.Error,class:"red"},(0,o.v_)(e.row.PrefixLength),9,Ha)):((0,t.uX)(),(0,t.CE)("span",qa,(0,o.v_)(e.row.PrefixLength),1))],8,Ga))])),_:1}),(0,t.bF)(c,{prop:"MapIP",label:"ÁõÆÊ†áIP",width:"130"},{default:(0,t.k6)((e=>[e.row.MapIPEditing?(0,t.bo)(((0,t.uX)(),(0,t.Wv)(d,{key:0,autofocus:"",size:"small",modelValue:e.row.MapIP,"onUpdate:modelValue":l=>e.row.MapIP=l,onBlur:l=>n.handleEditBlur(e.row,"MapIP")},null,8,["modelValue","onUpdate:modelValue","onBlur"])),[[g]]):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>n.handleEdit(e.row,"MapIP")},[e.row.Error?((0,t.uX)(),(0,t.CE)("strong",{key:0,title:e.row.Error,class:"red"},(0,o.v_)(e.row.MapIP),9,Za)):((0,t.uX)(),(0,t.CE)("span",Ya,[(0,t.eW)((0,o.v_)(e.row.MapIP)+" ",1),(0,t.Lk)("a",{href:"javascript:;",onClick:(0,qe.D$)((l=>e.row.MapIP="0.0.0.0"),["stop"])},[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(u)])),_:1})],8,et)]))],8,Ja))])),_:1}),(0,t.bF)(c,{prop:"MapPrefixLength",label:"ÁõÆÊ†áÊé©Á†Å",width:"70"},{default:(0,t.k6)((e=>[e.row.MapPrefixLengthEditing?(0,t.bo)(((0,t.uX)(),(0,t.Wv)(d,{key:0,autofocus:"",size:"small",modelValue:e.row.MapPrefixLength,"onUpdate:modelValue":l=>e.row.MapPrefixLength=l,onBlur:l=>n.handleEditBlur(e.row,"MapPrefixLength")},null,8,["modelValue","onUpdate:modelValue","onBlur"])),[[g]]):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>n.handleEdit(e.row,"MapPrefixLength")},[e.row.Error?((0,t.uX)(),(0,t.CE)("strong",{key:0,title:e.row.Error,class:"red"},(0,o.v_)(e.row.MapPrefixLength),9,at)):((0,t.uX)(),(0,t.CE)("span",tt,(0,o.v_)(e.row.MapPrefixLength),1))],8,lt))])),_:1}),(0,t.bF)(c,{prop:"Remark",label:"Â§áÊ≥®"},{default:(0,t.k6)((e=>[e.row.RemarkEditing?(0,t.bo)(((0,t.uX)(),(0,t.Wv)(d,{key:0,autofocus:"",size:"small",modelValue:e.row.Remark,"onUpdate:modelValue":l=>e.row.Remark=l,onBlur:l=>n.handleEditBlur(e.row,"Remark")},null,8,["modelValue","onUpdate:modelValue","onBlur"])),[[g]]):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>n.handleEdit(e.row,"Remark")},[(0,t.Lk)("span",null,(0,o.v_)(e.row.Remark),1)],8,ot))])),_:1}),(0,t.bF)(c,{prop:"Disabled",label:"Á¶ÅÁî®",width:"80"},{default:(0,t.k6)((e=>[(0,t.bF)(m,{modelValue:e.row.Disabled,"onUpdate:modelValue":l=>e.row.Disabled=l,label:"Á¶ÅÁî®"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.bF)(c,{prop:"Oper",label:"Êìç‰Ωú",width:"110"},{default:(0,t.k6)((e=>[(0,t.Lk)("div",null,[(0,t.bF)(p,{title:"Âà†Èô§‰∏çÂèØÈÄÜÔºåÊòØÂê¶Á°ÆËÆ§?",onConfirm:l=>n.handleDel(e.$index)},{reference:(0,t.k6)((()=>[(0,t.bF)(h,{type:"danger",size:"small"},{default:(0,t.k6)((()=>[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(u)])),_:1})])),_:1})])),_:2},1032,["onConfirm"]),(0,t.bF)(h,{type:"primary",size:"small",onClick:l=>n.handleAdd(e.$index)},{default:(0,t.k6)((()=>[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(k)])),_:1})])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data","onCellDblclick"])])])}var rt={props:["modelValue"],emits:["update:modelValue"],components:{Delete:y.epd,Plus:y.FWt,Warning:y.N5l,Refresh:y.C42},setup(e){const l=(0,_.W)(),a=(0,u.Kh)({lans:l.value.current.Lans.slice(0).map((e=>(e.MapIP=e.MapIP||"0.0.0.0",e.MapPrefixLength=e.MapPrefixLength||24,e)))});0==a.lans.length&&a.lans.push({IP:"0.0.0.0",PrefixLength:24,MapIP:"0.0.0.0",MapPrefixLength:24,Remark:""});const t=(e,l)=>{o(e,l.property)},o=(e,l)=>{a.lans.forEach((e=>{e["IPEditing"]=!1,e["PrefixLengthEditing"]=!1,e["MapIPEditing"]=!1,e["MapPrefixLengthEditing"]=!1,e["RemarkEditing"]=!1})),e[`${l}Editing`]=!0,e["__editing"]=!0},n=(e,l)=>{e[`${l}Editing`]=!1,e["__editing"]=!1;try{e[l]=e[l].trim()}catch(t){}if("PrefixLength"==l||"MapPrefixLength"==l){var a=+e[l];(a>32||a<0||isNaN(a))&&(a=24),e[l]=a}},r=e=>{a.lans.splice(e,1),0==a.lans.length&&s(0)},s=e=>{a.lans.splice(e+1,0,{IP:"0.0.0.0",PrefixLength:24,MapIP:"0.0.0.0",MapPrefixLength:24,Remark:""})},d=()=>a.lans.map((e=>(e.PrefixLength=+e.PrefixLength,e)));return{state:a,handleDel:r,handleAdd:s,getData:d,handleCellClick:t,handleEditBlur:n,handleEdit:o}}};const st=(0,E.A)(rt,[["render",nt]]);var dt=st;const ut=e=>((0,t.Qi)("data-v-52d0f5c5"),e=e(),(0,t.jt)(),e),it={class:"wrap"},ct=ut((()=>(0,t.Lk)("span",{class:"mgl-1"},"ÁïôÁ©∫Âàô‰ΩøÁî®„ÄêÊú¨ÁªÑÁΩëÁªú„ÄëÁöÑËÆæÁΩÆ",-1))),mt=ut((()=>(0,t.Lk)("span",null,"/",-1)));function ht(e,l,a,o,n,r){const s=(0,t.g2)("el-input"),d=(0,t.g2)("el-button"),u=(0,t.g2)("el-form-item"),i=(0,t.g2)("el-checkbox"),c=(0,t.g2)("el-form"),m=(0,t.gN)("trim");return(0,t.uX)(),(0,t.CE)("div",it,[(0,t.bF)(c,{ref:"ruleFormRef",model:o.state.ruleForm,rules:o.state.rules,"label-width":"8rem"},{default:(0,t.k6)((()=>[o.state.showGuid?((0,t.uX)(),(0,t.Wv)(u,{key:0,label:"ÁΩëÂç°ID",prop:"Guid"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(s,{modelValue:o.state.ruleForm.Guid,"onUpdate:modelValue":l[0]||(l[0]=e=>o.state.ruleForm.Guid=e),style:{width:"14rem"},disabled:""},null,8,["modelValue"]),[[m]]),(0,t.bF)(d,{onClick:o.handleNewId,class:"mgl-1"},{default:(0,t.k6)((()=>[(0,t.eW)("Êñ∞ID")])),_:1},8,["onClick"])])),_:1})):(0,t.Q3)("",!0),(0,t.bF)(u,{label:"ÁΩëÂç°Âêç",prop:"Name"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(s,{modelValue:o.state.ruleForm.Name,"onUpdate:modelValue":l[1]||(l[1]=e=>o.state.ruleForm.Name=e),style:{width:"14rem"}},null,8,["modelValue"]),[[m]]),ct])),_:1}),(0,t.bF)(u,{label:"ÁΩëÂç°IP",prop:"IP",class:"mgb-0"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(s,{modelValue:o.state.ruleForm.IP,"onUpdate:modelValue":l[2]||(l[2]=e=>o.state.ruleForm.IP=e),style:{width:"14rem"}},null,8,["modelValue"]),[[m]]),mt,(0,t.bo)((0,t.bF)(s,{onChange:o.handlePrefixLengthChange,modelValue:o.state.ruleForm.PrefixLength,"onUpdate:modelValue":l[3]||(l[3]=e=>o.state.ruleForm.PrefixLength=e),style:{width:"4rem"}},null,8,["onChange","modelValue"]),[[m]])])),_:1}),(0,t.bF)(u,{label:"",class:"mgb-0"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{class:"mgr-1",modelValue:o.state.ruleForm.ShowDelay,"onUpdate:modelValue":l[4]||(l[4]=e=>o.state.ruleForm.ShowDelay=e),label:"ÊòæÁ§∫Âª∂Ëøü",size:"large"},null,8,["modelValue"]),(0,t.bF)(i,{class:"mgr-1",modelValue:o.state.ruleForm.AutoConnect,"onUpdate:modelValue":l[5]||(l[5]=e=>o.state.ruleForm.AutoConnect=e),label:"Ëá™Âä®ËøûÊé•",size:"large"},null,8,["modelValue"]),(0,t.bF)(i,{class:"mgr-1",modelValue:o.state.ruleForm.Multicast,"onUpdate:modelValue":l[6]||(l[6]=e=>o.state.ruleForm.Multicast=e),label:"Á¶ÅÁî®ÂπøÊí≠",size:"large"},null,8,["modelValue"]),(0,t.bF)(i,{class:"mgr-1",modelValue:o.state.ruleForm.DisableNat,"onUpdate:modelValue":l[7]||(l[7]=e=>o.state.ruleForm.DisableNat=e),label:"Á¶ÅÁî®NAT",size:"large"},null,8,["modelValue"]),(0,t.bF)(i,{class:"mgr-1",modelValue:o.state.ruleForm.InterfaceOrder,"onUpdate:modelValue":l[8]||(l[8]=e=>o.state.ruleForm.InterfaceOrder=e),label:"ÁΩëÂç°È°∫Â∫è",size:"large"},null,8,["modelValue"]),(0,t.bF)(i,{class:"mgr-1",modelValue:o.state.ruleForm.SrcProxy,"onUpdate:modelValue":l[9]||(l[9]=e=>o.state.ruleForm.SrcProxy=e),label:"TCPËΩ¨‰ª£ÁêÜ",size:"large"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])}var pt={emits:["change"],components:{Delete:y.epd,Plus:y.FWt,Warning:y.N5l,Refresh:y.C42,TuntapForward:Ua,TuntapLan:dt},setup(e,{emit:l}){const a=(0,_.W)(),o=(0,u.KR)(null),n=(0,u.Kh)({showGuid:a.value.current.systems.indexOf("windows")>=0,ruleForm:{IP:a.value.current.IP,PrefixLength:a.value.current.PrefixLength||24,Gateway:a.value.current.Gateway,ShowDelay:a.value.current.ShowDelay,AutoConnect:a.value.current.AutoConnect,Upgrade:a.value.current.Upgrade,Multicast:a.value.current.Multicast,DisableNat:a.value.current.DisableNat,TcpMerge:a.value.current.TcpMerge,InterfaceOrder:a.value.current.InterfaceOrder,FakeAck:a.value.current.FakeAck,SrcProxy:a.value.current.SrcProxy,Forwards:a.value.current.Forwards,Name:a.value.current.Name,Guid:""},rules:{Name:{type:"string",pattern:/^$|^[A-Za-z][A-Za-z0-9]{0,31}$/,message:"ËØ∑ËæìÂÖ•Ê≠£Á°ÆÁöÑÁΩëÂç°Âêç",transform(e){return e.trim()}}}}),r=()=>{var e=+n.ruleForm.PrefixLength;(e>32||e<16||isNaN(e))&&(e=24),n.ruleForm.PrefixLength=e},s=()=>{n.ruleForm.Guid=crypto.randomUUID(),(0,ga.Iu)({key:a.value.current.device.MachineId,value:n.ruleForm.Guid}).then((e=>{me.nk.success("Â∑≤Êìç‰Ωú")})).catch((()=>{me.nk.error("Êìç‰ΩúÂ§±Ë¥•ÔºÅ")}))},d=()=>{console.log(a.value.current);const e=JSON.parse(JSON.stringify(a.value.current,((e,l)=>"device"==e?"":l)));return e.IP=n.ruleForm.IP.replace(/\s/g,"")||"0.0.0.0",e.PrefixLength=+n.ruleForm.PrefixLength,e.Gateway=n.ruleForm.Gateway,e.ShowDelay=n.ruleForm.ShowDelay,e.AutoConnect=n.ruleForm.AutoConnect,e.Upgrade=n.ruleForm.Upgrade,e.Multicast=n.ruleForm.Multicast,e.DisableNat=n.ruleForm.DisableNat,e.TcpMerge=n.ruleForm.TcpMerge,e.InterfaceOrder=n.ruleForm.InterfaceOrder,e.FakeAck=n.ruleForm.FakeAck,e.SrcProxy=n.ruleForm.SrcProxy,e.Name=n.ruleForm.Name,e};return(0,t.sV)((()=>{(0,ga.Gn)(a.value.current.device.MachineId).then((e=>{n.ruleForm.Guid=e}))})),{state:n,ruleFormRef:o,handlePrefixLengthChange:r,handleNewId:s,getData:d}}};const kt=(0,E.A)(pt,[["render",ht],["__scopeId","data-v-52d0f5c5"]]);var vt=kt;function gt(e,l,a,n,r,s){const d=(0,t.g2)("el-table-column"),u=(0,t.g2)("el-table");return(0,t.uX)(),(0,t.CE)("div",null,[(0,t.bF)(u,{data:n.state.data,size:"small",border:"",height:"500"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{property:"Ip",label:"IP"}),(0,t.bF)(d,{property:"Id",label:"ÁõÆÊ†á"},{default:(0,t.k6)((e=>[(0,t.Lk)("span",null,(0,o.v_)(n.state.names[e.row.Id]),1)])),_:1})])),_:1},8,["data"])])}var wt={props:["item"],setup(e){const l=(0,_.W)(),a=(0,u.Kh)({machineId:l.value.current.device.MachineId,machineName:l.value.current.device.MachineName,data:[],names:{}});return(0,t.sV)((()=>{(0,ce.NT)().then((e=>{a.names=e.reduce(((e,l)=>(e[l.MachineId]=l.MachineName,e)),{})})).catch((()=>{})),(0,ga.bP)(a.machineId).then((e=>{a.data=Object.keys(e).map((l=>({Ip:l,Id:e[l]})))})).catch((()=>{}))})),{state:a}}};const ft=(0,E.A)(wt,[["render",gt]]);var bt=ft,Ct={props:["modelValue"],emits:["change","update:modelValue"],components:{TuntapForward:Ua,TuntapLan:dt,TuntapIP:vt,TuntapRoutes:bt},setup(e,{emit:l}){const a=(0,_.W)(),o=(0,u.Kh)({show:!0,machineName:a.value.current.device.MachineName,loading:!1});(0,t.wB)((()=>o.show),(e=>{e||setTimeout((()=>{l("update:modelValue",e)}),300)}));const n=(0,u.KR)(null),r=(0,u.KR)(null),s=(0,u.KR)(null),d=()=>{o.loading=!0;const e=n.value.getData();e.Lans=r.value?r.value.getData():a.value.current.Lans,e.Forwards=s.value?s.value.getData():a.value.current.Forwards,(0,ga.ac)(e).then((()=>{o.show=!1,o.loading=!1,me.nk.success("Â∑≤Êìç‰ΩúÔºÅ"),l("change")})).catch((e=>{o.loading=!1,console.log(e),me.nk.error("Êìç‰ΩúÂ§±Ë¥•ÔºÅ")}))};return{state:o,handleSave:d,ipDom:n,lanDom:r,forwardDom:s}}};const Ft=(0,E.A)(Ct,[["render",va],["__scopeId","data-v-4f2bdc80"]]);var _t=Ft;const yt=e=>((0,t.Qi)("data-v-fd15d994"),e=e(),(0,t.jt)(),e),Vt=yt((()=>(0,t.Lk)("p",null,"ÁΩëÁªúÁßüÊúü30Â§©„ÄÅIPÁßüÊúü7Â§©",-1))),Et=yt((()=>(0,t.Lk)("span",null,"/",-1))),Lt=yt((()=>(0,t.Lk)("span",{style:{width:"1rem"}},null,-1))),It={class:"calc"},Pt=yt((()=>(0,t.Lk)("span",{class:"label"},"ÁΩëÁªúÂè∑",-1))),St={class:"value"},Wt=yt((()=>(0,t.Lk)("span",{class:"label"},"ÁΩëÂÖ≥",-1))),Xt={class:"value"},Tt=yt((()=>(0,t.Lk)("span",{class:"label"},"ÂºÄÂßãIP",-1))),At={class:"value"},Nt=yt((()=>(0,t.Lk)("span",{class:"label"},"ÁªìÊùüIP",-1))),Mt={class:"value"},xt=yt((()=>(0,t.Lk)("span",{class:"label"},"ÂπøÊí≠Âè∑",-1))),Rt={class:"value"},$t=yt((()=>(0,t.Lk)("span",{class:"label"},"IPÊï∞Èáè",-1))),Ut={class:"value"};function Bt(e,l,a,n,r,s){const d=(0,t.g2)("el-form-item"),u=(0,t.g2)("el-input"),i=(0,t.g2)("el-button"),c=(0,t.g2)("AccessShow"),m=(0,t.g2)("el-form"),h=(0,t.g2)("el-dialog"),p=(0,t.gN)("trim");return(0,t.uX)(),(0,t.Wv)(h,{modelValue:n.state.show,"onUpdate:modelValue":l[4]||(l[4]=e=>n.state.show=e),"close-on-click-modal":!1,"append-to":".app-wrap",title:"ÈÖçÁΩÆÊú¨ÁªÑÁöÑÁΩëÁªú",top:"1vh",width:"400"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(m,{ref:"ruleFormRef",model:n.state.ruleForm,rules:n.state.rules,"label-width":"100"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{prop:"gateway"},{default:(0,t.k6)((()=>[Vt])),_:1}),(0,t.bF)(d,{label:"ÁΩëÂç°Âêç",prop:"Name"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(u,{modelValue:n.state.ruleForm.Name,"onUpdate:modelValue":l[0]||(l[0]=e=>n.state.ruleForm.Name=e),style:{width:"14rem"}},null,8,["modelValue"]),[[p]])])),_:1}),(0,t.bF)(d,{label:"ÁΩëÁªúÂâçÁºÄ",prop:"IP"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(u,{modelValue:n.state.ruleForm.IP,"onUpdate:modelValue":l[1]||(l[1]=e=>n.state.ruleForm.IP=e),style:{width:"14rem"},onChange:n.handlePrefixLengthChange},null,8,["modelValue","onChange"]),[[p]]),Et,(0,t.bo)((0,t.bF)(u,{onChange:n.handlePrefixLengthChange,modelValue:n.state.ruleForm.PrefixLength,"onUpdate:modelValue":l[2]||(l[2]=e=>n.state.ruleForm.PrefixLength=e),style:{width:"4rem"}},null,8,["onChange","modelValue"]),[[p]]),Lt,(0,t.bF)(i,{onClick:n.handleClear},{default:(0,t.k6)((()=>[(0,t.eW)("ÈáçÁΩÆ")])),_:1},8,["onClick"])])),_:1}),(0,t.bF)(d,{label:"",prop:"IP1"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",It,[(0,t.Lk)("p",null,[Pt,(0,t.Lk)("span",St,(0,o.v_)(n.state.values.Network),1)]),(0,t.Lk)("p",null,[Wt,(0,t.Lk)("span",Xt,(0,o.v_)(n.state.values.Gateway),1)]),(0,t.Lk)("p",null,[Tt,(0,t.Lk)("span",At,(0,o.v_)(n.state.values.Start),1)]),(0,t.Lk)("p",null,[Nt,(0,t.Lk)("span",Mt,(0,o.v_)(n.state.values.End),1)]),(0,t.Lk)("p",null,[xt,(0,t.Lk)("span",Rt,(0,o.v_)(n.state.values.Broadcast),1)]),(0,t.Lk)("p",null,[$t,(0,t.Lk)("span",Ut,(0,o.v_)(n.state.values.Count),1)])])])),_:1}),(0,t.bF)(c,{value:"Lease"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{label:"",prop:"Btns"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(i,{onClick:l[3]||(l[3]=e=>n.state.show=!1)},{default:(0,t.k6)((()=>[(0,t.eW)("ÂèñÊ∂à")])),_:1}),(0,t.bF)(i,{type:"primary",onClick:n.handleSave},{default:(0,t.k6)((()=>[(0,t.eW)("Á°ÆËÆ§")])),_:1},8,["onClick"])])])),_:1})])),_:1})])),_:1},8,["model","rules"])])])),_:1},8,["modelValue"])}var Dt={props:["modelValue"],emits:["change","update:modelValue"],components:{Delete:y.epd,Plus:y.FWt},setup(e,{emit:l}){const a=(0,u.KR)(null),o=(0,u.Kh)({show:!0,ruleForm:{Name:"",IP:"0.0.0.0",PrefixLength:24},rules:{Name:{type:"string",pattern:/^$|^[A-Za-z][A-Za-z0-9]{0,31}$/,message:"ËØ∑ËæìÂÖ•Ê≠£Á°ÆÁöÑÁΩëÂç°Âêç",transform(e){return e.trim()}}},values:{}});(0,t.wB)((()=>o.show),(e=>{e||setTimeout((()=>{l("update:modelValue",e)}),300)}));const n=()=>{(0,ga.w0)(o.ruleForm).then((e=>{o.values=e}))},r=()=>{(0,ga.Nj)().then((e=>{o.ruleForm.Name=e.Name,o.ruleForm.IP=e.IP,o.ruleForm.PrefixLength=e.PrefixLength,n()}))},s=()=>{var e=+o.ruleForm.PrefixLength;(e>32||e<16||isNaN(e))&&(e=24),o.ruleForm.PrefixLength=e,n()},d=()=>{(0,ga.AE)(o.ruleForm).then((()=>{me.nk.success("Â∑≤Êìç‰Ωú"),o.show=!1})).catch((e=>{console.log(e),me.nk.error("Êìç‰ΩúÂ§±Ë¥•")}))},i=()=>{(0,ga.AE)({Name:"",IP:"0.0.0.0",PrefixLength:24}).then((()=>{me.nk.success("Â∑≤Êìç‰Ωú"),r()})).catch((e=>{console.log(e),me.nk.error("Êìç‰ΩúÂ§±Ë¥•")}))};return(0,t.sV)((()=>{r()})),{state:o,ruleFormRef:a,handleSave:d,handlePrefixLengthChange:s,handleClear:i}}};const zt=(0,E.A)(Dt,[["render",Bt],["__scopeId","data-v-fd15d994"]]);var Ot=zt;const Qt=e=>((0,t.Qi)("data-v-09107adc"),e=e(),(0,t.jt)(),e),jt={key:0},Kt={key:0,href:"javascript:;",class:"a-line"},Gt=Qt((()=>(0,t.Lk)("span",null,"Êìç‰Ωú‰∏≠.",-1))),Ht={key:0,href:"javascript:;",class:"a-line"},qt=Qt((()=>(0,t.Lk)("span",null,"Êìç‰Ωú‰∏≠.",-1))),Jt=["href"],Zt=Qt((()=>(0,t.Lk)("span",null," / ",-1))),Yt={key:0},eo={key:1},lo={key:0},ao={key:1};function to(e,l,a,n,r,s){const d=(0,t.g2)("el-descriptions-item"),u=(0,t.g2)("Loading"),i=(0,t.g2)("el-icon"),c=(0,t.g2)("Delete"),m=(0,t.g2)("el-button"),h=(0,t.g2)("el-popconfirm"),p=(0,t.g2)("AccessShow"),k=(0,t.g2)("el-descriptions"),v=(0,t.g2)("el-dialog"),g=(0,t.g2)("el-table-column"),w=(0,t.g2)("el-switch"),f=(0,t.g2)("el-table");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(v,{modelValue:n.state.show,"onUpdate:modelValue":l[2]||(l[2]=e=>n.state.show=e),"append-to":".app-wrap",title:`‰∏é[${n.state.device.MachineName}]ÁöÑÈìæÊé•`,top:"1vh",width:"350"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(k,{border:"",size:"small",column:1,"label-width":"6rem","overlength-control":"wrap"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{label:"ÁõÆÊ†á"},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(n.state.connection.IPEndPoint),1)])),_:1}),(0,t.bF)(d,{label:"‰∫ãÂä°"},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(n.state.transactions[n.state.connection.TransactionId]),1)])),_:1}),(0,t.bF)(d,{label:"ÂçèËÆÆ"},{default:(0,t.k6)((()=>[n.state.connection.Connected?((0,t.uX)(),(0,t.CE)("div",jt,[(0,t.Lk)("p",null,(0,o.v_)(n.state.connection.TransportName)+"("+(0,o.v_)(n.state.protocolTypes[n.state.connection.ProtocolType])+") - "+(0,o.v_)(n.state.types[n.state.connection.Type]),1),(0,t.Lk)("p",null,(0,o.v_)(n.state.connection.SendBufferRemainingText)+" - "+(0,o.v_)(n.state.connection.RecvBufferRemainingText),1)])):(0,t.Q3)("",!0)])),_:1}),(0,t.bF)(d,{label:"SSL"},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(n.state.connection.SSL),1)])),_:1}),(0,t.bF)(d,{label:"‰∏ä‰º†"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.Lk)("p",null,[(0,t.Lk)("span",null,(0,o.v_)(n.state.connection.SendBytesText),1)])])])),_:1}),(0,t.bF)(d,{label:"‰∏ãËΩΩ"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.Lk)("p",null,[(0,t.Lk)("span",null,(0,o.v_)(n.state.connection.ReceiveBytesText),1)])])])),_:1}),(0,t.bF)(d,{label:"‰∏≠Áªß"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[n.state.connecting?((0,t.uX)(),(0,t.CE)("a",Kt,[Gt,(0,t.bF)(i,{size:"14",class:"loading"},{default:(0,t.k6)((()=>[(0,t.bF)(u)])),_:1})])):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l[0]||(l[0]=(...e)=>n.handleNode&&n.handleNode(...e))},(0,o.v_)(n.state.nodesDic[n.state.connection.NodeId]||"ÈÄâÊã©ËäÇÁÇπ"),1))])])),_:1}),(0,t.bF)(d,{label:"ÊâìÊ¥û"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[n.state.connecting?((0,t.uX)(),(0,t.CE)("a",Ht,[qt,(0,t.bF)(i,{size:"14",class:"loading"},{default:(0,t.k6)((()=>[(0,t.bF)(u)])),_:1})])):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l[1]||(l[1]=(...e)=>n.handlep2p&&n.handlep2p(...e))},"Â∞ùËØïÊâìÊ¥û"))])])),_:1}),(0,t.bF)(d,{label:"Âª∂Ëøü"},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(n.state.connection.Delay),1)])),_:1}),(0,t.bF)(d,{label:"Êìç‰Ωú"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(p,{value:"TunnelRemove"},{default:(0,t.k6)((()=>[(0,t.bF)(h,{"confirm-button-text":"Á°ÆËÆ§","cancel-button-text":"ÂèñÊ∂à",title:"Á°ÆÂÆöÂÖ≥Èó≠Ê≠§ËøûÊé•?",onConfirm:n.handleDel},{reference:(0,t.k6)((()=>[(0,t.bF)(m,{type:"danger",size:"small"},{default:(0,t.k6)((()=>[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(c)])),_:1})])),_:1})])),_:1},8,["onConfirm"])])),_:1})])])),_:1})])),_:1})])])),_:1},8,["modelValue","title"]),(0,t.bF)(v,{modelValue:n.state.showNodes,"onUpdate:modelValue":l[3]||(l[3]=e=>n.state.showNodes=e),title:e.$t("server.relayTitle"),width:"98%",top:"2vh"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(f,{data:n.state.nodes,size:"small",border:"",height:"600"},{default:(0,t.k6)((()=>[(0,t.bF)(g,{property:"Name",label:e.$t("server.relayName")},{default:(0,t.k6)((e=>[(0,t.Lk)("div",null,[(0,t.Lk)("a",{href:e.row.Url,class:"a-line blue",target:"_blank"},(0,o.v_)(e.row.Name),9,Jt)])])),_:1},8,["label"]),(0,t.bF)(g,{property:"ConnectionsRatio",label:e.$t("server.relayConnection"),width:"80"},{default:(0,t.k6)((e=>[(0,t.Lk)("span",null,[(0,t.Lk)("strong",null,(0,o.v_)(e.row.ConnectionsRatio),1)])])),_:1},8,["label"]),(0,t.bF)(g,{property:"BandwidthEach",label:e.$t("server.relaySpeed"),width:"140"},{default:(0,t.k6)((e=>[(0,t.Lk)("p",null,[(0,t.Lk)("span",null,(0,o.v_)(e.row.BandwidthRatio)+"Mbps",1),Zt,0==e.row.BandwidthEach?((0,t.uX)(),(0,t.CE)("span",Yt,"--")):((0,t.uX)(),(0,t.CE)("span",eo,(0,o.v_)(e.row.BandwidthEach)+"Mbps",1))])])),_:1},8,["label"]),(0,t.bF)(g,{property:"DataEachMonth",label:e.$t("server.relayFlow"),width:"100"},{default:(0,t.k6)((e=>[0==e.row.DataEachMonth?((0,t.uX)(),(0,t.CE)("span",lo,"--")):((0,t.uX)(),(0,t.CE)("span",ao,(0,o.v_)((e.row.DataRemain/1024/1024/1024).toFixed(2))+"GB ",1))])),_:1},8,["label"]),(0,t.bF)(g,{property:"Delay",label:e.$t("server.relayDelay"),width:"60"},{default:(0,t.k6)((e=>[(0,t.Lk)("span",null,(0,o.v_)(e.row.Delay)+"ms",1)])),_:1},8,["label"]),(0,t.bF)(g,{property:"Public",label:e.$t("server.relayPublic"),width:"50"},{default:(0,t.k6)((e=>[(0,t.bF)(w,{disabled:"",modelValue:e.row.Public,"onUpdate:modelValue":l=>e.row.Public=l,size:"small"},null,8,["modelValue","onUpdate:modelValue"])])),_:1},8,["label"]),(0,t.bF)(g,{property:"Oper",label:e.$t("server.relayUse"),width:"130"},{default:(0,t.k6)((e=>[1==(1&e.row.Protocol)?((0,t.uX)(),(0,t.Wv)(m,{key:0,size:"small",onClick:l=>n.handleConnect(e.row,1)},{default:(0,t.k6)((()=>[(0,t.eW)("TCP")])),_:2},1032,["onClick"])):(0,t.Q3)("",!0),2==(2&e.row.Protocol)?((0,t.uX)(),(0,t.Wv)(m,{key:1,size:"small",onClick:l=>n.handleConnect(e.row,2)},{default:(0,t.k6)((()=>[(0,t.eW)("UDP")])),_:2},1032,["onClick"])):(0,t.Q3)("",!0)])),_:1},8,["label"])])),_:1},8,["data"])])])),_:1},8,["modelValue","title"])],64)}var oo=a(8651),no=a(9232),ro={props:["modelValue"],emits:["change","update:modelValue"],components:{Delete:y.epd,Select:y.l6P,ArrowDown:y.yd$,Loading:y.Rhj},setup(e,{emit:l}){const{t:a}=(0,xl.s9)(),o=(0,d.B)(),n=(0,oo.Z)(),r=(0,t.EW)((()=>n.value.device.hook_connection&&n.value.device.hook_connection[n.value.transactionId]||{})),s=(0,u.Kh)({show:!0,protocolTypes:{1:"tcp",2:"udp",4:"msquic"},types:{0:"ÊâìÊ¥û",1:"‰∏≠Áªß",2:"ËäÇÁÇπ"},transactions:{forward:"Á´ØÂè£ËΩ¨Âèë",tuntap:"ËôöÊãüÁΩëÂç°",socks5:"‰ª£ÁêÜËΩ¨Âèë"},device:n.value.device,transactionId:n.value.transactionId,connecting:(0,t.EW)((()=>!!n.value.device.hook_operating&&n.value.device.hook_operating[n.value.transactionId])),connection:r,showNodes:!1,nodes:[],nodesDic:{},timer:0});(0,t.wB)((()=>s.show),(e=>{e||setTimeout((()=>{l("update:modelValue",e),l("change")}),300)}));const i=()=>{(0,Tl.pH)(s.device.MachineId,s.transactionId).then((()=>{me.nk.success(a("common.oper"))})).catch((()=>{}))},c=()=>{clearTimeout(s.timer),(0,no.W4)().then((e=>{s.nodes=e,s.nodesDic=e.reduce(((e,l)=>(e[l.NodeId]=l.Name,e)),{}),s.timer=setTimeout(c,1e3)})).catch((()=>{s.timer=setTimeout(c,1e3)}))},m=()=>{(0,Tl.xN)({ToMachineId:s.device.MachineId,TransactionId:s.transactionId,DenyProtocols:"tuntap"==s.transactionId?4:2}).then((()=>{me.nk.success(a("common.oper"))})).catch((()=>{me.nk.success(a("common.operFail"))}))},h=()=>{s.showNodes=!0},p=(e,l)=>{const t={FromMachineId:o.value.config.Client.Id,TransactionId:s.transactionId,ToMachineId:s.device.MachineId,NodeId:e.NodeId,Protocol:l};(0,no.uQ)(t).then((()=>{me.nk.success(a("common.oper"))})).catch((()=>{me.nk.success(a("common.operFail"))})),s.showNodes=!1};return(0,t.sV)((()=>{n.value.updateRealTime(!0),c()})),(0,t.hi)((()=>{n.value.updateRealTime(!1),clearTimeout(s.timer)})),{state:s,handleDel:i,handlep2p:m,handleNode:h,handleConnect:p}}};const so=(0,E.A)(ro,[["render",to],["__scopeId","data-v-09107adc"]]);var uo=so;const io=e=>((0,t.Qi)("data-v-4a2dce12"),e=e(),(0,t.jt)(),e),co={class:"nowrap"},mo=["onClick"],ho={class:"nowrap"},po=["onClick"],ko={key:1,class:"skeleton-animation"},vo=io((()=>(0,t.Lk)("div",{class:"device-remark"},null,-1)));function go(e,l,a,n,r,s){const d=(0,t.g2)("ConnectionShow"),u=(0,t.g2)("AccessBoolean"),i=(0,t.g2)("el-skeleton-item"),c=(0,t.g2)("el-skeleton"),m=(0,t.g2)("el-table-column");return(0,t.uX)(),(0,t.Wv)(m,{prop:"forward",label:e.$t("home.forward"),width:"80"},{default:(0,t.k6)((l=>[l.row&&l.row.hook_counter?((0,t.uX)(),(0,t.Wv)(u,{key:0,value:"ForwardOther,ForwardSelf"},{default:(0,t.k6)((({values:a})=>[a.ForwardOther||a.ForwardSelf&&l.row.isSelf?((0,t.uX)(),(0,t.CE)("div",{key:0,class:"skeleton-animation",style:(0,o.Tr)(`animation-delay:${l.row.animationDelay}ms`)},[(0,t.Lk)("div",co,[(0,t.bF)(d,{row:l.row,transactionId:"forward"},null,8,["row"]),(0,t.Lk)("a",{href:"javascript:;",class:(0,o.C4)({green:l.row.hook_counter.forward>0}),onClick:e=>n.handleEdit(l.row.MachineId,l.row.MachineName,a)},[(0,t.Lk)("span",{class:(0,o.C4)({gateway:l.row.hook_counter.forward>0})},(0,o.v_)(e.$t("home.forwardPort"))+"("+(0,o.v_)(l.row.hook_counter.forward>99?"99+":l.row.hook_counter.forward)+")",3)],10,mo)]),(0,t.Lk)("div",ho,[(0,t.Lk)("a",{href:"javascript:;",class:(0,o.C4)({green:l.row.hook_counter.sforward>0}),onClick:e=>n.handleSEdit(l.row.MachineId,l.row.MachineName,a)},[(0,t.Lk)("span",{class:(0,o.C4)({gateway:l.row.hook_counter.sforward>0})},(0,o.v_)(e.$t("home.forwardServer"))+"("+(0,o.v_)(l.row.hook_counter.sforward>99?"99+":l.row.hook_counter.sforward)+")",3)],10,po)])],4)):(0,t.Q3)("",!0)])),_:2},1024)):l.row&&!l.row.hook_counter_load?((0,t.uX)(),(0,t.CE)("div",ko,[(0,t.bF)(c,{animated:""},{template:(0,t.k6)((()=>[(0,t.Lk)("p",null,[(0,t.bF)(i,{variant:"text",style:{width:"50%"}})]),(0,t.Lk)("p",null,[(0,t.bF)(i,{variant:"text",style:{width:"50%"}})])])),_:1})])):(0,t.Q3)("",!0),vo])),_:1},8,["label"])}const wo=Symbol(),fo=()=>{const e=(0,u.KR)({showEdit:!1,showCopy:!1,machineid:"",machineName:""});return(0,t.Gt)(wo,e),{sforward:e}},bo=()=>(0,t.WQ)(wo);var Co={components:{ConnectionShow:Ue.A},setup(){const e=h(),l=bo(),a=(0,d.B)(),o=(0,t.EW)((()=>a.value.config.Client.Id)),n=(l,a,t)=>{if(o.value===l){if(!t.ForwardSelf)return void me.nk.success("Êó†ÊùÉÈôê")}else if(!t.ForwardOther)return void me.nk.success("Êó†ÊùÉÈôê");e.value.machineId=l,e.value.machineName=a,e.value.showEdit=!0},r=(e,a,t)=>{if(o.value===e){if(!t.ForwardSelf)return void me.nk.success("Êó†ÊùÉÈôê")}else if(!t.ForwardOther)return void me.nk.success("Êó†ÊùÉÈôê");l.value.machineid=e,l.value.machineName=a,l.value.showEdit=!0};return{handleEdit:n,handleSEdit:r}}};const Fo=(0,E.A)(Co,[["render",go],["__scopeId","data-v-4a2dce12"]]);var _o=Fo;const yo={class:"t-c head"},Vo=["onClick"],Eo=["onClick"],Lo=["onClick"],Io=["onClick"],Po=["title"],So={class:"t-c"},Wo={class:"page-wrap"},Xo=["onClick"],To={key:0},Ao={key:1,class:"error red",title:"off line"},No=["onClick"],Mo=["title"];function xo(e,l,a,n,r,s){const d=(0,t.g2)("el-button"),u=(0,t.g2)("el-input"),i=(0,t.g2)("el-table-column"),c=(0,t.g2)("el-option"),m=(0,t.g2)("el-select"),h=(0,t.g2)("el-pagination"),p=(0,t.g2)("el-switch"),k=(0,t.g2)("Delete"),v=(0,t.g2)("el-icon"),g=(0,t.g2)("el-popconfirm"),w=(0,t.g2)("el-table"),f=(0,t.g2)("el-dialog"),b=(0,t.gN)("trim");return(0,t.uX)(),(0,t.Wv)(f,{modelValue:n.state.show,"onUpdate:modelValue":l[0]||(l[0]=e=>n.state.show=e),onOpen:n.handleOnShowList,"append-to":".app-wrap",title:`„Äê${n.state.machineName}„ÄëÁöÑÁ´ØÂè£ËΩ¨Âèë`,top:"1vh",width:"780"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.Lk)("div",yo,[(0,t.bF)(d,{type:"success",size:"small",onClick:n.handleAdd,loading:n.state.loading},{default:(0,t.k6)((()=>[(0,t.eW)("Ê∑ªÂä†")])),_:1},8,["onClick","loading"]),(0,t.bF)(d,{size:"small",onClick:n.handleRefresh},{default:(0,t.k6)((()=>[(0,t.eW)("Âà∑Êñ∞")])),_:1},8,["onClick"])]),(0,t.bF)(w,{data:n.state.data,size:"small",border:"",height:"500",onCellDblclick:n.handleCellClick},{default:(0,t.k6)((()=>[(0,t.bF)(i,{property:"Name",label:"ÂêçÁß∞",width:"100"},{default:(0,t.k6)((e=>[e.row.NameEditing&&0==e.row.Started?(0,t.bo)(((0,t.uX)(),(0,t.Wv)(u,{key:0,autofocus:"",size:"small",modelValue:e.row.Name,"onUpdate:modelValue":l=>e.row.Name=l,onBlur:l=>n.handleEditBlur(e.row,"Name")},null,8,["modelValue","onUpdate:modelValue","onBlur"])),[[b]]):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>n.handleEdit(e.row,"Name")},(0,o.v_)(e.row.Name||"Êú™Áü•"),9,Vo))])),_:1}),(0,t.bF)(i,{prop:"BufferSize",label:"ÁºìÂÜ≤Âå∫",width:"80"},{default:(0,t.k6)((e=>[e.row.BufferSizeEditing&&0==e.row.Started?((0,t.uX)(),(0,t.Wv)(m,{key:0,modelValue:e.row.BufferSize,"onUpdate:modelValue":l=>e.row.BufferSize=l,placeholder:"Select",size:"small",disabled:e.row.Started,onChange:l=>n.handleEditBlur(e.row,"BufferSize")},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(n.state.bufferSize,((e,l)=>((0,t.uX)(),(0,t.Wv)(c,{key:l,label:e,value:l},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","disabled","onChange"])):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>n.handleEdit(e.row,"BufferSize")},(0,o.v_)(n.state.bufferSize[e.row.BufferSize]),9,Eo))])),_:1}),(0,t.bF)(i,{property:"BindIPAddress",label:"ÁõëÂê¨IP",width:"140"},{default:(0,t.k6)((e=>[e.row.BindIPAddressEditing&&0==e.row.Started?((0,t.uX)(),(0,t.Wv)(m,{key:0,modelValue:e.row.BindIPAddress,"onUpdate:modelValue":l=>e.row.BindIPAddress=l,size:"small",disabled:e.row.Started,onChange:l=>n.handleEditBlur(e.row,"BindIPAddress")},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(n.state.ips,(e=>((0,t.uX)(),(0,t.Wv)(c,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","disabled","onChange"])):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>n.handleEdit(e.row,"BindIPAddress")},(0,o.v_)(e.row.BindIPAddress),9,Lo))])),_:1}),(0,t.bF)(i,{property:"Port",label:"ÁõëÂê¨Á´ØÂè£",width:"80"},{default:(0,t.k6)((e=>[e.row.PortEditing&&0==e.row.Started?(0,t.bo)(((0,t.uX)(),(0,t.Wv)(u,{key:0,type:"number",autofocus:"",size:"small",modelValue:e.row.Port,"onUpdate:modelValue":l=>e.row.Port=l,onBlur:l=>n.handleEditBlur(e.row,"Port")},null,8,["modelValue","onUpdate:modelValue","onBlur"])),[[b]]):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>n.handleEdit(e.row,"Port")},[e.row.Msg?((0,t.uX)(),(0,t.CE)("div",{key:0,class:"error red",title:e.row.Msg},[(0,t.Lk)("span",null,(0,o.v_)(e.row.Port),1)],8,Po)):((0,t.uX)(),(0,t.CE)("span",{key:1,class:(0,o.C4)({green:e.row.Started})},(0,o.v_)(e.row.Port),3))],8,Io))])),_:1}),(0,t.bF)(i,{property:"MachineId",label:"ÁõÆÊ†á"},{default:(0,t.k6)((e=>[e.row.MachineIdEditing&&0==e.row.Started?((0,t.uX)(),(0,t.Wv)(m,{key:0,modelValue:e.row.MachineId,"onUpdate:modelValue":l=>e.row.MachineId=l,onChange:l=>n.handleEditBlur(e.row,"MachineId"),filterable:"",remote:"",loading:n.state.loading,"remote-method":n.handleSearch},{header:(0,t.k6)((()=>[(0,t.Lk)("div",So,[(0,t.Lk)("div",Wo,[(0,t.bF)(h,{small:"",background:"",layout:"prev, pager, next","page-size":n.state.machineIds.Request.Size,total:n.state.machineIds.Count,"pager-count":5,"current-page":n.state.machineIds.Request.Page,onCurrentChange:n.handlePageChange},null,8,["page-size","total","current-page","onCurrentChange"])])])])),default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(n.state.machineIds.List,((e,l)=>((0,t.uX)(),(0,t.Wv)(c,{key:l,label:e.MachineName,value:e.MachineId},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","onChange","loading","remote-method"])):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>n.handleEdit(e.row,"MachineId")},[n.state.names[e.row.MachineId]?((0,t.uX)(),(0,t.CE)("span",To,(0,o.v_)(e.row.MachineName||"Êú™Áü•"),1)):((0,t.uX)(),(0,t.CE)("span",Ao,(0,o.v_)(e.row.MachineName||"Êú™Áü•"),1))],8,Xo))])),_:1}),(0,t.bF)(i,{property:"TargetEP",label:"ÁõÆÊ†áÊúçÂä°",width:"140"},{default:(0,t.k6)((e=>[e.row.TargetEPEditing&&0==e.row.Started?(0,t.bo)(((0,t.uX)(),(0,t.Wv)(u,{key:0,autofocus:"",size:"small",modelValue:e.row.TargetEP,"onUpdate:modelValue":l=>e.row.TargetEP=l,onBlur:l=>n.handleEditBlur(e.row,"TargetEP")},null,8,["modelValue","onUpdate:modelValue","onBlur"])),[[b]]):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>n.handleEdit(e.row,"TargetEP")},[e.row.TargetMsg?((0,t.uX)(),(0,t.CE)("div",{key:0,class:"error red",title:e.row.TargetMsg},[(0,t.Lk)("span",null,(0,o.v_)(e.row.TargetEP),1)],8,Mo)):((0,t.uX)(),(0,t.CE)("span",{key:1,class:(0,o.C4)({green:e.row.Started})},(0,o.v_)(e.row.TargetEP),3))],8,No))])),_:1}),(0,t.bF)(i,{property:"Started",label:"Áä∂ÊÄÅ",width:"60"},{default:(0,t.k6)((e=>[(0,t.bF)(p,{modelValue:e.row.Started,"onUpdate:modelValue":l=>e.row.Started=l,onChange:l=>n.handleStartChange(e.row),"inline-prompt":"","active-text":"ÂºÄ","inactive-text":"ÂÖ≥"},null,8,["modelValue","onUpdate:modelValue","onChange"])])),_:1}),(0,t.bF)(i,{label:"Êìç‰Ωú",width:"54"},{default:(0,t.k6)((e=>[(0,t.bF)(g,{"confirm-button-text":"Á°ÆËÆ§","cancel-button-text":"ÂèñÊ∂à",title:"Âà†Èô§‰∏çÂèØÈÄÜÔºåÊòØÂê¶Á°ÆËÆ§?",onConfirm:l=>n.handleDel(e.row.Id)},{reference:(0,t.k6)((()=>[(0,t.bF)(d,{type:"danger",size:"small"},{default:(0,t.k6)((()=>[(0,t.bF)(v,null,{default:(0,t.k6)((()=>[(0,t.bF)(k)])),_:1})])),_:1})])),_:2},1032,["onConfirm"])])),_:1})])),_:1},8,["data","onCellDblclick"])])])),_:1},8,["modelValue","onOpen","title"])}const Ro=(e="0")=>(0,p.zG)("forward/get",e),$o=()=>(0,p.zG)("forward/bindips"),Uo=e=>(0,p.zG)("forward/remove",e),Bo=e=>(0,p.zG)("forward/add",e),Do=e=>(0,p.zG)("forward/Test",e);var zo={props:["data","modelValue"],emits:["update:modelValue"],components:{Delete:y.epd},setup(e,{emit:l}){const a=(0,d.B)(),o=h(),n=(0,u.Kh)({show:!0,machineId:o.value.machineId,machineName:o.value.machineName,data:[],ips:[],bufferSize:a.value.bufferSize,loading:!1,machineIds:{Request:{Page:1,Size:10,Name:""},Count:0,List:[]},timer:0,timer1:0,editing:!1,names:{}});(0,t.wB)((()=>n.show),(e=>{e||setTimeout((()=>{l("update:modelValue",e)}),300)}));const r=()=>{clearTimeout(n.timer),Do(o.value.machineId).then((e=>{n.timer=setTimeout(r,1e3)})).catch((()=>{n.timer=setTimeout(r,1e3)}))},s=()=>{$o().then((e=>{e.splice(0,0,"127.0.0.1"),e.splice(0,0,"0.0.0.0"),n.ips=e})).catch((()=>{}))},i=()=>{clearTimeout(n.timer1),0==n.editing?Ro(n.machineId).then((e=>{n.data=e,n.timer1=setTimeout(i,1e3)})).catch((()=>{n.timer1=setTimeout(i,1e3)})):n.timer1=setTimeout(i,1e3)},c=()=>{i(),me.nk.success("Â∑≤Âà∑Êñ∞")},m=()=>{(0,ce.NT)().then((e=>{n.names=e.filter((e=>e.Online)).reduce(((e,l)=>(e[l.MachineId]=!0,e)),{})})).catch((()=>{}))},p=e=>{n.machineIds.Request.Name=e,k()},k=()=>{n.loading=!0,(0,ce.BS)(n.machineIds.Request).then((e=>{n.loading=!1,n.machineIds.Request=e.Request,n.machineIds.Count=e.Count,n.machineIds.List=e.List})).catch((e=>{n.loading=!1}))},v=e=>{n.machineIds.Request.Page=e,k()},g=()=>{k()},w=(e,l)=>{b(e,l.property)},f=()=>{y({ID:0,Name:"",Port:0,TargetEP:"127.0.0.1:80",machineId:""})},b=(e,l)=>{e.Started?me.nk.error("ËØ∑ÂÖàÂÅúÊ≠¢"):(n.data.forEach((e=>{e["NameEditing"]=!1,e["PortEditing"]=!1,e["TargetEPEditing"]=!1,e["BindIPAddressEditing"]=!1,e["BufferSizeEditing"]=!1,e["MachineIdEditing"]=!1})),e[`${l}Editing`]=!0,n.editing=!0)},C=(e,l)=>{if(e.Started)return void me.nk.error("ËØ∑ÂÖàÂÅúÊ≠¢");e[`${l}Editing`]=!1,n.editing=!1;const a=n.machineIds.List.find((l=>l.MachineId==e.MachineId));a&&(e.MachineName=a.MachineName);try{e[l]=e[l].trim()}catch(t){}y(e)},F=e=>{Uo({machineId:n.machineId,Id:e}).then((()=>{i()}))},_=e=>{y(e)},y=e=>{n.loading=!0,e.Port=parseInt(e.Port),Bo({machineId:n.machineId,data:e}).then((()=>{n.loading=!1,i()})).catch((e=>{n.loading=!1,me.nk.error(e)}))};return(0,t.sV)((()=>{i(),s(),r(),m()})),(0,t.hi)((()=>{clearTimeout(n.timer),clearTimeout(n.timer1)})),{state:n,handleOnShowList:g,handleCellClick:w,handleRefresh:c,handleAdd:f,handleEdit:b,handleEditBlur:C,handleDel:F,handleStartChange:_,handleSearch:p,handlePageChange:v}}};const Oo=(0,E.A)(zo,[["render",xo],["__scopeId","data-v-5eb2b279"]]);var Qo=Oo;const jo={class:"t-c head"},Ko=["onClick"],Go=["onClick"],Ho=["onClick"],qo=["title"],Jo={key:1},Zo=["onClick"],Yo=["title"],en={class:"plan"};function ln(e,l,a,n,r,s){const d=(0,t.g2)("el-button"),u=(0,t.g2)("el-input"),i=(0,t.g2)("el-table-column"),c=(0,t.g2)("el-option"),m=(0,t.g2)("el-select"),h=(0,t.g2)("WarnTriangleFilled"),p=(0,t.g2)("el-icon"),k=(0,t.g2)("el-switch"),v=(0,t.g2)("Select"),g=(0,t.g2)("PlanShow"),w=(0,t.g2)("CloseBold"),f=(0,t.g2)("Delete"),b=(0,t.g2)("el-popconfirm"),C=(0,t.g2)("el-table"),F=(0,t.g2)("el-dialog"),_=(0,t.g2)("PlanList"),y=(0,t.gN)("trim");return(0,t.uX)(),(0,t.Wv)(_,{ref:"planDom",machineid:n.machineId,category:"sforward",handles:n.state.handles},{default:(0,t.k6)((()=>[(0,t.bF)(F,{modelValue:n.state.show,"onUpdate:modelValue":l[0]||(l[0]=e=>n.state.show=e),onOpen:n.handleOnShowList,"append-to":".app-wrap",title:`„Äê${n.machineName}„ÄëÁöÑÂÜÖÁΩëÁ©øÈÄè`,top:"2vh",width:"98%"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.Lk)("div",jo,[(0,t.bF)(d,{type:"success",size:"small",onClick:n.handleAdd,loading:n.state.loading},{default:(0,t.k6)((()=>[(0,t.eW)("Ê∑ªÂä†")])),_:1},8,["onClick","loading"]),(0,t.bF)(d,{size:"small",onClick:n.handleRefresh},{default:(0,t.k6)((()=>[(0,t.eW)("Âà∑Êñ∞")])),_:1},8,["onClick"])]),(0,t.bF)(C,{data:n.state.data,size:"small",border:"",height:"500",onCellDblclick:n.handleCellClick},{default:(0,t.k6)((()=>[(0,t.bF)(i,{property:"Name",label:"ÂêçÁß∞",width:"120"},{default:(0,t.k6)((e=>[e.row.NameEditing&&0==e.row.Started?(0,t.bo)(((0,t.uX)(),(0,t.Wv)(u,{key:0,autofocus:"",size:"small",modelValue:e.row.Name,"onUpdate:modelValue":l=>e.row.Name=l,onBlur:l=>n.handleEditBlur(e.row,"Name")},null,8,["modelValue","onUpdate:modelValue","onBlur"])),[[y]]):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>n.handleEdit(e.row,"Name")},(0,o.v_)(e.row.Name||"Êú™Áü•"),9,Ko))])),_:1}),(0,t.bF)(i,{property:"NodeId",label:"ËäÇÁÇπ",width:"80"},{default:(0,t.k6)((e=>[e.row.NodeIdEditing&&0==e.row.Started?((0,t.uX)(),(0,t.Wv)(m,{key:0,modelValue:e.row.NodeId,"onUpdate:modelValue":l=>e.row.NodeId=l,size:"small",onChange:l=>n.handleEditBlur(e.row,"NodeId")},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(n.state.nodes,((e,l)=>((0,t.uX)(),(0,t.Wv)(c,{value:e.NodeId,label:e.Name},null,8,["value","label"])))),256))])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>n.handleEdit(e.row,"NodeId")},(0,o.v_)(n.state.nodesNames[e.row.NodeId]||"Êú™Áü•"),9,Go))])),_:1}),(0,t.bF)(i,{property:"Temp",label:"ÊúçÂä°Âô®Á´ØÂè£/ÂüüÂêç",width:"130"},{default:(0,t.k6)((e=>[e.row.TempEditing&&0==e.row.Started?(0,t.bo)(((0,t.uX)(),(0,t.Wv)(u,{key:0,autofocus:"",size:"small",modelValue:e.row.Temp,"onUpdate:modelValue":l=>e.row.Temp=l,onBlur:l=>n.handleEditBlur(e.row,"Temp")},null,8,["modelValue","onUpdate:modelValue","onBlur"])),[[y]]):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>n.handleEdit(e.row,"Temp")},[e.row.Msg?((0,t.uX)(),(0,t.CE)("div",{key:0,class:"error red",title:e.row.Msg},[(0,t.Lk)("span",null,(0,o.v_)(e.row.Temp),1),(0,t.bF)(p,{size:"20"},{default:(0,t.k6)((()=>[(0,t.bF)(h)])),_:1})],8,qo)):((0,t.uX)(),(0,t.CE)(t.FK,{key:1},[n.state.nodesJson[e.row.NodeId1]?((0,t.uX)(),(0,t.CE)("span",{key:0,class:(0,o.C4)({green:e.row.Started})},[/^\d+$/.test(e.row.Temp)?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[(0,t.eW)((0,o.v_)(n.state.nodesJson[e.row.NodeId1].Domain||n.state.nodesJson[e.row.NodeId1].Host.split(":")[0])+":"+(0,o.v_)(e.row.Temp),1)],64)):e.row.Temp.indexOf(".")>=0?((0,t.uX)(),(0,t.CE)(t.FK,{key:1},[(0,t.eW)((0,o.v_)(e.row.Temp)+":"+(0,o.v_)(n.state.nodesJson[e.row.NodeId1].WebPort),1)],64)):((0,t.uX)(),(0,t.CE)(t.FK,{key:2},[(0,t.eW)((0,o.v_)(e.row.Temp)+"."+(0,o.v_)(n.state.nodesJson[e.row.NodeId1].Domain||n.state.nodesJson[e.row.NodeId1].Host.split(":")[0])+":"+(0,o.v_)(n.state.nodesJson[e.row.NodeId1].WebPort),1)],64))],2)):((0,t.uX)(),(0,t.CE)("span",Jo,(0,o.v_)(e.row.Temp),1))],64))],8,Ho))])),_:1}),(0,t.bF)(i,{property:"LocalEP",label:"Êú¨Êú∫ÊúçÂä°",width:"100"},{default:(0,t.k6)((e=>[e.row.LocalEPEditing&&0==e.row.Started?(0,t.bo)(((0,t.uX)(),(0,t.Wv)(u,{key:0,autofocus:"",size:"small",modelValue:e.row.LocalEP,"onUpdate:modelValue":l=>e.row.LocalEP=l,onBlur:l=>n.handleEditBlur(e.row,"LocalEP")},null,8,["modelValue","onUpdate:modelValue","onBlur"])),[[y]]):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>n.handleEdit(e.row,"LocalEP")},[e.row.LocalMsg?((0,t.uX)(),(0,t.CE)("div",{key:0,class:"error red",title:e.row.LocalMsg},[(0,t.Lk)("span",null,(0,o.v_)(e.row.LocalEP),1),(0,t.bF)(p,{size:"20"},{default:(0,t.k6)((()=>[(0,t.bF)(h)])),_:1})],8,Yo)):((0,t.uX)(),(0,t.CE)("span",{key:1,class:(0,o.C4)({green:e.row.Started})},(0,o.v_)(e.row.LocalEP),3))],8,Zo))])),_:1}),(0,t.bF)(i,{property:"Started",label:"Áä∂ÊÄÅ",width:"60"},{default:(0,t.k6)((e=>[(0,t.bF)(k,{disabled:"",modelValue:e.row.Started,"onUpdate:modelValue":l=>e.row.Started=l,"inline-prompt":"","active-text":"ÊòØ","inactive-text":"Âê¶",onClick:l=>n.handleStartChange(e.row)},null,8,["modelValue","onUpdate:modelValue","onClick"])])),_:1}),(0,t.bF)(i,{prop:"Plan",label:"ÂºÄÂêØÂíåÂÖ≥Èó≠ËÆ°Âàí",width:"200"},{default:(0,t.k6)((e=>[(0,t.Lk)("div",en,[(0,t.Lk)("p",null,[(0,t.bF)(p,null,{default:(0,t.k6)((()=>[(0,t.bF)(v)])),_:1}),(0,t.bF)(g,{handle:"start",keyid:e.row.Id},null,8,["keyid"])]),(0,t.Lk)("p",null,[(0,t.bF)(p,null,{default:(0,t.k6)((()=>[(0,t.bF)(w)])),_:1}),(0,t.bF)(g,{handle:"stop",keyid:e.row.Id},null,8,["keyid"])])])])),_:1}),(0,t.bF)(i,{label:"Êìç‰Ωú",width:"54",fixed:"right"},{default:(0,t.k6)((e=>[(0,t.bF)(b,{"confirm-button-text":"Á°ÆËÆ§","cancel-button-text":"ÂèñÊ∂à",title:"Âà†Èô§‰∏çÂèØÈÄÜÔºåÊòØÂê¶Á°ÆËÆ§?",onConfirm:l=>n.handleDel(e.row.Id)},{reference:(0,t.k6)((()=>[(0,t.bF)(d,{type:"danger",size:"small"},{default:(0,t.k6)((()=>[(0,t.bF)(p,null,{default:(0,t.k6)((()=>[(0,t.bF)(f)])),_:1})])),_:1})])),_:2},1032,["onConfirm"])])),_:1})])),_:1},8,["data","onCellDblclick"])])])),_:1},8,["modelValue","onOpen","title"])])),_:1},8,["machineid","handles"])}var an=a(743);function tn(e,l,a,o,n,r){const s=(0,t.g2)("PlanEdit");return(0,t.uX)(),(0,t.CE)("div",null,[(0,t.RG)(e.$slots,"default"),o.plan.showEdit?((0,t.uX)(),(0,t.Wv)(s,{key:0,modelValue:o.plan.showEdit,"onUpdate:modelValue":l[0]||(l[0]=e=>o.plan.showEdit=e)},null,8,["modelValue"])):(0,t.Q3)("",!0)])}const on=(e,l)=>(0,p.zG)("plan/get",{machineId:e,category:l}),nn=(e,l)=>(0,p.zG)("plan/add",{machineId:e,plan:l}),rn=(e,l)=>(0,p.zG)("plan/remove",{machineId:e,planId:l}),sn=e=>((0,t.Qi)("data-v-03f238be"),e=e(),(0,t.jt)(),e),dn={key:0,class:"mgl-2"},un={class:"w-100"},cn=sn((()=>(0,t.Lk)("span",null,"ÁöÑ",-1))),mn={class:"w-100 mgt-1"},hn={class:"w-100"},pn={class:"w-100 mgt-1"},kn={class:"w-100"},vn={class:"w-100 mgt-1"},gn={class:"w-100"},wn=sn((()=>(0,t.Lk)("span",null,"ÁöÑ",-1))),fn={class:"mgt-1 w-100"},bn={class:"mgt-1 w-100"},Cn=sn((()=>(0,t.Lk)("span",null,"Âêé",-1))),Fn={class:"t-c w-100"};function _n(e,l,a,n,r,s){const d=(0,t.g2)("el-option"),u=(0,t.g2)("el-select"),i=(0,t.g2)("el-form-item"),c=(0,t.g2)("el-input"),m=(0,t.g2)("el-switch"),h=(0,t.g2)("el-button"),p=(0,t.g2)("el-form"),k=(0,t.g2)("el-dialog"),v=(0,t.gN)("trim");return(0,t.uX)(),(0,t.Wv)(k,{modelValue:n.state.show,"onUpdate:modelValue":l[30]||(l[30]=e=>n.state.show=e),"close-on-click-modal":!1,"append-to":".app-wrap",title:"ËÆ°Âàí‰ªªÂä°",top:"2vh",width:"450"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(p,{ref:"ruleFormRef",model:n.state.ruleForm,rules:n.state.rules,"label-width":"auto"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{label:"ÊâßË°åÊìç‰Ωú",prop:"Handle"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{modelValue:n.state.ruleForm.Handle,"onUpdate:modelValue":l[0]||(l[0]=e=>n.state.ruleForm.Handle=e),disabled:""},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(n.plan.handles,((e,l)=>((0,t.uX)(),(0,t.Wv)(d,{value:e.value,label:e.label},null,8,["value","label"])))),256))])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(i,{label:"ÊâßË°åÊñπÂºè",prop:"Method"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{modelValue:n.state.ruleForm.Method,"onUpdate:modelValue":l[1]||(l[1]=e=>n.state.ruleForm.Method=e),onChange:n.handleChange},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(n.plan.methods,((e,l)=>((0,t.uX)(),(0,t.Wv)(d,{value:e.value,label:e.label},null,8,["value","label"])))),256))])),_:1},8,["modelValue","onChange"]),n.state.ruleForm.Method>=2?((0,t.uX)(),(0,t.CE)("strong",dn,(0,o.v_)(n.state.ruleForm.Rule),1)):(0,t.Q3)("",!0)])),_:1}),2==n.state.ruleForm.Method?((0,t.uX)(),(0,t.Wv)(i,{key:0,label:"Âú®",prop:"Rule"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",un,[(0,t.bF)(u,{modelValue:n.state.ruleAt.type,"onUpdate:modelValue":l[2]||(l[2]=e=>n.state.ruleAt.type=e),onChange:n.handleChange},{default:(0,t.k6)((()=>[(0,t.bF)(d,{value:2,label:"ÊØèÊúà"}),(0,t.bF)(d,{value:3,label:"ÊØèÊó•"}),(0,t.bF)(d,{value:4,label:"ÊØèÊó∂"}),(0,t.bF)(d,{value:5,label:"ÊØèÂàÜ"})])),_:1},8,["modelValue","onChange"]),(0,t.eW)(),cn]),(0,t.Lk)("div",mn,[n.state.ruleAt.type<2?(0,t.bo)(((0,t.uX)(),(0,t.Wv)(c,{key:0,onChange:n.handleChange,modelValue:n.state.ruleAt.month,"onUpdate:modelValue":l[3]||(l[3]=e=>n.state.ruleAt.month=e)},{append:(0,t.k6)((()=>[(0,t.eW)("Êúà")])),_:1},8,["onChange","modelValue"])),[[v]]):(0,t.Q3)("",!0),n.state.ruleAt.type<3?(0,t.bo)(((0,t.uX)(),(0,t.Wv)(c,{key:1,onChange:n.handleChange,class:(0,o.C4)({"mgl-1":n.state.ruleAt.type<2}),modelValue:n.state.ruleAt.day,"onUpdate:modelValue":l[4]||(l[4]=e=>n.state.ruleAt.day=e)},{append:(0,t.k6)((()=>[(0,t.eW)("Êó•")])),_:1},8,["onChange","class","modelValue"])),[[v]]):(0,t.Q3)("",!0),n.state.ruleAt.type<4?(0,t.bo)(((0,t.uX)(),(0,t.Wv)(c,{key:2,onChange:n.handleChange,class:(0,o.C4)({"mgl-1":n.state.ruleAt.type<3}),modelValue:n.state.ruleAt.hour,"onUpdate:modelValue":l[5]||(l[5]=e=>n.state.ruleAt.hour=e)},{append:(0,t.k6)((()=>[(0,t.eW)("Êó∂")])),_:1},8,["onChange","class","modelValue"])),[[v]]):(0,t.Q3)("",!0),n.state.ruleAt.type<5?(0,t.bo)(((0,t.uX)(),(0,t.Wv)(c,{key:3,onChange:n.handleChange,class:(0,o.C4)({"mgl-1":n.state.ruleAt.type<4}),modelValue:n.state.ruleAt.min,"onUpdate:modelValue":l[6]||(l[6]=e=>n.state.ruleAt.min=e)},{append:(0,t.k6)((()=>[(0,t.eW)("ÂàÜ")])),_:1},8,["onChange","class","modelValue"])),[[v]]):(0,t.Q3)("",!0),(0,t.bo)(((0,t.uX)(),(0,t.Wv)(c,{onChange:n.handleChange,class:(0,o.C4)({"mgl-1":n.state.ruleAt.type<5}),modelValue:n.state.ruleAt.sec,"onUpdate:modelValue":l[7]||(l[7]=e=>n.state.ruleAt.sec=e)},{append:(0,t.k6)((()=>[(0,t.eW)("Áßí")])),_:1},8,["onChange","class","modelValue"])),[[v]])])])),_:1})):(0,t.Q3)("",!0),4==n.state.ruleForm.Method?((0,t.uX)(),(0,t.Wv)(i,{key:1,label:"ÊØè",prop:"Rule"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",hn,[(0,t.bo)(((0,t.uX)(),(0,t.Wv)(c,{onChange:n.handleChange,modelValue:n.state.ruleTimer.year,"onUpdate:modelValue":l[8]||(l[8]=e=>n.state.ruleTimer.year=e)},{append:(0,t.k6)((()=>[(0,t.eW)("Âπ¥")])),_:1},8,["onChange","modelValue"])),[[v]]),(0,t.bo)(((0,t.uX)(),(0,t.Wv)(c,{onChange:n.handleChange,class:"mgl-1",modelValue:n.state.ruleTimer.month,"onUpdate:modelValue":l[9]||(l[9]=e=>n.state.ruleTimer.month=e)},{append:(0,t.k6)((()=>[(0,t.eW)("Êúà")])),_:1},8,["onChange","modelValue"])),[[v]]),(0,t.bo)(((0,t.uX)(),(0,t.Wv)(c,{onChange:n.handleChange,class:"mgl-1",modelValue:n.state.ruleTimer.day,"onUpdate:modelValue":l[10]||(l[10]=e=>n.state.ruleTimer.day=e)},{append:(0,t.k6)((()=>[(0,t.eW)("Êó•")])),_:1},8,["onChange","modelValue"])),[[v]])]),(0,t.Lk)("div",pn,[(0,t.bo)(((0,t.uX)(),(0,t.Wv)(c,{onChange:n.handleChange,modelValue:n.state.ruleTimer.hour,"onUpdate:modelValue":l[11]||(l[11]=e=>n.state.ruleTimer.hour=e)},{append:(0,t.k6)((()=>[(0,t.eW)("Êó∂")])),_:1},8,["onChange","modelValue"])),[[v]]),(0,t.bo)(((0,t.uX)(),(0,t.Wv)(c,{onChange:n.handleChange,class:"mgl-1",modelValue:n.state.ruleTimer.min,"onUpdate:modelValue":l[12]||(l[12]=e=>n.state.ruleTimer.min=e)},{append:(0,t.k6)((()=>[(0,t.eW)("ÂàÜ")])),_:1},8,["onChange","modelValue"])),[[v]]),(0,t.bo)(((0,t.uX)(),(0,t.Wv)(c,{onChange:n.handleChange,class:"mgl-1",modelValue:n.state.ruleTimer.sec,"onUpdate:modelValue":l[13]||(l[13]=e=>n.state.ruleTimer.sec=e)},{append:(0,t.k6)((()=>[(0,t.eW)("Áßí")])),_:1},8,["onChange","modelValue"])),[[v]])])])),_:1})):(0,t.Q3)("",!0),8==n.state.ruleForm.Method?((0,t.uX)(),(0,t.Wv)(i,{key:2,label:"Cron",prop:"Rule"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",kn,[(0,t.bo)(((0,t.uX)(),(0,t.Wv)(c,{onChange:n.handleChange,modelValue:n.state.ruleCron.sec,"onUpdate:modelValue":l[14]||(l[14]=e=>n.state.ruleCron.sec=e)},{append:(0,t.k6)((()=>[(0,t.eW)("Áßí")])),_:1},8,["onChange","modelValue"])),[[v]]),(0,t.bo)(((0,t.uX)(),(0,t.Wv)(c,{onChange:n.handleChange,class:"mgl-1",modelValue:n.state.ruleCron.min,"onUpdate:modelValue":l[15]||(l[15]=e=>n.state.ruleCron.min=e)},{append:(0,t.k6)((()=>[(0,t.eW)("ÂàÜ")])),_:1},8,["onChange","modelValue"])),[[v]]),(0,t.bo)(((0,t.uX)(),(0,t.Wv)(c,{onChange:n.handleChange,class:"mgl-1",modelValue:n.state.ruleCron.hour,"onUpdate:modelValue":l[16]||(l[16]=e=>n.state.ruleCron.hour=e)},{append:(0,t.k6)((()=>[(0,t.eW)("Êó∂")])),_:1},8,["onChange","modelValue"])),[[v]])]),(0,t.Lk)("div",vn,[(0,t.bo)(((0,t.uX)(),(0,t.Wv)(c,{onChange:n.handleChange,modelValue:n.state.ruleCron.day,"onUpdate:modelValue":l[17]||(l[17]=e=>n.state.ruleCron.day=e)},{append:(0,t.k6)((()=>[(0,t.eW)("Êó•")])),_:1},8,["onChange","modelValue"])),[[v]]),(0,t.bo)(((0,t.uX)(),(0,t.Wv)(c,{onChange:n.handleChange,class:"mgl-1",modelValue:n.state.ruleCron.month,"onUpdate:modelValue":l[18]||(l[18]=e=>n.state.ruleCron.month=e)},{append:(0,t.k6)((()=>[(0,t.eW)("Êúà")])),_:1},8,["onChange","modelValue"])),[[v]]),(0,t.bo)(((0,t.uX)(),(0,t.Wv)(c,{onChange:n.handleChange,class:"mgl-1",modelValue:n.state.ruleCron.week,"onUpdate:modelValue":l[19]||(l[19]=e=>n.state.ruleCron.week=e)},{append:(0,t.k6)((()=>[(0,t.eW)("Âë®")])),_:1},8,["onChange","modelValue"])),[[v]])])])),_:1})):(0,t.Q3)("",!0),16==n.state.ruleForm.Method?((0,t.uX)(),(0,t.Wv)(i,{key:3,label:"Âú®",prop:"Rule"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",gn,[(0,t.bF)(u,{modelValue:n.state.ruleForm.TriggerHandle,"onUpdate:modelValue":l[20]||(l[20]=e=>n.state.ruleForm.TriggerHandle=e),onChange:n.handleChange},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(n.plan.triggers,((e,l)=>((0,t.uX)(),(0,t.Wv)(d,{value:e.value,label:e.label},null,8,["value","label"])))),256))])),_:1},8,["modelValue","onChange"]),(0,t.eW)(),wn]),(0,t.Lk)("div",fn,[(0,t.bo)(((0,t.uX)(),(0,t.Wv)(c,{onChange:n.handleChange,modelValue:n.state.ruleTrigger.year,"onUpdate:modelValue":l[21]||(l[21]=e=>n.state.ruleTrigger.year=e)},{append:(0,t.k6)((()=>[(0,t.eW)("Âπ¥")])),_:1},8,["onChange","modelValue"])),[[v]]),(0,t.bo)(((0,t.uX)(),(0,t.Wv)(c,{onChange:n.handleChange,class:"mgl-1",modelValue:n.state.ruleTrigger.month,"onUpdate:modelValue":l[22]||(l[22]=e=>n.state.ruleTrigger.month=e)},{append:(0,t.k6)((()=>[(0,t.eW)("Êúà")])),_:1},8,["onChange","modelValue"])),[[v]]),(0,t.bo)(((0,t.uX)(),(0,t.Wv)(c,{onChange:n.handleChange,class:"mgl-1",modelValue:n.state.ruleTrigger.day,"onUpdate:modelValue":l[23]||(l[23]=e=>n.state.ruleTrigger.day=e)},{append:(0,t.k6)((()=>[(0,t.eW)("Êó•")])),_:1},8,["onChange","modelValue"])),[[v]])]),(0,t.Lk)("div",bn,[(0,t.bo)(((0,t.uX)(),(0,t.Wv)(c,{onChange:n.handleChange,modelValue:n.state.ruleTrigger.hour,"onUpdate:modelValue":l[24]||(l[24]=e=>n.state.ruleTrigger.hour=e)},{append:(0,t.k6)((()=>[(0,t.eW)("Êó∂")])),_:1},8,["onChange","modelValue"])),[[v]]),(0,t.bo)(((0,t.uX)(),(0,t.Wv)(c,{onChange:n.handleChange,class:"mgl-1",modelValue:n.state.ruleTrigger.min,"onUpdate:modelValue":l[25]||(l[25]=e=>n.state.ruleTrigger.min=e)},{append:(0,t.k6)((()=>[(0,t.eW)("ÂàÜ")])),_:1},8,["onChange","modelValue"])),[[v]]),(0,t.bo)(((0,t.uX)(),(0,t.Wv)(c,{onChange:n.handleChange,class:"mgl-1",modelValue:n.state.ruleTrigger.sec,"onUpdate:modelValue":l[26]||(l[26]=e=>n.state.ruleTrigger.sec=e)},{append:(0,t.k6)((()=>[(0,t.eW)("Áßí")])),_:1},8,["onChange","modelValue"])),[[v]]),Cn])])),_:1})):(0,t.Q3)("",!0),(0,t.bF)(i,{label:"ÂÜÖÂÆπ",prop:"Value"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(c,{type:"textarea",resize:"none",rows:"5",modelValue:n.state.ruleForm.Value,"onUpdate:modelValue":l[27]||(l[27]=e=>n.state.ruleForm.Value=e)},null,8,["modelValue"]),[[v]])])),_:1}),(0,t.bF)(i,{label:"Á¶ÅÁî®",prop:"Disabled"},{default:(0,t.k6)((()=>[(0,t.bF)(m,{modelValue:n.state.ruleForm.Disabled,"onUpdate:modelValue":l[28]||(l[28]=e=>n.state.ruleForm.Disabled=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(i,{label:"",prop:"Btns"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",Fn,[(0,t.bF)(h,{onClick:l[29]||(l[29]=e=>n.state.show=!1)},{default:(0,t.k6)((()=>[(0,t.eW)("ÂèñÊ∂à")])),_:1}),(0,t.bF)(h,{type:"primary",onClick:n.handleSave,loading:n.state.loading},{default:(0,t.k6)((()=>[(0,t.eW)("Á°ÆËÆ§")])),_:1},8,["onClick","loading"])])])),_:1})])),_:1},8,["model","rules"])])])),_:1},8,["modelValue"])}var yn={props:["data","modelValue"],emits:["change","update:modelValue"],setup(e,{emit:l}){const a=/(\d+|\*)-(\d+|\*)-(\d+|\*)\s+(\d+|\*):(\d+|\*):(\d+|\*)/,o=/(\d+)-(\d+)-(\d+)\s+(\d+):(\d+):(\d+)/,n=/(.+)\s+(.+)\s+(.+)\s+(.+)\s+(.+)\s+(.+)/,r=(0,u.KR)(null),s=(0,t.WQ)("plan");!s.value.current.TriggerHandle&&s.value.triggers.length>0&&(s.value.current.TriggerHandle=s.value.triggers[0].value);const d=(0,u.Kh)({show:!0,loading:!1,ruleCron:{week:"*",month:"*",day:"*",hour:"*",min:"*",sec:"30"},ruleAt:{type:3,month:"*",day:"*",hour:0,min:0,sec:0},ruleTimer:{year:0,month:0,day:0,hour:0,min:0,sec:30},ruleTrigger:{year:0,month:0,day:0,hour:0,min:0,sec:30},ruleForm:{Id:s.value.current.Id,Category:s.value.current.Category,Key:s.value.current.Key,Value:s.value.current.Value,Rule:s.value.current.Rule,Handle:s.value.current.Handle,Method:s.value.current.Method,Disabled:s.value.current.Disabled,TriggerHandle:s.value.current.TriggerHandle},rules:{}});(0,t.wB)((()=>d.show),(e=>{e||setTimeout((()=>{l("update:modelValue",e)}),300)}));const i={2:e=>{if(e=e||"*-*-* 0:0:0",0==a.test(e))return;const[,l,t,o,n,r,s]=e.match(a);"*"==r?d.ruleAt.type=5:"*"==n?d.ruleAt.type=4:"*"==o?d.ruleAt.type=3:"*"==t&&(d.ruleAt.type=2),d.ruleAt.year=l,d.ruleAt.month=t,d.ruleAt.day=o,d.ruleAt.hour=n,d.ruleAt.min=r,d.ruleAt.sec=s},4:e=>{if(e=e||"0-0-0 0:0:30",0==o.test(e))return;const[,l,a,t,n,r,s]=e.match(o);d.ruleTimer.year=l,d.ruleTimer.month=a,d.ruleTimer.day=t,d.ruleTimer.hour=n,d.ruleTimer.min=r,d.ruleTimer.sec=s},8:e=>{if(e=e||"30 * * * * ?",0==n.test(e))return;const[,l,a,t,o,r,s]=e.match(n);d.ruleCron.sec=l,d.ruleCron.min=a,d.ruleCron.hour=t,d.ruleCron.day=o,d.ruleCron.month=r,d.ruleCron.week=s},16:e=>{if(e=e||"0-0-0 0:0:30",0==o.test(e))return;const[,l,a,t,n,r,s]=e.match(o);d.ruleTrigger.year=l,d.ruleTrigger.month=a,d.ruleTrigger.day=t,d.ruleTrigger.hour=n,d.ruleTrigger.min=r,d.ruleTrigger.sec=s}},c=()=>{d.ruleForm.Method in i&&i[d.ruleForm.Method](d.ruleForm.Rule)},m={2:()=>{switch(d.ruleAt.type){case 2:return`*-*-${d.ruleAt.day} ${d.ruleAt.hour}:${d.ruleAt.min}:${d.ruleAt.sec}`;case 3:return`*-*-* ${d.ruleAt.hour}:${d.ruleAt.min}:${d.ruleAt.sec}`;case 4:return`*-*-* *:${d.ruleAt.min}:${d.ruleAt.sec}`;case 5:return`*-*-* *:*:${d.ruleAt.sec}`}return""},4:()=>`${d.ruleTimer.year}-${d.ruleTimer.month}-${d.ruleTimer.day} ${d.ruleTimer.hour}:${d.ruleTimer.min}:${d.ruleTimer.sec}`,8:()=>`${d.ruleCron.sec} ${d.ruleCron.min} ${d.ruleCron.hour} ${d.ruleCron.day} ${d.ruleCron.month} ${d.ruleCron.week}`,16:()=>`${d.ruleTrigger.year}-${d.ruleTrigger.month}-${d.ruleTrigger.day} ${d.ruleTrigger.hour}:${d.ruleTrigger.min}:${d.ruleTrigger.sec}`},h=()=>{d.ruleForm.Method in m&&(d.ruleForm.Rule=m[d.ruleForm.Method]())},p=()=>{h()},k=()=>{const e=JSON.parse(JSON.stringify(d.ruleForm));d.loading=!0,nn(s.value.machineid,e).then((e=>{d.loading=!1,d.show=!1})).catch((()=>{d.loading=!1}))};return(0,t.sV)((()=>{c(),p()})),{state:d,ruleFormRef:r,plan:s,handleChange:p,handleSave:k}}};const Vn=(0,E.A)(yn,[["render",_n],["__scopeId","data-v-03f238be"]]);var En=Vn,Ln={components:{PlanEdit:En},props:["machineid","category","handles"],setup(e){const l=(0,u.KR)({machineid:e.machineid,timer:0,list:{},current:{},showEdit:!1,category:e.category||"",handles:e.handles||[],handleJson:(e.handles||[]).reduce(((e,l,a)=>(e[l.value]=l.label,e)),{}),triggers:[],methods:[{label:"ÊâãÂä®",value:0},{label:"ÂêØÂä®Âêé",value:1},{label:"Âà∞ÁÇπ",value:2},{label:"ÂÆöÊó∂",value:4},{label:"Cron",value:8},{label:"Ëß¶Âèë",value:16}]});(0,t.Gt)("plan",l);const a=()=>{clearTimeout(l.value.timer),on(l.value.machineid,e.category).then((e=>{l.value.list=e.reduce(((e,l,a)=>(e[`${l.Key}-${l.Handle}`]=l,e)),{}),l.value.timer=setTimeout(a,1e3)})).catch((()=>{l.value.timer=setTimeout(a,1e3)}))},o=(e,t)=>{const o=l.value.list[`${e}-${t}`];o&&rn(l.value.machineid,o.Id).then((()=>{a()}))};return(0,t.sV)((()=>{a()})),(0,t.hi)((()=>{clearTimeout(l.value.timer)})),{plan:l,remove:o}}};const In=(0,E.A)(Ln,[["render",tn]]);var Pn=In;const Sn={key:0},Wn={key:1};function Xn(e,l,a,n,r,s){return(0,t.uX)(),(0,t.CE)("a",{href:"javascript:;",class:"a-line",onClick:l[0]||(l[0]=(...e)=>n.handleEdit&&n.handleEdit(...e))},[n.item?((0,t.uX)(),(0,t.CE)("span",Sn,(0,o.v_)(n.rule),1)):((0,t.uX)(),(0,t.CE)("span",Wn,"Êú™ËÆæÁΩÆ"))])}var Tn={props:["keyid","handle"],setup(e){const l=/(\d+|\*)-(\d+|\*)-(\d+|\*)\s+(\d+|\*):(\d+|\*):(\d+|\*)/,a=/(\d+)-(\d+)-(\d+)\s+(\d+):(\d+):(\d+)/,o={0:()=>"ÊâãÂä®",1:()=>"ÁΩëÁªúÂêØÂä®Âêé",2:(e,a)=>{if(0==l.test(a))return a;const[,t,o,n,r,s,d]=a.match(l);return"*"==s?`ÊØèÂàÜÈíüÁöÑ${d}Áßí`:"*"==r?`ÊØèÂ∞èÊó∂ÁöÑ${s}ÂàÜ${d}Áßí`:"*"==n?`ÊØèÂ§©ÁöÑ${r}Êó∂${s}ÂàÜ${d}Áßí`:"*"==o?`ÊØèÊúàÁöÑ${n}Êó•${r}Êó∂${s}ÂàÜ${d}Áßí`:"*"==t?`ÊØèÂπ¥ÁöÑ${o}Êúà${n}Êó•${r}Êó∂${s}ÂàÜ${d}Áßí`:void 0},4:(e,l)=>{if(0==a.test(l))return l;const[,t,o,n,r,s,d]=l.match(a),u=[];return"0"!=t&&u.push(`${t}Âπ¥`),"0"!=o&&u.push(`${o}Êúà`),"0"!=n&&u.push(`${n}Êó•`),"0"!=r&&u.push(`${r}Êó∂`),"0"!=s&&u.push(`${s}ÂàÜ`),"0"!=d&&u.push(`${d}Áßí`),`ÊØè${u.join("")}`},8:(e,l)=>`Cron : ${l}`,16:(e,l)=>{if(0==a.test(l))return l;const[,t,o,r,s,d,u]=l.match(a),i=[];return"0"!=t&&i.push(`${t}Âπ¥`),"0"!=o&&i.push(`${o}Êúà`),"0"!=r&&i.push(`${r}Êó•`),"0"!=s&&i.push(`${s}Êó∂`),"0"!=d&&i.push(`${d}ÂàÜ`),"0"!=u&&i.push(`${u}Áßí`),`Âú®„Äê${n.value.handleJson[e.TriggerHandle]}„ÄëÁöÑ${i.join("")}Âêé`}},n=(0,t.WQ)("plan"),r=(0,t.EW)((()=>n.value.list[`${e.keyid}-${e.handle}`])),s=(0,t.EW)((()=>{if(!r.value)return"";const e=r.value.Method;return o[e]?o[e](r.value,r.value.Rule):r.value.Rule})),d=()=>{n.value.current=r.value||{Id:0,Category:n.value.category,Key:`${e.keyid}`,Handle:e.handle,Value:"",Disabled:!1,TriggerHandle:"",Method:2,Rule:""},n.value.triggers=JSON.parse(JSON.stringify(n.value.handles.filter((l=>l.value!=e.handle)))),n.value.showEdit=!0};return{item:r,rule:s,handleEdit:d}}};const An=(0,E.A)(Tn,[["render",Xn]]);var Nn=An,Mn={props:["data","modelValue"],emits:["update:modelValue"],components:{WarnTriangleFilled:y.DtC,Delete:y.epd,Select:y.l6P,CloseBold:y.QBJ,PlanList:Pn,PlanShow:Nn},setup(e,{emit:l}){const a=(0,u.KR)(null),o=(0,d.B)(),n=bo(),r=(0,u.Kh)({bufferSize:o.value.bufferSize,show:!0,data:[],nodes:[],nodesNames:{},nodesJson:{},timer:0,timer1:0,timer2:0,editing:!1,loading:!1,handles:[{label:"ÂºÄÂêØ",value:"start"},{label:"ÂÖ≥Èó≠",value:"stop"}]});(0,t.wB)((()=>r.show),(e=>{e||setTimeout((()=>{l("update:modelValue",e)}),300)}));const s=()=>{clearTimeout(r.timer),(0,an.oi)(n.value.machineid).then((e=>{r.timer=setTimeout(s,1e3)})).catch((()=>{r.timer=setTimeout(s,1e3)}))},i=()=>{clearTimeout(r.timer1),0==r.editing?(0,an.Zq)(n.value.machineid).then((e=>{e.forEach((e=>{e.Temp=(e.Domain||e.RemotePort).toString(),e.RemotePort=0,e.Domain="",e.NodeId1=e.NodeId1||e.NodeId})),r.data=e,r.timer1=setTimeout(i,1e3)})).catch((()=>{r.timer1=setTimeout(i,1e3)})):r.timer1=setTimeout(i,1e3)},c=()=>{i()},m=(e,l)=>{k(e,l.property)},h=()=>{i(),me.nk.success("Â∑≤Âà∑Êñ∞")},p=()=>{r.loading=!0;const e={Id:0,Name:"",RemotePort:0,LocalEP:"127.0.0.1:80",Domain:"",Temp:""};(0,an.bp)({machineid:n.value.machineid,data:e}).then((()=>{r.loading=!1,setTimeout((()=>{i()}),100)})).catch((e=>{r.loading=!1,me.nk.error(e)}))},k=(e,l)=>{e.Started?me.nk.error("ËØ∑ÂÖàÂÅúÊ≠¢ËøêË°å"):(r.data.forEach((e=>{e["NameEditing"]=!1,e["RemotePortEditing"]=!1,e["LocalEPEditing"]=!1,e["DomainEditing"]=!1,e["TempEditing"]=!1,e["NodeIdEditing"]=!1})),e[`${l}Editing`]=!0,r.editing=!0)},v=(e,l)=>{if(e.Started)me.nk.error("ËØ∑ÂÖàÂÅúÊ≠¢ËøêË°å");else{e[`${l}Editing`]=!1,r.editing=!1;try{e[l]=e[l].trim()}catch(a){}f(e)}},g=e=>{a.value.remove(e,"start"),a.value.remove(e,"stop"),(0,an.zQ)({machineid:n.value.machineid,id:e}).then((()=>{r.loading=!1,i()})).catch((e=>{r.loading=!1,me.nk.error(e)}))},w=e=>{r.loading=!0;const l=e.Started?(0,an.Pc)({machineid:n.value.machineid,id:e.Id}):(0,an.JA)({machineid:n.value.machineid,id:e.Id});l.then((()=>{r.loading=!1,i()})).catch((e=>{r.loading=!1,me.nk.error(e)}))},f=e=>{e.Temp&&(/^\d+$/.test(e.Temp)?e.RemotePort=parseInt(e.Temp):e.Domain=e.Temp,r.loading=!0,(0,an.bp)({machineid:n.value.machineid,data:e}).then((e=>{r.loading=!1,0==e&&me.nk.error("Êìç‰ΩúÂ§±Ë¥•ÔºåÂèØËÉΩÂ≠òÂú®Áõ∏ÂêåÂÄº"),i()})).catch((e=>{r.loading=!1,me.nk.error(e)})))},b=()=>{clearTimeout(r.timer2),(0,an.jN)().then((e=>{e=[{NodeId:"*",Name:"*",Host:"*",Domain:""}].concat(e),r.nodes=e,r.nodesNames=e.reduce(((e,l)=>(e[l.NodeId]=l.Name,e)),{}),r.nodesJson=e.reduce(((e,l)=>(e[l.NodeId]=l,e)),{}),r.timer2=setTimeout(b,1e3)})).catch((()=>{r.timer2=setTimeout(b,1e3)}))};return(0,t.sV)((()=>{i(),s(),b()})),(0,t.hi)((()=>{clearTimeout(r.timer),clearTimeout(r.timer1),clearTimeout(r.timer2)})),{state:r,planDom:a,machineName:n.value.machineName,machineId:n.value.machineid,handleOnShowList:c,handleCellClick:m,handleRefresh:h,handleAdd:p,handleEdit:k,handleEditBlur:v,handleDel:g,handleStartChange:w}}};const xn=(0,E.A)(Mn,[["render",ln],["__scopeId","data-v-348a2443"]]);var Rn=xn,$n=a(6046);function Un(e,l,a,o,n,r){const s=(0,t.g2)("Stopwatch"),d=(0,t.g2)("el-tab-pane"),u=(0,t.g2)("el-tabs"),i=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(i,{title:`${e.$t("status.messengerName")}`,class:"options-center",top:"1vh","destroy-on-close":"",modelValue:o.state.show,"onUpdate:modelValue":l[0]||(l[0]=e=>o.state.show=e),width:"480"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(u,{type:"border-card"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{label:o.flow.device.name},{default:(0,t.k6)((()=>[(0,t.bF)(s,{machineId:o.flow.device.id},null,8,["machineId"])])),_:1},8,["label"]),(0,t.bF)(d,{label:e.$t("server.messenger")},{default:(0,t.k6)((()=>[(0,t.bF)(s,{machineId:""})])),_:1},8,["label"])])),_:1})])])),_:1},8,["title","modelValue"])}function Bn(e,l,a,n,r,s){const d=(0,t.g2)("el-table-column"),u=(0,t.g2)("el-table");return(0,t.uX)(),(0,t.Wv)(u,{data:n.state.list,stripe:"",border:"",size:"small",width:"100%",height:"60vh"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{prop:"id",label:"id",width:"200"}),(0,t.bF)(d,{prop:"request",label:"request",sortable:""},{default:(0,t.k6)((e=>[(0,t.Lk)("span",null,(0,o.v_)(e.row.request)+"ms / "+(0,o.v_)(e.row.requestMax)+"ms",1)])),_:1}),(0,t.bF)(d,{prop:"response",label:"response",sortable:""},{default:(0,t.k6)((e=>[(0,t.Lk)("span",null,(0,o.v_)(e.row.response)+"ms / "+(0,o.v_)(e.row.responseMax)+"ms",1)])),_:1})])),_:1},8,["data"])}var Dn=a(4921),zn={props:["machineId"],setup(e){const{t:l}=(0,xl.s9)(),a=(0,u.Kh)({timer:0,list:[]}),o=()=>{clearTimeout(a.timer),(0,Dn.iN)(e.machineId).then((e=>{a.list=Object.keys(e).map((a=>({id:`${l(`status.messenger${a}`)}(${a})`,request:(BigInt(e[a].SendtBytes)&BigInt(4294967295)).toString(),requestMax:(BigInt(e[a].SendtBytes)>>BigInt(32)).toString(),response:(BigInt(e[a].ReceiveBytes)&BigInt(4294967295)).toString(),responseMax:(BigInt(e[a].ReceiveBytes)>>BigInt(32)).toString()}))),a.timer=setTimeout(o,3e3)})).catch((e=>{a.timer=setTimeout(o,3e3)}))};return(0,t.sV)((()=>{o()})),(0,t.hi)((()=>{clearTimeout(a.timer)})),{state:a}}};const On=(0,E.A)(zn,[["render",Bn]]);var Qn=On,jn={props:["modelValue"],emits:["update:modelValue"],components:{Stopwatch:Qn},setup(e,{emit:l}){const a=(0,$n.q)(),o=(0,u.Kh)({show:!0});return(0,t.wB)((()=>o.show),(e=>{e||setTimeout((()=>{l("update:modelValue",e)}),300)})),{state:o,flow:a}}};const Kn=(0,E.A)(jn,[["render",Un]]);var Gn=Kn;function Hn(e,l,a,o,n,r){const s=(0,t.g2)("Flow");return(0,t.uX)(),(0,t.Wv)(s,{config:!0,title:o.machineName},null,8,["title"])}var qn=a(1257),Jn={props:["modelValue"],emits:["update:modelValue"],components:{Flow:qn.A},setup(e,{emit:l}){const a=(0,$n.q)();return a.value.machineId=a.value.device.id,a.value.count=!0,(0,t.wB)((()=>a.value.count),(e=>{e||setTimeout((()=>{l("update:modelValue",e),l("change")}),300)})),{machineName:a.value.device.name}}};const Zn=(0,E.A)(Jn,[["render",Hn]]);var Yn=Zn;const er=e=>((0,t.Qi)("data-v-8b476678"),e=e(),(0,t.jt)(),e),lr={key:0},ar={class:"numbers"},tr={class:"dropdown"},or=er((()=>(0,t.Lk)("span",null,"...",-1))),nr=er((()=>(0,t.Lk)("div",{class:"device-remark"},null,-1)));function rr(e,l,a,n,r,s){const d=(0,t.g2)("FirewallOper"),u=(0,t.g2)("WakeupOper"),i=(0,t.g2)("TransportOper"),c=(0,t.g2)("ArrowDown"),m=(0,t.g2)("el-icon"),h=(0,t.g2)("SwitchButton"),p=(0,t.g2)("el-dropdown-item"),k=(0,t.g2)("AccessShow"),v=(0,t.g2)("Flag"),g=(0,t.g2)("HelpFilled"),w=(0,t.g2)("ActionOper"),f=(0,t.g2)("FlowOper"),b=(0,t.g2)("Delete"),C=(0,t.g2)("el-dropdown-menu"),F=(0,t.g2)("el-dropdown"),_=(0,t.g2)("el-col"),y=(0,t.g2)("el-row"),V=(0,t.g2)("el-table-column"),E=(0,t.g2)("AccessBoolean");return(0,t.uX)(),(0,t.Wv)(E,{value:"Access"},{default:(0,t.k6)((({values:l})=>[(0,t.bF)(V,{label:e.$t("home.oper"),fixed:"right","min-width":"110"},{default:(0,t.k6)((a=>[a.row?((0,t.uX)(),(0,t.CE)("div",lr,[(0,t.Lk)("div",ar,[(0,t.bF)(y,null,{default:(0,t.k6)((()=>[a.row.Connected?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[(0,t.bF)(d,{item:a.row},null,8,["item"]),(0,t.bF)(u,{item:a.row},null,8,["item"]),(0,t.bF)(i,{item:a.row},null,8,["item"])],64)):(0,t.Q3)("",!0),(0,t.bF)(_,{span:12},{default:(0,t.k6)((()=>[a.row.MachineId?((0,t.uX)(),(0,t.Wv)(F,{key:0,size:"small"},{dropdown:(0,t.k6)((()=>[(0,t.bF)(C,null,{default:(0,t.k6)((()=>[a.row.Connected?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[(0,t.bF)(k,{value:"Reboot"},{default:(0,t.k6)((()=>[(0,t.bF)(p,{onClick:e=>n.handleExit(a.row)},{default:(0,t.k6)((()=>[(0,t.bF)(m,null,{default:(0,t.k6)((()=>[(0,t.bF)(h)])),_:1}),(0,t.eW)((0,o.v_)(e.$t("home.reboot")),1)])),_:2},1032,["onClick"])])),_:2},1024),n.handleShowAccess(a.row,l)?((0,t.uX)(),(0,t.Wv)(p,{key:0,onClick:e=>n.handleAccess(a.row)},{default:(0,t.k6)((()=>[(0,t.bF)(m,null,{default:(0,t.k6)((()=>[(0,t.bF)(v)])),_:1}),(0,t.eW)((0,o.v_)(e.$t("home.access")),1)])),_:2},1032,["onClick"])):(0,t.Q3)("",!0),(0,t.bF)(k,{value:"ApiPassword"},{default:(0,t.k6)((()=>[a.row.isSelf?((0,t.uX)(),(0,t.Wv)(p,{key:0,onClick:e=>n.handleApiPassword(a.row)},{default:(0,t.k6)((()=>[(0,t.bF)(m,null,{default:(0,t.k6)((()=>[(0,t.bF)(g)])),_:1}),(0,t.eW)((0,o.v_)(e.$t("home.managerApi")),1)])),_:2},1032,["onClick"])):(0,t.Q3)("",!0)])),_:2},1024),(0,t.bF)(k,{value:"ApiPasswordOther"},{default:(0,t.k6)((()=>[0==a.row.isSelf?((0,t.uX)(),(0,t.Wv)(p,{key:0,onClick:e=>n.handleApiPassword(a.row)},{default:(0,t.k6)((()=>[(0,t.bF)(m,null,{default:(0,t.k6)((()=>[(0,t.bF)(g)])),_:1}),(0,t.eW)(" "+(0,o.v_)(e.$t("home.managerApi")),1)])),_:2},1032,["onClick"])):(0,t.Q3)("",!0)])),_:2},1024),(0,t.bF)(w,{item:a.row},null,8,["item"]),(0,t.bF)(f,{item:a.row},null,8,["item"])],64)):(0,t.Q3)("",!0),(0,t.bF)(k,{value:"Remove"},{default:(0,t.k6)((()=>[a.row.showDel?((0,t.uX)(),(0,t.Wv)(p,{key:0,onClick:e=>n.handleDel(a.row)},{default:(0,t.k6)((()=>[(0,t.bF)(m,null,{default:(0,t.k6)((()=>[(0,t.bF)(b)])),_:1}),(0,t.eW)(" "+(0,o.v_)(e.$t("home.delete")),1)])),_:2},1032,["onClick"])):(0,t.Q3)("",!0)])),_:2},1024)])),_:2},1024)])),default:(0,t.k6)((()=>[(0,t.Lk)("div",tr,[or,(0,t.bF)(m,{class:"el-icon--right"},{default:(0,t.k6)((()=>[(0,t.bF)(c)])),_:1})])])),_:2},1024)):(0,t.Q3)("",!0)])),_:2},1024)])),_:2},1024)])])):(0,t.Q3)("",!0),nr])),_:2},1032,["label"])])),_:1})}var sr=a(2933);const dr=e=>((0,t.Qi)("data-v-17e5eab6"),e=e(),(0,t.jt)(),e),ur=dr((()=>(0,t.Lk)("img",{src:"firewall.svg",alt:"firewall"},null,-1)));function ir(e,l,a,n,r,s){const d=(0,t.g2)("el-col"),u=(0,t.g2)("AccessBoolean"),i=(0,t.g2)("el-skeleton-item"),c=(0,t.g2)("el-skeleton");return a.item.hook_counter?((0,t.uX)(),(0,t.Wv)(u,{key:0,value:"FirewallSelf,FirewallOther"},{default:(0,t.k6)((({values:e})=>[e.FirewallSelf&&a.item.isSelf||e.FirewallOther&&!a.item.isSelf?((0,t.uX)(),(0,t.Wv)(d,{key:0,span:12,class:"skeleton-animation",style:(0,o.Tr)(`animation-delay:${a.item.animationDelay}ms`)},{default:(0,t.k6)((()=>[(0,t.Lk)("a",{href:"javascript:;",class:(0,o.C4)({green:n.firewallCounter>0}),onClick:l[0]||(l[0]=(...e)=>n.handleFirewall&&n.handleFirewall(...e))},[ur,(0,t.eW)(" ("+(0,o.v_)(n.firewallCounter)+")",1)],2)])),_:1},8,["style"])):(0,t.Q3)("",!0)])),_:1})):a.item.hook_counter_load?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.Wv)(d,{key:1,span:12},{default:(0,t.k6)((()=>[(0,t.bF)(c,{animated:""},{template:(0,t.k6)((()=>[(0,t.bF)(i,{variant:"text",style:{"vertical-align":"middle",width:"50%"}})])),_:1})])),_:1}))}const cr=Symbol(),mr=()=>{const e=(0,u.KR)({device:{id:"",name:""},show:!1});return(0,t.Gt)(cr,e),{firewall:e}},hr=()=>(0,t.WQ)(cr);var pr={props:["item"],setup(e){const l=(0,t.EW)((()=>e.item.hook_counter.firewall||0)),a=hr(),o=()=>{a.value.device.id=e.item.MachineId,a.value.device.name=e.item.MachineName,a.value.show=!0};return{firewallCounter:l,handleFirewall:o}}};const kr=(0,E.A)(pr,[["render",ir],["__scopeId","data-v-17e5eab6"]]);var vr=kr;const gr=e=>((0,t.Qi)("data-v-5a8fd564"),e=e(),(0,t.jt)(),e),wr=gr((()=>(0,t.Lk)("img",{src:"wakeup.svg",alt:"wakeup"},null,-1)));function fr(e,l,a,n,r,s){const d=(0,t.g2)("el-col"),u=(0,t.g2)("AccessBoolean"),i=(0,t.g2)("el-skeleton-item"),c=(0,t.g2)("el-skeleton");return a.item.hook_counter?((0,t.uX)(),(0,t.Wv)(u,{key:0,value:"WakeupSelf,WakeupOther"},{default:(0,t.k6)((({values:e})=>[e.WakeupSelf&&a.item.isSelf||e.WakeupOther&&!a.item.isSelf?((0,t.uX)(),(0,t.Wv)(d,{key:0,span:12,class:"skeleton-animation",style:(0,o.Tr)(`animation-delay:${a.item.animationDelay}ms`)},{default:(0,t.k6)((()=>[(0,t.Lk)("a",{href:"javascript:;",class:(0,o.C4)({green:n.wakeupCounter>0}),onClick:l[0]||(l[0]=(...e)=>n.handleWakeup&&n.handleWakeup(...e))},[wr,(0,t.eW)(" ("+(0,o.v_)(n.wakeupCounter)+")",1)],2)])),_:1},8,["style"])):(0,t.Q3)("",!0)])),_:1})):a.item.hook_counter_load?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.Wv)(d,{key:1,span:12},{default:(0,t.k6)((()=>[(0,t.bF)(c,{animated:""},{template:(0,t.k6)((()=>[(0,t.bF)(i,{variant:"text",style:{"vertical-align":"middle",width:"50%"}})])),_:1})])),_:1}))}const br=Symbol(),Cr=()=>{const e=(0,u.KR)({device:{id:"",name:""},show:!1});return(0,t.Gt)(br,e),{wakeup:e}},Fr=()=>(0,t.WQ)(br);var _r={props:["item"],setup(e){const l=(0,t.EW)((()=>e.item.hook_counter.wakeup||0)),a=Fr(),o=()=>{a.value.device.id=e.item.MachineId,a.value.device.name=e.item.MachineName,a.value.show=!0};return{wakeupCounter:l,handleWakeup:o}}};const yr=(0,E.A)(_r,[["render",fr],["__scopeId","data-v-5a8fd564"]]);var Vr=yr;const Er=e=>((0,t.Qi)("data-v-4efd631a"),e=e(),(0,t.jt)(),e),Lr=Er((()=>(0,t.Lk)("img",{src:"transport.svg",alt:"transport"},null,-1)));function Ir(e,l,a,n,r,s){const d=(0,t.g2)("el-col"),u=(0,t.g2)("AccessShow"),i=(0,t.g2)("el-skeleton-item"),c=(0,t.g2)("el-skeleton");return a.item.hook_counter?((0,t.uX)(),(0,t.Wv)(u,{key:0,value:"Transport"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{span:12,class:"skeleton-animation",style:(0,o.Tr)(`animation-delay:${a.item.animationDelay}ms`)},{default:(0,t.k6)((()=>[(0,t.Lk)("a",{href:"javascript:;",class:(0,o.C4)({green:n.transportCounter>0}),onClick:l[0]||(l[0]=(...e)=>n.handleTransport&&n.handleTransport(...e))},[Lr,(0,t.eW)(" ("+(0,o.v_)(n.transportCounter)+")",1)],2)])),_:1},8,["style"])])),_:1})):a.item.hook_counter_load?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.Wv)(d,{key:1,span:12},{default:(0,t.k6)((()=>[(0,t.bF)(c,{animated:""},{template:(0,t.k6)((()=>[(0,t.bF)(i,{variant:"text",style:{"vertical-align":"middle",width:"50%"}})])),_:1})])),_:1}))}const Pr=Symbol(),Sr=()=>{const e=(0,u.KR)({device:{id:"",name:""},show:!1});return(0,t.Gt)(Pr,e),{transport:e}},Wr=()=>(0,t.WQ)(Pr);var Xr={props:["item"],setup(e){const l=(0,t.EW)((()=>e.item.hook_counter.transport||0)),a=Wr(),o=l=>{a.value.device.id=e.item.MachineId,a.value.device.name=e.item.MachineName,a.value.show=!0};return{transportCounter:l,handleTransport:o}}};const Tr=(0,E.A)(Xr,[["render",Ir],["__scopeId","data-v-4efd631a"]]);var Ar=Tr;function Nr(e,l,a,n,r,s){const d=(0,t.g2)("Lock"),u=(0,t.g2)("el-icon"),i=(0,t.g2)("el-dropdown-item"),c=(0,t.g2)("AccessShow");return(0,t.uX)(),(0,t.Wv)(c,{value:"ActionOther"},{default:(0,t.k6)((()=>[0==a.item.isSelf?((0,t.uX)(),(0,t.Wv)(i,{key:0,onClick:n.handleAction},{default:(0,t.k6)((()=>[(0,t.bF)(u,null,{default:(0,t.k6)((()=>[(0,t.bF)(d)])),_:1}),(0,t.eW)((0,o.v_)(e.$t("home.action")),1)])),_:1},8,["onClick"])):(0,t.Q3)("",!0)])),_:1})}const Mr=Symbol(),xr=()=>{const e=(0,u.KR)({device:{id:"",name:""},show:!1});return(0,t.Gt)(Mr,e),{action:e}},Rr=()=>(0,t.WQ)(Mr);var $r={props:["item"],components:{Lock:y.c_I},setup(e){const l=Rr(),a=()=>{l.value.device.id=e.item.MachineId,l.value.device.name=e.item.MachineName,l.value.show=!0};return{handleAction:a}}};const Ur=(0,E.A)($r,[["render",Nr]]);var Br=Ur;function Dr(e,l,a,n,r,s){const d=(0,t.g2)("Platform"),u=(0,t.g2)("el-icon"),i=(0,t.g2)("el-dropdown-item"),c=(0,t.g2)("Histogram"),m=(0,t.g2)("AccessShow");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(i,{onClick:n.handleStopwatch},{default:(0,t.k6)((()=>[(0,t.bF)(u,null,{default:(0,t.k6)((()=>[(0,t.bF)(d)])),_:1}),(0,t.eW)((0,o.v_)(e.$t("home.messenger")),1)])),_:1},8,["onClick"]),(0,t.bF)(m,{value:"Flow"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{onClick:n.handleFlow},{default:(0,t.k6)((()=>[(0,t.bF)(u,null,{default:(0,t.k6)((()=>[(0,t.bF)(c)])),_:1}),(0,t.eW)((0,o.v_)(e.$t("home.flowStatis")),1)])),_:1},8,["onClick"])])),_:1})],64)}var zr={props:["item"],components:{Platform:y.ODD,Histogram:y.dqr},setup(e){const l=(0,$n.q)(),a=()=>{l.value.device.id=e.item.MachineId,l.value.device.name=e.item.MachineName,l.value.showStopwatch=!0},t=()=>{l.value.device.id=e.item.MachineId,l.value.device.name=e.item.MachineName,l.value.show=!0};return{handleStopwatch:a,handleFlow:t}}};const Or=(0,E.A)(zr,[["render",Dr]]);var Qr=Or,jr={emits:["refresh","access"],components:{Delete:y.epd,SwitchButton:y.L$q,ArrowDown:y.yd$,Flag:y.lNU,HelpFilled:y.adD,Platform:y.ODD,Paperclip:y.xv8,CircleCheck:y.rW7,VideoPlay:y.IOc,Orange:y.tLG,Lock:y.c_I,Histogram:y.dqr,FirewallOper:vr,WakeupOper:Vr,TransportOper:Ar,ActionOper:Br,FlowOper:Qr},setup(e,{emit:l}){const a=(0,d.B)(),{t:t}=(0,xl.s9)(),o=(0,ve.Y)(),n=e=>{sr.s.confirm(t("home.deleteSure",[e.MachineName]),t("common.tips"),{confirmButtonText:t("common.confirm"),cancelButtonText:t("common.cancel"),type:"warning"}).then((()=>{(0,ce.Se)(e.MachineId).then((()=>{l("refresh")}))})).catch((()=>{}))},r=e=>{sr.s.confirm(t("home.closeSure",[e.MachineName]),t("common.tips"),{confirmButtonText:t("common.confirm"),cancelButtonText:t("common.cancel"),type:"warning"}).then((()=>{(0,ta.NS)(e.MachineId)})).catch((()=>{}))},s=(e,l)=>{const t=e.hook_accesss||"",o=a.value.config.Client.AccessBits;let n=Math.max(o.length,t.length),r=o.padEnd(n,"0").split("").map((e=>+e)),s=t.padEnd(n,"0").split("").map((e=>+e));return e.showAccess&&l.Access&&0==r.map(((e,l)=>s[l]+e>=1&&1==e)).filter((e=>!e)).length},u=e=>{o.deviceInfo=e,o.showAccessEdit=!0},i=e=>{sr.s.prompt(t("home.newPassword"),t("home.setPassword",[e.MachineName]),{confirmButtonText:t("common.confirm"),cancelButtonText:t("common.cancel"),inputPattern:/^[0-9a-zA-Z]{1,32}$/,inputErrorMessage:"Êï∞Â≠óÂ≠óÊØç1-32‰Ωç"}).then((({value:l})=>{(0,we.gv)({machineId:e.MachineId,password:l}).then((()=>{me.nk.success(t("common.oper"))})).catch((()=>{me.nk.error(t("common.operFail"))}))})).catch((()=>{}))};return{handleDel:n,handleExit:r,handleShowAccess:s,handleAccess:u,handleApiPassword:i}}};const Kr=(0,E.A)(jr,[["render",rr],["__scopeId","data-v-8b476678"]]);var Gr=Kr;const Hr=Symbol(),qr=()=>{const e=(0,u.KR)({device:{id:"",name:""}});return(0,t.Gt)(Hr,e),{oper:e}};function Jr(e,l,a,o,n,r){const s=(0,t.g2)("Firewall"),d=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(d,{modelValue:o.state.show,"onUpdate:modelValue":l[0]||(l[0]=e=>o.state.show=e),"append-to":".app-wrap",title:`[${o.state.machineName}]‰∏äÁöÑÈò≤ÁÅ´Â¢ô`,top:"1vh",width:"98%"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(s,{machineId:o.state.machineId},null,8,["machineId"])])])),_:1},8,["modelValue","title"])}var Zr=a(5563),Yr={props:["modelValue"],emits:["update:modelValue"],components:{Firewall:Zr.A},setup(e,{emit:l}){const a=hr(),o=(0,u.Kh)({show:!0,machineId:a.value.device.id,machineName:a.value.device.name});return(0,t.wB)((()=>o.show),(e=>{e||setTimeout((()=>{l("update:modelValue",e),l("change")}),300)})),{state:o}}};const es=(0,E.A)(Yr,[["render",Jr]]);var ls=es;function as(e,l,a,o,n,r){const s=(0,t.g2)("Wakeup"),d=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(d,{modelValue:o.state.show,"onUpdate:modelValue":l[0]||(l[0]=e=>o.state.show=e),"append-to":".app-wrap",title:`[${o.state.machineName}]‰∏äÁöÑÂî§ÈÜí`,top:"1vh",width:"98%"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(s,{machineId:o.state.machineId},null,8,["machineId"])])])),_:1},8,["modelValue","title"])}var ts=a(839),os={props:["modelValue"],emits:["update:modelValue"],components:{Wakeup:ts.A},setup(e,{emit:l}){const a=Fr(),o=(0,u.Kh)({show:!0,machineId:a.value.device.id,machineName:a.value.device.name});return(0,t.wB)((()=>o.show),(e=>{e||setTimeout((()=>{l("update:modelValue",e),l("change")}),300)})),{state:o}}};const ns=(0,E.A)(os,[["render",as]]);var rs=ns;function ss(e,l,a,o,n,r){const s=(0,t.g2)("Transport"),d=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(d,{modelValue:o.state.show,"onUpdate:modelValue":l[0]||(l[0]=e=>o.state.show=e),"append-to":".app-wrap",title:o.state.title,top:"1vh",width:"98%"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(s,{machineId:o.state.machineId},null,8,["machineId"])])])),_:1},8,["modelValue","title"])}var ds=a(3391),us={props:["modelValue"],emits:["update:modelValue"],components:{Transport:ds.A},setup(e,{emit:l}){const a=(0,d.B)(),o=Wr(),n=a.value.config.Client.Id==o.value.device.id||!o.value.device.id,r=(0,u.Kh)({show:!0,machineId:o.value.device.id,title:n?`[${o.value.device.name}]‰∏äÁöÑÈößÈÅìÂçèËÆÆ`:`Êú¨Êú∫‰∏é[${o.value.device.name}]‰πãÈó¥ÁöÑÈößÈÅìÂçèËÆÆ`});return(0,t.wB)((()=>r.show),(e=>{e||setTimeout((()=>{l("update:modelValue",e),l("change")}),300)})),{state:r}}};const is=(0,E.A)(us,[["render",ss]]);var cs=is;function ms(e,l,a,o,n,r){const s=(0,t.g2)("Action"),d=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(d,{modelValue:o.state.show,"onUpdate:modelValue":l[0]||(l[0]=e=>o.state.show=e),"append-to":".app-wrap",title:`[${o.state.machineName}]‰∏äÁöÑÈ™åËØÅÂèÇÊï∞`,top:"1vh",width:"98%"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(s,{machineId:o.state.machineId},null,8,["machineId"])])])),_:1},8,["modelValue","title"])}var hs=a(6271),ps={props:["modelValue"],emits:["update:modelValue"],components:{Action:hs.A},setup(e,{emit:l}){const a=Rr(),o=(0,u.Kh)({show:!0,machineId:a.value.device.id,machineName:a.value.device.name});return(0,t.wB)((()=>o.show),(e=>{e||setTimeout((()=>{l("update:modelValue",e),l("change")}),300)})),{state:o}}};const ks=(0,E.A)(ps,[["render",ms]]);var vs=ks;const gs=(e="0")=>(0,p.zG)("decenter/getcounter",e),ws=()=>(0,p.zG)("decenter/refresh"),fs=Symbol(),bs=()=>{const e=(0,u.KR)({list:null,hashcode:0});(0,t.Gt)(fs,e);const l=()=>new Promise(((l,a)=>{gs(e.value.hashcode.toString()).then((a=>{if(e.value.hashcode=a.HashCode,a.List){const t={};for(const e in a.List){const l=a.List[e];for(const a in l)t[a]=t[a]||{},t[a][e]=l[a]}return e.value.list=t,void l(!0)}l(!1)})).catch((()=>{l(!1)}))})),a=(l,a)=>{e.value.list&&Object.assign(a,{hook_counter:e.value.list[l.MachineId],hook_counter_load:!0})},o=()=>{ws()};return{decenter:e,counterDataFn:l,counterProcessFn:a,counterRefreshFn:o}},Cs={key:0},Fs={key:1},_s={key:2},ys={key:0},Vs={key:1},Es={key:0};function Ls(e,l,a,n,r,s){const d=(0,t.g2)("el-descriptions-item"),u=(0,t.g2)("Delete"),i=(0,t.g2)("el-icon"),c=(0,t.g2)("el-button"),m=(0,t.g2)("el-popconfirm"),h=(0,t.g2)("Plus"),p=(0,t.g2)("el-descriptions"),k=(0,t.g2)("el-dialog"),v=(0,t.g2)("Add");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(k,{modelValue:n.state.show,"onUpdate:modelValue":l[0]||(l[0]=e=>n.state.show=e),"append-to":".app-wrap",title:n.state.title,top:"1vh",width:"400"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(p,{border:"",size:"small",column:1,"label-width":"8rem","overlength-control":"wrap"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{label:"ÂêçÁß∞"},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(n.state.status.Info.Name),1)])),_:1}),(0,t.bF)(d,{label:"Â∏¶ÂÆΩ"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[n.state.status.Info.Bandwidth<0?((0,t.uX)(),(0,t.CE)("span",Cs,"Á¶ÅÊ≠¢")):(0,t.Q3)("",!0),0==n.state.status.Info.Bandwidth?((0,t.uX)(),(0,t.CE)("span",Fs,"Êó†ÈôêÂà∂")):n.state.status.Info.Bandwidth>0?((0,t.uX)(),(0,t.CE)("span",_s,(0,o.v_)(n.state.status.Info.Bandwidth)+"Mbps",1)):(0,t.Q3)("",!0)])])),_:1}),(0,t.bF)(d,{label:"ÂºÄÂßãÊó∂Èó¥"},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(n.state.status.Info.UseTime),1)])),_:1}),(0,t.bF)(d,{label:"ÁªìÊùüÊó∂Èó¥"},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(n.state.status.Info.EndTime),1)])),_:1}),(0,t.bF)(d,{label:"‰ΩúÁî®‰∫é"},{default:(0,t.k6)((()=>[n.state.status.Info.UserId?((0,t.uX)(),(0,t.CE)("span",ys,"ÂêåÁî®Êà∑idÂÆ¢Êà∑Á´Ø")):n.state.status.Info.MachineId?((0,t.uX)(),(0,t.CE)("span",Vs,"Êú¨ÂÆ¢Êà∑Á´Ø")):(0,t.Q3)("",!0)])),_:1}),(0,t.bF)(d,{label:"Â§áÊ≥®"},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(n.state.status.Info.Remark),1)])),_:1}),(0,t.bF)(d,{label:"Êìç‰Ωú"},{default:(0,t.k6)((()=>[n.state.super?((0,t.uX)(),(0,t.CE)("div",Es,[n.state.status.Info.Id>0?((0,t.uX)(),(0,t.Wv)(m,{key:0,"confirm-button-text":"Á°ÆËÆ§","cancel-button-text":"ÂèñÊ∂à",title:"Á°ÆÂÆöÂà†Èô§?",onConfirm:n.handleDel},{reference:(0,t.k6)((()=>[(0,t.bF)(c,{type:"danger",size:"small",loading:n.state.loading},{default:(0,t.k6)((()=>[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(u)])),_:1})])),_:1},8,["loading"])])),_:1},8,["onConfirm"])):((0,t.uX)(),(0,t.Wv)(c,{key:1,type:"success",size:"small",loading:n.state.loading,onClick:n.handleAdd},{default:(0,t.k6)((()=>[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(h)])),_:1})])),_:1},8,["loading","onClick"]))])):(0,t.Q3)("",!0)])),_:1})])),_:1})])])),_:1},8,["modelValue","title"]),n.state.showAdd?((0,t.uX)(),(0,t.Wv)(v,{key:0,modelValue:n.state.showAdd,"onUpdate:modelValue":l[1]||(l[1]=e=>n.state.showAdd=e),onSuccess:n.handleAddSuccess},null,8,["modelValue","onSuccess"])):(0,t.Q3)("",!0)],64)}var Is=a(2002),Ps={props:["modelValue"],emits:["update:modelValue"],components:{Delete:y.epd,Plus:y.FWt,Add:Is.A},setup(e,{emit:l}){const a=le(),o=(0,d.B)(),n=(0,u.Kh)({show:!0,machineId:a.value.device.id,title:`[${a.value.device.name}]‰∏äÁöÑ${a.value.device.typeText}ÁôΩÂêçÂçï`,status:{Enabled:!1,Type:"",Info:{}},super:(0,t.EW)((()=>o.value.signin.Super)),loading:!1,showAdd:!1});(0,t.wB)((()=>n.show),(e=>{e||setTimeout((()=>{l("update:modelValue",e)}),300)}));const r=()=>{(0,Z.eO)(a.value.device.type,a.value.device.id).then((e=>{n.status=e,n.status.Info=e.Info||{}}))},s=()=>{n.loading=!0,(0,Z.$A)(n.status.Info.Id).then((()=>{n.loading=!1,r(),l("change")})).catch((()=>{n.loading=!1}))},i=(0,u.KR)({}),c=(0,u.KR)([]);(0,t.Gt)("edit",i),(0,t.Gt)("nodes",c);const m=()=>{i.value={Id:0,Name:a.value.device.name,Nodes:["*"],Remark:"",MachineId:a.value.device.id,Type:a.value.device.type,prefix:""},n.showAdd=!0},h=()=>{r(),l("change")};return(0,t.sV)((()=>{r()})),{state:n,handleRefreshData:r,handleDel:s,handleAdd:m,handleAddSuccess:h}}};const Ss=(0,E.A)(Ps,[["render",Ls]]);var Ws=Ss,Xs={components:{Sort:I,Device:se,DeviceEdit:ke,AccessEdit:Fe,Tunnel:Ul,TunnelEdit:ql,ConnectionsEdit:uo,Tuntap:pa,TuntapEdit:_t,TuntapLease:Ot,Socks5:je,Socks5Edit:bl,Forward:_o,ForwardEdit:Qo,SForwardEdit:Rn,UpdaterConfirm:ra,Stopwatch:Gn,Oper:Gr,OperFirewall:ls,OperWakeup:rs,OperTransport:cs,OperAction:vs,OperFlow:Yn,OperWlist:Ws},setup(e){const l=(0,d.B)(),a=(0,u.Kh)({height:(0,t.EW)((()=>l.value.height-90)),center:(0,t.EW)((()=>l.value.isPc)),paperCount:(0,t.EW)((()=>l.value.isPc?7:3)),paperLayout:(0,t.EW)((()=>l.value.isPc?"total,sizes,prev,pager, next":"prev, pager, next"))}),{devices:o,deviceAddHook:n,deviceRefreshHook:r,deviceStartProcess:s,handlePageChange:i,handlePageSizeChange:c,deviceClearTimeout:h,setSort:p}=(0,ve.r)(),{forward:k}=m(),{sforward:v}=fo(),{flow:g}=(0,$n.Y)(),{oper:w}=qr(),{firewall:f}=mr(),{wakeup:b}=Cr(),{transport:F}=Sr(),{action:y}=xr(),{accessDataFn:V,accessProcessFn:E,accessRefreshFn:L}=(0,_e.Y)();n("access",V,E,L);const{decenter:I,counterDataFn:P,counterProcessFn:S,counterRefreshFn:W}=bs();n("counter",P,S,W);const{socks5:X,socks5DataFn:T,socks5ProcessFn:A,socks5RefreshFn:N,getSocks5Machines:M,sortSocks5:x}=C();n("socks5",T,A,N);const{tunnel:R,tunnelDataFn:$,tunnelProcessFn:U,tunnelRefreshFn:B,sortTunnel:D}=Nl();n("tunnel",$,U,B);const{updater:z,updaterDataFn:O,updaterProcessFn:Q,updaterRefreshFn:j,updaterSubscribe:K,updaterClearTimeout:G}=(0,Jl.d)();n("updater",O,Q,j);const{tuntap:H,tuntapDataFn:q,tuntapProcessFn:J,tuntapRefreshFn:Z,getTuntapMachines:Y,sortTuntapIP:le}=(0,_.O)();n("tuntap",q,J,Z);const{connections:ae,connectionDataFn:te,connectionProcessFn:oe,connectionRefreshFn:ne}=(0,oo.L)();n("connection",te,oe,ne);const{wlist:re,wlistDataFn:se,wlistProcessFn:de,wlistRefreshFn:ue}=ee();n("wlist",se,de,ue);const ie=e=>{o.page.Request.Prop=e.prop,o.page.Request.Asc="ascending"==e.order;let l=new Promise(((e,l)=>{e()}));if("tunnel"==e.prop){const e=D(o.page.Request.Asc);e.length>0&&(l=p(e))}else if("tuntap"==e.prop){const e=le(o.page.Request.Asc);e.length>0&&(l=p(e))}else if("socks5"==e.prop){const e=x(o.page.Request.Asc);e.length>0&&(l=p(e))}l.then((()=>{i()})).catch((()=>{}))},ce=e=>{o.page.Request.Name=e||"",o.page.Request.Name?o.page.Request.Ids=Y(o.page.Request.Name).concat(M(o.page.Request.Name)).reduce(((e,l)=>(-1==e.indexOf(l)&&e.push(l),e)),[]):o.page.Request.Ids=[],i()};return(0,t.sV)((()=>{window.dispatchEvent(new Event("resize")),i(),s(),K()})),(0,t.hi)((()=>{h(),G()})),{state:a,devices:o,deviceRefreshHook:r,handleSortChange:ie,handlePageRefresh:ce,handlePageChange:i,handlePageSizeChange:c,tuntap:H,socks5:X,tunnel:R,connections:ae,forward:k,sforward:v,updater:z,flow:g,oper:w,firewall:f,wakeup:b,transport:F,action:y,wlist:re}}};const Ts=(0,E.A)(Xs,[["render",s],["__scopeId","data-v-98f950dc"]]);var As=Ts}}]);