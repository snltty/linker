"use strict";(self["webpackChunklinker_web"]=self["webpackChunklinker_web"]||[]).push([[934],{920:function(e,a,l){l.d(a,{BJ:function(){return d},NS:function(){return r},UB:function(){return m},aP:function(){return c},lJ:function(){return s},mK:function(){return o},rD:function(){return n},rL:function(){return u},y2:function(){return i}});var t=l(4);const o=(e="0")=>(0,t.zG)("updater/get",e),s=e=>(0,t.zG)("updater/confirm",e),r=e=>(0,t.zG)("updater/exit",e),n=e=>(0,t.zG)("updater/SetSync2Server",e),d=()=>(0,t.zG)("updater/getserver"),u=()=>(0,t.zG)("updater/getmsg"),i=e=>(0,t.zG)("updater/confirmserver",e),c=()=>(0,t.zG)("updater/exitserver"),m=()=>(0,t.zG)("updater/Subscribe")},2322:function(e,a,l){l.d(a,{A:function(){return f}});var t=l(6768),o=l(4232);const s={class:"t-c"},r={class:"t-c w-100 mgt-1"};function n(e,a,l,n,d,u){const i=(0,t.g2)("Share"),c=(0,t.g2)("el-icon"),m=(0,t.g2)("el-button"),p=(0,t.g2)("el-transfer"),h=(0,t.g2)("el-dialog"),b=(0,t.g2)("AccessBoolean");return(0,t.uX)(),(0,t.Wv)(b,{value:"Sync"},{default:(0,t.k6)((({values:l})=>[(0,t.Lk)("div",null,[(0,t.RG)(e.$slots,"default",{},(()=>[(0,t.bF)(m,{class:"btn",size:"small",onClick:e=>n.handleShowSync(l)},{default:(0,t.k6)((()=>[(0,t.bF)(c,null,{default:(0,t.k6)((()=>[(0,t.bF)(i)])),_:1})])),_:2},1032,["onClick"])])),(0,t.bF)(h,{class:"options-center",title:e.$t("server.sync"),"destroy-on-close":"",modelValue:n.state.showNames,"onUpdate:modelValue":a[2]||(a[2]=e=>n.state.showNames=e),width:"54rem",top:"2vh"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.Lk)("div",s,(0,o.v_)(`${e.$t("server.sync")}【${e.$t(`server.async${n.state.name}`)}】${e.$t("server.asyncText")}`),1),(0,t.bF)(p,{class:"src-tranfer mgt-1",modelValue:n.state.srcIdValues,"onUpdate:modelValue":a[0]||(a[0]=e=>n.state.srcIdValues=e),filterable:"","filter-method":n.srcFilterMethod,data:n.state.srcIds,titles:[e.$t("firewall.unselect"),e.$t("firewall.selected")],props:{key:"MachineId",label:"MachineName"}},null,8,["modelValue","filter-method","data","titles"]),(0,t.Lk)("div",r,[(0,t.bF)(m,{onClick:a[1]||(a[1]=e=>n.state.showNames=!1)},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.$t("common.cancel")),1)])),_:1}),(0,t.bF)(m,{type:"primary",onClick:n.handleConfirm},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.$t("common.confirm")),1)])),_:1},8,["onClick"])])])])),_:1},8,["title","modelValue"])])])),_:3})}var d=l(9299),u=l(4);const i=e=>(0,u.zG)("sync/Sync",e);var c=l(3830),m=l(7477),p=l(1219),h=l(144),b=l(5931),k={props:["name"],components:{Share:m.SYj},setup(e){const{t:a}=(0,b.s9)(),l=((0,c.B)(),(0,h.Kh)({name:e.name,loading:!1,showNames:!1,srcIdValues:[],srcIds:[]})),t=()=>{i({names:[e.name],ids:l.srcIdValues}).then((e=>{p.nk.success(a("common.oper")),l.showNames=!1}))},o=e=>{e.Sync?(l.showNames=!0,s()):p.nk.success(a("common.access"))},s=()=>{l.loading=!0,(0,d.NT)().then((e=>{l.loading=!1,l.srcIds=e})).catch((e=>{l.loading=!1}))},r=(e,a)=>a.MachineName.toLowerCase().includes(e.toLowerCase());return{state:l,handleShowSync:o,srcFilterMethod:r,handleConfirm:t}}},v=l(1241);const g=(0,v.A)(k,[["render",n]]);var f=g},135:function(e,a,l){l.r(a),l.d(a,{default:function(){return Sl}});var t=l(6768);const o={class:"servers-wrap h-100"};function s(e,a,l,s,r,n){const d=(0,t.g2)("Config"),u=(0,t.g2)("AccessShow");return(0,t.uX)(),(0,t.CE)("div",o,[(0,t.bF)(u,{value:"Config"},{default:(0,t.k6)((()=>[(0,t.bF)(d)])),_:1})])}var r=l(4232);const n=e=>((0,t.Qi)("data-v-34352132"),e=e(),(0,t.jt)(),e),d={class:"signin-wrap h-100"},u={class:"flex"},i=n((()=>(0,t.Lk)("span",{class:"flex-1"},null,-1))),c={class:"absolute scrollbar"},m={class:"flex"},p=n((()=>(0,t.Lk)("span",{class:"mgl-1"},null,-1))),h={class:"mgl-1"},b={class:"flex"},k={class:"flex"},v=n((()=>(0,t.Lk)("span",{class:"mgl-1"},null,-1))),g={class:"flex"},f={class:"flex"},w=n((()=>(0,t.Lk)("span",{class:"mgl-1"},null,-1))),F={class:"mgl-1"},y={class:"t-c"};function _(e,a,l,o,s,n){const _=(0,t.g2)("Export"),V=(0,t.g2)("el-input"),C=(0,t.g2)("Sync"),S=(0,t.g2)("PcShow"),L=(0,t.g2)("el-form-item"),x=(0,t.g2)("RelayServers"),$=(0,t.g2)("SForwardServers"),N=(0,t.g2)("Updater"),U=(0,t.g2)("el-form"),E=(0,t.g2)("el-button"),W=(0,t.g2)("el-card"),I=(0,t.gN)("trim");return(0,t.uX)(),(0,t.CE)("div",d,[(0,t.bF)(W,{shadow:"never",class:"h-100 flex flex-column flex-nowrap"},{header:(0,t.k6)((()=>[(0,t.Lk)("div",u,[(0,t.Lk)("span",null,(0,r.v_)(e.$t("server.messenger")),1),i,(0,t.bF)(_)])])),footer:(0,t.k6)((()=>[(0,t.Lk)("div",y,[(0,t.bF)(E,{type:"success",onClick:o.handleSave},{default:(0,t.k6)((()=>[(0,t.eW)((0,r.v_)(e.$t("common.confirm")),1)])),_:1},8,["onClick"])])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",c,[(0,t.bF)(U,{"label-width":"auto","label-position":o.state.position},{default:(0,t.k6)((()=>[(0,t.bF)(L,{label:e.$t("server.messengerAddr")},{default:(0,t.k6)((()=>[(0,t.Lk)("div",m,[(0,t.bo)((0,t.bF)(V,{class:(0,r.C4)({success:o.state.list.Host==o.state.signinHost}),style:{width:"20rem"},modelValue:o.state.list.Host,"onUpdate:modelValue":a[0]||(a[0]=e=>o.state.list.Host=e),onBlur:o.handleSave},null,8,["class","modelValue","onBlur"]),[[I]]),p,(0,t.bF)(C,{name:"SignInServer"}),(0,t.bF)(S,null,{default:(0,t.k6)((()=>[(0,t.Lk)("span",h,(0,r.v_)(e.$t("server.messengerText")),1)])),_:1})])])),_:1},8,["label"]),(0,t.bF)(L,{label:`${e.$t("server.messengerAddr")}1`},{default:(0,t.k6)((()=>[(0,t.Lk)("div",b,[(0,t.bo)((0,t.bF)(V,{class:(0,r.C4)({success:o.state.list.Host1==o.state.signinHost}),style:{width:"20rem"},modelValue:o.state.list.Host1,"onUpdate:modelValue":a[1]||(a[1]=e=>o.state.list.Host1=e),onBlur:o.handleSave},null,8,["class","modelValue","onBlur"]),[[I]])])])),_:1},8,["label"]),(0,t.bF)(L),(0,t.bF)(L,{label:e.$t("server.messengerSuperKey")},{default:(0,t.k6)((()=>[(0,t.Lk)("div",k,[(0,t.bo)((0,t.bF)(V,{class:(0,r.C4)({success:o.state.super,error:0==o.state.super}),style:{width:"20rem"},type:"password","show-password":"",maxlength:"36",modelValue:o.state.list.SuperKey,"onUpdate:modelValue":a[2]||(a[2]=e=>o.state.list.SuperKey=e),onBlur:o.handleSave},null,8,["class","modelValue","onBlur"]),[[I]]),v,(0,t.bF)(C,{name:"SignInSuperKey"})])])),_:1},8,["label"]),(0,t.bF)(L,{label:e.$t("server.messengerSuperPassword")},{default:(0,t.k6)((()=>[(0,t.Lk)("div",g,[(0,t.bo)((0,t.bF)(V,{class:(0,r.C4)({success:o.state.super,error:0==o.state.super}),style:{width:"20rem"},type:"password","show-password":"",maxlength:"36",modelValue:o.state.list.SuperPassword,"onUpdate:modelValue":a[3]||(a[3]=e=>o.state.list.SuperPassword=e),onBlur:o.handleSave},null,8,["class","modelValue","onBlur"]),[[I]])])])),_:1},8,["label"]),(0,t.bF)(L),(0,t.bF)(L,{label:e.$t("server.messengerUserId")},{default:(0,t.k6)((()=>[(0,t.Lk)("div",f,[(0,t.bo)((0,t.bF)(V,{style:{width:"20rem"},type:"password","show-password":"",maxlength:"36",modelValue:o.state.list.UserId,"onUpdate:modelValue":a[4]||(a[4]=e=>o.state.list.UserId=e),onBlur:o.handleSave},null,8,["modelValue","onBlur"]),[[I]]),w,(0,t.bF)(C,{name:"SignInUserId"}),(0,t.bF)(S,null,{default:(0,t.k6)((()=>[(0,t.Lk)("span",F,(0,r.v_)(e.$t("server.messengerUserIdText")),1)])),_:1})])])),_:1},8,["label"]),(0,t.bF)(L),(0,t.bF)(x,{class:"mgt-2"}),(0,t.bF)($,{class:"mgt-2"}),(0,t.bF)(N)])),_:1},8,["label-position"])])])),_:1})])}var V=l(9299),C=l(3830),S=l(1219),L=l(144);const x={class:"flex"};function $(e,a,l,o,s,n){const d=(0,t.g2)("el-checkbox"),u=(0,t.g2)("Sync"),i=(0,t.g2)("el-form-item");return(0,t.uX)(),(0,t.Wv)(i,{label:e.$t("server.updater")},{default:(0,t.k6)((()=>[(0,t.Lk)("div",x,[(0,t.bF)(d,{modelValue:o.state.sync2Server,"onUpdate:modelValue":a[0]||(a[0]=e=>o.state.sync2Server=e),onChange:o.handleSync2ServerChange},{default:(0,t.k6)((()=>[(0,t.eW)((0,r.v_)(e.$t("server.updaterSync2Server")),1)])),_:1},8,["modelValue","onChange"]),(0,t.bF)(u,{class:"mgl-1",name:"UpdaterSecretKey"})])])),_:1},8,["label"])}var N=l(920),U=l(5931),E=l(2322),W={components:{Sync:E.A},setup(e){const{t:a}=(0,U.s9)(),l=(0,C.B)(),t=(0,L.Kh)({sync2Server:l.value.config.Client.Updater.Sync2Server}),o=()=>{(0,N.rD)(t.sync2Server).then((()=>{S.nk.success(a("common.oper"))})).catch((e=>{console.log(e),S.nk.error(a("common.operFail"))}))};return{globalData:l,state:t,handleSync2ServerChange:o}}},I=l(1241);const D=(0,I.A)(W,[["render",$]]);var B=D;const R={class:"flex"};function T(e,a,l,o,s,n){const d=(0,t.g2)("WhiteList"),u=(0,t.g2)("Nodes"),i=(0,t.g2)("Status"),c=(0,t.g2)("el-form-item");return(0,t.uX)(),(0,t.Wv)(c,{label:e.$t("server.relay")},{default:(0,t.k6)((()=>[(0,t.Lk)("div",R,[(0,t.Lk)("a",{href:"javascript:;",onClick:a[0]||(a[0]=e=>o.state.showModes=!0),class:(0,r.C4)(["mgr-1 delay a-line",{red:0==o.state.nodes.length,green:o.state.nodes.length>0}])},(0,r.v_)(e.$t("server.relayNodes"))+" : "+(0,r.v_)(o.state.nodes.length),3),(0,t.bF)(d,{type:"Relay"}),o.state.showModes?((0,t.uX)(),(0,t.Wv)(u,{key:0,modelValue:o.state.showModes,"onUpdate:modelValue":a[1]||(a[1]=e=>o.state.showModes=e),data:o.state.nodes},null,8,["modelValue","data"])):(0,t.Q3)("",!0),(0,t.bF)(i,{type:"Relay"})])])),_:1},8,["label"])}var A=l(9232),P=l(5130);const X=e=>((0,t.Qi)("data-v-5f45637d"),e=e(),(0,t.jt)(),e),z={key:0,class:"head mgb-1"},M={class:"flex"},K=X((()=>(0,t.Lk)("span",{class:"flex-1"},null,-1))),Q=X((()=>(0,t.Lk)("span",{class:"flex-1"},null,-1))),q={class:"flex"},j=["href"],H=["src"],O={class:"flex-1"},G={class:"flex"},J=["href"],Y=X((()=>(0,t.Lk)("span",{class:"flex-1"},null,-1))),Z={href:"javascript:;",class:"protocol"},ee={key:0},ae={key:1},le={class:"flex"},te=X((()=>(0,t.Lk)("span",{class:"flex-1"},null,-1))),oe=["onClick"],se={key:1,href:"javascript:;",class:"a-line a-edit"},re=X((()=>(0,t.Lk)("p",null,"--",-1))),ne=X((()=>(0,t.Lk)("p",null,"--",-1))),de={key:0},ue={key:1},ie={class:"t-c"},ce={class:"t-c w-100 mgt-1"};function me(e,a,l,o,s,n){const d=(0,t.g2)("Plus"),u=(0,t.g2)("el-icon"),i=(0,t.g2)("el-button"),c=(0,t.g2)("AccessShow"),m=(0,t.g2)("el-badge"),p=(0,t.g2)("el-checkbox"),h=(0,t.g2)("Refresh"),b=(0,t.g2)("AccessBoolean"),k=(0,t.g2)("el-table-column"),v=(0,t.g2)("Edit"),g=(0,t.g2)("CircleClose"),f=(0,t.g2)("Share"),w=(0,t.g2)("el-table"),F=(0,t.g2)("el-dialog"),y=(0,t.g2)("EditNode"),_=(0,t.g2)("Ids"),V=(0,t.g2)("NodeDeny");return(0,t.uX)(),(0,t.CE)("div",null,[(0,t.bF)(F,{modelValue:o.state.show,"onUpdate:modelValue":a[0]||(a[0]=e=>o.state.show=e),title:e.$t("server.relayTitle"),width:"98%",top:"2vh"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(c,{value:"ImportRelayNode"},{default:(0,t.k6)((()=>[o.state.super?((0,t.uX)(),(0,t.CE)("div",z,[(0,t.Lk)("div",M,[K,(0,t.Lk)("div",null,[(0,t.bF)(i,{type:"success",size:"small",onClick:o.handleImport},{default:(0,t.k6)((()=>[(0,t.bF)(u,null,{default:(0,t.k6)((()=>[(0,t.bF)(d)])),_:1})])),_:1},8,["onClick"])]),Q])])):(0,t.Q3)("",!0)])),_:1}),(0,t.bF)(w,{data:o.state.nodes,size:"small",border:"",height:"500",stripe:""},{default:(0,t.k6)((()=>[(0,t.bF)(k,{property:"Name",label:e.$t("server.relayName")},{default:(0,t.k6)((e=>[(0,t.Lk)("div",q,[(0,t.Lk)("div",null,[(0,t.Lk)("a",{href:e.row.Url,target:"_blank"},[(0,t.Lk)("img",{class:(0,r.C4)(["logo",{gray:!e.row._online}]),src:e.row.Logo||"https://linker.snltty.com/img/logo.png",alt:""},null,10,H)],8,j)]),(0,t.Lk)("div",O,[(0,t.Lk)("p",G,[(0,t.bF)(m,{onClick:a=>o.handleDeny(e.row),type:"success",value:e.row.MasterCount,offset:[20,10]},{default:(0,t.k6)((()=>[(0,t.Lk)("a",{href:e.row.Url,class:(0,r.C4)(["a-line",{green:e.row.Public}]),target:"_blank"},[(0,t.Lk)("strong",null,(0,r.v_)(e.row.Name),1)],10,J)])),_:2},1032,["onClick","value"]),Y,(0,t.Lk)("a",Z,[1==(1&e.row.Protocol)?((0,t.uX)(),(0,t.CE)("span",ee,"tcp")):(0,t.Q3)("",!0),2==(2&e.row.Protocol)?((0,t.uX)(),(0,t.CE)("span",ae,",udp")):(0,t.Q3)("",!0)])]),(0,t.Lk)("p",le,[(0,t.Lk)("div",null,[o.state.syncData.Key==e.row.NodeId?((0,t.uX)(),(0,t.Wv)(p,{key:0,size:"small",disabled:"",checked:""},{default:(0,t.k6)((()=>[(0,t.eW)((0,r.v_)(e.row.Host),1)])),_:2},1024)):((0,t.uX)(),(0,t.Wv)(p,{key:1,size:"small",disabled:"",onClick:(0,P.D$)((a=>o.handleShowSync(e.row,1)),["stop"])},{default:(0,t.k6)((()=>[(0,t.eW)((0,r.v_)(e.row.Host),1)])),_:2},1032,["onClick"]))]),te,(0,t.bF)(b,{value:"UpgradeRelayNode"},{default:(0,t.k6)((({values:a})=>[o.state.super&&a.UpgradeRelayNode?((0,t.uX)(),(0,t.CE)("a",{key:0,href:"javascript:;",class:"a-line a-edit",onClick:a=>o.handleUpgrade(e.row)},[(0,t.bF)(u,null,{default:(0,t.k6)((()=>[(0,t.bF)(h)])),_:1}),(0,t.eW)((0,r.v_)(e.row.Version),1)],8,oe)):((0,t.uX)(),(0,t.CE)("a",se,[(0,t.bF)(u,null,{default:(0,t.k6)((()=>[(0,t.bF)(h)])),_:1}),(0,t.eW)((0,r.v_)(e.row.Version),1)]))])),_:2},1024)])])])])),_:1},8,["label"]),(0,t.bF)(k,{property:"ConnectionsRatio",label:e.$t("server.relayConnection"),width:"80"},{default:(0,t.k6)((e=>[(0,t.Lk)("p",null,[0==e.row.Connections?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[(0,t.eW)("--")],64)):((0,t.uX)(),(0,t.CE)(t.FK,{key:1},[(0,t.eW)((0,r.v_)(e.row.Connections),1)],64))]),(0,t.Lk)("p",null,[(0,t.Lk)("strong",null,(0,r.v_)(e.row.ConnectionsRatio),1)])])),_:1},8,["label"]),(0,t.bF)(k,{property:"Bandwidth",label:e.$t("server.relaySpeed1"),width:"100"},{default:(0,t.k6)((e=>[(0,t.Lk)("p",null,[0==e.row.Bandwidth?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[(0,t.eW)("--")],64)):((0,t.uX)(),(0,t.CE)(t.FK,{key:1},[(0,t.eW)((0,r.v_)(e.row.Bandwidth)+"Mbps",1)],64))]),(0,t.Lk)("p",null,[(0,t.Lk)("strong",null,(0,r.v_)(e.row.BandwidthRatio)+"Mbps",1)])])),_:1},8,["label"]),(0,t.bF)(k,{property:"DataEachMonth",label:e.$t("server.relayFlow"),width:"100"},{default:(0,t.k6)((e=>[0==e.row.DataEachMonth?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[re,ne],64)):((0,t.uX)(),(0,t.CE)(t.FK,{key:1},[(0,t.Lk)("p",null,(0,r.v_)(e.row.DataEachMonth)+"GB",1),(0,t.Lk)("p",null,[(0,t.Lk)("strong",null,(0,r.v_)((e.row.DataRemain/1024/1024/1024).toFixed(2))+"GB",1)])],64))])),_:1},8,["label"]),(0,t.bF)(k,{property:"BandwidthEach",label:e.$t("server.relaySpeed"),width:"80"},{default:(0,t.k6)((e=>[(0,t.Lk)("p",null,[0==e.row.BandwidthEach?((0,t.uX)(),(0,t.CE)("span",de,"--")):((0,t.uX)(),(0,t.CE)("span",ue,(0,r.v_)(e.row.BandwidthEach)+"Mbps",1))]),(0,t.Lk)("p",null,(0,r.v_)(e.row.Delay)+"ms",1)])),_:1},8,["label"]),(0,t.bF)(k,{property:"Manageable",label:e.$t("server.relayOper"),width:"110"},{default:(0,t.k6)((e=>[(0,t.Lk)("p",null,[o.state.super?((0,t.uX)(),(0,t.Wv)(b,{key:0,value:"RemoveRelayNode,UpdateRelayNode,ShareRelayNode,RebootRelayNode"},{default:(0,t.k6)((({values:a})=>[(0,t.Lk)("p",null,[e.row._manager&&a.RebootRelayNode?((0,t.uX)(),(0,t.Wv)(i,{key:0,type:"warning",plain:"",size:"small",onClick:a=>o.handleExit(e.row)},{default:(0,t.k6)((()=>[(0,t.bF)(u,null,{default:(0,t.k6)((()=>[(0,t.bF)(h)])),_:1})])),_:2},1032,["onClick"])):(0,t.Q3)("",!0),a.UpdateRelayNode?((0,t.uX)(),(0,t.Wv)(i,{key:1,plain:"",size:"small",onClick:a=>o.handleEdit(e.row)},{default:(0,t.k6)((()=>[(0,t.bF)(u,null,{default:(0,t.k6)((()=>[(0,t.bF)(v)])),_:1})])),_:2},1032,["onClick"])):(0,t.Q3)("",!0)]),(0,t.Lk)("p",null,[a.RemoveRelayNode?((0,t.uX)(),(0,t.Wv)(i,{key:0,type:"danger",plain:"",size:"small",onClick:a=>o.handleRemove(e.row)},{default:(0,t.k6)((()=>[(0,t.bF)(u,null,{default:(0,t.k6)((()=>[(0,t.bF)(g)])),_:1})])),_:2},1032,["onClick"])):(0,t.Q3)("",!0),e.row._manager&&a.ShareRelayNode?((0,t.uX)(),(0,t.Wv)(i,{key:1,type:"info",plain:"",size:"small",onClick:a=>o.handleShare(e.row)},{default:(0,t.k6)((()=>[(0,t.bF)(u,null,{default:(0,t.k6)((()=>[(0,t.bF)(f)])),_:1})])),_:2},1032,["onClick"])):(0,t.Q3)("",!0)])])),_:2},1024)):(0,t.Q3)("",!0)])])),_:1},8,["label"])])),_:1},8,["data"])])])),_:1},8,["modelValue","title"]),o.state.showEdit?((0,t.uX)(),(0,t.Wv)(y,{key:0,modelValue:o.state.showEdit,"onUpdate:modelValue":a[1]||(a[1]=e=>o.state.showEdit=e),data:o.state.current},null,8,["modelValue","data"])):(0,t.Q3)("",!0),(0,t.bF)(F,{class:"options-center",title:e.$t("server.relaySetDefault"),"destroy-on-close":"",modelValue:o.state.showSync,"onUpdate:modelValue":a[2]||(a[2]=e=>o.state.showSync=e),width:"54rem",top:"2vh"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.Lk)("div",ie,(0,r.v_)(e.$t("server.relaySetDefaultText")),1),(0,t.bF)(_,{ref:"domIds"},null,512),(0,t.Lk)("div",ce,[(0,t.bF)(i,{onClick:o.handleCancelSync},{default:(0,t.k6)((()=>[(0,t.eW)((0,r.v_)(e.$t("common.cancel")),1)])),_:1},8,["onClick"]),(0,t.bF)(i,{type:"primary",onClick:o.handleSync},{default:(0,t.k6)((()=>[(0,t.eW)((0,r.v_)(e.$t("common.confirm")),1)])),_:1},8,["onClick"])])])])),_:1},8,["title","modelValue"]),o.state.showDeny?((0,t.uX)(),(0,t.Wv)(V,{key:1,modelValue:o.state.showDeny,"onUpdate:modelValue":a[3]||(a[3]=e=>o.state.showDeny=e),type:"relay",data:o.state.current},null,8,["modelValue","data"])):(0,t.Q3)("",!0)])}var pe=l(2933);function he(e,a,l,o,s,r){const n=(0,t.g2)("el-transfer");return(0,t.uX)(),(0,t.CE)("div",null,[(0,t.bF)(n,{class:"src-tranfer mgt-1",modelValue:o.state.srcIdValues,"onUpdate:modelValue":a[0]||(a[0]=e=>o.state.srcIdValues=e),filterable:"","filter-method":o.srcFilterMethod,data:o.state.srcIds,titles:[e.$t("firewall.unselect"),e.$t("firewall.selected")],props:{key:"MachineId",label:"MachineName"}},null,8,["modelValue","filter-method","data","titles"])])}var be={setup(){const e=(0,L.Kh)({srcIdValues:[],srcIds:[]}),a=()=>{e.loading=!0,(0,V.NT)().then((a=>{e.loading=!1,e.srcIds=a})).catch((a=>{e.loading=!1}))},l=(e,a)=>a.MachineName.toLowerCase().includes(e.toLowerCase()),o=()=>e.srcIdValues;return(0,t.sV)((()=>{a()})),{state:e,srcFilterMethod:l,getIds:o}}};const ke=(0,I.A)(be,[["render",he]]);var ve=ke;const ge={class:"t-c w-100"};function fe(e,a,l,o,s,n){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-form-item"),i=(0,t.g2)("el-input-number"),c=(0,t.g2)("Refresh"),m=(0,t.g2)("el-icon"),p=(0,t.g2)("el-button"),h=(0,t.g2)("el-switch"),b=(0,t.g2)("el-checkbox"),k=(0,t.g2)("el-form"),v=(0,t.g2)("el-dialog"),g=(0,t.gN)("trim");return(0,t.uX)(),(0,t.Wv)(v,{class:"options-center",title:e.$t("server.relayTitle"),"destroy-on-close":"",modelValue:o.state.show,"onUpdate:modelValue":a[13]||(a[13]=e=>o.state.show=e),width:"30rem",top:"2vh"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(k,{ref:"ruleFormRef",model:o.state.ruleForm,rules:o.state.rules,"label-width":"auto"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{label:e.$t("server.relayName"),prop:"Name"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(d,{disabled:0==l.data._manager,minlength:"1",maxlength:"32","show-word-limit":"",modelValue:o.state.ruleForm.Name,"onUpdate:modelValue":a[0]||(a[0]=e=>o.state.ruleForm.Name=e)},null,8,["disabled","modelValue"]),[[g]])])),_:1},8,["label"]),(0,t.bF)(u,{label:e.$t("server.relayHost"),prop:"Host"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(d,{modelValue:o.state.ruleForm.Host,"onUpdate:modelValue":a[1]||(a[1]=e=>o.state.ruleForm.Host=e)},null,8,["modelValue"]),[[g]])])),_:1},8,["label"]),(0,t.bF)(u,{label:e.$t("server.relayConnection"),prop:"Connections"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{disabled:0==l.data._manager,modelValue:o.state.ruleForm.Connections,"onUpdate:modelValue":a[2]||(a[2]=e=>o.state.ruleForm.Connections=e),min:0,max:65535},null,8,["disabled","modelValue"])])),_:1},8,["label"]),(0,t.bF)(u,{label:e.$t("server.relaySpeed"),prop:"BandwidthEach"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{modelValue:o.state.ruleForm.BandwidthEach,"onUpdate:modelValue":a[3]||(a[3]=e=>o.state.ruleForm.BandwidthEach=e),min:0},null,8,["modelValue"]),(0,t.eW)("Mbps ")])),_:1},8,["label"]),(0,t.bF)(u,{label:e.$t("server.relaySpeed1"),prop:"Bandwidth"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{disabled:0==l.data._manager,modelValue:o.state.ruleForm.Bandwidth,"onUpdate:modelValue":a[4]||(a[4]=e=>o.state.ruleForm.Bandwidth=e),min:0},null,8,["disabled","modelValue"]),(0,t.eW)("Mbps ")])),_:1},8,["label"]),(0,t.bF)(u,{label:e.$t("server.relayFlow"),prop:"DataEachMonth"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{disabled:0==l.data._manager,modelValue:o.state.ruleForm.DataEachMonth,"onUpdate:modelValue":a[5]||(a[5]=e=>o.state.ruleForm.DataEachMonth=e),min:0},null,8,["disabled","modelValue"]),(0,t.eW)("GB "),(0,t.bF)(p,{size:"small",onClick:o.handleRefresh},{default:(0,t.k6)((()=>[(0,t.bF)(m,null,{default:(0,t.k6)((()=>[(0,t.bF)(c)])),_:1})])),_:1},8,["onClick"])])),_:1},8,["label"]),(0,t.bF)(u,{label:e.$t("server.relayFlowLast"),prop:"DataRemain"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{disabled:0==l.data._manager,modelValue:o.state.ruleForm.DataRemain,"onUpdate:modelValue":a[6]||(a[6]=e=>o.state.ruleForm.DataRemain=e),min:0},null,8,["disabled","modelValue"]),(0,t.eW)("byte ")])),_:1},8,["label"]),(0,t.bF)(u,{label:e.$t("server.relayUrl"),prop:"Url"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(d,{disabled:0==l.data._manager,modelValue:o.state.ruleForm.Url,"onUpdate:modelValue":a[7]||(a[7]=e=>o.state.ruleForm.Url=e)},null,8,["disabled","modelValue"]),[[g]])])),_:1},8,["label"]),(0,t.bF)(u,{label:e.$t("server.relayLogo"),prop:"Logo"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(d,{disabled:0==l.data._manager,modelValue:o.state.ruleForm.Logo,"onUpdate:modelValue":a[8]||(a[8]=e=>o.state.ruleForm.Logo=e)},null,8,["disabled","modelValue"]),[[g]])])),_:1},8,["label"]),(0,t.bF)(u,{label:e.$t("server.relayPublic"),prop:"Public"},{default:(0,t.k6)((()=>[(0,t.bF)(h,{modelValue:o.state.ruleForm.Public,"onUpdate:modelValue":a[9]||(a[9]=e=>o.state.ruleForm.Public=e),size:"small"},null,8,["modelValue"])])),_:1},8,["label"]),(0,t.bF)(u,{label:e.$t("server.relayAllow"),prop:"Allow"},{default:(0,t.k6)((()=>[(0,t.bF)(b,{disabled:0==l.data._manager,modelValue:o.state.ruleForm.AllowTcp,"onUpdate:modelValue":a[10]||(a[10]=e=>o.state.ruleForm.AllowTcp=e)},{default:(0,t.k6)((()=>[(0,t.eW)("TCP")])),_:1},8,["disabled","modelValue"]),(0,t.bF)(b,{disabled:0==l.data._manager,modelValue:o.state.ruleForm.AllowUdp,"onUpdate:modelValue":a[11]||(a[11]=e=>o.state.ruleForm.AllowUdp=e)},{default:(0,t.k6)((()=>[(0,t.eW)("UDP")])),_:1},8,["disabled","modelValue"])])),_:1},8,["label"]),(0,t.bF)(u),(0,t.bF)(u,{label:"",prop:"Btns"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",ge,[(0,t.bF)(p,{onClick:a[12]||(a[12]=e=>o.state.show=!1)},{default:(0,t.k6)((()=>[(0,t.eW)((0,r.v_)(e.$t("common.cancel")),1)])),_:1}),(0,t.bF)(p,{type:"primary",onClick:o.handleSave},{default:(0,t.k6)((()=>[(0,t.eW)((0,r.v_)(e.$t("common.confirm")),1)])),_:1},8,["onClick"])])])),_:1})])),_:1},8,["model","rules"])])])),_:1},8,["title","modelValue"])}var we=l(7477),Fe={props:["data","modelValue"],emits:["update:modelValue","success"],components:{Refresh:we.C42},setup(e,{emit:a}){const{t:l}=(0,U.s9)(),o=JSON.parse(JSON.stringify(e.data));o.AllowTcp=1==(1&o.Protocol),o.AllowUdp=2==(2&o.Protocol);const s=(0,L.Kh)({show:!0,ruleForm:o,rules:{}});(0,t.wB)((()=>s.show),(e=>{e||setTimeout((()=>{a("update:modelValue",e)}),300)}));const r=()=>{s.ruleForm.DataRemain=1024*s.ruleForm.DataEachMonth*1024*1024},n=(0,L.KR)(null),d=()=>{n.value.validate((e=>{if(!e)return;const t=JSON.parse(JSON.stringify(s.ruleForm));t.Protocol=(t.AllowTcp?1:0)|(t.AllowUdp?2:0),(0,A.dL)(t).then((e=>{e?(S.nk.success(l("common.oper")),s.show=!1,a("success")):S.nk.error(l("common.operFail"))})).catch((()=>{S.nk.error(l("common.operFail"))}))}))};return{state:s,ruleFormRef:n,handleRefresh:r,handleSave:d}}};const ye=(0,I.A)(Fe,[["render",fe],["__scopeId","data-v-ce7d402e"]]);var _e=ye;function Ve(e,a,l,o,s,r){const n=(0,t.g2)("Masters"),d=(0,t.g2)("el-tab-pane"),u=(0,t.g2)("Denys"),i=(0,t.g2)("el-tabs"),c=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(c,{modelValue:o.state.show,"onUpdate:modelValue":a[0]||(a[0]=e=>o.state.show=e),title:e.$t("server.denyTitle",[l.data.Name]),top:"1vh",width:"400"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(i,{type:"border-card"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{label:e.$t("server.denyMasters")},{default:(0,t.k6)((()=>[(0,t.bF)(n,{type:l.type,data:l.data},null,8,["type","data"])])),_:1},8,["label"]),(0,t.bF)(d,{label:e.$t("server.denyList")},{default:(0,t.k6)((()=>[(0,t.bF)(u,{type:l.type,data:l.data},null,8,["type","data"])])),_:1},8,["label"])])),_:1})])])),_:1},8,["modelValue","title"])}const Ce={class:"head"},Se={class:"page t-c"},Le={class:"page-wrap"};function xe(e,a,l,o,s,r){const n=(0,t.g2)("Search"),d=(0,t.g2)("el-icon"),u=(0,t.g2)("el-button"),i=(0,t.g2)("el-table-column"),c=(0,t.g2)("Remove"),m=(0,t.g2)("el-table"),p=(0,t.g2)("el-pagination"),h=(0,t.g2)("Add");return(0,t.uX)(),(0,t.CE)("div",null,[(0,t.Lk)("div",Ce,[(0,t.bF)(u,{size:"small",onClick:o.getData},{default:(0,t.k6)((()=>[(0,t.bF)(d,null,{default:(0,t.k6)((()=>[(0,t.bF)(n)])),_:1})])),_:1},8,["onClick"])]),(0,t.bF)(m,{data:o.state.request.List,stripe:"",border:"",size:"small",width:"100%"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{prop:"Addr",label:"IP"}),(0,t.bF)(i,{prop:"Oper",label:e.$t("server.denyOper"),width:"60"},{default:(0,t.k6)((e=>[(0,t.bF)(u,{type:"danger",size:"small",onClick:a=>o.handleDeny(e.row)},{default:(0,t.k6)((()=>[(0,t.bF)(d,null,{default:(0,t.k6)((()=>[(0,t.bF)(c)])),_:1})])),_:2},1032,["onClick"])])),_:1},8,["label"])])),_:1},8,["data"]),(0,t.Lk)("div",Se,[(0,t.Lk)("div",Le,[(0,t.bF)(p,{small:"",background:"",layout:"total,prev,pager, next",total:o.state.request.Count,"page-size":o.state.request.Size,"current-page":o.state.request.Page,onCurrentChange:o.handlePageChange},null,8,["total","page-size","current-page","onCurrentChange"])])]),o.state.show?((0,t.uX)(),(0,t.Wv)(h,{key:0,modelValue:o.state.show,"onUpdate:modelValue":a[0]||(a[0]=e=>o.state.show=e),data:o.state.current,type:l.type},null,8,["modelValue","data","type"])):(0,t.Q3)("",!0)])}var $e=l(743);const Ne={class:"t-c w-100"};function Ue(e,a,l,o,s,n){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-form-item"),i=(0,t.g2)("el-button"),c=(0,t.g2)("el-form"),m=(0,t.g2)("el-dialog"),p=(0,t.gN)("trim");return(0,t.uX)(),(0,t.Wv)(m,{class:"options-center",title:e.$t("server.denyAdd"),"destroy-on-close":"",modelValue:o.state.show,"onUpdate:modelValue":a[3]||(a[3]=e=>o.state.show=e),width:"28rem",top:"2vh"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(c,{ref:"ruleFormRef",model:o.state.ruleForm,rules:o.state.rules,"label-width":"auto"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{label:e.$t("server.denyStr"),prop:"Str"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(d,{modelValue:o.state.ruleForm.Str,"onUpdate:modelValue":a[0]||(a[0]=e=>o.state.ruleForm.Str=e)},null,8,["modelValue"]),[[p]])])),_:1},8,["label"]),(0,t.bF)(u,{label:e.$t("server.denyRemark"),prop:"Remark"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(d,{modelValue:o.state.ruleForm.Remark,"onUpdate:modelValue":a[1]||(a[1]=e=>o.state.ruleForm.Remark=e)},null,8,["modelValue"]),[[p]])])),_:1},8,["label"]),(0,t.bF)(u),(0,t.bF)(u,{label:"",prop:"Btns"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",Ne,[(0,t.bF)(i,{onClick:a[2]||(a[2]=e=>o.state.show=!1)},{default:(0,t.k6)((()=>[(0,t.eW)((0,r.v_)(e.$t("common.cancel")),1)])),_:1}),(0,t.bF)(i,{type:"primary",onClick:o.handleSave},{default:(0,t.k6)((()=>[(0,t.eW)((0,r.v_)(e.$t("common.confirm")),1)])),_:1},8,["onClick"])])])),_:1})])),_:1},8,["model","rules"])])])),_:1},8,["title","modelValue"])}var Ee={props:["modelValue","type","data"],emits:["update:modelValue","success"],setup(e,{emit:a}){console.log(e.data);const{t:l}=(0,U.s9)(),o=e.type=A.O4,s=(0,L.Kh)({show:!0,ruleForm:{NodeId:e.data.NodeId||"",Id:e.data.Id||0,Str:e.data.Str||"",Remark:e.data.Remark||""},rules:{Str:[{type:"string",required:!0,message:"required",trigger:"blur",pattern:/^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}(\/([0-9]|([1-2][0-9])|(3[0-2])))?)$|^0$|^\*$/}]}});(0,t.wB)((()=>s.show),(e=>{e||setTimeout((()=>{a("update:modelValue",e)}),300)}));const r=(0,L.KR)(null),n=()=>{r.value.validate((e=>{if(!e)return;const t=JSON.parse(JSON.stringify(s.ruleForm));o(t).then((()=>{S.nk.success(l("common.oper")),s.show=!1,a("success")})).catch((()=>{S.nk.error(l("common.operFail"))}))}))};return{state:s,ruleFormRef:r,handleSave:n}}};const We=(0,I.A)(Ee,[["render",Ue],["__scopeId","data-v-275238b2"]]);var Ie=We,De={props:["type","data"],components:{Remove:we.n$P,Search:we.vji,Add:Ie},setup(e,{emit:a}){const l="relay"==e.type?A.X$:$e.gy,o=(0,L.Kh)({request:{NodeId:e.data.NodeId,Page:1,Size:10,Count:0,List:[]},show:!1,current:{}}),s=()=>{l({NodeId:e.data.NodeId,Page:o.request.Page,Size:o.request.Size}).then((e=>{o.request.Page=e.Page,o.request.Size=e.Size,o.request.Count=e.Count,o.request.List=e.List}))},r=e=>{e&&(o.request.Page=e,s())},n=a=>{o.current={Id:0,NodeId:e.data.NodeId,Str:`${a.Addr.split(":")[0]}/32`},o.show=!0};return(0,t.sV)((()=>{s()})),{state:o,getData:s,handlePageChange:r,handleDeny:n}}};const Be=(0,I.A)(De,[["render",xe],["__scopeId","data-v-5f3bf52a"]]);var Re=Be;const Te={class:"head"},Ae={class:"page t-c"},Pe={class:"page-wrap"};function Xe(e,a,l,o,s,r){const n=(0,t.g2)("el-input"),d=(0,t.g2)("Search"),u=(0,t.g2)("el-icon"),i=(0,t.g2)("el-button"),c=(0,t.g2)("Plus"),m=(0,t.g2)("el-table-column"),p=(0,t.g2)("Delete"),h=(0,t.g2)("el-popconfirm"),b=(0,t.g2)("el-table"),k=(0,t.g2)("el-pagination"),v=(0,t.g2)("Add");return(0,t.uX)(),(0,t.CE)("div",null,[(0,t.Lk)("div",Te,[(0,t.bF)(n,{modelValue:o.state.request.Str,"onUpdate:modelValue":a[0]||(a[0]=e=>o.state.request.Str=e),size:"small",clearable:""},null,8,["modelValue"]),(0,t.bF)(i,{class:"mgl-1",size:"small",onClick:o.getData},{default:(0,t.k6)((()=>[(0,t.bF)(u,null,{default:(0,t.k6)((()=>[(0,t.bF)(d)])),_:1})])),_:1},8,["onClick"]),(0,t.bF)(i,{type:"success",size:"small",onClick:o.handleAdd},{default:(0,t.k6)((()=>[(0,t.bF)(u,null,{default:(0,t.k6)((()=>[(0,t.bF)(c)])),_:1})])),_:1},8,["onClick"])]),(0,t.bF)(b,{data:o.state.request.List,stripe:"",border:"",size:"small",width:"100%"},{default:(0,t.k6)((()=>[(0,t.bF)(m,{prop:"Str",label:e.$t("server.denyStr")},null,8,["label"]),(0,t.bF)(m,{prop:"Remark",label:e.$t("server.denyRemark")},null,8,["label"]),(0,t.bF)(m,{prop:"Oper",label:e.$t("server.denyOper"),width:"60"},{default:(0,t.k6)((a=>[(0,t.bF)(h,{"confirm-button-text":e.$t("common.confirm"),"cancel-button-text":e.$t("common.cancel"),title:e.$t("server.denyDel"),onConfirm:e=>o.handleDel(a.row)},{reference:(0,t.k6)((()=>[(0,t.bF)(i,{type:"danger",size:"small"},{default:(0,t.k6)((()=>[(0,t.bF)(u,null,{default:(0,t.k6)((()=>[(0,t.bF)(p)])),_:1})])),_:1})])),_:2},1032,["confirm-button-text","cancel-button-text","title","onConfirm"])])),_:1},8,["label"])])),_:1},8,["data"]),(0,t.Lk)("div",Ae,[(0,t.Lk)("div",Pe,[(0,t.bF)(k,{small:"",background:"",layout:"total,prev,pager, next",total:o.state.request.Count,"page-size":o.state.request.Size,"current-page":o.state.request.Page,onCurrentChange:o.handlePageChange},null,8,["total","page-size","current-page","onCurrentChange"])])]),o.state.show?((0,t.uX)(),(0,t.Wv)(v,{key:0,modelValue:o.state.show,"onUpdate:modelValue":a[1]||(a[1]=e=>o.state.show=e),data:o.state.current,type:l.type},null,8,["modelValue","data","type"])):(0,t.Q3)("",!0)])}var ze={props:["type","data"],components:{Delete:we.epd,Add:Ie,Plus:we.FWt,Search:we.vji},setup(e,{emit:a}){const l="relay"==e.type?A.Dz:$e.wm,o="relay"==e.type?A.mH:$e.P4,s=(0,L.Kh)({request:{NodeId:e.data.NodeId,Page:1,Size:10,Count:0,Str:"",List:[]},show:!1,current:{}}),r=()=>{l({NodeId:e.data.NodeId,Page:s.request.Page,Size:s.request.Size,Str:s.request.Str}).then((e=>{s.request.Page=e.Page,s.request.Size=e.Size,s.request.Count=e.Count,s.request.List=e.List}))},n=e=>{e&&(s.request.Page=e,r())},d=a=>{o({Id:a.Id,NodeId:e.data.NodeId}).then((()=>{r()})).catch((()=>{}))},u=()=>{s.current={NodeId:e.data.NodeId,Str:"",Id:0,Remark:""},s.show=!0};return(0,t.sV)((()=>{r()})),(0,t.n)((()=>{r()})),{state:s,getData:r,handlePageChange:n,handleDel:d,handleAdd:u}}};const Me=(0,I.A)(ze,[["render",Xe],["__scopeId","data-v-0b53603a"]]);var Ke=Me,Qe={props:["type","data","modelValue"],emits:["update:modelValue"],components:{Masters:Re,Denys:Ke},setup(e,{emit:a}){const l=(0,L.Kh)({show:!0});return(0,t.wB)((()=>l.show),(e=>{e||setTimeout((()=>{a("update:modelValue",e)}),300)})),{state:l}}};const qe=(0,I.A)(Qe,[["render",Ve]]);var je=qe,He={props:["modelValue","data"],emits:["update:modelValue","success"],components:{Ids:ve,EditNode:_e,Edit:we.ffu,ArrowDown:we.yd$,Refresh:we.C42,CircleClose:we.R$5,Plus:we.FWt,Share:we.SYj,NodeDeny:je},setup(e,{emit:a}){const{t:l}=(0,U.s9)(),o=(0,C.B)(),s=(0,L.Kh)({show:!0,nodes:(0,t.EW)((()=>e.data)),showEdit:!1,current:{},showSync:!1,syncData:{Key:"",Value:0},super:(0,t.EW)((()=>o.value.signin.Super)),showDeny:!1});(0,t.wB)((()=>s.show),(e=>{e||setTimeout((()=>{a("update:modelValue",e)}),300)}));const r=()=>{(0,A.Ud)().then((e=>{s.syncData.Key=e.Key||"",s.syncData.Value=e.Value||0}))},n=e=>{s.current=e,s.showEdit=!0},d=(0,L.KR)(null),u=(e,a)=>{s.syncData.Key=e.NodeId,s.syncData.Value=a,s.showSync=!0},i=()=>{(0,A.ZJ)({Ids:d.value.getIds(),Data:s.syncData}).then((e=>{s.showSync=!1,S.nk.success(l("common.oper")),r()})).catch((()=>{r()}))},c=()=>{s.showSync=!1,r()},m=e=>{pe.s.confirm(l("server.relayExit"),l("common.confirm"),{confirmButtonText:l("common.confirm"),cancelButtonText:l("common.cancel"),type:"warning"}).then((()=>{(0,A.mB)(e.NodeId).then((e=>{S.nk.success(l("common.oper"))})).catch((()=>{S.nk.error(l("common.operFail"))}))})).catch((()=>{}))},p=e=>{0!=e._manager&&pe.s.confirm(`${l("server.relayUpdate")} ${o.value.signin.Version}`,l("server.relayUpdate"),{confirmButtonText:l("common.confirm"),cancelButtonText:l("common.cancel"),type:"warning"}).then((()=>{(0,A.Cd)({Key:e.NodeId,Value:o.value.signin.Version}).then((e=>{S.nk.success(l("common.oper"))})).catch((()=>{S.nk.error(l("common.operFail"))}))})).catch((()=>{S.nk.error(l("common.operFail"))}))},h=e=>{pe.s.confirm(l("server.relayRemove"),l("common.confirm"),{confirmButtonText:l("common.confirm"),cancelButtonText:l("common.cancel"),type:"warning"}).then((()=>{(0,A.KD)(e.NodeId).then((e=>{S.nk.success(l("common.oper"))})).catch((()=>{S.nk.error(l("common.operFail"))}))})).catch((()=>{}))},b=()=>{pe.s.prompt(l("server.relayImport"),l("common.confirm"),{confirmButtonText:l("common.confirm"),cancelButtonText:l("common.cancel")}).then((({value:e})=>{e&&(0,A.jU)(e).then((e=>{e?S.nk.error(e):S.nk.success(l("common.oper"))})).catch((()=>{}))})).catch((()=>{}))},k=e=>{(0,A.jJ)(e.NodeId).then((e=>{pe.s.prompt(l("server.relayShare"),l("common.tips"),{confirmButtonText:l("common.confirm"),cancelButtonText:l("common.cancel"),inputValue:e}).then((({value:e})=>{navigator.clipboard.writeText(e)})).catch((()=>{}))})).catch((()=>{S.nk.error(l("common.operFail"))}))},v=e=>{s.current=e,s.showDeny=!0};return(0,t.sV)((()=>{r()})),(0,t.hi)((()=>{clearTimeout(s.timer)})),{globalData:o,state:s,handleEdit:n,domIds:d,handleShowSync:u,handleSync:i,handleCancelSync:c,handleExit:m,handleUpgrade:p,handleRemove:h,handleImport:b,handleShare:k,handleDeny:v}}};const Oe=(0,I.A)(He,[["render",me],["__scopeId","data-v-5f45637d"]]);var Ge=Oe;function Je(e,a,l,o,s,n){const d=(0,t.g2)("Manager");return(0,t.uX)(),(0,t.CE)(t.FK,null,[o.state.super?((0,t.uX)(),(0,t.CE)("a",{key:0,onClick:a[0]||(a[0]=e=>o.state.showManager=!0),href:"javascript:;",class:"mgr-1 a-line"},(0,r.v_)(e.$t("server.wlist")),1)):(0,t.Q3)("",!0),o.state.showManager?((0,t.uX)(),(0,t.Wv)(d,{key:1,modelValue:o.state.showManager,"onUpdate:modelValue":a[1]||(a[1]=e=>o.state.showManager=e),type:o.state.type,prefix:o.state.prefix},null,8,["modelValue","type","prefix"])):(0,t.Q3)("",!0)],64)}const Ye={class:"group-wrap"},Ze={class:"head"},ea={class:"search flex"},aa={class:"t-c"},la={class:"page"};function ta(e,a,l,o,s,n){const d=(0,t.g2)("el-input"),u=(0,t.g2)("Search"),i=(0,t.g2)("el-icon"),c=(0,t.g2)("el-button"),m=(0,t.g2)("Plus"),p=(0,t.g2)("el-table-column"),h=(0,t.g2)("EditPen"),b=(0,t.g2)("Delete"),k=(0,t.g2)("el-popconfirm"),v=(0,t.g2)("el-table"),g=(0,t.g2)("el-pagination"),f=(0,t.g2)("el-dialog"),w=(0,t.g2)("Add"),F=(0,t.gN)("trim");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(f,{class:"options-center",title:e.$t("server.wlist"),"destroy-on-close":"",modelValue:o.state.show,"onUpdate:modelValue":a[3]||(a[3]=e=>o.state.show=e),width:"77rem",top:"2vh"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",Ye,[(0,t.Lk)("div",Ze,[(0,t.Lk)("div",ea,[(0,t.Lk)("div",null,[(0,t.Lk)("span",null,(0,r.v_)(e.$t("server.wlistName")),1),(0,t.eW)(),(0,t.bo)((0,t.bF)(d,{modelValue:o.state.page.Name,"onUpdate:modelValue":a[0]||(a[0]=e=>o.state.page.Name=e),style:{width:"8rem"},size:"small",clearable:"",onChange:o.handleSearch},null,8,["modelValue","onChange"]),[[F]])]),(0,t.Lk)("div",null,[(0,t.Lk)("span",null,(0,r.v_)(e.$t("server.wlistRemark")),1),(0,t.eW)(),(0,t.bo)((0,t.bF)(d,{modelValue:o.state.page.Remark,"onUpdate:modelValue":a[1]||(a[1]=e=>o.state.page.Remark=e),style:{width:"8rem"},size:"small",clearable:"",onChange:o.handleSearch},null,8,["modelValue","onChange"]),[[F]])]),(0,t.Lk)("div",null,[(0,t.bF)(c,{size:"small",onClick:a[2]||(a[2]=e=>o.handleSearch())},{default:(0,t.k6)((()=>[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(u)])),_:1})])),_:1})]),(0,t.Lk)("div",null,[(0,t.bF)(c,{size:"small",type:"success",onClick:o.handleAdd},{default:(0,t.k6)((()=>[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(m)])),_:1})])),_:1},8,["onClick"])])])]),(0,t.bF)(v,{stripe:"",data:o.state.list.List,border:"",size:"small",width:"100%"},{default:(0,t.k6)((()=>[(0,t.bF)(p,{prop:"Name",label:e.$t("server.wlistName")},null,8,["label"]),(0,t.bF)(p,{prop:"Nodes",label:e.$t("server.wlistNodes")},{default:(0,t.k6)((e=>[(0,t.Lk)("span",null,(0,r.v_)(e.row.Nodes.filter((e=>e.indexOf(o.state.prefix)<0)).map((e=>o.state.nodes[e])).join(",")),1)])),_:1},8,["label"]),o.state.prefix?((0,t.uX)(),(0,t.Wv)(p,{key:0,prop:"Nodes1",label:e.$t(`server.wlistNodes${o.state.page.Type}`)},{default:(0,t.k6)((e=>[(0,t.Lk)("span",null,(0,r.v_)(e.row.Nodes.filter((e=>e.indexOf(o.state.prefix)>=0)).map((e=>e.replace(o.state.prefix,""))).join(",")),1)])),_:1},8,["label"])):(0,t.Q3)("",!0),(0,t.bF)(p,{prop:"Bandwidth",label:"Mbps",width:"80"}),(0,t.bF)(p,{prop:"Remark",label:e.$t("server.wlistRemark")},null,8,["label"]),(0,t.bF)(p,{prop:"UseTime",label:`${e.$t("server.wlistUseTime")}`,width:"140"},null,8,["label"]),(0,t.bF)(p,{prop:"EndTime",label:`${e.$t("server.wlistEndTime")}`,width:"140"},null,8,["label"]),(0,t.bF)(p,{prop:"AddTime",label:`${e.$t("server.wlistAddTime")}`,width:"140"},null,8,["label"]),(0,t.bF)(p,{fixed:"right",prop:"Oper",label:e.$t("server.wlistOper"),width:"110"},{default:(0,t.k6)((a=>[(0,t.bF)(c,{size:"small",onClick:e=>o.handleEdit(a.row)},{default:(0,t.k6)((()=>[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(h)])),_:1})])),_:2},1032,["onClick"]),(0,t.bF)(k,{title:e.$t("server.wlistDelConfirm"),onConfirm:e=>o.handleDel(a.row)},{reference:(0,t.k6)((()=>[(0,t.bF)(c,{type:"danger",size:"small"},{default:(0,t.k6)((()=>[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(b)])),_:1})])),_:1})])),_:2},1032,["title","onConfirm"])])),_:1},8,["label"])])),_:1},8,["data"]),(0,t.Lk)("div",aa,[(0,t.Lk)("div",la,[(0,t.bF)(g,{small:"",background:"",layout:"prev, pager, next","page-size":o.state.page.Size,total:o.state.list.Count,"pager-count":5,"current-page":o.state.page.Page,onCurrentChange:o.handlePageChange},null,8,["page-size","total","current-page","onCurrentChange"])])])])])),_:1},8,["title","modelValue"]),o.state.showAdd?((0,t.uX)(),(0,t.Wv)(w,{key:0,modelValue:o.state.showAdd,"onUpdate:modelValue":a[4]||(a[4]=e=>o.state.showAdd=e),onSuccess:o.handleSearch},null,8,["modelValue","onSuccess"])):(0,t.Q3)("",!0)],64)}var oa=l(2002),sa=l(5316),ra={props:["modelValue","type","prefix"],emits:["update:modelValue"],components:{Delete:we.epd,Plus:we.FWt,Search:we.vji,EditPen:we.EDh,Add:oa.A,Warning:we.N5l},setup(e,{emit:a}){const{t:l}=(0,U.s9)(),o=(0,t.WQ)("nodes"),s=(0,L.Kh)({nodes:(0,t.EW)((()=>[{Id:"*",Name:"*"}].concat(o.value).reduce(((e,a,l)=>(e[a.Id]=a.Name,e)),{}))),page:{Page:1,Size:10,Type:e.type,MachineId:"",Name:"",Remark:""},list:{Page:1,Size:15,Count:0,List:[]},show:!0,showAdd:!1,prefix:e.prefix});(0,t.wB)((()=>s.show),(e=>{e||setTimeout((()=>{a("update:modelValue",e)}),300)}));const r=(0,L.KR)({});(0,t.Gt)("edit",r);const n=()=>{r.value={Id:0,Name:"",Nodes:["*"],Remark:"",UserId:"",Type:e.type,prefix:e.prefix||""},s.showAdd=!0},d=a=>{a.prefix=e.prefix||"",r.value=a,s.showAdd=!0},u=()=>{(0,sa.ly)(s.page).then((e=>{s.list=e})).catch((()=>{}))},i=e=>{s.page.Page=e,u()},c=e=>{(0,sa.$A)(e.Id).then((e=>{u()})).catch((()=>{}))};return(0,t.sV)((()=>{u()})),{state:s,handleSearch:u,handlePageChange:i,handleDel:c,handleAdd:n,handleEdit:d}}};const na=(0,I.A)(ra,[["render",ta],["__scopeId","data-v-38b67cdc"]]);var da=na,ua={props:["type","prefix"],components:{Manager:da},setup(e){const a=(0,C.B)(),l=(0,L.Kh)({super:(0,t.EW)((()=>a.value.signin.Super)),showManager:!1,type:e.type,prefix:e.prefix});return{state:l}}};const ia=(0,I.A)(ua,[["render",Je]]);var ca=ia;const ma=["src"],pa={key:1,class:"mgl-1"};function ha(e,a,l,o,s,n){return(0,t.uX)(),(0,t.CE)("div",null,[o.state.status.Enabled?((0,t.uX)(),(0,t.CE)("a",{key:0,onClick:a[0]||(a[0]=(...e)=>o.handleImport&&o.handleImport(...e)),href:"javascript:;",class:"a-line blue"},[(0,t.Lk)("img",{src:`./${o.state.status.Type}.png`,height:"20",style:{"vertical-align":"middle"}},null,8,ma),(0,t.Lk)("span",null,"使用"+(0,r.v_)(o.state.status.Type)+"订单",1)])):(0,t.Q3)("",!0),o.state.status.Info?((0,t.uX)(),(0,t.CE)("strong",pa,(0,r.v_)(o.state.status.Info.Bandwidth)+"Mbps、"+(0,r.v_)(o.state.status.Info.UseTime.split(" ")[0])+"-"+(0,r.v_)(o.state.status.Info.EndTime.split(" ")[0]),1)):(0,t.Q3)("",!0)])}var ba={props:["type"],setup(e){const a=(0,C.B)(),l=(0,L.Kh)({status:{}}),o=()=>{pe.s.prompt("","订单号",{confirmButtonText:"确认",cancelButtonText:"取消"}).then((({value:a})=>{a&&(0,sa.X4)({Key:e.type,Value:a}).then((e=>{"success"==e?S.nk.success(e):S.nk.error(e)}))})).catch((()=>{}))};return(0,t.sV)((()=>{(0,sa.eO)(e.type,a.value.config.Client.Id).then((e=>{l.status=e}))})),{state:l,handleImport:o}}};const ka=(0,I.A)(ba,[["render",ha]]);var va=ka,ga={components:{Sync:E.A,Nodes:Ge,WhiteList:ca,Status:va},setup(e){const a=(0,C.B)(),l=(0,L.Kh)({showModes:!1,nodes:[],timer:0}),o=(0,L.KR)([]);(0,t.Gt)("nodes",o);const s=()=>{clearTimeout(l.timer),(0,A.W4)().then((e=>{e.forEach((e=>{e._online=e.LastTicks<15e3,e._manager=e.Manageable&&e._online}));const a=e.filter((e=>e._online)),t=e.filter((e=>!e._online)).sort(((e,a)=>e.LastTicks-a.LastTicks)),r=a.concat(t);l.nodes=r,o.value=r,l.timer=setTimeout(s,1e3)})).catch((()=>{l.timer=setTimeout(s,1e3)}))};return(0,t.sV)((()=>{s()})),(0,t.hi)((()=>{clearTimeout(l.timer)})),{globalData:a,state:l}}};const fa=(0,I.A)(ga,[["render",T],["__scopeId","data-v-5bc67c80"]]);var wa=fa;const Fa={class:"flex"};function ya(e,a,l,o,s,n){const d=(0,t.g2)("WhiteList"),u=(0,t.g2)("AccessShow"),i=(0,t.g2)("Nodes"),c=(0,t.g2)("el-form-item");return(0,t.uX)(),(0,t.Wv)(c,{label:e.$t("server.sforward")},{default:(0,t.k6)((()=>[(0,t.Lk)("div",Fa,[(0,t.Lk)("a",{href:"javascript:;",onClick:a[0]||(a[0]=e=>o.state.showModes=!0),class:(0,r.C4)(["mgr-1 delay a-line",{red:0==o.state.nodes.length,green:o.state.nodes.length>0}])},(0,r.v_)(e.$t("server.sforwardNodes"))+" : "+(0,r.v_)(o.state.nodes.length),3),(0,t.bF)(u,{value:"WhiteList"},{default:(0,t.k6)((()=>[o.state.super?((0,t.uX)(),(0,t.Wv)(d,{key:0,type:"SForward",prefix:"sfp->"})):(0,t.Q3)("",!0)])),_:1}),o.state.showModes?((0,t.uX)(),(0,t.Wv)(i,{key:0,modelValue:o.state.showModes,"onUpdate:modelValue":a[1]||(a[1]=e=>o.state.showModes=e),data:o.state.nodes},null,8,["modelValue","data"])):(0,t.Q3)("",!0)])])),_:1},8,["label"])}const _a=e=>((0,t.Qi)("data-v-b074561c"),e=e(),(0,t.jt)(),e),Va={key:0,class:"head mgb-1"},Ca={class:"flex"},Sa=_a((()=>(0,t.Lk)("span",{class:"flex-1"},null,-1))),La=_a((()=>(0,t.Lk)("span",{class:"flex-1"},null,-1))),xa={class:"flex"},$a=["href"],Na=["src"],Ua={class:"flex-1"},Ea={class:"flex"},Wa=["href"],Ia={class:"flex"},Da=_a((()=>(0,t.Lk)("span",{class:"flex-1"},null,-1))),Ba=["onClick"],Ra={key:1,href:"javascript:;",class:"a-line a-edit"},Ta=_a((()=>(0,t.Lk)("p",null,"--",-1))),Aa=_a((()=>(0,t.Lk)("p",null,"--",-1))),Pa={key:0},Xa={key:1};function za(e,a,l,o,s,n){const d=(0,t.g2)("Plus"),u=(0,t.g2)("el-icon"),i=(0,t.g2)("el-button"),c=(0,t.g2)("AccessShow"),m=(0,t.g2)("el-badge"),p=(0,t.g2)("Refresh"),h=(0,t.g2)("AccessBoolean"),b=(0,t.g2)("el-table-column"),k=(0,t.g2)("Edit"),v=(0,t.g2)("CircleClose"),g=(0,t.g2)("Share"),f=(0,t.g2)("el-table"),w=(0,t.g2)("el-dialog"),F=(0,t.g2)("EditNode"),y=(0,t.g2)("NodeDeny");return(0,t.uX)(),(0,t.CE)("div",null,[(0,t.bF)(w,{modelValue:o.state.show,"onUpdate:modelValue":a[0]||(a[0]=e=>o.state.show=e),title:e.$t("server.sforwardTitle"),width:"98%",top:"2vh"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(c,{value:"ImportSForwardNode"},{default:(0,t.k6)((()=>[o.state.super?((0,t.uX)(),(0,t.CE)("div",Va,[(0,t.Lk)("div",Ca,[Sa,(0,t.Lk)("div",null,[(0,t.bF)(i,{type:"success",size:"small",onClick:o.handleImport},{default:(0,t.k6)((()=>[(0,t.bF)(u,null,{default:(0,t.k6)((()=>[(0,t.bF)(d)])),_:1})])),_:1},8,["onClick"])]),La])])):(0,t.Q3)("",!0)])),_:1}),(0,t.bF)(f,{data:o.state.nodes,size:"small",border:"",height:"500",stripe:""},{default:(0,t.k6)((()=>[(0,t.bF)(b,{property:"Name",label:e.$t("server.sforwardName"),width:"240"},{default:(0,t.k6)((e=>[(0,t.Lk)("div",xa,[(0,t.Lk)("div",null,[(0,t.Lk)("a",{href:e.row.Url,target:"_blank"},[(0,t.Lk)("img",{class:(0,r.C4)(["logo",{gray:!e.row._online}]),src:e.row.Logo||"https://linker.snltty.com/img/logo.png",alt:""},null,10,Na)],8,$a)]),(0,t.Lk)("div",Ua,[(0,t.Lk)("p",Ea,[(0,t.bF)(m,{onClick:a=>o.handleDeny(e.row),type:"success",value:e.row.MasterCount,offset:[20,10]},{default:(0,t.k6)((()=>[(0,t.Lk)("a",{href:e.row.Url,class:"a-line",target:"_blank"},[(0,t.Lk)("strong",null,(0,r.v_)(e.row.Name),1)],8,Wa)])),_:2},1032,["onClick","value"])]),(0,t.Lk)("p",Ia,[(0,t.Lk)("span",null,(0,r.v_)(e.row.Host),1),Da,(0,t.bF)(h,{value:"UpgradeSForwardNode"},{default:(0,t.k6)((({values:a})=>[o.state.super&&a.UpgradeSForwardNode?((0,t.uX)(),(0,t.CE)("a",{key:0,href:"javascript:;",class:"a-line a-edit",onClick:a=>o.handleUpgrade(e.row)},[(0,t.bF)(u,null,{default:(0,t.k6)((()=>[(0,t.bF)(p)])),_:1}),(0,t.eW)((0,r.v_)(e.row.Version),1)],8,Ba)):((0,t.uX)(),(0,t.CE)("a",Ra,[(0,t.bF)(u,null,{default:(0,t.k6)((()=>[(0,t.bF)(p)])),_:1}),(0,t.eW)((0,r.v_)(e.row.Version),1)]))])),_:2},1024)])])])])),_:1},8,["label"]),(0,t.bF)(b,{property:"ConnectionsRatio",label:e.$t("server.sforwardConnection"),width:"80"},{default:(0,t.k6)((e=>[(0,t.Lk)("p",null,[0==e.row.Connections?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[(0,t.eW)("--")],64)):((0,t.uX)(),(0,t.CE)(t.FK,{key:1},[(0,t.eW)((0,r.v_)(e.row.Connections),1)],64))]),(0,t.Lk)("p",null,[(0,t.Lk)("strong",null,(0,r.v_)(e.row.ConnectionsRatio),1)])])),_:1},8,["label"]),(0,t.bF)(b,{property:"DataEachMonth",label:e.$t("server.sforwardFlow"),width:"100"},{default:(0,t.k6)((e=>[0==e.row.DataEachMonth?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[Ta,Aa],64)):((0,t.uX)(),(0,t.CE)(t.FK,{key:1},[(0,t.Lk)("p",null,(0,r.v_)(e.row.DataEachMonth)+"GB",1),(0,t.Lk)("p",null,[(0,t.Lk)("strong",null,(0,r.v_)((e.row.DataRemain/1024/1024/1024).toFixed(2))+"GB",1)])],64))])),_:1},8,["label"]),(0,t.bF)(b,{property:"BandwidthEach",label:e.$t("server.sforwardSpeed"),width:"80"},{default:(0,t.k6)((e=>[(0,t.Lk)("p",null,[0==e.row.BandwidthEach?((0,t.uX)(),(0,t.CE)("span",Pa,"--")):((0,t.uX)(),(0,t.CE)("span",Xa,(0,r.v_)(e.row.BandwidthEach)+"Mbps",1))]),(0,t.Lk)("p",null,(0,r.v_)(e.row.Delay)+"ms",1)])),_:1},8,["label"]),(0,t.bF)(b,{property:"Bandwidth",label:e.$t("server.sforwardSpeed1"),width:"100"},{default:(0,t.k6)((e=>[(0,t.Lk)("p",null,[0==e.row.Bandwidth?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[(0,t.eW)("--")],64)):((0,t.uX)(),(0,t.CE)(t.FK,{key:1},[(0,t.eW)((0,r.v_)(e.row.Bandwidth)+"Mbps",1)],64))]),(0,t.Lk)("p",null,[(0,t.Lk)("strong",null,(0,r.v_)(e.row.BandwidthRatio)+"Mbps",1)])])),_:1},8,["label"]),(0,t.bF)(b,{property:"Port",label:e.$t("server.sforwardPort"),width:"120"},{default:(0,t.k6)((a=>[(0,t.Lk)("p",null,(0,r.v_)(e.$t("server.sforwardWebPort"))+" : "+(0,r.v_)(a.row.WebPort),1),(0,t.Lk)("p",null,(0,r.v_)(a.row.TunnelPorts),1)])),_:1},8,["label"]),(0,t.bF)(b,{property:"Manageable",fixed:"right",label:e.$t("server.sforwardOper"),width:"110"},{default:(0,t.k6)((e=>[(0,t.Lk)("p",null,[o.state.super?((0,t.uX)(),(0,t.Wv)(h,{key:0,value:"RemoveSForwardNode,UpdateSForwardNode,ShareSForwardNode,RebootSForwardNode"},{default:(0,t.k6)((({values:a})=>[(0,t.Lk)("p",null,[e.row._manager&&a.RebootSForwardNode?((0,t.uX)(),(0,t.Wv)(i,{key:0,type:"warning",plain:"",size:"small",onClick:a=>o.handleExit(e.row)},{default:(0,t.k6)((()=>[(0,t.bF)(u,null,{default:(0,t.k6)((()=>[(0,t.bF)(p)])),_:1})])),_:2},1032,["onClick"])):(0,t.Q3)("",!0),a.UpdateSForwardNode?((0,t.uX)(),(0,t.Wv)(i,{key:1,plain:"",size:"small",onClick:a=>o.handleEdit(e.row)},{default:(0,t.k6)((()=>[(0,t.bF)(u,null,{default:(0,t.k6)((()=>[(0,t.bF)(k)])),_:1})])),_:2},1032,["onClick"])):(0,t.Q3)("",!0)]),(0,t.Lk)("p",null,[a.RemoveSForwardNode?((0,t.uX)(),(0,t.Wv)(i,{key:0,type:"danger",plain:"",size:"small",onClick:a=>o.handleRemove(e.row)},{default:(0,t.k6)((()=>[(0,t.bF)(u,null,{default:(0,t.k6)((()=>[(0,t.bF)(v)])),_:1})])),_:2},1032,["onClick"])):(0,t.Q3)("",!0),e.row._manager&&a.ShareSForwardNode?((0,t.uX)(),(0,t.Wv)(i,{key:1,type:"info",plain:"",size:"small",onClick:a=>o.handleShare(e.row)},{default:(0,t.k6)((()=>[(0,t.bF)(u,null,{default:(0,t.k6)((()=>[(0,t.bF)(g)])),_:1})])),_:2},1032,["onClick"])):(0,t.Q3)("",!0)])])),_:2},1024)):(0,t.Q3)("",!0)])])),_:1},8,["label"])])),_:1},8,["data"])])])),_:1},8,["modelValue","title"]),o.state.showEdit?((0,t.uX)(),(0,t.Wv)(F,{key:0,modelValue:o.state.showEdit,"onUpdate:modelValue":a[1]||(a[1]=e=>o.state.showEdit=e),data:o.state.current},null,8,["modelValue","data"])):(0,t.Q3)("",!0),o.state.showDeny?((0,t.uX)(),(0,t.Wv)(y,{key:1,modelValue:o.state.showDeny,"onUpdate:modelValue":a[2]||(a[2]=e=>o.state.showDeny=e),type:"sforward",data:o.state.current},null,8,["modelValue","data"])):(0,t.Q3)("",!0)])}const Ma={class:"t-c w-100"};function Ka(e,a,l,o,s,n){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-form-item"),i=(0,t.g2)("el-input-number"),c=(0,t.g2)("Refresh"),m=(0,t.g2)("el-icon"),p=(0,t.g2)("el-button"),h=(0,t.g2)("el-switch"),b=(0,t.g2)("el-form"),k=(0,t.g2)("el-dialog"),v=(0,t.gN)("trim");return(0,t.uX)(),(0,t.Wv)(k,{class:"options-center",title:e.$t("server.sforwardTitle"),"destroy-on-close":"",modelValue:o.state.show,"onUpdate:modelValue":a[12]||(a[12]=e=>o.state.show=e),width:"34rem",top:"2vh"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(b,{ref:"ruleFormRef",model:o.state.ruleForm,rules:o.state.rules,"label-width":"auto"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{label:e.$t("server.sforwardName"),prop:"Name"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(d,{disabled:0==l.data._manager,minlength:"1",maxlength:"32","show-word-limit":"",modelValue:o.state.ruleForm.Name,"onUpdate:modelValue":a[0]||(a[0]=e=>o.state.ruleForm.Name=e)},null,8,["disabled","modelValue"]),[[v]])])),_:1},8,["label"]),(0,t.bF)(u,{label:e.$t("server.sforwardHost"),prop:"Host"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(d,{modelValue:o.state.ruleForm.Host,"onUpdate:modelValue":a[1]||(a[1]=e=>o.state.ruleForm.Host=e)},null,8,["modelValue"]),[[v]])])),_:1},8,["label"]),(0,t.bF)(u,{label:e.$t("server.sforwardDomain"),prop:"Domain"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(d,{disabled:0==l.data._manager,modelValue:o.state.ruleForm.Domain,"onUpdate:modelValue":a[2]||(a[2]=e=>o.state.ruleForm.Domain=e)},null,8,["disabled","modelValue"]),[[v]])])),_:1},8,["label"]),(0,t.bF)(u,{label:e.$t("server.sforwardConnection"),prop:"Connections"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{disabled:0==l.data._manager,modelValue:o.state.ruleForm.Connections,"onUpdate:modelValue":a[3]||(a[3]=e=>o.state.ruleForm.Connections=e),min:0,max:65535},null,8,["disabled","modelValue"])])),_:1},8,["label"]),(0,t.bF)(u,{label:e.$t("server.sforwardSpeed"),prop:"BandwidthEach"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{modelValue:o.state.ruleForm.BandwidthEach,"onUpdate:modelValue":a[4]||(a[4]=e=>o.state.ruleForm.BandwidthEach=e),min:0},null,8,["modelValue"]),(0,t.eW)("Mbps ")])),_:1},8,["label"]),(0,t.bF)(u,{label:e.$t("server.sforwardSpeed1"),prop:"Bandwidth"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{disabled:0==l.data._manager,modelValue:o.state.ruleForm.Bandwidth,"onUpdate:modelValue":a[5]||(a[5]=e=>o.state.ruleForm.Bandwidth=e),min:0},null,8,["disabled","modelValue"]),(0,t.eW)("Mbps ")])),_:1},8,["label"]),(0,t.bF)(u,{label:e.$t("server.sforwardFlow"),prop:"DataEachMonth"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{disabled:0==l.data._manager,modelValue:o.state.ruleForm.DataEachMonth,"onUpdate:modelValue":a[6]||(a[6]=e=>o.state.ruleForm.DataEachMonth=e),min:0},null,8,["disabled","modelValue"]),(0,t.eW)("GB "),(0,t.bF)(p,{size:"small",onClick:o.handleRefresh},{default:(0,t.k6)((()=>[(0,t.bF)(m,null,{default:(0,t.k6)((()=>[(0,t.bF)(c)])),_:1})])),_:1},8,["onClick"])])),_:1},8,["label"]),(0,t.bF)(u,{label:e.$t("server.sforwardFlowLast"),prop:"DataRemain"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{disabled:0==l.data._manager,modelValue:o.state.ruleForm.DataRemain,"onUpdate:modelValue":a[7]||(a[7]=e=>o.state.ruleForm.DataRemain=e),min:0},null,8,["disabled","modelValue"]),(0,t.eW)("byte ")])),_:1},8,["label"]),(0,t.bF)(u,{label:e.$t("server.sforwardUrl"),prop:"Url"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(d,{disabled:0==l.data._manager,modelValue:o.state.ruleForm.Url,"onUpdate:modelValue":a[8]||(a[8]=e=>o.state.ruleForm.Url=e)},null,8,["disabled","modelValue"]),[[v]])])),_:1},8,["label"]),(0,t.bF)(u,{label:e.$t("server.sforwardLogo"),prop:"Logo"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(d,{disabled:0==l.data._manager,modelValue:o.state.ruleForm.Logo,"onUpdate:modelValue":a[9]||(a[9]=e=>o.state.ruleForm.Logo=e)},null,8,["disabled","modelValue"]),[[v]])])),_:1},8,["label"]),(0,t.bF)(u,{label:e.$t("server.sforwardPublic"),prop:"Public"},{default:(0,t.k6)((()=>[(0,t.bF)(h,{modelValue:o.state.ruleForm.Public,"onUpdate:modelValue":a[10]||(a[10]=e=>o.state.ruleForm.Public=e),size:"small"},null,8,["modelValue"])])),_:1},8,["label"]),(0,t.bF)(u),(0,t.bF)(u,{label:"",prop:"Btns"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",Ma,[(0,t.bF)(p,{onClick:a[11]||(a[11]=e=>o.state.show=!1)},{default:(0,t.k6)((()=>[(0,t.eW)((0,r.v_)(e.$t("common.cancel")),1)])),_:1}),(0,t.bF)(p,{type:"primary",onClick:o.handleSave},{default:(0,t.k6)((()=>[(0,t.eW)((0,r.v_)(e.$t("common.confirm")),1)])),_:1},8,["onClick"])])])),_:1})])),_:1},8,["model","rules"])])])),_:1},8,["title","modelValue"])}var Qa={props:["data","modelValue"],emits:["update:modelValue","success"],components:{Refresh:we.C42},setup(e,{emit:a}){const{t:l}=(0,U.s9)(),o=(0,L.Kh)({show:!0,ruleForm:JSON.parse(JSON.stringify(e.data)),rules:{}});(0,t.wB)((()=>o.show),(e=>{e||setTimeout((()=>{a("update:modelValue",e)}),300)}));const s=()=>{o.ruleForm.DataRemain=1024*o.ruleForm.DataEachMonth*1024*1024},r=(0,L.KR)(null),n=()=>{r.value.validate((e=>{if(!e)return;const t=JSON.parse(JSON.stringify(o.ruleForm));(0,$e.i7)(t).then((e=>{e?(S.nk.success(l("common.oper")),o.show=!1,a("success")):S.nk.error(l("common.operFail"))})).catch((()=>{S.nk.error(l("common.operFail"))}))}))};return{state:o,ruleFormRef:r,handleRefresh:s,handleSave:n}}};const qa=(0,I.A)(Qa,[["render",Ka],["__scopeId","data-v-2eaea126"]]);var ja=qa,Ha={props:["modelValue","data"],emits:["update:modelValue","success"],components:{EditNode:ja,Edit:we.ffu,ArrowDown:we.yd$,Refresh:we.C42,CircleClose:we.R$5,Plus:we.FWt,Share:we.SYj,NodeDeny:je},setup(e,{emit:a}){const{t:l}=(0,U.s9)(),o=(0,C.B)(),s=(0,L.Kh)({show:!0,nodes:(0,t.EW)((()=>e.data)),showEdit:!1,current:{},super:(0,t.EW)((()=>o.value.signin.Super)),showDeny:!1});(0,t.wB)((()=>s.show),(e=>{e||setTimeout((()=>{a("update:modelValue",e)}),300)}));const r=e=>{s.current=e,s.showEdit=!0},n=e=>{pe.s.confirm(l("server.sforwardExit"),l("common.confirm"),{confirmButtonText:l("common.confirm"),cancelButtonText:l("common.cancel"),type:"warning"}).then((()=>{(0,$e.fK)(e.NodeId).then((e=>{S.nk.success(l("common.oper"))})).catch((()=>{S.nk.error(l("common.operFail"))}))})).catch((()=>{}))},d=e=>{0!=e._manager&&pe.s.confirm(`${l("server.sforwardUpdate")} ${o.value.signin.Version}`,l("server.sforwardUpdate"),{confirmButtonText:l("common.confirm"),cancelButtonText:l("common.cancel"),type:"warning"}).then((()=>{(0,$e.hG)({Key:e.NodeId,Value:o.value.signin.Version}).then((e=>{S.nk.success(l("common.oper"))})).catch((()=>{S.nk.error(l("common.operFail"))}))})).catch((()=>{S.nk.error(l("common.operFail"))}))},u=e=>{pe.s.confirm(l("server.sforwardRemove"),l("common.confirm"),{confirmButtonText:l("common.confirm"),cancelButtonText:l("common.cancel"),type:"warning"}).then((()=>{(0,$e.nA)(e.NodeId).then((e=>{S.nk.success(l("common.oper"))})).catch((()=>{S.nk.error(l("common.operFail"))}))})).catch((()=>{}))},i=()=>{pe.s.prompt(l("server.sforwardImport"),l("common.confirm"),{confirmButtonText:l("common.confirm"),cancelButtonText:l("common.cancel")}).then((({value:e})=>{e&&(0,$e.sC)(e).then((e=>{e?S.nk.error(e):S.nk.success(l("common.oper"))})).catch((()=>{}))})).catch((()=>{}))},c=e=>{(0,$e.AK)(e.NodeId).then((e=>{pe.s.prompt(l("server.sforwardShare"),l("common.tips"),{confirmButtonText:l("common.confirm"),cancelButtonText:l("common.cancel"),inputValue:e}).then((({value:e})=>{navigator.clipboard.writeText(e)})).catch((()=>{}))})).catch((()=>{S.nk.error(l("common.operFail"))}))},m=e=>{s.current=e,s.showDeny=!0};return(0,t.hi)((()=>{clearTimeout(s.timer)})),{globalData:o,state:s,handleEdit:r,handleExit:n,handleUpgrade:d,handleRemove:u,handleImport:i,handleShare:c,handleDeny:m}}};const Oa=(0,I.A)(Ha,[["render",za],["__scopeId","data-v-b074561c"]]);var Ga=Oa,Ja={components:{WhiteList:ca,Nodes:Ga,Status:va},setup(e){const{t:a}=(0,U.s9)(),l=(0,C.B)(),o=(0,L.Kh)({super:(0,t.EW)((()=>l.value.signin.Super)),type:e.type,showModes:!1,timer:0,nodes:[]}),s=(0,L.KR)([]);(0,t.Gt)("nodes",s);const r=()=>{clearTimeout(o.timer),(0,$e.jN)().then((e=>{e.forEach((e=>{e._online=e.LastTicks<15e3,e._manager=e.Manageable&&e._online}));const a=e.filter((e=>e._online)),l=e.filter((e=>!e._online)).sort(((e,a)=>e.LastTicks-a.LastTicks)),t=a.concat(l);console.log(t),o.nodes=t,s.value=t,o.timer=setTimeout(r,1e3)})).catch((()=>{o.timer=setTimeout(r,1e3)}))};return(0,t.sV)((()=>{r()})),(0,t.hi)((()=>{clearTimeout(o.timer)})),{globalData:l,state:o}}};const Ya=(0,I.A)(Ja,[["render",ya]]);var Za=Ya;const el={class:"status-export-wrap"},al=["title"],ll={class:"port-wrap"},tl={class:"text"},ol={class:"body"},sl={class:"card-header"},rl={class:"flex flex-nowrap"},nl={class:"label"},dl={class:"flex flex-nowrap mgt-1"},ul={class:"label"},il={class:"flex flex-nowrap mgt-1"},cl={class:"label"},ml={class:"port-wrap"},pl={class:"port-wrap"},hl={style:{"margin-top":"1rem"}};function bl(e,a,l,o,s,n){const d=(0,t.g2)("Share"),u=(0,t.g2)("el-icon"),i=(0,t.g2)("PcShow"),c=(0,t.g2)("el-checkbox"),m=(0,t.g2)("el-col"),p=(0,t.g2)("el-input"),h=(0,t.g2)("el-row"),b=(0,t.g2)("Access"),k=(0,t.g2)("el-card"),v=(0,t.g2)("el-button"),g=(0,t.g2)("el-dialog"),f=(0,t.g2)("AccessShow"),w=(0,t.gN)("trim");return(0,t.uX)(),(0,t.Wv)(f,{value:"Export"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",el,[(0,t.Lk)("a",{href:"javascript:;",class:"a-line blue",title:e.$t("status.export"),onClick:a[0]||(a[0]=e=>o.state.show=!0)},[(0,t.bF)(u,{size:"16"},{default:(0,t.k6)((()=>[(0,t.bF)(d)])),_:1}),(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.Lk)("span",null,(0,r.v_)(e.$t("status.export")),1)])),_:1})],8,al),(0,t.bF)(g,{class:"options-center",title:e.$t("status.export"),"destroy-on-close":"",modelValue:o.state.show,"onUpdate:modelValue":a[10]||(a[10]=e=>o.state.show=e),center:"",width:"580",top:"1vh"},{footer:(0,t.k6)((()=>[(0,t.bF)(v,{plain:"",onClick:a[9]||(a[9]=e=>o.state.show=!1),loading:o.state.loading},{default:(0,t.k6)((()=>[(0,t.eW)((0,r.v_)(e.$t("common.cancel")),1)])),_:1},8,["loading"]),(0,t.bF)(v,{type:"default",plain:"",onClick:o.handleExport,loading:o.state.loading},{default:(0,t.k6)((()=>[(0,t.eW)((0,r.v_)(e.$t("status.exportDownload")),1)])),_:1},8,["onClick","loading"]),(0,t.bF)(v,{type:"info",plain:"",onClick:o.handleCopy,loading:o.state.loading},{default:(0,t.k6)((()=>[(0,t.eW)((0,r.v_)(e.$t("status.exportCopy")),1)])),_:1},8,["onClick","loading"]),(0,t.bF)(v,{type:"success",plain:"",onClick:o.handleSave,loading:o.state.loading},{default:(0,t.k6)((()=>[(0,t.eW)((0,r.v_)(e.$t("status.exportSave")),1)])),_:1},8,["onClick","loading"])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",ll,[(0,t.Lk)("div",tl,(0,r.v_)(e.$t("status.exportText")),1),(0,t.Lk)("div",ol,[(0,t.bF)(k,{shadow:"never"},{header:(0,t.k6)((()=>[(0,t.Lk)("div",sl,[(0,t.Lk)("div",null,[(0,t.bF)(h,null,{default:(0,t.k6)((()=>[(0,t.bF)(m,{span:12},{default:(0,t.k6)((()=>[(0,t.bF)(c,{disabled:o.onlyNode,modelValue:o.state.single,"onUpdate:modelValue":a[1]||(a[1]=e=>o.state.single=e),label:e.$t("status.exportSingle")},null,8,["disabled","modelValue","label"])])),_:1}),(0,t.bF)(m,{span:12},{default:(0,t.k6)((()=>[(0,t.Lk)("div",rl,[(0,t.Lk)("span",nl,(0,r.v_)(e.$t("status.exportName"))+" : ",1),(0,t.bo)((0,t.bF)(p,{disabled:!o.state.single,modelValue:o.state.name,"onUpdate:modelValue":a[2]||(a[2]=e=>o.state.name=e),maxlength:"32","show-word-limit":""},null,8,["disabled","modelValue"]),[[w]])])])),_:1})])),_:1})]),(0,t.Lk)("div",null,[(0,t.bF)(h,null,{default:(0,t.k6)((()=>[(0,t.bF)(m,{span:12},{default:(0,t.k6)((()=>[(0,t.Lk)("div",dl,[(0,t.Lk)("span",ul,(0,r.v_)(e.$t("status.exportWebport"))+" : ",1),(0,t.bo)((0,t.bF)(p,{disabled:o.onlyNode,modelValue:o.state.webport,"onUpdate:modelValue":a[3]||(a[3]=e=>o.state.webport=e)},null,8,["disabled","modelValue"]),[[w]])])])),_:1}),(0,t.bF)(m,{span:12},{default:(0,t.k6)((()=>[(0,t.Lk)("div",il,[(0,t.Lk)("span",cl,(0,r.v_)(e.$t("status.exportApiPassword"))+" : ",1),(0,t.bo)((0,t.bF)(p,{type:"password","show-password":"",disabled:o.onlyNode,modelValue:o.state.apipassword,"onUpdate:modelValue":a[4]||(a[4]=e=>o.state.apipassword=e),maxlength:"36","show-word-limit":""},null,8,["disabled","modelValue"]),[[w]])])])),_:1})])),_:1})]),(0,t.Lk)("div",null,[(0,t.bF)(h,null,{default:(0,t.k6)((()=>[(0,t.bF)(m,{xs:12,sm:8},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:o.state.updater,"onUpdate:modelValue":a[5]||(a[5]=e=>o.state.updater=e),label:e.$t("status.exportUpdater")},null,8,["modelValue","label"])])),_:1}),(0,t.bF)(m,{xs:12,sm:8},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:o.state.group,"onUpdate:modelValue":a[6]||(a[6]=e=>o.state.group=e),label:e.$t("status.exportGroup")},null,8,["modelValue","label"])])),_:1}),(0,t.bF)(m,{xs:12,sm:8},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:o.state.server,"onUpdate:modelValue":a[7]||(a[7]=e=>o.state.server=e),label:e.$t("status.exportServer")},null,8,["modelValue","label"])])),_:1}),(0,t.bF)(m,{xs:12,sm:8},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:o.state.super,"onUpdate:modelValue":a[8]||(a[8]=e=>o.state.super=e),label:e.$t("status.exportSuper")},null,8,["modelValue","label"])])),_:1})])),_:1})])])])),default:(0,t.k6)((()=>[(0,t.bF)(b,{ref:"accessDom",machineid:o.state.accesss,height:30},null,8,["machineid"])])),_:1})])])])),_:1},8,["title","modelValue"]),(0,t.bF)(g,{class:"options-center",title:e.$t("status.export"),"destroy-on-close":"",modelValue:o.state.showCopy,"onUpdate:modelValue":a[12]||(a[12]=e=>o.state.showCopy=e),center:"",width:"580",top:"1vh"},{footer:(0,t.k6)((()=>[(0,t.bF)(v,{plain:"",onClick:o.copyToClipboard},{default:(0,t.k6)((()=>[(0,t.eW)((0,r.v_)(e.$t("status.exportCopy")),1)])),_:1},8,["onClick"])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",ml,[(0,t.bo)((0,t.bF)(p,{modelValue:o.state.copyContent,"onUpdate:modelValue":a[11]||(a[11]=e=>o.state.copyContent=e),type:"textarea",rows:10,resize:"none",readonly:""},null,8,["modelValue"]),[[w]])])])),_:1},8,["title","modelValue"]),(0,t.bF)(g,{class:"options-center",title:e.$t("status.export"),"destroy-on-close":"",modelValue:o.state.showSave,"onUpdate:modelValue":a[15]||(a[15]=e=>o.state.showSave=e),center:"",width:"300",top:"1vh"},{footer:(0,t.k6)((()=>[(0,t.bF)(v,{plain:"",onClick:o.copySaveToClipboard},{default:(0,t.k6)((()=>[(0,t.eW)((0,r.v_)(e.$t("status.exportCopy")),1)])),_:1},8,["onClick"])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",pl,[(0,t.Lk)("div",null,[(0,t.bo)((0,t.bF)(p,{modelValue:o.state.saveServer,"onUpdate:modelValue":a[13]||(a[13]=e=>o.state.saveServer=e),readonly:""},null,8,["modelValue"]),[[w]])]),(0,t.Lk)("div",hl,[(0,t.bo)((0,t.bF)(p,{modelValue:o.state.saveContent,"onUpdate:modelValue":a[14]||(a[14]=e=>o.state.saveContent=e),readonly:""},null,8,["modelValue"]),[[w]])])])])),_:1},8,["title","modelValue"])])])),_:1})}var kl=l(8835),vl=l(3766),gl={components:{Share:we.SYj,Access:vl.A},setup(e){const{t:a}=(0,U.s9)(),l=(0,C.B)(),o=(0,t.EW)((()=>l.value.config.Client.OnlyNode)),s=(0,L.Kh)({show:!1,loading:!1,single:!0,name:"",apipassword:o.value?l.value.config.Client.CApi.ApiPassword:"",webport:l.value.config.Client.CApi.WebPort,updater:!0,server:!0,super:!1,group:!0,tunnel:!0,copyContent:"",showCopy:!1,saveServer:l.value.config.Client.Server.Host,saveContent:"",showSave:!1,accesss:l.value.config.Client.AccessBits}),r=(0,L.KR)(null),n=()=>{const e=r.value.getValue(),l={access:e[0],fullAccess:e[1],single:s.single,name:s.name,apipassword:s.apipassword,webport:+s.webport,updater:s.updater,server:s.server,super:s.super,group:s.group,tunnel:s.tunnel};if(l.single){if(!l.name)return void S.nk.error(a("status.exportNamePlease"))}else l.name="";if(l.apipassword){if(!(!l.webport||isNaN(l.webport)||l.webport<=0||l.webport>65535))return l;S.nk.error(a("status.exportWebportPlease"))}else S.nk.error(a("status.exportApiPasswordPlease"))},d=()=>{const e=document.createElement("a");s.single?e.download=`client-node-export-${s.name}.zip`:e.download="client-node-export.zip",e.href="/client-node-export.zip",document.body.appendChild(e),e.click(),document.body.removeChild(e)},u=()=>{const e=n();e&&(s.loading=!0,(0,kl.ql)(e).then((e=>{s.loading=!1,e?(s.show=!1,S.nk.success(a("common.oper")),s.saveContent=e,s.showSave=!0):S.nk.error(a("common.operFail"))})).catch((()=>{S.nk.error(a("common.operFail")),s.loading=!1})))},i=async()=>{try{return await navigator.clipboard.writeText(`在初始化linker客户端时，填写服务器和密钥，导入配置\n服务器: ${s.saveServer}\n密钥: ${s.saveContent}`),S.nk.success(a("common.oper")),!0}catch(e){return S.nk.error(a("common.operFail")),!1}},c=()=>{const e=n();e&&(s.loading=!0,(0,kl.P$)(e).then((()=>{s.loading=!1,s.show=!1,S.nk.success(a("common.oper")),d()})).catch((()=>{S.nk.error(a("common.operFail")),s.loading=!1})))},m=()=>{const e=n();e&&(s.loading=!0,(0,kl.om)(e).then((e=>{s.loading=!1,s.show=!1,S.nk.success(a("common.oper")),s.copyContent=e,s.showCopy=!0})).catch((()=>{S.nk.error(a("common.operFail")),s.loading=!1})))},p=async()=>{try{return await navigator.clipboard.writeText(s.copyContent),S.nk.success(a("common.oper")),!0}catch(e){return S.nk.error(a("common.operFail")),!1}};return{globalData:l,onlyNode:o,state:s,accessDom:r,handleSave:u,handleExport:c,handleCopy:m,copyToClipboard:p,copySaveToClipboard:i}}};const fl=(0,I.A)(gl,[["render",bl],["__scopeId","data-v-3dc6169c"]]);var wl=fl,Fl={components:{Updater:B,RelayServers:wa,SForwardServers:Za,Sync:E.A,WhiteList:ca,Export:wl},setup(e){const{t:a}=(0,U.s9)(),l=(0,C.B)(),o=(0,L.Kh)({list:l.value.config.Client.Server,position:(0,t.EW)((()=>l.value.isPhone?"top":"right")),super:(0,t.EW)((()=>l.value.signin.Super)),signinHost:(0,t.EW)((()=>l.value.signin.SignInHost))}),s=()=>{(0,V.jU)(o.list).then((()=>{S.nk.success(a("common.oper"))})).catch((e=>{console.log(e),S.nk.error(a("common.operFail"))})),r()},r=()=>{(0,V.wP)().then((e=>{})).catch((()=>{}))};return(0,t.sV)((()=>{r()})),{globalData:l,state:o,handleSave:s}}};const yl=(0,I.A)(Fl,[["render",_],["__scopeId","data-v-34352132"]]);var _l=yl,Vl={components:{Config:_l},setup(e){return{}}};const Cl=(0,I.A)(Vl,[["render",s],["__scopeId","data-v-42583dfc"]]);var Sl=Cl}}]);