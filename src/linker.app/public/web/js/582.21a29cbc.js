"use strict";(self["webpackChunklinker_web"]=self["webpackChunklinker_web"]||[]).push([[582],{23035:function(e,l,a){a.d(l,{A:function(){return b}});var t=a(56768),n=a(24232);const o={class:"flex"},r={class:"flex-1"},s={class:"t-c"};function d(e,l,a,d,u,i){const c=(0,t.g2)("Sync"),h=(0,t.g2)("el-input"),m=(0,t.g2)("el-button"),p=(0,t.g2)("el-card");return(0,t.uX)(),(0,t.Wv)(p,{shadow:"never"},{header:(0,t.k6)((()=>[(0,t.Lk)("div",o,[(0,t.Lk)("span",r,(0,n.v_)(e.$t("action.text")),1),d.state.isSelf?((0,t.uX)(),(0,t.Wv)(c,{key:0,name:"ActionStatic"})):(0,t.Q3)("",!0)])])),footer:(0,t.k6)((()=>[(0,t.Lk)("div",s,[(0,t.bF)(m,{type:"success",onClick:d.handleSave},{default:(0,t.k6)((()=>[(0,t.eW)((0,n.v_)(e.$t("common.confirm")),1)])),_:1},8,["onClick"])])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(h,{modelValue:d.state.data,"onUpdate:modelValue":l[0]||(l[0]=e=>d.state.data=e),rows:10,type:"textarea",resize:"none",onChange:d.handleSave},null,8,["modelValue","onChange"])])])),_:1})}var u=a(10004);const i=e=>(0,u.zG)("action/GetServerArgs",e),c=e=>(0,u.zG)("action/SetServerArgs",e);var h=a(53830),m=a(51219),p=a(90144),g=a(35931),w=a(62118),k={props:["machineId"],components:{Sync:w.A},setup(e){const{t:l}=(0,g.s9)(),a=(0,h.B)(),n=(0,p.Kh)({data:"",machineId:e.machineId||a.value.config.Client.Id,isSelf:(0,t.EW)((()=>n.machineId==a.value.config.Client.Id))}),o=()=>{i(n.machineId).then((e=>{n.data=e}))},r=()=>{try{if(n.data&&"object"!=typeof JSON.parse(n.data))return void m.nk.error(l("action.jsonError"))}catch(e){return void m.nk.error(l("action.jsonError"))}c({Key:n.machineId,Value:n.data}).then((()=>{m.nk.success(l("common.oper"))})).catch((e=>{console.log(e),m.nk.error(l("common.operFail"))}))};return(0,t.sV)((()=>{o()})),{state:n,handleSave:r}}},v=a(71241);const f=(0,v.A)(k,[["render",d]]);var b=f},5241:function(e,l,a){a.r(l),a.d(l,{default:function(){return ar}});var t=a(56768),n=a(24232);const o={class:"home-list-wrap absolute"},r={class:"page-wrap"};function s(e,l,a,s,d,u){const i=(0,t.g2)("Sort"),c=(0,t.g2)("Device"),h=(0,t.g2)("Tunnel"),m=(0,t.g2)("Tuntap"),p=(0,t.g2)("Socks5"),g=(0,t.g2)("Forward"),w=(0,t.g2)("Oper"),k=(0,t.g2)("el-table"),v=(0,t.g2)("el-pagination"),f=(0,t.g2)("DeviceEdit"),b=(0,t.g2)("AccessEdit"),C=(0,t.g2)("TunnelEdit"),F=(0,t.g2)("ConnectionsEdit"),V=(0,t.g2)("TuntapEdit"),y=(0,t.g2)("TuntapLease"),_=(0,t.g2)("Socks5Edit"),E=(0,t.g2)("ForwardEdit"),L=(0,t.g2)("SForwardEdit"),I=(0,t.g2)("UpdaterConfirm"),P=(0,t.g2)("Stopwatch"),S=(0,t.g2)("OperRoutes"),T=(0,t.g2)("OperFirewall"),M=(0,t.g2)("OperWakeup"),W=(0,t.g2)("OperTransport"),A=(0,t.g2)("OperAction");return(0,t.uX)(),(0,t.CE)("div",o,[(0,t.bF)(i,{onSort:s.handleSortChange},null,8,["onSort"]),(0,t.bF)(k,{data:s.devices.page.List,stripe:"",border:"",style:{width:"100%"},height:`${s.state.height}px`,size:"small"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{onEdit:s.handleDeviceEdit,onRefresh:s.handlePageRefresh},null,8,["onEdit","onRefresh"]),(0,t.bF)(h,{onEdit:s.handleTunnelEdit,onRefresh:s.handleTunnelRefresh,onConnections:s.handleTunnelConnections},null,8,["onEdit","onRefresh","onConnections"]),(0,t.bF)(m,{onEdit:s.handleTuntapEdit,onRefresh:s.handleTuntapRefresh},null,8,["onEdit","onRefresh"]),(0,t.bF)(p,{onEdit:s.handleSocks5Edit,onRefresh:s.handleSocks5Refresh},null,8,["onEdit","onRefresh"]),(0,t.bF)(g,{onEdit:s.handleForwardEdit,onSedit:s.handleSForwardEdit},null,8,["onEdit","onSedit"]),(0,t.bF)(w,{onRefresh:s.handlePageRefresh,onAccess:s.handleAccessEdit},null,8,["onRefresh","onAccess"])])),_:1},8,["data","height"]),(0,t.Lk)("div",{class:(0,n.C4)(["page",{"t-c":s.globalData.isPc}])},[(0,t.Lk)("div",r,[(0,t.bF)(v,{small:"",background:"",total:s.devices.page.Count,"pager-count":s.globalData.isPc?7:3,layout:s.globalData.isPc?"total,sizes,prev,pager, next":"prev, pager, next","page-size":s.devices.page.Request.Size,"current-page":s.devices.page.Request.Page,onCurrentChange:s.handlePageChange,onSizeChange:s.handlePageSizeChange,"page-sizes":[10,20,50,100,255]},null,8,["total","pager-count","layout","page-size","current-page","onCurrentChange","onSizeChange"])])],2),s.devices.showDeviceEdit?((0,t.uX)(),(0,t.Wv)(f,{key:0,modelValue:s.devices.showDeviceEdit,"onUpdate:modelValue":l[0]||(l[0]=e=>s.devices.showDeviceEdit=e),onChange:s.handlePageChange,data:s.devices.deviceInfo},null,8,["modelValue","onChange","data"])):(0,t.Q3)("",!0),s.devices.showAccessEdit?((0,t.uX)(),(0,t.Wv)(b,{key:1,modelValue:s.devices.showAccessEdit,"onUpdate:modelValue":l[1]||(l[1]=e=>s.devices.showAccessEdit=e),onChange:s.handlePageChange,data:s.devices.deviceInfo},null,8,["modelValue","onChange","data"])):(0,t.Q3)("",!0),s.tunnel.showEdit?((0,t.uX)(),(0,t.Wv)(C,{key:2,modelValue:s.tunnel.showEdit,"onUpdate:modelValue":l[2]||(l[2]=e=>s.tunnel.showEdit=e),onChange:s.handleTunnelRefresh},null,8,["modelValue","onChange"])):(0,t.Q3)("",!0),s.connections.showEdit?((0,t.uX)(),(0,t.Wv)(F,{key:3,modelValue:s.connections.showEdit,"onUpdate:modelValue":l[3]||(l[3]=e=>s.connections.showEdit=e)},null,8,["modelValue"])):(0,t.Q3)("",!0),s.tuntap.showEdit?((0,t.uX)(),(0,t.Wv)(V,{key:4,modelValue:s.tuntap.showEdit,"onUpdate:modelValue":l[4]||(l[4]=e=>s.tuntap.showEdit=e),onChange:s.handleTuntapRefresh},null,8,["modelValue","onChange"])):(0,t.Q3)("",!0),s.tuntap.showLease?((0,t.uX)(),(0,t.Wv)(y,{key:5,modelValue:s.tuntap.showLease,"onUpdate:modelValue":l[5]||(l[5]=e=>s.tuntap.showLease=e),onChange:s.handleTuntapRefresh},null,8,["modelValue","onChange"])):(0,t.Q3)("",!0),s.socks5.showEdit?((0,t.uX)(),(0,t.Wv)(_,{key:6,modelValue:s.socks5.showEdit,"onUpdate:modelValue":l[6]||(l[6]=e=>s.socks5.showEdit=e),onChange:s.handleSocks5Refresh},null,8,["modelValue","onChange"])):(0,t.Q3)("",!0),s.forward.showEdit?((0,t.uX)(),(0,t.Wv)(E,{key:7,modelValue:s.forward.showEdit,"onUpdate:modelValue":l[7]||(l[7]=e=>s.forward.showEdit=e)},null,8,["modelValue"])):(0,t.Q3)("",!0),s.sforward.showEdit?((0,t.uX)(),(0,t.Wv)(L,{key:8,modelValue:s.sforward.showEdit,"onUpdate:modelValue":l[8]||(l[8]=e=>s.sforward.showEdit=e)},null,8,["modelValue"])):(0,t.Q3)("",!0),s.updater.show?((0,t.uX)(),(0,t.Wv)(I,{key:9,modelValue:s.updater.show,"onUpdate:modelValue":l[9]||(l[9]=e=>s.updater.show=e)},null,8,["modelValue"])):(0,t.Q3)("",!0),s.flow.show?((0,t.uX)(),(0,t.Wv)(P,{key:10,modelValue:s.flow.show,"onUpdate:modelValue":l[10]||(l[10]=e=>s.flow.show=e)},null,8,["modelValue"])):(0,t.Q3)("",!0),s.oper.showRoutes?((0,t.uX)(),(0,t.Wv)(S,{key:11,modelValue:s.oper.showRoutes,"onUpdate:modelValue":l[11]||(l[11]=e=>s.oper.showRoutes=e)},null,8,["modelValue"])):(0,t.Q3)("",!0),s.oper.showFirewall?((0,t.uX)(),(0,t.Wv)(T,{key:12,modelValue:s.oper.showFirewall,"onUpdate:modelValue":l[12]||(l[12]=e=>s.oper.showFirewall=e)},null,8,["modelValue"])):(0,t.Q3)("",!0),s.oper.showWakeup?((0,t.uX)(),(0,t.Wv)(M,{key:13,modelValue:s.oper.showWakeup,"onUpdate:modelValue":l[13]||(l[13]=e=>s.oper.showWakeup=e)},null,8,["modelValue"])):(0,t.Q3)("",!0),s.oper.showTransport?((0,t.uX)(),(0,t.Wv)(W,{key:14,modelValue:s.oper.showTransport,"onUpdate:modelValue":l[14]||(l[14]=e=>s.oper.showTransport=e)},null,8,["modelValue"])):(0,t.Q3)("",!0),s.oper.showAction?((0,t.uX)(),(0,t.Wv)(A,{key:15,modelValue:s.oper.showAction,"onUpdate:modelValue":l[15]||(l[15]=e=>s.oper.showAction=e)},null,8,["modelValue"])):(0,t.Q3)("",!0)])}a(44114);var d=a(53830),u=a(90144),i=a(51219);const c={class:"el-dropdown-link"};function h(e,l,a,n,o,r){const s=(0,t.g2)("el-table-column"),d=(0,t.g2)("ArrowDownBold"),u=(0,t.g2)("el-icon"),i=(0,t.g2)("el-checkbox"),h=(0,t.g2)("el-dropdown-item"),m=(0,t.g2)("el-dropdown-menu"),p=(0,t.g2)("el-dropdown"),g=(0,t.g2)("el-table");return(0,t.uX)(),(0,t.Wv)(g,{border:"",style:{width:"100%"},height:"32px",size:"small",onSortChange:n.handleSortChange,class:"table-sort"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{prop:"MachineId",label:"è®¾å¤‡å",width:"110",sortable:"custom"}),(0,t.bF)(s,{prop:"Version",label:"ç‰ˆæœ¬",width:"110",sortable:"custom"}),(0,t.bF)(s,{prop:"tunnel",label:"ç½‘ç»œ",width:"76",sortable:"custom"}),n.tuntap.show?((0,t.uX)(),(0,t.Wv)(s,{key:0,prop:"tuntap",label:"ç½‘å¡IP",width:"160",sortable:"custom"})):(0,t.Q3)("",!0),n.socks5.show?((0,t.uX)(),(0,t.Wv)(s,{key:1,prop:"socks5",label:"ä»£ç†è½¬å‘",width:"160",sortable:"custom"})):(0,t.Q3)("",!0),(0,t.bF)(s,{label:"columns",fixed:"right"},{header:(0,t.k6)((()=>[(0,t.bF)(p,{class:"show-columns"},{dropdown:(0,t.k6)((()=>[(0,t.bF)(m,null,{default:(0,t.k6)((()=>[(0,t.bF)(h,null,{default:(0,t.k6)((()=>[(0,t.bF)(i,{modelValue:n.tuntap.show,"onUpdate:modelValue":l[0]||(l[0]=e=>n.tuntap.show=e),onChange:n.handleTuntapShow,size:"small",style:{"margin-right":"1rem"}},{default:(0,t.k6)((()=>[(0,t.eW)("ç½‘å¡")])),_:1},8,["modelValue","onChange"])])),_:1}),(0,t.bF)(h,null,{default:(0,t.k6)((()=>[(0,t.bF)(i,{modelValue:n.socks5.show,"onUpdate:modelValue":l[1]||(l[1]=e=>n.socks5.show=e),onChange:n.handleSocks5Show,size:"small",style:{"margin-right":"1rem"}},{default:(0,t.k6)((()=>[(0,t.eW)("ä»£ç†")])),_:1},8,["modelValue","onChange"])])),_:1}),(0,t.bF)(h,null,{default:(0,t.k6)((()=>[(0,t.bF)(i,{modelValue:n.forward.show,"onUpdate:modelValue":l[2]||(l[2]=e=>n.forward.show=e),onChange:n.handleForwardShow,size:"small",style:{"margin-right":"0rem"}},{default:(0,t.k6)((()=>[(0,t.eW)("è½¬å‘")])),_:1},8,["modelValue","onChange"])])),_:1})])),_:1})])),default:(0,t.k6)((()=>[(0,t.Lk)("span",c,[(0,t.eW)("æ˜¾ç¤ºé¡¹"),(0,t.bF)(u,null,{default:(0,t.k6)((()=>[(0,t.bF)(d)])),_:1})])])),_:1})])),_:1})])),_:1},8,["onSortChange"])}var m=a(47716);const p=Symbol(),g=()=>{(0,d.B)();const e=(0,u.KR)({show:!0,timer:0,showEdit:!1,machineId:null,list:{},hashcode:0});(0,t.Gt)(p,e);const l=()=>{(0,m.dS)()},a=()=>{clearTimeout(e.value.timer),(0,m.V1)(e.value.hashcode.toString()).then((l=>{e.value.hashcode=l.HashCode,l.List&&(e.value.list=l.List),e.value.timer=setTimeout(a,1020)})).catch((()=>{e.value.timer=setTimeout(a,1020)}))},n=l=>{e.value.machineId=l[0],e.value.machineName=l[1],e.value.showEdit=!0},o=()=>{clearTimeout(e.value.timer)};return{forward:e,_getForwardCountInfo:a,handleForwardEdit:n,clearForwardTimeout:o,handleForwardRefresh:l}},w=()=>(0,t.WQ)(p);var k=a(72173);const v=Symbol(),f=()=>{const e=(0,u.KR)({show:!0,timer:0,showEdit:!1,current:null,list:{},hashcode:0});(0,t.Gt)(v,e);const l=()=>{clearTimeout(e.value.timer),(0,k.$y)(e.value.hashcode.toString()).then((a=>{if(e.value.hashcode=a.HashCode,a.List){for(let e in a.List)Object.assign(a.List[e],{running:2==a.List[e].Status,loading:1==a.List[e].Status});e.value.list=a.List}e.value.timer=setTimeout(l,1100)})).catch((a=>{e.value.timer=setTimeout(l,1100)}))},a=l=>{e.value.current=l,e.value.showEdit=!0},n=()=>{(0,k.QP)()},o=()=>{clearTimeout(e.value.timer),e.value.timer=0},r=l=>Object.values(e.value.list).filter((e=>e.Port.toString().indexOf(l)>=0||e.Lans.filter((e=>e.IP.indexOf(l)>=0)).length>0)).map((e=>e.MachineId)),s=l=>{const a=Object.values(e.value.list).sort(((e,l)=>e.Port-l.Port));return a.map((e=>e.MachineId))};return{socks5:e,_getSocks5Info:l,handleSocks5Edit:a,handleSocks5Refresh:n,clearSocks5Timeout:o,getSocks5Machines:r,sortSocks5:s}},b=()=>(0,t.WQ)(v);var C=a(98104),F=a(57477),V={emits:["sort"],components:{ArrowDownBold:F.$bU},setup(e,{emit:l}){const a=(0,C.W)();a.value.show="false"!=localStorage.getItem("tuntap.show");const t=b();t.value.show="false"!=localStorage.getItem("socks5.show");const n=w();n.value.show="false"!=localStorage.getItem("forward.show");const o=e=>{l("sort",e)},r=()=>{localStorage.setItem("tuntap.show",a.value.show)},s=()=>{localStorage.setItem("socks5.show",t.value.show)},d=()=>{localStorage.setItem("forward.show",n.value.show)};return{tuntap:a,socks5:t,forward:n,handleSortChange:o,handleTuntapShow:r,handleSocks5Show:s,handleForwardShow:d}}},y=a(71241);const _=(0,y.A)(V,[["render",h],["__scopeId","data-v-107f04ae"]]);var E=_;const L=e=>((0,t.Qi)("data-v-3c3f4f91"),e=e(),(0,t.jt)(),e),I={class:"flex"},P=L((()=>(0,t.Lk)("span",{class:"flex-1"},"è®¾å¤‡",-1))),S={class:"flex"},T=["onClick"],M=["onClick"],W=L((()=>(0,t.Lk)("span",null,"ðŸ˜´ãŠ™.ãŠ™.ãŠ™.ãŠ™",-1))),A=[W],X=L((()=>(0,t.Lk)("span",{class:"flex-1"},null,-1))),R={key:1};function x(e,l,a,o,r,s){const d=(0,t.g2)("el-input"),u=(0,t.g2)("Search"),i=(0,t.g2)("el-icon"),c=(0,t.g2)("el-button"),h=(0,t.g2)("DeviceName"),m=(0,t.g2)("UpdaterBtn"),p=(0,t.g2)("el-table-column");return(0,t.uX)(),(0,t.Wv)(p,{prop:"MachineId",label:"è®¾å¤‡",width:"220"},{header:(0,t.k6)((()=>[(0,t.Lk)("div",I,[P,(0,t.Lk)("span",null,[(0,t.bF)(d,{size:"small",modelValue:o.name,"onUpdate:modelValue":l[0]||(l[0]=e=>o.name=e),clearable:"",onInput:o.handleRefresh,placeholder:"è®¾å¤‡/è™šæ‹Ÿç½‘å¡/ç«¯å£è½¬å‘"},null,8,["modelValue","onInput"])]),(0,t.Lk)("span",null,[(0,t.bF)(c,{size:"small",onClick:o.handleRefresh},{default:(0,t.k6)((()=>[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(u)])),_:1})])),_:1},8,["onClick"])])])])),default:(0,t.k6)((e=>[(0,t.Lk)("div",null,[(0,t.Lk)("p",null,[(0,t.bF)(h,{onEdit:o.handleEdit,config:!0,item:e.row},null,8,["onEdit","item"])]),(0,t.Lk)("p",S,[e.row.Connected?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[e.row.showip?((0,t.uX)(),(0,t.CE)("span",{key:0,title:"æ­¤è®¾å¤‡çš„å¤–ç½‘IP",class:"ipaddress",onClick:l=>o.handleExternal(e.row)},[(0,t.Lk)("span",null,"ðŸ˜€"+(0,n.v_)(e.row.IP),1)],8,T)):((0,t.uX)(),(0,t.CE)("span",{key:1,title:"æ­¤è®¾å¤‡çš„å¤–ç½‘IP",class:"ipaddress",onClick:l=>o.handleExternal(e.row)},A,8,M)),X,0==e.row.showip?((0,t.uX)(),(0,t.Wv)(m,{key:2,config:!0,item:e.row},null,8,["item"])):(0,t.Q3)("",!0)],64)):((0,t.uX)(),(0,t.CE)("span",R,(0,n.v_)(e.row.LastSignIn),1))])])])),_:1})}var N=a(95837),U=a(80651),$={emits:["edit","refresh"],components:{Search:F.vji,UpdaterBtn:N.A,DeviceName:U.A},setup(e,{emit:l}){const a=(0,d.B)(),n=(0,t.EW)((()=>a.value.hasAccess("ExternalShow"))),o=(0,u.KR)(sessionStorage.getItem("search-name")||""),r=e=>{n.value?e.showip=!e.showip:i.nk.success("æ— æƒé™")},s=e=>{l("edit",e)},c=()=>{sessionStorage.setItem("search-name",o.value),l("refresh",o.value)};return{handleEdit:s,handleRefresh:c,name:o,handleExternal:r}}};const B=(0,y.A)($,[["render",x],["__scopeId","data-v-3c3f4f91"]]);var D=B;const z=(0,t.Lk)("div",null,"ä¿®æ”¹åŽæœ€å¥½èƒ½é‡å¯ä¸€æ¬¡å®¢æˆ·ç«¯",-1),O={class:"t-c w-100"};function K(e,l,a,n,o,r){const s=(0,t.g2)("el-form-item"),d=(0,t.g2)("el-input"),u=(0,t.g2)("el-button"),i=(0,t.g2)("el-form"),c=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(c,{modelValue:n.state.show,"onUpdate:modelValue":l[2]||(l[2]=e=>n.state.show=e),"close-on-click-modal":!1,"append-to":".app-wrap",title:`è®¾ç½®[${n.state.ruleForm.MachineName}]è®¾å¤‡`,width:"360"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(i,{ref:"ruleFormRef",model:n.state.ruleForm,rules:n.state.rules,"label-width":"auto"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{label:""},{default:(0,t.k6)((()=>[z])),_:1}),(0,t.bF)(s,{label:"è®¾å¤‡å",prop:"MachineName"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{maxlength:"32","show-word-limit":"",modelValue:n.state.ruleForm.MachineName,"onUpdate:modelValue":l[0]||(l[0]=e=>n.state.ruleForm.MachineName=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(s,{label:"",prop:"Btns"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",O,[(0,t.bF)(u,{onClick:l[1]||(l[1]=e=>n.state.show=!1)},{default:(0,t.k6)((()=>[(0,t.eW)("å–æ¶ˆ")])),_:1}),(0,t.bF)(u,{type:"primary",onClick:n.handleSave},{default:(0,t.k6)((()=>[(0,t.eW)("ç¡®è®¤")])),_:1},8,["onClick"])])])),_:1})])),_:1},8,["model","rules"])])])),_:1},8,["modelValue","title"])}var Q=a(69299),j={props:["data","modelValue"],emits:["change","update:modelValue"],setup(e,{emit:l}){const a=(0,u.KR)(null),n=(0,u.Kh)({show:!0,ruleForm:{MachineName1:e.data.MachineName,MachineName:e.data.MachineName},rules:{}});(0,t.wB)((()=>n.show),(e=>{e||setTimeout((()=>{l("update:modelValue",e)}),300)}));const o=()=>{e.data.MachineName!=n.ruleForm.MachineName&&(0,Q.gC)({Id:e.data.MachineId,newName:n.ruleForm.MachineName}).then((()=>{n.show=!1,i.nk.success("å·²æ“ä½œï¼"),l("change")})).catch((e=>{console.log(e),i.nk.error("æ“ä½œå¤±è´¥ï¼")}))};return{state:n,ruleFormRef:a,handleSave:o}}};const G=(0,y.A)(j,[["render",K]]);var q=G,H=a(27985);function J(e,l,a,n,o,r){const s=(0,t.g2)("Access"),d=(0,t.g2)("el-button"),u=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(u,{modelValue:n.state.show,"onUpdate:modelValue":l[1]||(l[1]=e=>n.state.show=e),"close-on-click-modal":!1,center:"","append-to":".app-wrap",title:`è®¾ç½®[${n.machineName}]çš„æƒé™`,width:"580",top:"1vh"},{footer:(0,t.k6)((()=>[(0,t.bF)(d,{plain:"",onClick:l[0]||(l[0]=e=>n.state.show=!1),loading:n.state.loading},{default:(0,t.k6)((()=>[(0,t.eW)("å–æ¶ˆ")])),_:1},8,["loading"]),(0,t.bF)(d,{type:"success",plain:"",onClick:n.handleSave,loading:n.state.loading},{default:(0,t.k6)((()=>[(0,t.eW)("ç¡®å®šä¿å­˜")])),_:1},8,["onClick","loading"])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(s,{machineid:n.machineid,ref:"accessDom"},null,8,["machineid"])])])),_:1},8,["modelValue","title"])}var Z=a(73363),Y=a(74339),ee={props:["data","modelValue"],emits:["change","update:modelValue"],components:{Access:Y.A},setup(e,{emit:l}){const a=(0,u.Kh)({show:!0,loading:!1});(0,t.wB)((()=>a.show),(e=>{e||setTimeout((()=>{l("update:modelValue",e)}),300)}));const n=(0,u.KR)(null),o=()=>{a.loading=!0;const t=n.value.getValue();(0,Z.ZK)({ToMachineId:e.data.MachineId,Access:t[0],FullAccess:t[1]}).then((()=>{a.loading=!1,a.show=!1,i.nk.success("å·²æ“ä½œï¼"),l("change")})).catch((e=>{console.log(e),a.loading=!1,i.nk.error("æ“ä½œå¤±è´¥ï¼")}))};return{machineName:e.data.MachineName,machineid:e.data.MachineId,state:a,accessDom:n,handleSave:o}}};const le=(0,y.A)(ee,[["render",J]]);var ae=le,te=a(25962);const ne={key:0};function oe(e,l,a,n,o,r){const s=(0,t.g2)("TuntapShow"),d=(0,t.g2)("el-table-column");return(0,t.uX)(),(0,t.Wv)(d,{prop:"tuntap",label:n.tuntap.show?"è™šæ‹Ÿç½‘å¡":"",width:"160"},{header:(0,t.k6)((()=>[n.tuntap.show?((0,t.uX)(),(0,t.CE)("a",{key:0,href:"javascript:;",class:"a-line",onClick:l[0]||(l[0]=(...e)=>n.handleShowLease&&n.handleShowLease(...e))},"è™šæ‹Ÿç½‘å¡")):(0,t.Q3)("",!0)])),default:(0,t.k6)((e=>[n.tuntap.show&&n.tuntap.list[e.row.MachineId]?((0,t.uX)(),(0,t.CE)("div",ne,[(0,t.bF)(s,{config:!0,item:e.row,onEdit:n.handleTuntapIP,onRefresh:n.handleTuntapRefresh},null,8,["item","onEdit","onRefresh"])])):(0,t.Q3)("",!0)])),_:1},8,["label"])}var re=a(57671),se={emits:["edit","refresh"],components:{TuntapShow:re.A},setup(e,{emit:l}){const a=(0,C.W)(),t=e=>{l("edit",e)},n=()=>{l("refresh")},o=()=>{a.value.showLease=!0};return{tuntap:a,handleTuntapIP:t,handleTuntapRefresh:n,handleShowLease:o}}};const de=(0,y.A)(se,[["render",oe]]);var ue=de;const ie={class:"foot t-c"};function ce(e,l,a,n,o,r){const s=(0,t.g2)("TuntapIP"),d=(0,t.g2)("el-tab-pane"),u=(0,t.g2)("TuntapLan"),i=(0,t.g2)("TuntapForward"),c=(0,t.g2)("el-tabs"),h=(0,t.g2)("el-button"),m=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(m,{modelValue:n.state.show,"onUpdate:modelValue":l[1]||(l[1]=e=>n.state.show=e),"close-on-click-modal":!1,"append-to":".app-wrap",title:`è®¾ç½®[${n.state.machineName}]ç»„ç½‘`,top:"1vh",width:"780"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(c,{type:"border-card"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{label:"ç½‘å¡"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{ref:"ipDom"},null,512)])),_:1}),(0,t.bF)(d,{label:"ç‚¹/ç½‘å¯¹ç½‘"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{ref:"lanDom"},null,512)])),_:1}),(0,t.bF)(d,{label:"ç«¯å£è½¬å‘"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{ref:"forwardDom"},null,512)])),_:1})])),_:1}),(0,t.Lk)("div",ie,[(0,t.bF)(h,{onClick:l[0]||(l[0]=e=>n.state.show=!1),loading:n.state.loading},{default:(0,t.k6)((()=>[(0,t.eW)("å–æ¶ˆ")])),_:1},8,["loading"]),(0,t.bF)(h,{type:"primary",onClick:n.handleSave,loading:n.state.loading},{default:(0,t.k6)((()=>[(0,t.eW)("ç¡®å®šä¿å­˜")])),_:1},8,["onClick","loading"])])])])),_:1},8,["modelValue","title"])}var he=a(15241),me=a(45130);const pe=e=>((0,t.Qi)("data-v-05d75f4a"),e=e(),(0,t.jt)(),e),ge={class:"w-100"},we=pe((()=>(0,t.Lk)("span",{class:"yellow"},"ä½¿ç”¨ç³»ç»Ÿç«¯å£è½¬å‘",-1))),ke={key:0,class:"green"},ve={class:"wrap"},fe=["onClick"],be=["title"],Ce={key:1},Fe=["onClick"],Ve=["onClick"],ye=["title"],_e={key:1},Ee=["onClick"],Le=["onClick"],Ie=["title"],Pe={key:1},Se=["onClick"],Te={key:1,class:"remark"},Me=["onClick"];function We(e,l,a,o,r,s){const d=(0,t.g2)("el-input"),u=(0,t.g2)("Delete"),i=(0,t.g2)("el-icon"),c=(0,t.g2)("el-table-column"),h=(0,t.g2)("el-button"),m=(0,t.g2)("el-popconfirm"),p=(0,t.g2)("Plus"),g=(0,t.g2)("el-table");return(0,t.uX)(),(0,t.CE)("div",ge,[(0,t.Lk)("div",null,[we,o.state.testing?((0,t.uX)(),(0,t.CE)("span",ke,"ã€testing")):(0,t.Q3)("",!0)]),(0,t.Lk)("div",ve,[(0,t.bF)(g,{stripe:"",data:o.state.forwards,border:"",size:"small",width:"100%",height:"400px",onCellDblclick:o.handleCellClick},{default:(0,t.k6)((()=>[(0,t.bF)(c,{prop:"ListenPort",label:"æºç«¯å£",width:"80"},{default:(0,t.k6)((e=>[e.row.ListenPortEditing?((0,t.uX)(),(0,t.Wv)(d,{key:0,autofocus:"",size:"small",modelValue:e.row.ListenPort,"onUpdate:modelValue":l=>e.row.ListenPort=l,onBlur:l=>o.handleEditBlur(e.row,"ListenPort")},null,8,["modelValue","onUpdate:modelValue","onBlur"])):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>o.handleEdit(e.row,"ListenPort")},[e.row.Error?((0,t.uX)(),(0,t.CE)("strong",{key:0,title:e.row.Error,class:"red"},(0,n.v_)(e.row.ListenPort),9,be)):((0,t.uX)(),(0,t.CE)("span",Ce,[(0,t.eW)((0,n.v_)(e.row.ListenPort)+" ",1),(0,t.Lk)("a",{href:"javascript:;",onClick:(0,me.D$)((l=>e.row.ListenPort=0),["stop"])},[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(u)])),_:1})],8,Fe)]))],8,fe))])),_:1}),(0,t.bF)(c,{prop:"ConnectAddr",label:"ç›®æ ‡IP",width:"140"},{default:(0,t.k6)((e=>[e.row.ConnectAddrEditing?((0,t.uX)(),(0,t.Wv)(d,{key:0,autofocus:"",size:"small",modelValue:e.row.ConnectAddr,"onUpdate:modelValue":l=>e.row.ConnectAddr=l,onBlur:l=>o.handleEditBlur(e.row,"ConnectAddr")},null,8,["modelValue","onUpdate:modelValue","onBlur"])):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>o.handleEdit(e.row,"ConnectAddr")},[e.row.Error?((0,t.uX)(),(0,t.CE)("strong",{key:0,title:e.row.Error,class:"red"},(0,n.v_)(e.row.ConnectAddr),9,ye)):((0,t.uX)(),(0,t.CE)("span",_e,[(0,t.eW)((0,n.v_)(e.row.ConnectAddr)+" ",1),(0,t.Lk)("a",{href:"javascript:;",onClick:(0,me.D$)((l=>e.row.ConnectAddr="0.0.0.0"),["stop"])},[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(u)])),_:1})],8,Ee)]))],8,Ve))])),_:1}),(0,t.bF)(c,{prop:"ConnectPort",label:"ç›®æ ‡ç«¯å£",width:"80"},{default:(0,t.k6)((e=>[e.row.ConnectPortEditing?((0,t.uX)(),(0,t.Wv)(d,{key:0,autofocus:"",size:"small",modelValue:e.row.ConnectPort,"onUpdate:modelValue":l=>e.row.ConnectPort=l,onBlur:l=>o.handleEditBlur(e.row,"ConnectPort")},null,8,["modelValue","onUpdate:modelValue","onBlur"])):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>o.handleEdit(e.row,"ConnectPort")},[e.row.Error?((0,t.uX)(),(0,t.CE)("strong",{key:0,title:e.row.Error,class:"red"},(0,n.v_)(e.row.ConnectPort),9,Ie)):((0,t.uX)(),(0,t.CE)("span",Pe,[(0,t.eW)((0,n.v_)(e.row.ConnectPort)+" ",1),(0,t.Lk)("a",{href:"javascript:;",onClick:(0,me.D$)((l=>e.row.ConnectPort=0),["stop"])},[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(u)])),_:1})],8,Se)]))],8,Le))])),_:1}),(0,t.bF)(c,{prop:"Remark",label:"å¤‡æ³¨"},{default:(0,t.k6)((e=>[e.row.RemarkEditing?((0,t.uX)(),(0,t.Wv)(d,{key:0,autofocus:"",size:"small",modelValue:e.row.Remark,"onUpdate:modelValue":l=>e.row.Remark=l,onBlur:l=>o.handleEditBlur(e.row,"Remark")},null,8,["modelValue","onUpdate:modelValue","onBlur"])):((0,t.uX)(),(0,t.CE)("div",Te,[(0,t.Lk)("a",{href:"javascript:;",class:"a-line",onClick:l=>o.handleEdit(e.row,"Remark")},(0,n.v_)(e.row.Remark||"æ— "),9,Me)]))])),_:1}),(0,t.bF)(c,{prop:"Oper",label:"æ“ä½œ",width:"110"},{default:(0,t.k6)((e=>[(0,t.Lk)("div",null,[(0,t.bF)(m,{title:"åˆ é™¤ä¸å¯é€†ï¼Œæ˜¯å¦ç¡®è®¤?",onConfirm:l=>o.handleDel(e.$index)},{reference:(0,t.k6)((()=>[(0,t.bF)(h,{type:"danger",size:"small"},{default:(0,t.k6)((()=>[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(u)])),_:1})])),_:1})])),_:2},1032,["onConfirm"]),(0,t.bF)(h,{type:"primary",size:"small",onClick:l=>o.handleAdd(e.$index)},{default:(0,t.k6)((()=>[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(p)])),_:1})])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data","onCellDblclick"])])])}var Ae={props:["modelValue"],emits:["update:modelValue"],components:{Delete:F.epd,Plus:F.FWt,Warning:F.N5l,Refresh:F.C42},setup(e){const l=(0,C.W)(),a=(0,u.Kh)({machineName:l.value.current.device.MachineName,forwards:0==l.value.current.Forwards.length?[{ListenAddr:"0.0.0.0",ListenPort:0,ConnectAddr:"0.0.0.0",ConnectPort:0,Remark:""}]:l.value.current.Forwards.slice(0),timer:0,testing:!1}),n=(e,l)=>{o(e,l.property)},o=(e,l)=>{a.forwards.forEach((e=>{e["ListenAddrEditing"]=!1,e["ListenPortEditing"]=!1,e["ConnectAddrEditing"]=!1,e["ConnectPortEditing"]=!1,e["RemarkEditing"]=!1})),e[`${l}Editing`]=!0,e["__editing"]=!0},r=(e,l)=>{e[`${l}Editing`]=!1,e["__editing"]=!1},s=e=>{1==a.forwards.length?a.forwards[0]={ListenAddr:"0.0.0.0",ListenPort:0,ConnectAddr:"0.0.0.0",ConnectPort:0,Remark:""}:a.forwards.splice(e,1)},d=e=>{a.forwards.filter((e=>"0.0.0.0"==e.ConnectAddr||0==e.ConnectPort||0==e.ListenPort)).length>0||a.forwards.splice(e+1,0,{ListenAddr:"0.0.0.0",ListenPort:0,ConnectAddr:"0.0.0.0",ConnectPort:0,Remark:""})},i=()=>{clearTimeout(a.timer),a.testing=!0,(0,he._)({MachineId:l.value.current.MachineId,List:a.forwards.map((e=>({ListenAddr:e.ListenAddr,ListenPort:+e.ListenPort,ConnectAddr:e.ConnectAddr,ConnectPort:+e.ConnectPort})))}).then((e=>{var l=e.List;for(let t=0;t<l.length;t++){const e=l[t],n=`${e.ListenPort}->${e.ConnectAddr}:${e.ConnectPort}`,o=a.forwards.filter((e=>`${e.ListenPort}->${e.ConnectAddr}:${e.ConnectPort}`==n));for(let l=0;l<o.length;l++)o[l].Error=e.Error}a.testing=!1,a.timer=setTimeout(i,3e3)})).catch((()=>{a.testing=!1,a.timer=setTimeout(i,3e3)}))};(0,t.sV)((()=>{i()})),(0,t.hi)((()=>{clearTimeout(a.timer)}));const c=()=>a.forwards.map((e=>(e.ListenPort=+e.ListenPort,e.ConnectPort=+e.ConnectPort,e)));return{state:a,handleCellClick:n,handleEditBlur:r,handleEdit:o,handleDel:s,handleAdd:d,getData:c}}};const Xe=(0,y.A)(Ae,[["render",We],["__scopeId","data-v-05d75f4a"]]);var Re=Xe;const xe={class:"w-100"},Ne=(0,t.Lk)("div",null,[(0,t.Lk)("span",{class:"yellow"},"ä½¿ç”¨ç³»ç»ŸNATæˆ–åº”ç”¨å±‚SNAT")],-1),Ue={class:"wrap"},$e=["onClick"],Be=["title"],De={key:1},ze=["onClick"],Oe=["onClick"],Ke=["title"],Qe={key:1},je=["onClick"],Ge=["title"],qe={key:1},He=["onClick"],Je=["onClick"],Ze=["title"],Ye={key:1};function el(e,l,a,o,r,s){const d=(0,t.g2)("el-input"),u=(0,t.g2)("Delete"),i=(0,t.g2)("el-icon"),c=(0,t.g2)("el-table-column"),h=(0,t.g2)("el-checkbox"),m=(0,t.g2)("el-button"),p=(0,t.g2)("el-popconfirm"),g=(0,t.g2)("Plus"),w=(0,t.g2)("el-table");return(0,t.uX)(),(0,t.CE)("div",xe,[Ne,(0,t.Lk)("div",Ue,[(0,t.bF)(w,{stripe:"",data:o.state.lans,border:"",size:"small",width:"100%",height:"400px",onCellDblclick:o.handleCellClick},{default:(0,t.k6)((()=>[(0,t.bF)(c,{prop:"IP",label:"è·¯ç”±IP"},{default:(0,t.k6)((e=>[e.row.IPEditing?((0,t.uX)(),(0,t.Wv)(d,{key:0,autofocus:"",size:"small",modelValue:e.row.IP,"onUpdate:modelValue":l=>e.row.IP=l,onBlur:l=>o.handleEditBlur(e.row,"IP")},null,8,["modelValue","onUpdate:modelValue","onBlur"])):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>o.handleEdit(e.row,"IP")},[e.row.Error?((0,t.uX)(),(0,t.CE)("strong",{key:0,title:e.row.Error,class:"red"},(0,n.v_)(e.row.IP),9,Be)):((0,t.uX)(),(0,t.CE)("span",De,[(0,t.eW)((0,n.v_)(e.row.IP)+" ",1),(0,t.Lk)("a",{href:"javascript:;",onClick:(0,me.D$)((l=>e.row.IP="0.0.0.0"),["stop"])},[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(u)])),_:1})],8,ze)]))],8,$e))])),_:1}),(0,t.bF)(c,{prop:"PrefixLength",label:"è·¯ç”±æŽ©ç ",width:"80"},{default:(0,t.k6)((e=>[e.row.PrefixLengthEditing?((0,t.uX)(),(0,t.Wv)(d,{key:0,autofocus:"",size:"small",modelValue:e.row.PrefixLength,"onUpdate:modelValue":l=>e.row.PrefixLength=l,onBlur:l=>o.handleEditBlur(e.row,"PrefixLength")},null,8,["modelValue","onUpdate:modelValue","onBlur"])):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>o.handleEdit(e.row,"PrefixLength")},[e.row.Error?((0,t.uX)(),(0,t.CE)("strong",{key:0,title:e.row.Error,class:"red"},(0,n.v_)(e.row.PrefixLength),9,Ke)):((0,t.uX)(),(0,t.CE)("span",Qe,(0,n.v_)(e.row.PrefixLength),1))],8,Oe))])),_:1}),(0,t.bF)(c,{prop:"MapIP",label:"ç›®æ ‡IP"},{default:(0,t.k6)((e=>[e.row.MapIPEditing?((0,t.uX)(),(0,t.Wv)(d,{key:0,autofocus:"",size:"small",modelValue:e.row.MapIP,"onUpdate:modelValue":l=>e.row.MapIP=l,onBlur:l=>o.handleEditBlur(e.row,"MapIP")},null,8,["modelValue","onUpdate:modelValue","onBlur"])):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>o.handleEdit(e.row,"MapIP")},[e.row.Error?((0,t.uX)(),(0,t.CE)("strong",{key:0,title:e.row.Error,class:"red"},(0,n.v_)(e.row.MapIP),9,Ge)):((0,t.uX)(),(0,t.CE)("span",qe,[(0,t.eW)((0,n.v_)(e.row.MapIP)+" ",1),(0,t.Lk)("a",{href:"javascript:;",onClick:(0,me.D$)((l=>e.row.MapIP="0.0.0.0"),["stop"])},[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(u)])),_:1})],8,He)]))],8,je))])),_:1}),(0,t.bF)(c,{prop:"MapPrefixLength",label:"ç›®æ ‡æŽ©ç ",width:"80"},{default:(0,t.k6)((e=>[e.row.MapPrefixLengthEditing?((0,t.uX)(),(0,t.Wv)(d,{key:0,autofocus:"",size:"small",modelValue:e.row.MapPrefixLength,"onUpdate:modelValue":l=>e.row.MapPrefixLength=l,onBlur:l=>o.handleEditBlur(e.row,"MapPrefixLength")},null,8,["modelValue","onUpdate:modelValue","onBlur"])):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>o.handleEdit(e.row,"MapPrefixLength")},[e.row.Error?((0,t.uX)(),(0,t.CE)("strong",{key:0,title:e.row.Error,class:"red"},(0,n.v_)(e.row.MapPrefixLength),9,Ze)):((0,t.uX)(),(0,t.CE)("span",Ye,(0,n.v_)(e.row.MapPrefixLength),1))],8,Je))])),_:1}),(0,t.bF)(c,{prop:"Disabled",label:"ç¦ç”¨",width:"80"},{default:(0,t.k6)((e=>[(0,t.bF)(h,{modelValue:e.row.Disabled,"onUpdate:modelValue":l=>e.row.Disabled=l,label:"ç¦ç”¨"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.bF)(c,{prop:"Oper",label:"æ“ä½œ",width:"110"},{default:(0,t.k6)((e=>[(0,t.Lk)("div",null,[(0,t.bF)(p,{title:"åˆ é™¤ä¸å¯é€†ï¼Œæ˜¯å¦ç¡®è®¤?",onConfirm:l=>o.handleDel(e.$index)},{reference:(0,t.k6)((()=>[(0,t.bF)(m,{type:"danger",size:"small"},{default:(0,t.k6)((()=>[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(u)])),_:1})])),_:1})])),_:2},1032,["onConfirm"]),(0,t.bF)(m,{type:"primary",size:"small",onClick:l=>o.handleAdd(e.$index)},{default:(0,t.k6)((()=>[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(g)])),_:1})])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data","onCellDblclick"])])])}var ll={props:["modelValue"],emits:["update:modelValue"],components:{Delete:F.epd,Plus:F.FWt,Warning:F.N5l,Refresh:F.C42},setup(e){const l=(0,C.W)(),a=(0,u.Kh)({lans:l.value.current.Lans.slice(0).map((e=>(e.MapIP=e.MapIP||"0.0.0.0",e.MapPrefixLength=e.MapPrefixLength||24,e)))});0==a.lans.length&&a.lans.push({IP:"0.0.0.0",PrefixLength:24,MapIP:"0.0.0.0",MapPrefixLength:24});const t=(e,l)=>{n(e,l.property)},n=(e,l)=>{a.lans.forEach((e=>{e["IPEditing"]=!1,e["PrefixLengthEditing"]=!1,e["MapIPEditing"]=!1,e["MapPrefixLengthEditing"]=!1})),e[`${l}Editing`]=!0,e["__editing"]=!0},o=(e,l)=>{if(e[`${l}Editing`]=!1,e["__editing"]=!1,"PrefixLength"==l||"MapPrefixLength"==l){var a=+e[l];(a>32||a<0||isNaN(a))&&(a=24),e[l]=a}},r=e=>{a.lans.splice(e,1),0==a.lans.length&&s(0)},s=e=>{a.lans.splice(e+1,0,{IP:"0.0.0.0",PrefixLength:24,MapIP:"0.0.0.0",MapPrefixLength:24})},d=()=>a.lans.map((e=>(e.PrefixLength=+e.PrefixLength,e)));return{state:a,handleDel:r,handleAdd:s,getData:d,handleCellClick:t,handleEditBlur:o,handleEdit:n}}};const al=(0,y.A)(ll,[["render",el]]);var tl=al;const nl=e=>((0,t.Qi)("data-v-b3135b4c"),e=e(),(0,t.jt)(),e),ol={class:"wrap"},rl=nl((()=>(0,t.Lk)("span",null,"ç•™ç©ºåˆ™ä½¿ç”¨ã€æœ¬ç»„ç½‘ç»œã€‘çš„è®¾ç½®",-1))),sl=nl((()=>(0,t.Lk)("span",null,"/",-1)));function dl(e,l,a,n,o,r){const s=(0,t.g2)("el-input"),d=(0,t.g2)("el-form-item"),u=(0,t.g2)("el-checkbox"),i=(0,t.g2)("el-form");return(0,t.uX)(),(0,t.CE)("div",ol,[(0,t.bF)(i,{ref:"ruleFormRef",model:n.state.ruleForm,rules:n.state.rules,"label-width":"8rem"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{label:"ç½‘å¡å",prop:"Name"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:n.state.ruleForm.Name,"onUpdate:modelValue":l[0]||(l[0]=e=>n.state.ruleForm.Name=e),style:{width:"14rem"}},null,8,["modelValue"]),(0,t.eW)(),rl])),_:1}),(0,t.bF)(d,{label:"ç½‘å¡IP",prop:"IP",class:"mgb-0"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:n.state.ruleForm.IP,"onUpdate:modelValue":l[1]||(l[1]=e=>n.state.ruleForm.IP=e),style:{width:"14rem"}},null,8,["modelValue"]),sl,(0,t.bF)(s,{onChange:n.handlePrefixLengthChange,modelValue:n.state.ruleForm.PrefixLength,"onUpdate:modelValue":l[2]||(l[2]=e=>n.state.ruleForm.PrefixLength=e),style:{width:"4rem"}},null,8,["onChange","modelValue"])])),_:1}),(0,t.bF)(d,{label:"",class:"mgb-0"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{class:"mgr-1",modelValue:n.state.ruleForm.ShowDelay,"onUpdate:modelValue":l[3]||(l[3]=e=>n.state.ruleForm.ShowDelay=e),label:"æ˜¾ç¤ºå»¶è¿Ÿ",size:"large"},null,8,["modelValue"]),(0,t.bF)(u,{class:"mgr-1",modelValue:n.state.ruleForm.AutoConnect,"onUpdate:modelValue":l[4]||(l[4]=e=>n.state.ruleForm.AutoConnect=e),label:"è‡ªåŠ¨è¿žæŽ¥",size:"large"},null,8,["modelValue"]),(0,t.bF)(u,{class:"mgr-1",modelValue:n.state.ruleForm.Multicast,"onUpdate:modelValue":l[5]||(l[5]=e=>n.state.ruleForm.Multicast=e),label:"ç¦ç”¨å¹¿æ’­",size:"large"},null,8,["modelValue"]),(0,t.bF)(u,{class:"mgr-1",modelValue:n.state.ruleForm.DisableNat,"onUpdate:modelValue":l[6]||(l[6]=e=>n.state.ruleForm.DisableNat=e),label:"ç¦ç”¨NAT",size:"large"},null,8,["modelValue"]),(0,t.bF)(u,{class:"mgr-1",modelValue:n.state.ruleForm.TcpMerge,"onUpdate:modelValue":l[7]||(l[7]=e=>n.state.ruleForm.TcpMerge=e),label:"TCPåŒ…åˆå¹¶",size:"large"},null,8,["modelValue"]),(0,t.bF)(u,{modelValue:n.state.ruleForm.InterfaceOrder,"onUpdate:modelValue":l[8]||(l[8]=e=>n.state.ruleForm.InterfaceOrder=e),label:"è°ƒæ•´ç½‘å¡é¡ºåº",size:"large"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])}var ul={emits:["change"],components:{Delete:F.epd,Plus:F.FWt,Warning:F.N5l,Refresh:F.C42,TuntapForward:Re,TuntapLan:tl},setup(e,{emit:l}){const a=(0,C.W)(),t=(0,u.KR)(null),n=(0,u.Kh)({ruleForm:{IP:a.value.current.IP,PrefixLength:a.value.current.PrefixLength||24,Gateway:a.value.current.Gateway,ShowDelay:a.value.current.ShowDelay,AutoConnect:a.value.current.AutoConnect,Upgrade:a.value.current.Upgrade,Multicast:a.value.current.Multicast,DisableNat:a.value.current.DisableNat,TcpMerge:a.value.current.TcpMerge,InterfaceOrder:a.value.current.InterfaceOrder,Forwards:a.value.current.Forwards,Name:a.value.current.Name},rules:{Name:{type:"string",pattern:/^$|^[A-Za-z][A-Za-z0-9]{0,31}$/,message:"è¯·è¾“å…¥æ­£ç¡®çš„ç½‘å¡å",transform(e){return e.trim()}}}}),o=()=>{var e=+n.ruleForm.PrefixLength;(e>32||e<16||isNaN(e))&&(e=24),n.ruleForm.PrefixLength=e},r=()=>{const e=JSON.parse(JSON.stringify(a.value.current));return e.IP=n.ruleForm.IP.replace(/\s/g,"")||"0.0.0.0",e.PrefixLength=+n.ruleForm.PrefixLength,e.Gateway=n.ruleForm.Gateway,e.ShowDelay=n.ruleForm.ShowDelay,e.AutoConnect=n.ruleForm.AutoConnect,e.Upgrade=n.ruleForm.Upgrade,e.Multicast=n.ruleForm.Multicast,e.DisableNat=n.ruleForm.DisableNat,e.TcpMerge=n.ruleForm.TcpMerge,e.InterfaceOrder=n.ruleForm.InterfaceOrder,e.Name=n.ruleForm.Name,e};return{state:n,ruleFormRef:t,handlePrefixLengthChange:o,getData:r}}};const il=(0,y.A)(ul,[["render",dl],["__scopeId","data-v-b3135b4c"]]);var cl=il,hl={props:["modelValue"],emits:["change","update:modelValue"],components:{TuntapForward:Re,TuntapLan:tl,TuntapIP:cl},setup(e,{emit:l}){const a=(0,C.W)(),n=(0,u.Kh)({show:!0,machineName:a.value.current.device.MachineName,loading:!1});(0,t.wB)((()=>n.show),(e=>{e||setTimeout((()=>{l("update:modelValue",e)}),300)}));const o=(0,u.KR)(null),r=(0,u.KR)(null),s=(0,u.KR)(null),d=()=>{n.loading=!0;const e=o.value.getData();e.Lans=r.value?r.value.getData():a.value.current.Lans,e.Forwards=s.value?s.value.getData():a.value.current.Forwards,(0,he.ac)(e).then((()=>{n.show=!1,n.loading=!1,i.nk.success("å·²æ“ä½œï¼"),l("change")})).catch((e=>{n.loading=!1,console.log(e),i.nk.error("æ“ä½œå¤±è´¥ï¼")}))};return{state:n,handleSave:d,ipDom:o,lanDom:r,forwardDom:s}}};const ml=(0,y.A)(hl,[["render",ce],["__scopeId","data-v-87d2a32c"]]);var pl=ml;const gl=e=>((0,t.Qi)("data-v-67ed3552"),e=e(),(0,t.jt)(),e),wl=gl((()=>(0,t.Lk)("p",null,"ç½‘ç»œç§ŸæœŸ30å¤©ã€IPç§ŸæœŸ7å¤©",-1))),kl=gl((()=>(0,t.Lk)("span",null,"/",-1))),vl=gl((()=>(0,t.Lk)("span",{style:{width:"1rem"}},null,-1))),fl={class:"calc"},bl=gl((()=>(0,t.Lk)("span",{class:"label"},"ç½‘ç»œå·",-1))),Cl={class:"value"},Fl=gl((()=>(0,t.Lk)("span",{class:"label"},"ç½‘å…³",-1))),Vl={class:"value"},yl=gl((()=>(0,t.Lk)("span",{class:"label"},"å¼€å§‹IP",-1))),_l={class:"value"},El=gl((()=>(0,t.Lk)("span",{class:"label"},"ç»“æŸIP",-1))),Ll={class:"value"},Il=gl((()=>(0,t.Lk)("span",{class:"label"},"å¹¿æ’­å·",-1))),Pl={class:"value"},Sl=gl((()=>(0,t.Lk)("span",{class:"label"},"IPæ•°é‡",-1))),Tl={class:"value"};function Ml(e,l,a,o,r,s){const d=(0,t.g2)("el-form-item"),u=(0,t.g2)("el-input"),i=(0,t.g2)("el-button"),c=(0,t.g2)("el-form"),h=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(h,{modelValue:o.state.show,"onUpdate:modelValue":l[4]||(l[4]=e=>o.state.show=e),"close-on-click-modal":!1,"append-to":".app-wrap",title:"é…ç½®æœ¬ç»„çš„ç½‘ç»œ",top:"1vh",width:"400"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(c,{ref:"ruleFormRef",model:o.state.ruleForm,rules:o.state.rules,"label-width":"100"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{prop:"gateway"},{default:(0,t.k6)((()=>[wl])),_:1}),(0,t.bF)(d,{label:"ç½‘å¡å",prop:"Name"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{modelValue:o.state.ruleForm.Name,"onUpdate:modelValue":l[0]||(l[0]=e=>o.state.ruleForm.Name=e),style:{width:"14rem"}},null,8,["modelValue"])])),_:1}),(0,t.bF)(d,{label:"ç½‘ç»œå‰ç¼€",prop:"IP"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{modelValue:o.state.ruleForm.IP,"onUpdate:modelValue":l[1]||(l[1]=e=>o.state.ruleForm.IP=e),style:{width:"14rem"},onChange:o.handlePrefixLengthChange},null,8,["modelValue","onChange"]),kl,(0,t.bF)(u,{onChange:o.handlePrefixLengthChange,modelValue:o.state.ruleForm.PrefixLength,"onUpdate:modelValue":l[2]||(l[2]=e=>o.state.ruleForm.PrefixLength=e),style:{width:"4rem"}},null,8,["onChange","modelValue"]),vl,(0,t.bF)(i,{onClick:o.handleClear},{default:(0,t.k6)((()=>[(0,t.eW)("é‡ç½®")])),_:1},8,["onClick"])])),_:1}),(0,t.bF)(d,{label:"",prop:"IP1"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",fl,[(0,t.Lk)("p",null,[bl,(0,t.Lk)("span",Cl,(0,n.v_)(o.state.values.Network),1)]),(0,t.Lk)("p",null,[Fl,(0,t.Lk)("span",Vl,(0,n.v_)(o.state.values.Gateway),1)]),(0,t.Lk)("p",null,[yl,(0,t.Lk)("span",_l,(0,n.v_)(o.state.values.Start),1)]),(0,t.Lk)("p",null,[El,(0,t.Lk)("span",Ll,(0,n.v_)(o.state.values.End),1)]),(0,t.Lk)("p",null,[Il,(0,t.Lk)("span",Pl,(0,n.v_)(o.state.values.Broadcast),1)]),(0,t.Lk)("p",null,[Sl,(0,t.Lk)("span",Tl,(0,n.v_)(o.state.values.Count),1)])])])),_:1}),o.hasLease?((0,t.uX)(),(0,t.Wv)(d,{key:0,label:"",prop:"Btns"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(i,{onClick:l[3]||(l[3]=e=>o.state.show=!1)},{default:(0,t.k6)((()=>[(0,t.eW)("å–æ¶ˆ")])),_:1}),(0,t.bF)(i,{type:"primary",onClick:o.handleSave},{default:(0,t.k6)((()=>[(0,t.eW)("ç¡®è®¤")])),_:1},8,["onClick"])])])),_:1})):(0,t.Q3)("",!0)])),_:1},8,["model","rules"])])])),_:1},8,["modelValue"])}var Wl={props:["modelValue"],emits:["change","update:modelValue"],components:{Delete:F.epd,Plus:F.FWt},setup(e,{emit:l}){const a=(0,d.B)(),n=(0,t.EW)((()=>a.value.hasAccess("Lease"))),o=(0,u.KR)(null),r=(0,u.Kh)({show:!0,ruleForm:{Name:"",IP:"0.0.0.0",PrefixLength:24},rules:{Name:{type:"string",pattern:/^$|^[A-Za-z][A-Za-z0-9]{0,31}$/,message:"è¯·è¾“å…¥æ­£ç¡®çš„ç½‘å¡å",transform(e){return e.trim()}}},values:{}});(0,t.wB)((()=>r.show),(e=>{e||setTimeout((()=>{l("update:modelValue",e)}),300)}));const s=()=>{(0,he.w0)(r.ruleForm).then((e=>{r.values=e}))},c=()=>{(0,he.Nj)().then((e=>{r.ruleForm.Name=e.Name,r.ruleForm.IP=e.IP,r.ruleForm.PrefixLength=e.PrefixLength,s()}))},h=()=>{var e=+r.ruleForm.PrefixLength;(e>32||e<16||isNaN(e))&&(e=24),r.ruleForm.PrefixLength=e,s()},m=()=>{(0,he.AE)(r.ruleForm).then((()=>{i.nk.success("å·²æ“ä½œ"),r.show=!1})).catch((e=>{console.log(e),i.nk.error("æ“ä½œå¤±è´¥")}))},p=()=>{(0,he.AE)({Name:"",IP:"0.0.0.0",PrefixLength:24}).then((()=>{i.nk.success("å·²æ“ä½œ"),c()})).catch((e=>{console.log(e),i.nk.error("æ“ä½œå¤±è´¥")}))};return(0,t.sV)((()=>{c()})),{state:r,hasLease:n,ruleFormRef:o,handleSave:m,handlePrefixLengthChange:h,handleClear:p}}};const Al=(0,y.A)(Wl,[["render",Ml],["__scopeId","data-v-67ed3552"]]);var Xl=Al;const Rl={key:0};function xl(e,l,a,n,o,r){const s=(0,t.g2)("Socks5Show"),d=(0,t.g2)("el-table-column");return(0,t.uX)(),(0,t.Wv)(d,{prop:"socks5",label:n.socks5.show?"ä»£ç†è½¬å‘":"",width:"160"},{default:(0,t.k6)((e=>[n.socks5.show&&n.socks5.list[e.row.MachineId]?((0,t.uX)(),(0,t.CE)("div",Rl,[(0,t.bF)(s,{config:!0,item:e.row,onEdit:n.handleSocks5,onRefresh:n.handleSocks5Refresh},null,8,["item","onEdit","onRefresh"])])):(0,t.Q3)("",!0)])),_:1},8,["label"])}const Nl={class:"flex"},Ul={class:"flex-1"},$l=["title"],Bl={key:0,class:"green gateway"},Dl={key:1},zl={key:0},Ol={key:0,class:"flex disable",title:"å·²ç¦ç”¨"},Kl={key:1,class:"flex yellow",title:"ä¸Žå…¶å®ƒè®¾å¤‡å¡«å†™IPã€æˆ–æœ¬æœºå±€åŸŸç½‘IPæœ‰å†²çª"};function Ql(e,l,a,o,r,s){const d=(0,t.g2)("ConnectionShow"),u=(0,t.g2)("Loading"),i=(0,t.g2)("el-icon"),c=(0,t.g2)("el-switch");return(0,t.uX)(),(0,t.CE)("div",null,[(0,t.Lk)("div",Nl,[(0,t.Lk)("div",Ul,[(0,t.bF)(d,{data:o.connections.list[o.item.MachineId],row:o.item,transitionId:"socks5"},null,8,["data","row"]),(0,t.Lk)("a",{href:"javascript:;",class:"a-line",onClick:l[0]||(l[0]=e=>o.handleSocks5Port(o.socks5.list[o.item.MachineId])),title:"æ­¤è®¾å¤‡çš„socks5ä»£ç†"},[o.socks5.list[o.item.MachineId].SetupError?((0,t.uX)(),(0,t.CE)("strong",{key:0,class:"red",title:o.socks5.list[o.item.MachineId].SetupError}," socks5://*:"+(0,n.v_)(o.socks5.list[o.item.MachineId].Port),9,$l)):((0,t.uX)(),(0,t.CE)(t.FK,{key:1},[o.item.Connected&&o.socks5.list[o.item.MachineId].running?((0,t.uX)(),(0,t.CE)("strong",Bl,"socks5://*:"+(0,n.v_)(o.socks5.list[o.item.MachineId].Port),1)):((0,t.uX)(),(0,t.CE)("span",Dl,"socks5://*:"+(0,n.v_)(o.socks5.list[o.item.MachineId].Port),1))],64))])]),o.socks5.list[o.item.MachineId].loading?((0,t.uX)(),(0,t.CE)("div",zl,[(0,t.bF)(i,{size:"14",class:"loading"},{default:(0,t.k6)((()=>[(0,t.bF)(u)])),_:1})])):((0,t.uX)(),(0,t.Wv)(c,{key:1,"model-value":o.item.Connected&&o.socks5.list[o.item.MachineId].running,loading:o.socks5.list[o.item.MachineId].loading,disabled:"",onClick:l[1]||(l[1]=e=>o.handleSocks5(o.socks5.list[o.item.MachineId])),size:"small","inline-prompt":"","active-text":"ðŸ˜€","inactive-text":"ðŸ˜£"},null,8,["model-value","loading"]))]),(0,t.Lk)("div",null,[(0,t.Lk)("div",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.socks5.list[o.item.MachineId].Lans,((e,l)=>((0,t.uX)(),(0,t.CE)(t.FK,{key:l},[e.Disabled?((0,t.uX)(),(0,t.CE)("div",Ol,(0,n.v_)(e.IP)+" / "+(0,n.v_)(e.PrefixLength),1)):e.Exists?((0,t.uX)(),(0,t.CE)("div",Kl,(0,n.v_)(e.IP)+" / "+(0,n.v_)(e.PrefixLength),1)):((0,t.uX)(),(0,t.CE)("div",{key:2,class:(0,n.C4)(["flex green",{green:o.item.Connected&&o.socks5.list[o.item.MachineId].running}]),title:"æ­£å¸¸ä½¿ç”¨"},(0,n.v_)(e.IP)+" / "+(0,n.v_)(e.PrefixLength),3))],64)))),128))])])])}var jl=a(99983),Gl=a(3104),ql={props:["item","config"],emits:["edit","refresh"],components:{Loading:F.Rhj,ConnectionShow:Gl.A},setup(e,{emit:l}){const a=b(),n=(0,d.B)(),o=(0,t.EW)((()=>n.value.config.Client.Id)),r=(0,t.EW)((()=>n.value.hasAccess("Socks5ChangeSelf"))),s=(0,t.EW)((()=>n.value.hasAccess("Socks5ChangeOther"))),u=(0,t.EW)((()=>n.value.hasAccess("Socks5StatusSelf"))),c=(0,t.EW)((()=>n.value.hasAccess("Socks5StatusOther"))),h=(0,jl.bB)(),m=l=>{if(!e.config)return;if(o.value===l.MachineId){if(!u.value)return void i.nk.success("æ— æƒé™")}else if(!c.value)return void i.nk.success("æ— æƒé™");const a=e.item.Connected&&l.running?(0,k.R2)(l.MachineId):(0,k.qH)(l.MachineId);l.loading=!0,a.then((()=>{i.nk.success("æ“ä½œæˆåŠŸï¼")})).catch((e=>{console.log(e),i.nk.error("æ“ä½œå¤±è´¥ï¼")}))},p=a=>{if(e.config||o.value==a.MachineId){if(o.value===a.MachineId){if(!r.value)return void i.nk.success("æ— æƒé™")}else if(!s.value)return void i.nk.success("æ— æƒé™");a.device=e.item,l("edit",a)}},g=()=>{l("refresh")};return{item:(0,t.EW)((()=>e.item)),socks5:a,connections:h,handleSocks5:m,handleSocks5Port:p,handleSocks5Refresh:g}}};const Hl=(0,y.A)(ql,[["render",Ql],["__scopeId","data-v-878a681e"]]);var Jl=Hl,Zl={emits:["edit","refresh"],components:{Socks5Show:Jl},setup(e,{emit:l}){const a=b(),t=e=>{l("edit",e)},n=()=>{l("refresh")};return{socks5:a,handleSocks5:t,handleSocks5Refresh:n}}};const Yl=(0,y.A)(Zl,[["render",xl]]);var ea=Yl;const la={class:"upgrade-wrap"},aa={class:"t-c w-100"};function ta(e,l,a,n,o,r){const s=(0,t.g2)("el-form-item"),d=(0,t.g2)("el-input"),u=(0,t.g2)("Socks5Lan"),i=(0,t.g2)("el-button"),c=(0,t.g2)("el-form"),h=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(h,{modelValue:n.state.show,"onUpdate:modelValue":l[2]||(l[2]=e=>n.state.show=e),"close-on-click-modal":!1,"append-to":".app-wrap",title:`è®¾ç½®[${n.state.machineName}]ä»£ç†`,top:"1vh",width:"700"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(c,{ref:"ruleFormRef",model:n.state.ruleForm,rules:n.state.rules,"label-width":"140"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{prop:"gateway",style:{"margin-bottom":"0"}},{default:(0,t.k6)((()=>[(0,t.eW)(" é…ç½®ä»£ç†ï¼Œé€šè¿‡ä»£ç†è®¿é—®å…¶å®ƒè®¾å¤‡ ")])),_:1}),(0,t.bF)(s,{label:"ä»£ç†ç«¯å£",prop:"Port"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:n.state.ruleForm.Port,"onUpdate:modelValue":l[0]||(l[0]=e=>n.state.ruleForm.Port=e),style:{width:"14rem"}},null,8,["modelValue"])])),_:1}),(0,t.Lk)("div",la,[(0,t.bF)(u,{ref:"socks5Dom"},null,512)]),(0,t.bF)(s,{label:"",prop:"Btns","label-width":"0"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",aa,[(0,t.bF)(i,{onClick:l[1]||(l[1]=e=>n.state.show=!1)},{default:(0,t.k6)((()=>[(0,t.eW)("å–æ¶ˆ")])),_:1}),(0,t.bF)(i,{type:"primary",onClick:n.handleSave},{default:(0,t.k6)((()=>[(0,t.eW)("ç¡®è®¤")])),_:1},8,["onClick"])])])),_:1})])),_:1},8,["model","rules"])])])),_:1},8,["modelValue","title"])}const na={class:"w-100"},oa={class:"wrap"},ra=["onClick"],sa=["title"],da={key:1},ua=["onClick"],ia=["onClick"],ca=["title"],ha={key:1},ma=["onClick"],pa=["title"],ga={key:1},wa=["onClick"],ka=["onClick"],va=["title"],fa={key:1};function ba(e,l,a,o,r,s){const d=(0,t.g2)("el-input"),u=(0,t.g2)("Delete"),i=(0,t.g2)("el-icon"),c=(0,t.g2)("el-table-column"),h=(0,t.g2)("el-checkbox"),m=(0,t.g2)("el-button"),p=(0,t.g2)("el-popconfirm"),g=(0,t.g2)("Plus"),w=(0,t.g2)("el-table");return(0,t.uX)(),(0,t.CE)("div",na,[(0,t.Lk)("div",oa,[(0,t.bF)(w,{stripe:"",data:o.state.lans,border:"",size:"small",width:"100%",height:"400px",onCellDblclick:o.handleCellClick},{default:(0,t.k6)((()=>[(0,t.bF)(c,{prop:"IP",label:"è·¯ç”±IP",width:"120"},{default:(0,t.k6)((e=>[e.row.IPEditing?((0,t.uX)(),(0,t.Wv)(d,{key:0,autofocus:"",size:"small",modelValue:e.row.IP,"onUpdate:modelValue":l=>e.row.IP=l,onBlur:l=>o.handleEditBlur(e.row,"IP")},null,8,["modelValue","onUpdate:modelValue","onBlur"])):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>o.handleEdit(e.row,"IP")},[e.row.Error?((0,t.uX)(),(0,t.CE)("strong",{key:0,title:e.row.Error,class:"red"},(0,n.v_)(e.row.IP),9,sa)):((0,t.uX)(),(0,t.CE)("span",da,[(0,t.eW)((0,n.v_)(e.row.IP)+" ",1),(0,t.Lk)("a",{href:"javascript:;",onClick:(0,me.D$)((l=>e.row.IP="0.0.0.0"),["stop"])},[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(u)])),_:1})],8,ua)]))],8,ra))])),_:1}),(0,t.bF)(c,{prop:"PrefixLength",label:"è·¯ç”±æŽ©ç ",width:"80"},{default:(0,t.k6)((e=>[e.row.PrefixLengthEditing?((0,t.uX)(),(0,t.Wv)(d,{key:0,autofocus:"",size:"small",modelValue:e.row.PrefixLength,"onUpdate:modelValue":l=>e.row.PrefixLength=l,onBlur:l=>o.handleEditBlur(e.row,"PrefixLength")},null,8,["modelValue","onUpdate:modelValue","onBlur"])):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>o.handleEdit(e.row,"PrefixLength")},[e.row.Error?((0,t.uX)(),(0,t.CE)("strong",{key:0,title:e.row.Error,class:"red"},(0,n.v_)(e.row.PrefixLength),9,ca)):((0,t.uX)(),(0,t.CE)("span",ha,(0,n.v_)(e.row.PrefixLength),1))],8,ia))])),_:1}),(0,t.bF)(c,{prop:"MapIP",label:"ç›®æ ‡IP",width:"120"},{default:(0,t.k6)((e=>[e.row.MapIPEditing?((0,t.uX)(),(0,t.Wv)(d,{key:0,autofocus:"",size:"small",modelValue:e.row.MapIP,"onUpdate:modelValue":l=>e.row.MapIP=l,onBlur:l=>o.handleEditBlur(e.row,"MapIP")},null,8,["modelValue","onUpdate:modelValue","onBlur"])):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>o.handleEdit(e.row,"MapIP")},[e.row.Error?((0,t.uX)(),(0,t.CE)("strong",{key:0,title:e.row.Error,class:"red"},(0,n.v_)(e.row.MapIP),9,pa)):((0,t.uX)(),(0,t.CE)("span",ga,[(0,t.eW)((0,n.v_)(e.row.MapIP)+" ",1),(0,t.Lk)("a",{href:"javascript:;",onClick:(0,me.D$)((l=>e.row.MapIP="0.0.0.0"),["stop"])},[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(u)])),_:1})],8,wa)]))],8,ma))])),_:1}),(0,t.bF)(c,{prop:"MapPrefixLength",label:"ç›®æ ‡æŽ©ç ",width:"80"},{default:(0,t.k6)((e=>[e.row.MapPrefixLengthEditing?((0,t.uX)(),(0,t.Wv)(d,{key:0,autofocus:"",size:"small",modelValue:e.row.MapPrefixLength,"onUpdate:modelValue":l=>e.row.MapPrefixLength=l,onBlur:l=>o.handleEditBlur(e.row,"MapPrefixLength")},null,8,["modelValue","onUpdate:modelValue","onBlur"])):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>o.handleEdit(e.row,"MapPrefixLength")},[e.row.Error?((0,t.uX)(),(0,t.CE)("strong",{key:0,title:e.row.Error,class:"red"},(0,n.v_)(e.row.MapPrefixLength),9,va)):((0,t.uX)(),(0,t.CE)("span",fa,(0,n.v_)(e.row.MapPrefixLength),1))],8,ka))])),_:1}),(0,t.bF)(c,{prop:"Disabled",label:"ç¦ç”¨"},{default:(0,t.k6)((e=>[(0,t.bF)(h,{modelValue:e.row.Disabled,"onUpdate:modelValue":l=>e.row.Disabled=l,label:"ç¦ç”¨"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.bF)(c,{prop:"Oper",label:"æ“ä½œ",width:"110"},{default:(0,t.k6)((e=>[(0,t.Lk)("div",null,[(0,t.bF)(p,{title:"åˆ é™¤ä¸å¯é€†ï¼Œæ˜¯å¦ç¡®è®¤?",onConfirm:l=>o.handleDel(e.$index)},{reference:(0,t.k6)((()=>[(0,t.bF)(m,{type:"danger",size:"small"},{default:(0,t.k6)((()=>[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(u)])),_:1})])),_:1})])),_:2},1032,["onConfirm"]),(0,t.bF)(m,{type:"primary",size:"small",onClick:l=>o.handleAdd(e.$index)},{default:(0,t.k6)((()=>[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(g)])),_:1})])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data","onCellDblclick"])])])}var Ca={props:["modelValue"],emits:["update:modelValue"],components:{Delete:F.epd,Plus:F.FWt,Warning:F.N5l,Refresh:F.C42},setup(e){const l=b(),a=(0,u.Kh)({lans:l.value.current.Lans.slice(0).map((e=>(e.MapIP=e.MapIP||"0.0.0.0",e.MapPrefixLength=e.MapPrefixLength||24,e)))});0==a.lans.length&&a.lans.push({IP:"0.0.0.0",PrefixLength:24,MapIP:"0.0.0.0",MapPrefixLength:24});const t=(e,l)=>{n(e,l.property)},n=(e,l)=>{a.lans.forEach((e=>{e["IPEditing"]=!1,e["PrefixLengthEditing"]=!1,e["MapIPEditing"]=!1,e["MapPrefixLengthEditing"]=!1})),e[`${l}Editing`]=!0,e["__editing"]=!0},o=(e,l)=>{if(e[`${l}Editing`]=!1,e["__editing"]=!1,"PrefixLength"==l||"MapPrefixLength"==l){var a=+e[l];(a>32||a<0||isNaN(a))&&(a=24),e[l]=a}},r=e=>{a.lans.splice(e,1),0==a.lans.length&&s(0)},s=e=>{a.lans.splice(e+1,0,{IP:"0.0.0.0",PrefixLength:24,MapIP:"0.0.0.0",MapPrefixLength:24})},d=()=>a.lans.map((e=>(e.PrefixLength=+e.PrefixLength,e)));return{state:a,handleDel:r,handleAdd:s,getData:d,handleCellClick:t,handleEditBlur:o,handleEdit:n}}};const Fa=(0,y.A)(Ca,[["render",ba]]);var Va=Fa,ya={props:["modelValue"],emits:["change","update:modelValue"],components:{Socks5Lan:Va},setup(e,{emit:l}){const a=(0,d.B)(),n=b(),o=(0,u.KR)(null),r=(0,u.Kh)({show:!0,machineName:n.value.current.device.MachineName,bufferSize:a.value.bufferSize,ruleForm:{Port:n.value.current.Port,Lans:[]},rules:{}});0==r.ruleForm.Lans.length&&r.ruleForm.Lans.push({IP:"0.0.0.0",PrefixLength:24}),(0,t.wB)((()=>r.show),(e=>{e||setTimeout((()=>{l("update:modelValue",e)}),300)}));const s=(0,u.KR)(null),c=()=>{const e=JSON.parse(JSON.stringify(n.value.current));e.Port=+(r.ruleForm.Port||"1805"),e.Lans=s.value.getData(),(0,k._Q)(e).then((()=>{r.show=!1,i.nk.success("å·²æ“ä½œï¼"),l("change")})).catch((e=>{console.log(e),i.nk.error("æ“ä½œå¤±è´¥ï¼")}))};return{state:r,ruleFormRef:o,socks5Dom:s,handleSave:c}}};const _a=(0,y.A)(ya,[["render",ta],["__scopeId","data-v-2ea91b4b"]]);var Ea=_a;const La=["title","src"],Ia={key:1,title:"?",class:"system",src:"/system.svg"},Pa=["title","src"],Sa={key:3,title:"?",class:"system",src:"/system.svg"},Ta=["title"],Ma={key:5,title:"?",class:"system",src:"/system.svg"},Wa={class:"flex"},Aa=["title","onClick"];function Xa(e,l,a,o,r,s){const d=(0,t.g2)("el-table-column");return(0,t.uX)(),(0,t.Wv)(d,{prop:"tunnel",label:"ç½‘ç»œ",width:"76"},{default:(0,t.k6)((e=>[o.tunnel.list[e.row.MachineId]?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[(0,t.Lk)("div",null,[o.tunnel.list[e.row.MachineId].Net.CountryCode?((0,t.uX)(),(0,t.CE)("img",{key:0,title:`${o.tunnel.list[e.row.MachineId].Net.CountryCode}ã€${o.tunnel.list[e.row.MachineId].Net.City}`,class:"system",src:`https://unpkg.com/flag-icons@7.2.3/flags/4x3/${o.tunnel.list[e.row.MachineId].Net.CountryCode.toLowerCase()}.svg`},null,8,La)):((0,t.uX)(),(0,t.CE)("img",Ia)),o.tunnel.list[e.row.MachineId].Net.Isp?((0,t.uX)(),(0,t.CE)("img",{key:2,title:`${o.tunnel.list[e.row.MachineId].Net.Isp}`,class:"system",src:o.netImg(o.tunnel.list[e.row.MachineId].Net)},null,8,Pa)):((0,t.uX)(),(0,t.CE)("img",Sa)),o.tunnel.list[e.row.MachineId].Net.Nat?((0,t.uX)(),(0,t.CE)("span",{key:4,class:"nat",title:o.tunnel.list[e.row.MachineId].Net.Nat},(0,n.v_)(o.natMap[o.tunnel.list[e.row.MachineId].Net.Nat]),9,Ta)):((0,t.uX)(),(0,t.CE)("img",Ma))]),(0,t.Lk)("div",Wa,[(0,t.Lk)("a",{href:"javascript:;",class:(0,n.C4)(["a-line",{yellow:o.tunnel.list[e.row.MachineId].NeedReboot}]),title:o.title(o.tunnel.list[e.row.MachineId]),onClick:l=>o.handleTunnel(o.tunnel.list[e.row.MachineId],e.row)},[(0,t.Lk)("span",null,"è·³ç‚¹:"+(0,n.v_)(o.tunnel.list[e.row.MachineId].RouteLevel)+"+"+(0,n.v_)(o.tunnel.list[e.row.MachineId].RouteLevelPlus),1)],10,Aa)])],64)):(0,t.Q3)("",!0)])),_:1})}var Ra=a(18566),xa={emits:["edit","refresh"],setup(e,{emit:l}){const a=(0,d.B)(),n=(0,t.EW)((()=>a.value.config.Client.Id)),o=(0,t.EW)((()=>a.value.hasAccess("TunnelChangeSelf"))),r=(0,t.EW)((()=>a.value.hasAccess("TunnelChangeOther"))),s=(0,Ra.e)(),u=((0,jl.ZY)(),(0,jl.mx)()),c=(0,jl.FG)(),h=(0,jl.bB)(),m=e=>{let l=["è°ƒæ•´ç½‘å…³å±‚çº§æœ‰åŠ©äºŽæ‰“æ´žæˆåŠŸ"];return e.NeedReboot?"éœ€è¦é‡å¯":l.join("\r\n")},p={chinanet:"chinanet.svg",china169:"chinanet.svg","china telecom":"chinanet.svg","china unicom":"chinaunicom.svg","china mobile":"chinamobile.svg",huawei:"huawei.svg",amazon:"amazon.svg",aliyun:"aliyun.svg",alibaba:"aliyun.svg",jdcom:"jdcom.svg"},g=new RegExp(Object.keys(p).map((e=>`\\b${e}\\b`)).join("|")),w=e=>{const l=e.Isp.toLowerCase();if(l){const e=l.match(g);if(e)return`./${p[e[0]]}`}return"./system.svg"},k={Unknown:"?",UnsupportedServer:"?",UdpBlocked:"?",OpenInternet:"?",SymmetricUdpFirewall:"?",FullCone:"1",RestrictedCone:"2",PortRestrictedCone:"3",Symmetric:"4"},v=e=>{const l=[u.value.list[e],c.value.list[e],h.value.list[e]].filter((e=>!!e&&e.Connected)).length;return l},f=(e,a)=>{if(n.value===e.MachineId){if(!o.value)return void i.nk.success("æ— æƒé™")}else if(!r.value)return void i.nk.success("æ— æƒé™");e.device=a,l("edit",e)},b=()=>{l("refresh")},C=e=>{l("connections",e)};return{tunnel:s,handleTunnel:f,handleTunnelRefresh:b,connectionCount:v,handleConnections:C,title:m,netImg:w,natMap:k}}};const Na=(0,y.A)(xa,[["render",Xa],["__scopeId","data-v-ecc253d6"]]);var Ua=Na;const $a=e=>((0,t.Qi)("data-v-6941c158"),e=e(),(0,t.jt)(),e),Ba=$a((()=>(0,t.Lk)("div",null,"ç½‘å…³å±‚çº§ä¸ºä½ çš„è®¾å¤‡ä¸Žå¤–ç½‘çš„è·ç¦»ï¼Œä½ å¯ä»¥æ‰‹åŠ¨è°ƒæ•´æ•°å€¼",-1))),Da={class:"pdl-20"},za=$a((()=>(0,t.Lk)("h3",null,"è·³è·ƒç‚¹",-1))),Oa={class:"pdl-20"},Ka={class:"t-c w-100"};function Qa(e,l,a,o,r,s){const d=(0,t.g2)("el-form-item"),u=(0,t.g2)("el-input"),i=(0,t.g2)("el-col"),c=(0,t.g2)("el-input-number"),h=(0,t.g2)("el-row"),m=(0,t.g2)("el-button"),p=(0,t.g2)("el-form"),g=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(g,{modelValue:o.state.show,"onUpdate:modelValue":l[5]||(l[5]=e=>o.state.show=e),"close-on-click-modal":!1,"append-to":".app-wrap",title:`è®¾ç½®[${o.state.machineName}]ç½‘å…³`,width:"560",top:"2vh"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(p,{ref:"ruleFormRef",model:o.state.ruleForm,rules:o.state.rules,"label-width":"auto"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{label:"",prop:"alert"},{default:(0,t.k6)((()=>[Ba])),_:1}),(0,t.bF)(d,{label:""},{default:(0,t.k6)((()=>[(0,t.bF)(h,null,{default:(0,t.k6)((()=>[(0,t.bF)(i,{span:12},{default:(0,t.k6)((()=>[(0,t.bF)(d,{label:"ç½‘å…³å±‚çº§",prop:"RouteLevel"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{readonly:"",modelValue:o.state.ruleForm.RouteLevel,"onUpdate:modelValue":l[0]||(l[0]=e=>o.state.ruleForm.RouteLevel=e),style:{width:"15rem"}},null,8,["modelValue"])])),_:1})])),_:1}),(0,t.bF)(i,{span:12},{default:(0,t.k6)((()=>[(0,t.bF)(d,{label:"åŠ ä¸Š",prop:"RouteLevelPlus"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:o.state.ruleForm.RouteLevelPlus,"onUpdate:modelValue":l[1]||(l[1]=e=>o.state.ruleForm.RouteLevelPlus=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,t.bF)(d,{label:""},{default:(0,t.k6)((()=>[(0,t.bF)(h,null,{default:(0,t.k6)((()=>[(0,t.bF)(i,{span:12},{default:(0,t.k6)((()=>[(0,t.bF)(d,{label:"å¤–ç½‘ç«¯å£",prop:"PortMapWan"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:o.state.ruleForm.PortMapWan,"onUpdate:modelValue":l[2]||(l[2]=e=>o.state.ruleForm.PortMapWan=e)},null,8,["modelValue"])])),_:1})])),_:1}),(0,t.bF)(i,{span:12},{default:(0,t.k6)((()=>[(0,t.bF)(d,{label:"å†…ç½‘ç«¯å£",prop:"PortMapLan"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:o.state.ruleForm.PortMapLan,"onUpdate:modelValue":l[3]||(l[3]=e=>o.state.ruleForm.PortMapLan=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1}),o.state.net.HostName?((0,t.uX)(),(0,t.Wv)(d,{key:0,label:"",prop:"alert"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.Lk)("h3",null,(0,n.v_)(o.state.net.HostName),1),(0,t.Lk)("ul",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.state.net.Lans.filter((e=>e.Ips.length>0)),((e,l)=>((0,t.uX)(),(0,t.CE)("li",null,[(0,t.Lk)("div",null,"ã€"+(0,n.v_)(e.Mac||"00-00-00-00-00-00")+"ã€‘"+(0,n.v_)(e.Desc),1),(0,t.Lk)("div",Da,(0,n.v_)(e.Ips.join("ã€")),1)])))),256))]),za,(0,t.Lk)("div",Oa,(0,n.v_)(o.state.net.Routes.join("ã€")),1)])])),_:1})):(0,t.Q3)("",!0),(0,t.bF)(d,{label:"",prop:"Btns"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",Ka,[(0,t.bF)(m,{onClick:l[4]||(l[4]=e=>o.state.show=!1)},{default:(0,t.k6)((()=>[(0,t.eW)("å–æ¶ˆ")])),_:1}),(0,t.bF)(m,{type:"primary",onClick:o.handleSave},{default:(0,t.k6)((()=>[(0,t.eW)("ç¡®è®¤")])),_:1},8,["onClick"])])])),_:1})])),_:1},8,["model","rules"])])])),_:1},8,["modelValue","title"])}var ja=a(90083),Ga={props:["modelValue"],emits:["change","update:modelValue"],setup(e,{emit:l}){const a=(0,Ra.e)(),n=(0,u.KR)(null),o=(0,u.Kh)({show:!0,machineName:a.value.current.device.MachineName,ruleForm:{RouteLevel:a.value.current.RouteLevel,RouteLevelPlus:a.value.current.RouteLevelPlus,PortMapWan:a.value.current.PortMapWan,PortMapLan:a.value.current.PortMapLan},rules:{},net:{}});(0,t.wB)((()=>o.show),(e=>{e||setTimeout((()=>{l("update:modelValue",e)}),300)}));const r=()=>{const e=JSON.parse(JSON.stringify(a.value.current));e.RouteLevel=+o.ruleForm.RouteLevel,e.RouteLevelPlus=+o.ruleForm.RouteLevelPlus,e.PortMapWan=+o.ruleForm.PortMapWan,e.PortMapLan=+o.ruleForm.PortMapLan,(0,ja.KW)(e).then((()=>{o.show=!1,i.nk.success("å·²æ“ä½œï¼"),l("change")})).catch((e=>{console.log(e),i.nk.error("æ“ä½œå¤±è´¥ï¼")}))};return(0,t.sV)((()=>{(0,ja.Zu)(a.value.current.MachineId).then((e=>{o.net=e})).catch((()=>{}))})),{state:o,ruleFormRef:n,handleSave:r,tunnel:a}}};const qa=(0,y.A)(Ga,[["render",Qa],["__scopeId","data-v-6941c158"]]);var Ha=qa;const Ja={class:"nowrap"},Za=["onClick"],Ya={class:"nowrap"},et=["onClick"],lt={class:"nowrap"},at=["onClick"],tt={class:"nowrap"},nt=["onClick"];function ot(e,l,a,o,r,s){const d=(0,t.g2)("ConnectionShow"),u=(0,t.g2)("el-table-column");return(0,t.uX)(),(0,t.Wv)(u,{prop:"forward",label:o.forward.show?"è½¬å‘/ç©¿é€":""},{default:(0,t.k6)((l=>[o.forward.show&&l.row.Connected?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[l.row.isSelf&&(o.hasForwardShowSelf||e.hasForwardSelf)?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[(0,t.Lk)("div",Ja,[(0,t.bF)(d,{data:o.connections.list[l.row.MachineId],row:l.row,transitionId:"forward"},null,8,["data","row"]),(0,t.Lk)("a",{href:"javascript:;",title:"ç®¡ç†è‡ªå·±çš„ç«¯å£è½¬å‘",class:(0,n.C4)({green:o.forward.list[l.row.MachineId]>0}),onClick:e=>o.handleEdit(l.row.MachineId,l.row.MachineName)},[(0,t.Lk)("span",{class:(0,n.C4)({gateway:o.forward.list[l.row.MachineId]>0})},"ç«¯å£è½¬å‘("+(0,n.v_)(o.forward.list[l.row.MachineId]>99?"99+":o.forward.list[l.row.MachineId])+")",3)],10,Za)]),(0,t.Lk)("div",Ya,[(0,t.Lk)("a",{href:"javascript:;",title:"ç®¡ç†è‡ªå·±çš„å†…ç½‘ç©¿é€",class:(0,n.C4)({green:o.sforward.list[l.row.MachineId]>0}),onClick:e=>o.handleSEdit(l.row.MachineId,l.row.MachineName)},[(0,t.Lk)("span",{class:(0,n.C4)({gateway:o.sforward.list[l.row.MachineId]>0})},"å†…ç½‘ç©¿é€("+(0,n.v_)(o.sforward.list[l.row.MachineId]>99?"99+":o.sforward.list[l.row.MachineId])+")",3)],10,et)])],64)):o.hasForwardShowOther||e.hasForwardOther?((0,t.uX)(),(0,t.CE)(t.FK,{key:1},[(0,t.Lk)("div",lt,[(0,t.bF)(d,{data:o.connections.list[l.row.MachineId],row:l.row,transitionId:"forward"},null,8,["data","row"]),(0,t.Lk)("a",{href:"javascript:;",title:"ç®¡ç†è‡ªå·±çš„ç«¯å£è½¬å‘",class:(0,n.C4)({green:o.forward.list[l.row.MachineId]>0}),onClick:e=>o.handleEdit(l.row.MachineId,l.row.MachineName)},[(0,t.Lk)("span",{class:(0,n.C4)({gateway:o.forward.list[l.row.MachineId]>0})},"ç«¯å£è½¬å‘("+(0,n.v_)(o.forward.list[l.row.MachineId]>99?"99+":o.forward.list[l.row.MachineId])+")",3)],10,at)]),(0,t.Lk)("div",tt,[(0,t.Lk)("a",{href:"javascript:;",title:"ç®¡ç†è‡ªå·±çš„å†…ç½‘ç©¿é€",class:(0,n.C4)({green:o.sforward.list[l.row.MachineId]>0}),onClick:e=>o.handleSEdit(l.row.MachineId,l.row.MachineName)},[(0,t.Lk)("span",{class:(0,n.C4)({gateway:o.sforward.list[l.row.MachineId]>0})},"å†…ç½‘ç©¿é€("+(0,n.v_)(o.sforward.list[l.row.MachineId]>99?"99+":o.sforward.list[l.row.MachineId])+")",3)],10,nt)])],64)):(0,t.Q3)("",!0)],64)):(0,t.Q3)("",!0)])),_:1},8,["label"])}var rt=a(10004);const st=e=>(0,rt.zG)("sforward/get",e),dt=()=>(0,rt.zG)("sforward/refresh"),ut=(e="0")=>(0,rt.zG)("sforward/getcount",e),it=e=>(0,rt.zG)("sforward/remove",e),ct=e=>(0,rt.zG)("sforward/add",e),ht=e=>(0,rt.zG)("sforward/TestLocal",e),mt=e=>(0,rt.zG)("sforward/start",e),pt=e=>(0,rt.zG)("sforward/stop",e),gt=Symbol(),wt=()=>{const e=(0,d.B)(),l=((0,t.EW)((()=>e.value.config.Client.Id)),(0,u.KR)({timer:0,showEdit:!1,showCopy:!1,list:{},testTimer:0,hashcode:0,machineid:"",machineName:""}));(0,t.Gt)(gt,l);const a=()=>{dt()},n=()=>{clearTimeout(l.value.timer),ut(l.value.hashcode.toString()).then((e=>{l.value.hashcode=e.HashCode,e.List&&(l.value.list=e.List),l.value.timer=setTimeout(n,1020)})).catch((()=>{l.value.timer=setTimeout(n,1020)}))},o=e=>{l.value.machineid=e[0],l.value.machineName=e[1],l.value.showEdit=!0},r=()=>{clearTimeout(l.value.timer),clearTimeout(l.value.testTimer)};return{sforward:l,_getSForwardCountInfo:n,handleSForwardEdit:o,clearSForwardTimeout:r,handleSForwardRefresh:a}},kt=()=>(0,t.WQ)(gt);var vt={emits:["edit","sedit"],components:{ConnectionShow:Gl.A},setup(e,{emit:l}){const a=w(),n=kt(),o=(0,d.B)(),r=(0,t.EW)((()=>o.value.config.Client.Id)),s=(0,t.EW)((()=>o.value.hasAccess("ForwardShowSelf"))),u=(0,t.EW)((()=>o.value.hasAccess("ForwardShowOther"))),c=(0,t.EW)((()=>o.value.hasAccess("ForwardSelf"))),h=(0,t.EW)((()=>o.value.hasAccess("ForwardOther"))),m=(0,jl.mx)(),p=(e,a)=>{if(r.value===e){if(!c.value)return void i.nk.success("æ— æƒé™")}else if(!h.value)return void i.nk.success("æ— æƒé™");l("edit",[e,a])},g=(e,a)=>{if(r.value===e){if(!c.value)return void i.nk.success("æ— æƒé™")}else if(!h.value)return void i.nk.success("æ— æƒé™");l("sedit",[e,a])},k=()=>{l("refresh")};return{forward:a,sforward:n,hasForwardShowSelf:s,hasForwardShowOther:u,connections:m,handleEdit:p,handleSEdit:g,handleForwardRefresh:k}}};const ft=(0,y.A)(vt,[["render",ot],["__scopeId","data-v-26db2314"]]);var bt=ft;const Ct={class:"t-c head"},Ft=["onClick"],Vt=["onClick"],yt=["onClick"],_t=["onClick"],Et=["title"],Lt={class:"t-c"},It={class:"page-wrap"},Pt=["onClick"],St={key:0},Tt={key:1,class:"error red",title:"off line"},Mt=["onClick"],Wt=["title"];function At(e,l,a,o,r,s){const d=(0,t.g2)("el-button"),u=(0,t.g2)("el-input"),i=(0,t.g2)("el-table-column"),c=(0,t.g2)("el-option"),h=(0,t.g2)("el-select"),m=(0,t.g2)("el-pagination"),p=(0,t.g2)("el-switch"),g=(0,t.g2)("Delete"),w=(0,t.g2)("el-icon"),k=(0,t.g2)("el-popconfirm"),v=(0,t.g2)("el-table"),f=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(f,{modelValue:o.state.show,"onUpdate:modelValue":l[0]||(l[0]=e=>o.state.show=e),onOpen:o.handleOnShowList,"append-to":".app-wrap",title:`ã€${o.state.machineName}ã€‘çš„ç«¯å£è½¬å‘`,top:"1vh",width:"780"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.Lk)("div",Ct,[(0,t.bF)(d,{type:"success",size:"small",onClick:o.handleAdd,loading:o.state.loading},{default:(0,t.k6)((()=>[(0,t.eW)("æ·»åŠ ")])),_:1},8,["onClick","loading"]),(0,t.bF)(d,{size:"small",onClick:o.handleRefresh},{default:(0,t.k6)((()=>[(0,t.eW)("åˆ·æ–°")])),_:1},8,["onClick"])]),(0,t.bF)(v,{data:o.state.data,size:"small",border:"",height:"500",onCellDblclick:o.handleCellClick},{default:(0,t.k6)((()=>[(0,t.bF)(i,{property:"Name",label:"åç§°",width:"100"},{default:(0,t.k6)((e=>[e.row.NameEditing&&0==e.row.Started?((0,t.uX)(),(0,t.Wv)(u,{key:0,autofocus:"",size:"small",modelValue:e.row.Name,"onUpdate:modelValue":l=>e.row.Name=l,onBlur:l=>o.handleEditBlur(e.row,"Name")},null,8,["modelValue","onUpdate:modelValue","onBlur"])):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>o.handleEdit(e.row,"Name")},(0,n.v_)(e.row.Name||"æœªçŸ¥"),9,Ft))])),_:1}),(0,t.bF)(i,{prop:"BufferSize",label:"ç¼“å†²åŒº",width:"80"},{default:(0,t.k6)((e=>[e.row.BufferSizeEditing&&0==e.row.Started?((0,t.uX)(),(0,t.Wv)(h,{key:0,modelValue:e.row.BufferSize,"onUpdate:modelValue":l=>e.row.BufferSize=l,placeholder:"Select",size:"small",disabled:e.row.Started,onChange:l=>o.handleEditBlur(e.row,"BufferSize")},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.state.bufferSize,((e,l)=>((0,t.uX)(),(0,t.Wv)(c,{key:l,label:e,value:l},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","disabled","onChange"])):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>o.handleEdit(e.row,"BufferSize")},(0,n.v_)(o.state.bufferSize[e.row.BufferSize]),9,Vt))])),_:1}),(0,t.bF)(i,{property:"BindIPAddress",label:"ç›‘å¬IP",width:"140"},{default:(0,t.k6)((e=>[e.row.BindIPAddressEditing&&0==e.row.Started?((0,t.uX)(),(0,t.Wv)(h,{key:0,modelValue:e.row.BindIPAddress,"onUpdate:modelValue":l=>e.row.BindIPAddress=l,size:"small",disabled:e.row.Started,onChange:l=>o.handleEditBlur(e.row,"BindIPAddress")},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.state.ips,(e=>((0,t.uX)(),(0,t.Wv)(c,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","disabled","onChange"])):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>o.handleEdit(e.row,"BindIPAddress")},(0,n.v_)(e.row.BindIPAddress),9,yt))])),_:1}),(0,t.bF)(i,{property:"Port",label:"ç›‘å¬ç«¯å£",width:"80"},{default:(0,t.k6)((e=>[e.row.PortEditing&&0==e.row.Started?((0,t.uX)(),(0,t.Wv)(u,{key:0,type:"number",autofocus:"",size:"small",modelValue:e.row.Port,"onUpdate:modelValue":l=>e.row.Port=l,onBlur:l=>o.handleEditBlur(e.row,"Port")},null,8,["modelValue","onUpdate:modelValue","onBlur"])):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>o.handleEdit(e.row,"Port")},[e.row.Msg?((0,t.uX)(),(0,t.CE)("div",{key:0,class:"error red",title:e.row.Msg},[(0,t.Lk)("span",null,(0,n.v_)(e.row.Port),1)],8,Et)):((0,t.uX)(),(0,t.CE)("span",{key:1,class:(0,n.C4)({green:e.row.Started})},(0,n.v_)(e.row.Port),3))],8,_t))])),_:1}),(0,t.bF)(i,{property:"MachineId",label:"ç›®æ ‡"},{default:(0,t.k6)((e=>[e.row.MachineIdEditing&&0==e.row.Started?((0,t.uX)(),(0,t.Wv)(h,{key:0,modelValue:e.row.MachineId,"onUpdate:modelValue":l=>e.row.MachineId=l,onChange:l=>o.handleEditBlur(e.row,"MachineId"),filterable:"",remote:"",loading:o.state.loading,"remote-method":o.handleSearch},{header:(0,t.k6)((()=>[(0,t.Lk)("div",Lt,[(0,t.Lk)("div",It,[(0,t.bF)(m,{small:"",background:"",layout:"prev, pager, next","page-size":o.state.machineIds.Request.Size,total:o.state.machineIds.Count,"pager-count":5,"current-page":o.state.machineIds.Request.Page,onCurrentChange:o.handlePageChange},null,8,["page-size","total","current-page","onCurrentChange"])])])])),default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.state.machineIds.List,((e,l)=>((0,t.uX)(),(0,t.Wv)(c,{key:l,label:e.MachineName,value:e.MachineId},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","onChange","loading","remote-method"])):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>o.handleEdit(e.row,"MachineId")},[o.state.names[e.row.MachineId]?((0,t.uX)(),(0,t.CE)("span",St,(0,n.v_)(e.row.MachineName||"æœªçŸ¥"),1)):((0,t.uX)(),(0,t.CE)("span",Tt,(0,n.v_)(e.row.MachineName||"æœªçŸ¥"),1))],8,Pt))])),_:1}),(0,t.bF)(i,{property:"TargetEP",label:"ç›®æ ‡æœåŠ¡",width:"140"},{default:(0,t.k6)((e=>[e.row.TargetEPEditing&&0==e.row.Started?((0,t.uX)(),(0,t.Wv)(u,{key:0,autofocus:"",size:"small",modelValue:e.row.TargetEP,"onUpdate:modelValue":l=>e.row.TargetEP=l,onBlur:l=>o.handleEditBlur(e.row,"TargetEP")},null,8,["modelValue","onUpdate:modelValue","onBlur"])):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>o.handleEdit(e.row,"TargetEP")},[e.row.TargetMsg?((0,t.uX)(),(0,t.CE)("div",{key:0,class:"error red",title:e.row.TargetMsg},[(0,t.Lk)("span",null,(0,n.v_)(e.row.TargetEP),1)],8,Wt)):((0,t.uX)(),(0,t.CE)("span",{key:1,class:(0,n.C4)({green:e.row.Started})},(0,n.v_)(e.row.TargetEP),3))],8,Mt))])),_:1}),(0,t.bF)(i,{property:"Started",label:"çŠ¶æ€",width:"60"},{default:(0,t.k6)((e=>[(0,t.bF)(p,{modelValue:e.row.Started,"onUpdate:modelValue":l=>e.row.Started=l,onChange:l=>o.handleStartChange(e.row),"inline-prompt":"","active-text":"å¼€","inactive-text":"å…³"},null,8,["modelValue","onUpdate:modelValue","onChange"])])),_:1}),(0,t.bF)(i,{label:"æ“ä½œ",width:"54"},{default:(0,t.k6)((e=>[(0,t.bF)(k,{"confirm-button-text":"ç¡®è®¤","cancel-button-text":"å–æ¶ˆ",title:"åˆ é™¤ä¸å¯é€†ï¼Œæ˜¯å¦ç¡®è®¤?",onConfirm:l=>o.handleDel(e.row.Id)},{reference:(0,t.k6)((()=>[(0,t.bF)(d,{type:"danger",size:"small"},{default:(0,t.k6)((()=>[(0,t.bF)(w,null,{default:(0,t.k6)((()=>[(0,t.bF)(g)])),_:1})])),_:1})])),_:2},1032,["onConfirm"])])),_:1})])),_:1},8,["data","onCellDblclick"])])])),_:1},8,["modelValue","onOpen","title"])}var Xt={props:["data","modelValue"],emits:["update:modelValue"],components:{Delete:F.epd},setup(e,{emit:l}){const a=(0,d.B)(),n=w(),o=(0,u.Kh)({show:!0,machineId:n.value.machineId,machineName:n.value.machineName,data:[],ips:[],bufferSize:a.value.bufferSize,loading:!1,machineIds:{Request:{Page:1,Size:10,Name:""},Count:0,List:[]},timer:0,timer1:0,editing:!1,names:{}});(0,t.wB)((()=>o.show),(e=>{e||setTimeout((()=>{l("update:modelValue",e)}),300)}));const r=()=>{clearTimeout(o.timer),(0,m.lE)(n.value.machineId).then((e=>{o.timer=setTimeout(r,1e3)})).catch((()=>{o.timer=setTimeout(r,1e3)}))},s=()=>{(0,m.xD)().then((e=>{e.splice(0,0,"127.0.0.1"),e.splice(0,0,"0.0.0.0"),o.ips=e})).catch((()=>{}))},c=()=>{clearTimeout(o.timer1),0==o.editing?(0,m.Oy)(o.machineId).then((e=>{o.data=e,o.timer1=setTimeout(c,1e3)})).catch((()=>{o.timer1=setTimeout(c,1e3)})):o.timer1=setTimeout(c,1e3)},h=()=>{c(),i.nk.success("å·²åˆ·æ–°")},p=()=>{(0,Q.NT)().then((e=>{o.names=e.filter((e=>e.Online)).reduce(((e,l)=>(e[l.MachineId]=!0,e)),{})})).catch((()=>{}))},g=e=>{o.machineIds.Request.Name=e,k()},k=()=>{o.loading=!0,(0,Q.BS)(o.machineIds.Request).then((e=>{o.loading=!1,o.machineIds.Request=e.Request,o.machineIds.Count=e.Count,o.machineIds.List=e.List})).catch((e=>{o.loading=!1}))},v=e=>{o.machineIds.Request.Page=e,k()},f=()=>{k()},b=(e,l)=>{F(e,l.property)},C=()=>{E({ID:0,Name:"",Port:0,TargetEP:"127.0.0.1:80",machineId:""})},F=(e,l)=>{e.Started?i.nk.error("è¯·å…ˆåœæ­¢"):(o.data.forEach((e=>{e["NameEditing"]=!1,e["PortEditing"]=!1,e["TargetEPEditing"]=!1,e["BindIPAddressEditing"]=!1,e["BufferSizeEditing"]=!1,e["MachineIdEditing"]=!1})),e[`${l}Editing`]=!0,o.editing=!0)},V=(e,l)=>{if(e.Started)return void i.nk.error("è¯·å…ˆåœæ­¢");e[`${l}Editing`]=!1,o.editing=!1;const a=o.machineIds.List.find((l=>l.MachineId==e.MachineId));a&&(e.MachineName=a.MachineName),E(e)},y=e=>{(0,m.we)({machineId:o.machineId,Id:e}).then((()=>{c()}))},_=e=>{E(e)},E=e=>{o.loading=!0,e.Port=parseInt(e.Port),(0,m.nH)({machineId:o.machineId,data:e}).then((()=>{o.loading=!1,c()})).catch((e=>{o.loading=!1,i.nk.error(e)}))};return(0,t.sV)((()=>{c(),s(),r(),p()})),(0,t.hi)((()=>{clearTimeout(o.timer),clearTimeout(o.timer1)})),{state:o,handleOnShowList:f,handleCellClick:b,handleRefresh:h,handleAdd:C,handleEdit:F,handleEditBlur:V,handleDel:y,handleStartChange:_,handleSearch:g,handlePageChange:v}}};const Rt=(0,y.A)(Xt,[["render",At],["__scopeId","data-v-aaafd500"]]);var xt=Rt;const Nt={class:"t-c head"},Ut=["onClick"],$t={class:"plan"},Bt=["onClick"],Dt=["title"],zt=["onClick"],Ot=["title"];function Kt(e,l,a,o,r,s){const d=(0,t.g2)("el-button"),u=(0,t.g2)("el-input"),i=(0,t.g2)("el-table-column"),c=(0,t.g2)("Select"),h=(0,t.g2)("el-icon"),m=(0,t.g2)("PlanShow"),p=(0,t.g2)("CloseBold"),g=(0,t.g2)("WarnTriangleFilled"),w=(0,t.g2)("el-switch"),k=(0,t.g2)("Delete"),v=(0,t.g2)("el-popconfirm"),f=(0,t.g2)("el-table"),b=(0,t.g2)("el-dialog"),C=(0,t.g2)("PlanList");return(0,t.uX)(),(0,t.Wv)(C,{ref:"planDom",machineid:o.machineId,category:"sforward",handles:o.state.handles},{default:(0,t.k6)((()=>[(0,t.bF)(b,{modelValue:o.state.show,"onUpdate:modelValue":l[0]||(l[0]=e=>o.state.show=e),onOpen:o.handleOnShowList,"append-to":".app-wrap",title:`ã€${o.machineName}ã€‘çš„å†…ç½‘ç©¿é€`,top:"2vh",width:"98%"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.Lk)("div",Nt,[(0,t.bF)(d,{type:"success",size:"small",onClick:o.handleAdd,loading:o.state.loading},{default:(0,t.k6)((()=>[(0,t.eW)("æ·»åŠ ")])),_:1},8,["onClick","loading"]),(0,t.bF)(d,{size:"small",onClick:o.handleRefresh},{default:(0,t.k6)((()=>[(0,t.eW)("åˆ·æ–°")])),_:1},8,["onClick"])]),(0,t.bF)(f,{data:o.state.data,size:"small",border:"",height:"500",onCellDblclick:o.handleCellClick},{default:(0,t.k6)((()=>[(0,t.bF)(i,{property:"Name",label:"åç§°"},{default:(0,t.k6)((e=>[e.row.NameEditing&&0==e.row.Started?((0,t.uX)(),(0,t.Wv)(u,{key:0,autofocus:"",size:"small",modelValue:e.row.Name,"onUpdate:modelValue":l=>e.row.Name=l,onBlur:l=>o.handleEditBlur(e.row,"Name")},null,8,["modelValue","onUpdate:modelValue","onBlur"])):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>o.handleEdit(e.row,"Name")},(0,n.v_)(e.row.Name||"æœªçŸ¥"),9,Ut))])),_:1}),(0,t.bF)(i,{prop:"Plan",label:"å¼€å¯å’Œå…³é—­è®¡åˆ’",width:"200"},{default:(0,t.k6)((e=>[(0,t.Lk)("div",$t,[(0,t.Lk)("p",null,[(0,t.bF)(h,null,{default:(0,t.k6)((()=>[(0,t.bF)(c)])),_:1}),(0,t.bF)(m,{handle:"start",keyid:e.row.Id},null,8,["keyid"])]),(0,t.Lk)("p",null,[(0,t.bF)(h,null,{default:(0,t.k6)((()=>[(0,t.bF)(p)])),_:1}),(0,t.bF)(m,{handle:"stop",keyid:e.row.Id},null,8,["keyid"])])])])),_:1}),(0,t.bF)(i,{property:"Temp",label:"æœåŠ¡å™¨ç«¯å£/åŸŸå",width:"160"},{default:(0,t.k6)((e=>[e.row.TempEditing&&0==e.row.Started?((0,t.uX)(),(0,t.Wv)(u,{key:0,autofocus:"",size:"small",modelValue:e.row.Temp,"onUpdate:modelValue":l=>e.row.Temp=l,onBlur:l=>o.handleEditBlur(e.row,"Temp")},null,8,["modelValue","onUpdate:modelValue","onBlur"])):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>o.handleEdit(e.row,"Temp")},[e.row.Msg?((0,t.uX)(),(0,t.CE)("div",{key:0,class:"error red",title:e.row.Msg},[(0,t.Lk)("span",null,(0,n.v_)(e.row.Temp),1),(0,t.bF)(h,{size:"20"},{default:(0,t.k6)((()=>[(0,t.bF)(g)])),_:1})],8,Dt)):((0,t.uX)(),(0,t.CE)("span",{key:1,class:(0,n.C4)({green:e.row.Started})},(0,n.v_)(e.row.Temp),3))],8,Bt))])),_:1}),(0,t.bF)(i,{property:"LocalEP",label:"æœ¬æœºæœåŠ¡",width:"140"},{default:(0,t.k6)((e=>[e.row.LocalEPEditing&&0==e.row.Started?((0,t.uX)(),(0,t.Wv)(u,{key:0,autofocus:"",size:"small",modelValue:e.row.LocalEP,"onUpdate:modelValue":l=>e.row.LocalEP=l,onBlur:l=>o.handleEditBlur(e.row,"LocalEP")},null,8,["modelValue","onUpdate:modelValue","onBlur"])):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>o.handleEdit(e.row,"LocalEP")},[e.row.LocalMsg?((0,t.uX)(),(0,t.CE)("div",{key:0,class:"error red",title:e.row.LocalMsg},[(0,t.Lk)("span",null,(0,n.v_)(e.row.LocalEP),1),(0,t.bF)(h,{size:"20"},{default:(0,t.k6)((()=>[(0,t.bF)(g)])),_:1})],8,Ot)):((0,t.uX)(),(0,t.CE)("span",{key:1,class:(0,n.C4)({green:e.row.Started})},(0,n.v_)(e.row.LocalEP),3))],8,zt))])),_:1}),(0,t.bF)(i,{property:"Started",label:"çŠ¶æ€",width:"60"},{default:(0,t.k6)((e=>[(0,t.bF)(w,{disabled:"",modelValue:e.row.Started,"onUpdate:modelValue":l=>e.row.Started=l,"inline-prompt":"","active-text":"æ˜¯","inactive-text":"å¦",onClick:l=>o.handleStartChange(e.row)},null,8,["modelValue","onUpdate:modelValue","onClick"])])),_:1}),(0,t.bF)(i,{label:"æ“ä½œ",width:"54"},{default:(0,t.k6)((e=>[(0,t.bF)(v,{"confirm-button-text":"ç¡®è®¤","cancel-button-text":"å–æ¶ˆ",title:"åˆ é™¤ä¸å¯é€†ï¼Œæ˜¯å¦ç¡®è®¤?",onConfirm:l=>o.handleDel(e.row.Id)},{reference:(0,t.k6)((()=>[(0,t.bF)(d,{type:"danger",size:"small"},{default:(0,t.k6)((()=>[(0,t.bF)(h,null,{default:(0,t.k6)((()=>[(0,t.bF)(k)])),_:1})])),_:1})])),_:2},1032,["onConfirm"])])),_:1})])),_:1},8,["data","onCellDblclick"])])])),_:1},8,["modelValue","onOpen","title"])])),_:1},8,["machineid","handles"])}function Qt(e,l,a,n,o,r){const s=(0,t.g2)("PlanEdit");return(0,t.uX)(),(0,t.CE)("div",null,[(0,t.RG)(e.$slots,"default"),n.plan.showEdit?((0,t.uX)(),(0,t.Wv)(s,{key:0,modelValue:n.plan.showEdit,"onUpdate:modelValue":l[0]||(l[0]=e=>n.plan.showEdit=e)},null,8,["modelValue"])):(0,t.Q3)("",!0)])}const jt=(e,l)=>(0,rt.zG)("plan/get",{machineId:e,category:l}),Gt=(e,l)=>(0,rt.zG)("plan/add",{machineId:e,plan:l}),qt=(e,l)=>(0,rt.zG)("plan/remove",{machineId:e,planId:l}),Ht={key:0,class:"mgl-2"},Jt={class:"w-100"},Zt=(0,t.Lk)("span",null,"çš„",-1),Yt={class:"w-100 mgt-1"},en={class:"w-100"},ln={class:"w-100 mgt-1"},an={class:"w-100"},tn={class:"w-100 mgt-1"},nn={class:"w-100"},on=(0,t.Lk)("span",null,"çš„",-1),rn={class:"mgt-1 w-100"},sn={class:"mgt-1 w-100"},dn=(0,t.Lk)("span",null,"åŽ",-1),un={class:"t-c w-100"};function cn(e,l,a,o,r,s){const d=(0,t.g2)("el-option"),u=(0,t.g2)("el-select"),i=(0,t.g2)("el-form-item"),c=(0,t.g2)("el-input"),h=(0,t.g2)("el-switch"),m=(0,t.g2)("el-button"),p=(0,t.g2)("el-form"),g=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(g,{modelValue:o.state.show,"onUpdate:modelValue":l[30]||(l[30]=e=>o.state.show=e),"close-on-click-modal":!1,"append-to":".app-wrap",title:"è®¡åˆ’ä»»åŠ¡",top:"2vh",width:"450"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(p,{ref:"ruleFormRef",model:o.state.ruleForm,rules:o.state.rules,"label-width":"auto"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{label:"æ‰§è¡Œæ“ä½œ",prop:"Handle"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{modelValue:o.state.ruleForm.Handle,"onUpdate:modelValue":l[0]||(l[0]=e=>o.state.ruleForm.Handle=e),style:{width:"10rem"},disabled:""},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.plan.handles,((e,l)=>((0,t.uX)(),(0,t.Wv)(d,{value:e.value,label:e.label},null,8,["value","label"])))),256))])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(i,{label:"æ‰§è¡Œæ–¹å¼",prop:"Method"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{modelValue:o.state.ruleForm.Method,"onUpdate:modelValue":l[1]||(l[1]=e=>o.state.ruleForm.Method=e),style:{width:"10rem"},onChange:o.handleChange},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.plan.methods,((e,l)=>((0,t.uX)(),(0,t.Wv)(d,{value:e.value,label:e.label},null,8,["value","label"])))),256))])),_:1},8,["modelValue","onChange"]),o.state.ruleForm.Method>=2?((0,t.uX)(),(0,t.CE)("strong",Ht,(0,n.v_)(o.state.ruleForm.Rule),1)):(0,t.Q3)("",!0)])),_:1}),2==o.state.ruleForm.Method?((0,t.uX)(),(0,t.Wv)(i,{key:0,label:"åœ¨",prop:"Rule"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",Jt,[(0,t.bF)(u,{modelValue:o.state.ruleAt.type,"onUpdate:modelValue":l[2]||(l[2]=e=>o.state.ruleAt.type=e),style:{width:"10rem"},onChange:o.handleChange},{default:(0,t.k6)((()=>[(0,t.bF)(d,{value:2,label:"æ¯æœˆ"}),(0,t.bF)(d,{value:3,label:"æ¯æ—¥"}),(0,t.bF)(d,{value:4,label:"æ¯æ—¶"}),(0,t.bF)(d,{value:5,label:"æ¯åˆ†"})])),_:1},8,["modelValue","onChange"]),(0,t.eW)(),Zt]),(0,t.Lk)("div",Yt,[o.state.ruleAt.type<2?((0,t.uX)(),(0,t.Wv)(c,{key:0,onChange:o.handleChange,modelValue:o.state.ruleAt.month,"onUpdate:modelValue":l[3]||(l[3]=e=>o.state.ruleAt.month=e),style:{width:"8rem"}},{append:(0,t.k6)((()=>[(0,t.eW)("æœˆ")])),_:1},8,["onChange","modelValue"])):(0,t.Q3)("",!0),o.state.ruleAt.type<3?((0,t.uX)(),(0,t.Wv)(c,{key:1,onChange:o.handleChange,class:(0,n.C4)({"mgl-1":o.state.ruleAt.type<2}),modelValue:o.state.ruleAt.day,"onUpdate:modelValue":l[4]||(l[4]=e=>o.state.ruleAt.day=e),style:{width:"8rem"}},{append:(0,t.k6)((()=>[(0,t.eW)("æ—¥")])),_:1},8,["onChange","class","modelValue"])):(0,t.Q3)("",!0),o.state.ruleAt.type<4?((0,t.uX)(),(0,t.Wv)(c,{key:2,onChange:o.handleChange,class:(0,n.C4)({"mgl-1":o.state.ruleAt.type<3}),modelValue:o.state.ruleAt.hour,"onUpdate:modelValue":l[5]||(l[5]=e=>o.state.ruleAt.hour=e),style:{width:"8rem"}},{append:(0,t.k6)((()=>[(0,t.eW)("æ—¶")])),_:1},8,["onChange","class","modelValue"])):(0,t.Q3)("",!0),o.state.ruleAt.type<5?((0,t.uX)(),(0,t.Wv)(c,{key:3,onChange:o.handleChange,class:(0,n.C4)({"mgl-1":o.state.ruleAt.type<4}),modelValue:o.state.ruleAt.min,"onUpdate:modelValue":l[6]||(l[6]=e=>o.state.ruleAt.min=e),style:{width:"8rem"}},{append:(0,t.k6)((()=>[(0,t.eW)("åˆ†")])),_:1},8,["onChange","class","modelValue"])):(0,t.Q3)("",!0),(0,t.bF)(c,{onChange:o.handleChange,class:(0,n.C4)({"mgl-1":o.state.ruleAt.type<5}),modelValue:o.state.ruleAt.sec,"onUpdate:modelValue":l[7]||(l[7]=e=>o.state.ruleAt.sec=e),style:{width:"8rem"}},{append:(0,t.k6)((()=>[(0,t.eW)("ç§’")])),_:1},8,["onChange","class","modelValue"])])])),_:1})):(0,t.Q3)("",!0),4==o.state.ruleForm.Method?((0,t.uX)(),(0,t.Wv)(i,{key:1,label:"æ¯",prop:"Rule"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",en,[(0,t.bF)(c,{onChange:o.handleChange,modelValue:o.state.ruleTimer.year,"onUpdate:modelValue":l[8]||(l[8]=e=>o.state.ruleTimer.year=e),style:{width:"8rem"}},{append:(0,t.k6)((()=>[(0,t.eW)("å¹´")])),_:1},8,["onChange","modelValue"]),(0,t.bF)(c,{onChange:o.handleChange,class:"mgl-1",modelValue:o.state.ruleTimer.month,"onUpdate:modelValue":l[9]||(l[9]=e=>o.state.ruleTimer.month=e),style:{width:"8rem"}},{append:(0,t.k6)((()=>[(0,t.eW)("æœˆ")])),_:1},8,["onChange","modelValue"]),(0,t.bF)(c,{onChange:o.handleChange,class:"mgl-1",modelValue:o.state.ruleTimer.day,"onUpdate:modelValue":l[10]||(l[10]=e=>o.state.ruleTimer.day=e),style:{width:"8rem"}},{append:(0,t.k6)((()=>[(0,t.eW)("æ—¥")])),_:1},8,["onChange","modelValue"])]),(0,t.Lk)("div",ln,[(0,t.bF)(c,{onChange:o.handleChange,modelValue:o.state.ruleTimer.hour,"onUpdate:modelValue":l[11]||(l[11]=e=>o.state.ruleTimer.hour=e),style:{width:"8rem"}},{append:(0,t.k6)((()=>[(0,t.eW)("æ—¶")])),_:1},8,["onChange","modelValue"]),(0,t.bF)(c,{onChange:o.handleChange,class:"mgl-1",modelValue:o.state.ruleTimer.min,"onUpdate:modelValue":l[12]||(l[12]=e=>o.state.ruleTimer.min=e),style:{width:"8rem"}},{append:(0,t.k6)((()=>[(0,t.eW)("åˆ†")])),_:1},8,["onChange","modelValue"]),(0,t.bF)(c,{onChange:o.handleChange,class:"mgl-1",modelValue:o.state.ruleTimer.sec,"onUpdate:modelValue":l[13]||(l[13]=e=>o.state.ruleTimer.sec=e),style:{width:"8rem"}},{append:(0,t.k6)((()=>[(0,t.eW)("ç§’")])),_:1},8,["onChange","modelValue"])])])),_:1})):(0,t.Q3)("",!0),8==o.state.ruleForm.Method?((0,t.uX)(),(0,t.Wv)(i,{key:2,label:"Cron",prop:"Rule"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",an,[(0,t.bF)(c,{onChange:o.handleChange,modelValue:o.state.ruleCron.sec,"onUpdate:modelValue":l[14]||(l[14]=e=>o.state.ruleCron.sec=e),style:{width:"8rem"}},{append:(0,t.k6)((()=>[(0,t.eW)("ç§’")])),_:1},8,["onChange","modelValue"]),(0,t.bF)(c,{onChange:o.handleChange,class:"mgl-1",modelValue:o.state.ruleCron.min,"onUpdate:modelValue":l[15]||(l[15]=e=>o.state.ruleCron.min=e),style:{width:"8rem"}},{append:(0,t.k6)((()=>[(0,t.eW)("åˆ†")])),_:1},8,["onChange","modelValue"]),(0,t.bF)(c,{onChange:o.handleChange,class:"mgl-1",modelValue:o.state.ruleCron.hour,"onUpdate:modelValue":l[16]||(l[16]=e=>o.state.ruleCron.hour=e),style:{width:"8rem"}},{append:(0,t.k6)((()=>[(0,t.eW)("æ—¶")])),_:1},8,["onChange","modelValue"])]),(0,t.Lk)("div",tn,[(0,t.bF)(c,{onChange:o.handleChange,modelValue:o.state.ruleCron.day,"onUpdate:modelValue":l[17]||(l[17]=e=>o.state.ruleCron.day=e),style:{width:"8rem"}},{append:(0,t.k6)((()=>[(0,t.eW)("æ—¥")])),_:1},8,["onChange","modelValue"]),(0,t.bF)(c,{onChange:o.handleChange,class:"mgl-1",modelValue:o.state.ruleCron.month,"onUpdate:modelValue":l[18]||(l[18]=e=>o.state.ruleCron.month=e),style:{width:"8rem"}},{append:(0,t.k6)((()=>[(0,t.eW)("æœˆ")])),_:1},8,["onChange","modelValue"]),(0,t.bF)(c,{onChange:o.handleChange,class:"mgl-1",modelValue:o.state.ruleCron.week,"onUpdate:modelValue":l[19]||(l[19]=e=>o.state.ruleCron.week=e),style:{width:"8rem"}},{append:(0,t.k6)((()=>[(0,t.eW)("å‘¨")])),_:1},8,["onChange","modelValue"])])])),_:1})):(0,t.Q3)("",!0),16==o.state.ruleForm.Method?((0,t.uX)(),(0,t.Wv)(i,{key:3,label:"åœ¨",prop:"Rule"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",nn,[(0,t.bF)(u,{modelValue:o.state.ruleForm.TriggerHandle,"onUpdate:modelValue":l[20]||(l[20]=e=>o.state.ruleForm.TriggerHandle=e),style:{width:"10rem"},onChange:o.handleChange},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.plan.triggers,((e,l)=>((0,t.uX)(),(0,t.Wv)(d,{value:e.value,label:e.label},null,8,["value","label"])))),256))])),_:1},8,["modelValue","onChange"]),(0,t.eW)(),on]),(0,t.Lk)("div",rn,[(0,t.bF)(c,{onChange:o.handleChange,modelValue:o.state.ruleTrigger.year,"onUpdate:modelValue":l[21]||(l[21]=e=>o.state.ruleTrigger.year=e),style:{width:"8rem"}},{append:(0,t.k6)((()=>[(0,t.eW)("å¹´")])),_:1},8,["onChange","modelValue"]),(0,t.bF)(c,{onChange:o.handleChange,class:"mgl-1",modelValue:o.state.ruleTrigger.month,"onUpdate:modelValue":l[22]||(l[22]=e=>o.state.ruleTrigger.month=e),style:{width:"8rem"}},{append:(0,t.k6)((()=>[(0,t.eW)("æœˆ")])),_:1},8,["onChange","modelValue"]),(0,t.bF)(c,{onChange:o.handleChange,class:"mgl-1",modelValue:o.state.ruleTrigger.day,"onUpdate:modelValue":l[23]||(l[23]=e=>o.state.ruleTrigger.day=e),style:{width:"8rem"}},{append:(0,t.k6)((()=>[(0,t.eW)("æ—¥")])),_:1},8,["onChange","modelValue"])]),(0,t.Lk)("div",sn,[(0,t.bF)(c,{onChange:o.handleChange,modelValue:o.state.ruleTrigger.hour,"onUpdate:modelValue":l[24]||(l[24]=e=>o.state.ruleTrigger.hour=e),style:{width:"8rem"}},{append:(0,t.k6)((()=>[(0,t.eW)("æ—¶")])),_:1},8,["onChange","modelValue"]),(0,t.bF)(c,{onChange:o.handleChange,class:"mgl-1",modelValue:o.state.ruleTrigger.min,"onUpdate:modelValue":l[25]||(l[25]=e=>o.state.ruleTrigger.min=e),style:{width:"8rem"}},{append:(0,t.k6)((()=>[(0,t.eW)("åˆ†")])),_:1},8,["onChange","modelValue"]),(0,t.bF)(c,{onChange:o.handleChange,class:"mgl-1",modelValue:o.state.ruleTrigger.sec,"onUpdate:modelValue":l[26]||(l[26]=e=>o.state.ruleTrigger.sec=e),style:{width:"8rem"}},{append:(0,t.k6)((()=>[(0,t.eW)("ç§’")])),_:1},8,["onChange","modelValue"]),dn])])),_:1})):(0,t.Q3)("",!0),(0,t.bF)(i,{label:"å†…å®¹",prop:"Value"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{type:"textarea",resize:"none",rows:"5",modelValue:o.state.ruleForm.Value,"onUpdate:modelValue":l[27]||(l[27]=e=>o.state.ruleForm.Value=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(i,{label:"ç¦ç”¨",prop:"Disabled"},{default:(0,t.k6)((()=>[(0,t.bF)(h,{modelValue:o.state.ruleForm.Disabled,"onUpdate:modelValue":l[28]||(l[28]=e=>o.state.ruleForm.Disabled=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(i,{label:"",prop:"Btns"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",un,[(0,t.bF)(m,{onClick:l[29]||(l[29]=e=>o.state.show=!1)},{default:(0,t.k6)((()=>[(0,t.eW)("å–æ¶ˆ")])),_:1}),(0,t.bF)(m,{type:"primary",onClick:o.handleSave,loading:o.state.loading},{default:(0,t.k6)((()=>[(0,t.eW)("ç¡®è®¤")])),_:1},8,["onClick","loading"])])])),_:1})])),_:1},8,["model","rules"])])])),_:1},8,["modelValue"])}var hn={props:["data","modelValue"],emits:["change","update:modelValue"],setup(e,{emit:l}){const a=/(\d+|\*)-(\d+|\*)-(\d+|\*)\s+(\d+|\*):(\d+|\*):(\d+|\*)/,n=/(\d+)-(\d+)-(\d+)\s+(\d+):(\d+):(\d+)/,o=/(.+)\s+(.+)\s+(.+)\s+(.+)\s+(.+)\s+(.+)/,r=(0,u.KR)(null),s=(0,t.WQ)("plan");!s.value.current.TriggerHandle&&s.value.triggers.length>0&&(s.value.current.TriggerHandle=s.value.triggers[0].value);const d=(0,u.Kh)({show:!0,loading:!1,ruleCron:{week:"*",month:"*",day:"*",hour:"*",min:"*",sec:"30"},ruleAt:{type:3,month:"*",day:"*",hour:0,min:0,sec:0},ruleTimer:{year:0,month:0,day:0,hour:0,min:0,sec:30},ruleTrigger:{year:0,month:0,day:0,hour:0,min:0,sec:30},ruleForm:{Id:s.value.current.Id,Category:s.value.current.Category,Key:s.value.current.Key,Value:s.value.current.Value,Rule:s.value.current.Rule,Handle:s.value.current.Handle,Method:s.value.current.Method,Disabled:s.value.current.Disabled,TriggerHandle:s.value.current.TriggerHandle},rules:{}});(0,t.wB)((()=>d.show),(e=>{e||setTimeout((()=>{l("update:modelValue",e)}),300)}));const i={2:e=>{if(e=e||"*-*-* 0:0:0",0==a.test(e))return;const[,l,t,n,o,r,s]=e.match(a);"*"==r?d.ruleAt.type=5:"*"==o?d.ruleAt.type=4:"*"==n?d.ruleAt.type=3:"*"==t&&(d.ruleAt.type=2),d.ruleAt.year=l,d.ruleAt.month=t,d.ruleAt.day=n,d.ruleAt.hour=o,d.ruleAt.min=r,d.ruleAt.sec=s},4:e=>{if(e=e||"0-0-0 0:0:30",0==n.test(e))return;const[,l,a,t,o,r,s]=e.match(n);d.ruleTimer.year=l,d.ruleTimer.month=a,d.ruleTimer.day=t,d.ruleTimer.hour=o,d.ruleTimer.min=r,d.ruleTimer.sec=s},8:e=>{if(e=e||"30 * * * * ?",0==o.test(e))return;const[,l,a,t,n,r,s]=e.match(o);d.ruleCron.sec=l,d.ruleCron.min=a,d.ruleCron.hour=t,d.ruleCron.day=n,d.ruleCron.month=r,d.ruleCron.week=s},16:e=>{if(e=e||"0-0-0 0:0:30",0==n.test(e))return;const[,l,a,t,o,r,s]=e.match(n);d.ruleTrigger.year=l,d.ruleTrigger.month=a,d.ruleTrigger.day=t,d.ruleTrigger.hour=o,d.ruleTrigger.min=r,d.ruleTrigger.sec=s}},c=()=>{d.ruleForm.Method in i&&i[d.ruleForm.Method](d.ruleForm.Rule)},h={2:()=>{switch(d.ruleAt.type){case 2:return`*-*-${d.ruleAt.day} ${d.ruleAt.hour}:${d.ruleAt.min}:${d.ruleAt.sec}`;case 3:return`*-*-* ${d.ruleAt.hour}:${d.ruleAt.min}:${d.ruleAt.sec}`;case 4:return`*-*-* *:${d.ruleAt.min}:${d.ruleAt.sec}`;case 5:return`*-*-* *:*:${d.ruleAt.sec}`}return""},4:()=>`${d.ruleTimer.year}-${d.ruleTimer.month}-${d.ruleTimer.day} ${d.ruleTimer.hour}:${d.ruleTimer.min}:${d.ruleTimer.sec}`,8:()=>`${d.ruleCron.sec} ${d.ruleCron.min} ${d.ruleCron.hour} ${d.ruleCron.day} ${d.ruleCron.month} ${d.ruleCron.week}`,16:()=>`${d.ruleTrigger.year}-${d.ruleTrigger.month}-${d.ruleTrigger.day} ${d.ruleTrigger.hour}:${d.ruleTrigger.min}:${d.ruleTrigger.sec}`},m=()=>{d.ruleForm.Method in h&&(d.ruleForm.Rule=h[d.ruleForm.Method]())},p=()=>{m()},g=()=>{const e=JSON.parse(JSON.stringify(d.ruleForm));d.loading=!0,Gt(s.value.machineid,e).then((e=>{d.loading=!1,d.show=!1})).catch((()=>{d.loading=!1}))};return(0,t.sV)((()=>{c(),p()})),{state:d,ruleFormRef:r,plan:s,handleChange:p,handleSave:g}}};const mn=(0,y.A)(hn,[["render",cn]]);var pn=mn,gn={components:{PlanEdit:pn},props:["machineid","category","handles"],setup(e){const l=(0,u.KR)({machineid:e.machineid,timer:0,list:{},current:{},showEdit:!1,category:e.category||"",handles:e.handles||[],handleJson:(e.handles||[]).reduce(((e,l,a)=>(e[l.value]=l.label,e)),{}),triggers:[],methods:[{label:"æ‰‹åŠ¨",value:0},{label:"å¯åŠ¨åŽ",value:1},{label:"åˆ°ç‚¹",value:2},{label:"å®šæ—¶",value:4},{label:"Cron",value:8},{label:"è§¦å‘",value:16}]});(0,t.Gt)("plan",l);const a=()=>{clearTimeout(l.value.timer),jt(l.value.machineid,e.category).then((e=>{l.value.list=e.reduce(((e,l,a)=>(e[`${l.Key}-${l.Handle}`]=l,e)),{}),l.value.timer=setTimeout(a,1e3)})).catch((()=>{l.value.timer=setTimeout(a,1e3)}))},n=(e,t)=>{const n=l.value.list[`${e}-${t}`];n&&qt(l.value.machineid,n.Id).then((()=>{a()}))};return(0,t.sV)((()=>{a()})),(0,t.hi)((()=>{clearTimeout(l.value.timer)})),{plan:l,remove:n}}};const wn=(0,y.A)(gn,[["render",Qt]]);var kn=wn;const vn={key:0},fn={key:1};function bn(e,l,a,o,r,s){return(0,t.uX)(),(0,t.CE)("a",{href:"javascript:;",class:"a-line",onClick:l[0]||(l[0]=(...e)=>o.handleEdit&&o.handleEdit(...e))},[o.item?((0,t.uX)(),(0,t.CE)("span",vn,(0,n.v_)(o.rule),1)):((0,t.uX)(),(0,t.CE)("span",fn,"æœªè®¾ç½®"))])}var Cn={props:["keyid","handle"],setup(e){const l=/(\d+|\*)-(\d+|\*)-(\d+|\*)\s+(\d+|\*):(\d+|\*):(\d+|\*)/,a=/(\d+)-(\d+)-(\d+)\s+(\d+):(\d+):(\d+)/,n={0:()=>"æ‰‹åŠ¨",1:()=>"ç½‘ç»œå¯åŠ¨åŽ",2:(e,a)=>{if(0==l.test(a))return a;const[,t,n,o,r,s,d]=a.match(l);return"*"==s?`æ¯åˆ†é’Ÿçš„${d}ç§’`:"*"==r?`æ¯å°æ—¶çš„${s}åˆ†${d}ç§’`:"*"==o?`æ¯å¤©çš„${r}æ—¶${s}åˆ†${d}ç§’`:"*"==n?`æ¯æœˆçš„${o}æ—¥${r}æ—¶${s}åˆ†${d}ç§’`:"*"==t?`æ¯å¹´çš„${n}æœˆ${o}æ—¥${r}æ—¶${s}åˆ†${d}ç§’`:void 0},4:(e,l)=>{if(0==a.test(l))return l;const[,t,n,o,r,s,d]=l.match(a),u=[];return"0"!=t&&u.push(`${t}å¹´`),"0"!=n&&u.push(`${n}æœˆ`),"0"!=o&&u.push(`${o}æ—¥`),"0"!=r&&u.push(`${r}æ—¶`),"0"!=s&&u.push(`${s}åˆ†`),"0"!=d&&u.push(`${d}ç§’`),`æ¯${u.join("")}`},8:(e,l)=>`Cron : ${l}`,16:(e,l)=>{if(0==a.test(l))return l;const[,t,n,r,s,d,u]=l.match(a),i=[];return"0"!=t&&i.push(`${t}å¹´`),"0"!=n&&i.push(`${n}æœˆ`),"0"!=r&&i.push(`${r}æ—¥`),"0"!=s&&i.push(`${s}æ—¶`),"0"!=d&&i.push(`${d}åˆ†`),"0"!=u&&i.push(`${u}ç§’`),`åœ¨ã€${o.value.handleJson[e.TriggerHandle]}ã€‘çš„${i.join("")}åŽ`}},o=(0,t.WQ)("plan"),r=(0,t.EW)((()=>o.value.list[`${e.keyid}-${e.handle}`])),s=(0,t.EW)((()=>{if(!r.value)return"";const e=r.value.Method;return n[e]?n[e](r.value,r.value.Rule):r.value.Rule})),d=()=>{o.value.current=r.value||{Id:0,Category:o.value.category,Key:`${e.keyid}`,Handle:e.handle,Value:"",Disabled:!1,TriggerHandle:"",Method:2,Rule:""},o.value.triggers=JSON.parse(JSON.stringify(o.value.handles.filter((l=>l.value!=e.handle)))),o.value.showEdit=!0};return{item:r,rule:s,handleEdit:d}}};const Fn=(0,y.A)(Cn,[["render",bn]]);var Vn=Fn,yn={props:["data","modelValue"],emits:["update:modelValue"],components:{WarnTriangleFilled:F.DtC,Delete:F.epd,Select:F.l6P,CloseBold:F.QBJ,PlanList:kn,PlanShow:Vn},setup(e,{emit:l}){const a=(0,u.KR)(null),n=(0,d.B)(),o=kt(),r=(0,u.Kh)({bufferSize:n.value.bufferSize,show:!0,data:[],timer:0,timer1:0,editing:!1,loading:!1,handles:[{label:"å¼€å¯",value:"start"},{label:"å…³é—­",value:"stop"}]});(0,t.wB)((()=>r.show),(e=>{e||setTimeout((()=>{l("update:modelValue",e)}),300)}));const s=()=>{clearTimeout(r.timer),ht(o.value.machineid).then((e=>{r.timer=setTimeout(s,1e3)})).catch((()=>{r.timer=setTimeout(s,1e3)}))},c=()=>{clearTimeout(r.timer1),0==r.editing?st(o.value.machineid).then((e=>{e.forEach((e=>{e.Temp=(e.Domain||e.RemotePort).toString(),e.RemotePort=0,e.Domain=""})),r.data=e,r.timer1=setTimeout(c,1e3)})).catch((()=>{r.timer1=setTimeout(c,1e3)})):r.timer1=setTimeout(c,1e3)},h=()=>{c()},m=(e,l)=>{w(e,l.property)},p=()=>{c(),i.nk.success("å·²åˆ·æ–°")},g=()=>{r.loading=!0;const e={Id:0,Name:"",RemotePort:0,LocalEP:"127.0.0.1:80",Domain:"",Temp:""};ct({machineid:o.value.machineid,data:e}).then((()=>{r.loading=!1,setTimeout((()=>{c()}),100)})).catch((e=>{r.loading=!1,i.nk.error(e)}))},w=(e,l)=>{e.Started?i.nk.error("è¯·å…ˆåœæ­¢è¿è¡Œ"):(r.data.forEach((e=>{e["NameEditing"]=!1,e["RemotePortEditing"]=!1,e["LocalEPEditing"]=!1,e["DomainEditing"]=!1,e["TempEditing"]=!1})),e[`${l}Editing`]=!0,r.editing=!0)},k=(e,l)=>{e.Started?i.nk.error("è¯·å…ˆåœæ­¢è¿è¡Œ"):(e[`${l}Editing`]=!1,r.editing=!1,b(e))},v=e=>{a.value.remove(e,"start"),a.value.remove(e,"stop"),it({machineid:o.value.machineid,id:e}).then((()=>{r.loading=!1,c()})).catch((e=>{r.loading=!1,i.nk.error(e)}))},f=e=>{r.loading=!0;const l=e.Started?pt({machineid:o.value.machineid,id:e.Id}):mt({machineid:o.value.machineid,id:e.Id});l.then((()=>{r.loading=!1,c()})).catch((e=>{r.loading=!1,i.nk.error(e)}))},b=e=>{e.Temp&&(/^\d+$/.test(e.Temp)?e.RemotePort=parseInt(e.Temp):e.Domain=e.Temp,r.loading=!0,ct({machineid:o.value.machineid,data:e}).then((e=>{r.loading=!1,0==e&&i.nk.error("æ“ä½œå¤±è´¥ï¼Œå¯èƒ½å­˜åœ¨ç›¸åŒå€¼"),c()})).catch((e=>{r.loading=!1,i.nk.error(e)})))};return(0,t.sV)((()=>{c(),s()})),(0,t.hi)((()=>{clearTimeout(r.timer),clearTimeout(r.timer1)})),{state:r,planDom:a,machineName:o.value.machineName,machineId:o.value.machineid,handleOnShowList:h,handleCellClick:m,handleRefresh:p,handleAdd:g,handleEdit:w,handleEditBlur:k,handleDel:v,handleStartChange:f}}};const _n=(0,y.A)(yn,[["render",Kt],["__scopeId","data-v-6fcc2d2a"]]);var En=_n;const Ln=e=>((0,t.Qi)("data-v-c841668a"),e=e(),(0,t.jt)(),e),In=Ln((()=>(0,t.Lk)("span",null,"ä¸­ç»§ : ",-1))),Pn={key:0,href:"javascript:;",class:"a-line"},Sn=Ln((()=>(0,t.Lk)("span",null,"æ“ä½œä¸­.",-1))),Tn=["onClick"],Mn=Ln((()=>(0,t.Lk)("span",null,"æ‰“æ´ž : ",-1))),Wn={key:0,href:"javascript:;",class:"a-line"},An=Ln((()=>(0,t.Lk)("span",null,"æ“ä½œä¸­.",-1))),Xn=["onClick"],Rn=["href"],xn={href:"javascript:;",class:"a-line"},Nn={key:0},Un={key:1},$n={key:0},Bn={key:1},Dn={key:0},zn={key:1},On=Ln((()=>(0,t.Lk)("span",null,"/",-1))),Kn={key:0},Qn={key:1},jn={class:"dropdown"};function Gn(e,l,a,o,r,s){const d=(0,t.g2)("el-table-column"),u=(0,t.g2)("Loading"),i=(0,t.g2)("el-icon"),c=(0,t.g2)("Delete"),h=(0,t.g2)("el-button"),m=(0,t.g2)("el-popconfirm"),p=(0,t.g2)("el-table"),g=(0,t.g2)("el-dialog"),w=(0,t.g2)("el-switch"),k=(0,t.g2)("ArrowDown"),v=(0,t.g2)("el-dropdown-item"),f=(0,t.g2)("el-dropdown-menu"),b=(0,t.g2)("el-dropdown");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(g,{modelValue:o.state.show,"onUpdate:modelValue":l[0]||(l[0]=e=>o.state.show=e),"append-to":".app-wrap",title:`ä¸Ž[${o.state.machineName}]çš„é“¾æŽ¥`,top:"1vh",width:"780"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(p,{data:o.state.data,size:"small",border:"",height:"500"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{property:"RemoteMachineId",label:"ç›®æ ‡/æœåŠ¡å™¨"},{default:(0,t.k6)((e=>[(0,t.Lk)("div",{class:(0,n.C4)({green:e.row.Connected})},[(0,t.Lk)("p",null,(0,n.v_)(e.row.IPEndPoint),1),(0,t.Lk)("p",null,"ssl : "+(0,n.v_)(e.row.SSL),1)],2)])),_:1}),(0,t.bF)(d,{property:"TransactionId",label:"äº‹åŠ¡",width:"80"},{default:(0,t.k6)((e=>[(0,t.Lk)("span",null,(0,n.v_)(o.state.transactions[e.row.TransactionId]),1)])),_:1}),(0,t.bF)(d,{property:"TransportName",label:"åè®®",width:"120"},{default:(0,t.k6)((e=>[(0,t.Lk)("div",null,[(0,t.Lk)("p",null,(0,n.v_)(e.row.TransportName)+"("+(0,n.v_)(o.state.protocolTypes[e.row.ProtocolType])+")",1),(0,t.Lk)("p",null,(0,n.v_)(o.state.types[e.row.Type])+" - "+(0,n.v_)(1<<e.row.BufferSize)+"KB",1)])])),_:1}),(0,t.bF)(d,{property:"Delay",label:"å»¶è¿Ÿ",width:"60"},{default:(0,t.k6)((e=>[(0,t.Lk)("span",null,(0,n.v_)(e.row.Delay)+"ms",1)])),_:1}),(0,t.bF)(d,{property:"Bytes",label:"é€šä¿¡"},{default:(0,t.k6)((e=>[(0,t.Lk)("div",null,[(0,t.Lk)("p",null,"up : "+(0,n.v_)(e.row.SendBytesText),1),(0,t.Lk)("p",null,"down : "+(0,n.v_)(e.row.ReceiveBytesText),1)])])),_:1}),(0,t.bF)(d,{property:"relay",label:"ä¸­ç»§èŠ‚ç‚¹"},{default:(0,t.k6)((e=>[(0,t.Lk)("div",null,[(0,t.Lk)("p",null,[In,o.state.relayOperatings[e.row.RemoteMachineId]?((0,t.uX)(),(0,t.CE)("a",Pn,[Sn,(0,t.bF)(i,{size:"14",class:"loading"},{default:(0,t.k6)((()=>[(0,t.bF)(u)])),_:1})])):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>o.handleNode(e.row)},(0,n.v_)(o.state.nodesDic[e.row.NodeId]||"é€‰æ‹©èŠ‚ç‚¹"),9,Tn))]),(0,t.Lk)("p",null,[Mn,o.state.p2pOperatings[e.row.RemoteMachineId]?((0,t.uX)(),(0,t.CE)("a",Wn,[An,(0,t.bF)(i,{size:"14",class:"loading"},{default:(0,t.k6)((()=>[(0,t.bF)(u)])),_:1})])):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:l=>o.handlep2p(e.row)},"å°è¯•æ‰“æ´ž",8,Xn))])])])),_:1}),(0,t.bF)(d,{label:"æ“ä½œ",width:"54"},{default:(0,t.k6)((e=>[(0,t.Lk)("div",null,[o.hasTunnelRemove?((0,t.uX)(),(0,t.Wv)(m,{key:0,"confirm-button-text":"ç¡®è®¤","cancel-button-text":"å–æ¶ˆ",title:"ç¡®å®šå…³é—­æ­¤è¿žæŽ¥?",onConfirm:l=>o.handleDel(e.row)},{reference:(0,t.k6)((()=>[(0,t.bF)(h,{type:"danger",size:"small"},{default:(0,t.k6)((()=>[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(c)])),_:1})])),_:1})])),_:2},1032,["onConfirm"])):(0,t.Q3)("",!0)])])),_:1})])),_:1},8,["data"])])])),_:1},8,["modelValue","title"]),(0,t.bF)(g,{modelValue:o.state.showNodes,"onUpdate:modelValue":l[1]||(l[1]=e=>o.state.showNodes=e),title:e.$t("server.relayTitle"),width:"98%",top:"2vh"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(p,{data:o.state.nodes,size:"small",border:"",height:"600"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{property:"Name",label:e.$t("server.relayName")},{default:(0,t.k6)((e=>[(0,t.Lk)("div",null,[(0,t.Lk)("a",{href:e.row.Url,class:"a-line blue",target:"_blank"},(0,n.v_)(e.row.Name),9,Rn),(0,t.Lk)("a",xn,[1==(1&e.row.AllowProtocol)?((0,t.uX)(),(0,t.CE)("span",Nn,",tcp")):(0,t.Q3)("",!0),2==(2&e.row.AllowProtocol)?((0,t.uX)(),(0,t.CE)("span",Un,",udp")):(0,t.Q3)("",!0)])])])),_:1},8,["label"]),(0,t.bF)(d,{property:"MaxGbTotal",label:e.$t("server.relayFlow"),width:"140"},{default:(0,t.k6)((e=>[0==e.row.MaxGbTotal?((0,t.uX)(),(0,t.CE)("span",$n,"--")):((0,t.uX)(),(0,t.CE)("span",Bn,(0,n.v_)((e.row.MaxGbTotalLastBytes/1024/1024/1024).toFixed(2))+"GB / "+(0,n.v_)(e.row.MaxGbTotal)+"GB ",1))])),_:1},8,["label"]),(0,t.bF)(d,{property:"MaxBandwidth",label:e.$t("server.relaySpeed"),width:"80"},{default:(0,t.k6)((e=>[0==e.row.MaxBandwidth?((0,t.uX)(),(0,t.CE)("span",Dn,"--")):((0,t.uX)(),(0,t.CE)("span",zn,(0,n.v_)(e.row.MaxBandwidth)+"Mbps",1))])),_:1},8,["label"]),(0,t.bF)(d,{property:"MaxBandwidthTotal",label:`${e.$t("server.relaySpeed2")}/${e.$t("server.relaySpeed1")}`,width:"120"},{default:(0,t.k6)((e=>[(0,t.Lk)("span",null,[(0,t.Lk)("span",null,(0,n.v_)(e.row.BandwidthRatio)+"Mbps",1),On,0==e.row.MaxBandwidthTotal?((0,t.uX)(),(0,t.CE)("span",Kn,"--")):((0,t.uX)(),(0,t.CE)("span",Qn,(0,n.v_)(e.row.MaxBandwidthTotal)+"Mbps",1))])])),_:1},8,["label"]),(0,t.bF)(d,{property:"ConnectionRatio",label:e.$t("server.relayConnection"),width:"80"},{default:(0,t.k6)((e=>[(0,t.Lk)("span",null,[(0,t.Lk)("strong",null,(0,n.v_)(e.row.ConnectionRatio),1),(0,t.eW)("/"+(0,n.v_)(e.row.MaxConnection),1)])])),_:1},8,["label"]),(0,t.bF)(d,{property:"Delay",label:e.$t("server.relayDelay"),width:"60"},{default:(0,t.k6)((e=>[(0,t.Lk)("span",null,(0,n.v_)(e.row.Delay)+"ms",1)])),_:1},8,["label"]),(0,t.bF)(d,{property:"Public",label:e.$t("server.relayPublic"),width:"50"},{default:(0,t.k6)((e=>[(0,t.bF)(w,{disabled:"",modelValue:e.row.Public,"onUpdate:modelValue":l=>e.row.Public=l,size:"small"},null,8,["modelValue","onUpdate:modelValue"])])),_:1},8,["label"]),(0,t.bF)(d,{property:"Oper",label:e.$t("server.relayOper"),width:"75"},{default:(0,t.k6)((l=>[(0,t.bF)(b,{size:"small"},{dropdown:(0,t.k6)((()=>[(0,t.bF)(f,null,{default:(0,t.k6)((()=>[1==(1&l.row.AllowProtocol)?((0,t.uX)(),(0,t.Wv)(v,{key:0,onClick:e=>o.handleConnect(l.row.Id,1)},{default:(0,t.k6)((()=>[(0,t.eW)((0,n.v_)(e.$t("common.relay"))+"TCP",1)])),_:2},1032,["onClick"])):(0,t.Q3)("",!0),2==(2&l.row.AllowProtocol)?((0,t.uX)(),(0,t.Wv)(v,{key:1,onClick:e=>o.handleConnect(l.row.Id,2)},{default:(0,t.k6)((()=>[(0,t.eW)((0,n.v_)(e.$t("common.relay"))+"UDP",1)])),_:2},1032,["onClick"])):(0,t.Q3)("",!0)])),_:2},1024)])),default:(0,t.k6)((()=>[(0,t.Lk)("div",jn,[(0,t.Lk)("span",null,(0,n.v_)(e.$t("server.relayUse")),1),(0,t.bF)(i,{class:"el-icon--right"},{default:(0,t.k6)((()=>[(0,t.bF)(k)])),_:1})])])),_:2},1024)])),_:1},8,["label"])])),_:1},8,["data"])])])),_:1},8,["modelValue","title"])],64)}var qn=a(69232),Hn=a(35931),Jn={props:["modelValue"],emits:["change","update:modelValue"],components:{Delete:F.epd,Select:F.l6P,ArrowDown:F.yd$,Loading:F.Rhj},setup(e,{emit:l}){const{t:a}=(0,Hn.s9)(),n=(0,d.B)(),o=(0,t.EW)((()=>n.value.hasAccess("TunnelRemove"))),r=(0,jl.ZY)(),s=(0,jl.mx)(),c=(0,jl.FG)(),h=(0,jl.bB)(),m=(0,Ra.e)(),p=(0,u.Kh)({show:!0,protocolTypes:{1:"tcp",2:"udp",4:"msquic"},types:{0:"æ‰“æ´ž",1:"ä¸­ç»§",2:"èŠ‚ç‚¹"},transactions:{forward:"ç«¯å£è½¬å‘",tuntap:"è™šæ‹Ÿç½‘å¡",socks5:"ä»£ç†è½¬å‘"},machineName:r.value.currentName,currentRow:{},data:(0,t.EW)((()=>[s.value.list[r.value.current],c.value.list[r.value.current],h.value.list[r.value.current]].filter((e=>!!e)))),showNodes:!1,nodes:[],nodesDic:{},timer:0,relayOperatings:m.value.relayOperatings,p2pOperatings:m.value.p2pOperatings});(0,t.wB)((()=>p.show),(e=>{e||setTimeout((()=>{l("update:modelValue",e),l("change")}),300)}));const g=e=>{o.value?e.removeFunc(e.RemoteMachineId).then((()=>{i.nk.success(a("common.oper"))})).catch((()=>{})):i.nk.success("æ— æƒé™")},w=()=>{clearTimeout(p.timer),(0,qn.W4)().then((e=>{p.nodes=e,p.nodesDic=e.reduce(((e,l)=>(e[l.Id]=l.Name,e)),{}),p.timer=setTimeout(w,1e3)})).catch((()=>{p.timer=setTimeout(w,1e3)}))},k=e=>{(0,ja.xN)({ToMachineId:e.RemoteMachineId,TransactionId:e.TransactionId,DenyProtocols:"tuntap"==e.TransactionId?4:2}).then((()=>{i.nk.success(a("common.oper"))})).catch((()=>{i.nk.success(a("common.operFail"))}))},v=e=>{p.currentRow=e,p.showNodes=!0},f=(e,l)=>{const t={FromMachineId:n.value.config.Client.Id,TransactionId:p.currentRow.TransactionId,ToMachineId:p.currentRow.RemoteMachineId,NodeId:e,Protocol:l};(0,qn.uQ)(t).then((()=>{i.nk.success(a("common.oper"))})).catch((()=>{i.nk.success(a("common.operFail"))})),p.showNodes=!1};return(0,t.sV)((()=>{r.value.updateRealTime(!0),w()})),(0,t.hi)((()=>{r.value.updateRealTime(!1),clearTimeout(p.timer)})),{state:p,handleDel:g,hasTunnelRemove:o,handlep2p:k,handleNode:v,handleConnect:f}}};const Zn=(0,y.A)(Jn,[["render",Gn],["__scopeId","data-v-c841668a"]]);var Yn=Zn,eo=a(39383);const lo={class:"updater-wrap t-c"},ao={class:"t-l"},to={class:"flex mgt-1"},no={class:"mgt-1 t-c"};function oo(e,l,a,o,r,s){const d=(0,t.g2)("el-option"),u=(0,t.g2)("el-select"),i=(0,t.g2)("el-col"),c=(0,t.g2)("el-row"),h=(0,t.g2)("el-button"),m=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(m,{class:"options-center",title:"æ›´æ–°","destroy-on-close":"",modelValue:o.state.show,"onUpdate:modelValue":l[2]||(l[2]=e=>o.state.show=e),width:"40rem",top:"2vh"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",lo,[(0,t.Lk)("div",ao,[(0,t.Lk)("ul",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.state.msg,(e=>((0,t.uX)(),(0,t.CE)("li",null,(0,n.v_)(e),1)))),256))])]),(0,t.Lk)("div",to,[(0,t.bF)(c,{class:"w-100"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{span:10},{default:(0,t.k6)((()=>[(0,t.bF)(u,{modelValue:o.state.type,"onUpdate:modelValue":l[0]||(l[0]=e=>o.state.type=e),size:"large"},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.state.types,(e=>((0,t.uX)(),(0,t.Wv)(d,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(i,{span:4},{default:(0,t.k6)((()=>[(0,t.eW)(" -> ")])),_:1}),(0,t.bF)(i,{span:10},{default:(0,t.k6)((()=>[(0,t.bF)(u,{modelValue:o.state.version,"onUpdate:modelValue":l[1]||(l[1]=e=>o.state.version=e),size:"large",filterable:"","allow-create":"","default-first-option":""},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.state.versions,(e=>((0,t.uX)(),(0,t.Wv)(d,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1})]),(0,t.Lk)("div",no,[(0,t.bF)(h,{type:"success",onClick:o.handleUpdate,plain:""},{default:(0,t.k6)((()=>[(0,t.eW)("ç¡® å®š")])),_:1},8,["onClick"])])])])),_:1},8,["modelValue"])}var ro=a(80920),so={props:["modelValue"],emits:["update:modelValue"],setup(e,{emit:l}){const a=(0,d.B)(),n=((0,t.EW)((()=>a.value.hasAccess("UpdateSelf"))),(0,t.EW)((()=>a.value.hasAccess("UpdateOther")))),o=(0,eo.T)(),r=(0,t.EW)((()=>a.value.signin.Version)),s=(0,t.EW)((()=>o.value.current.Version)),i=[{label:`ä»…ã€${o.value.device.MachineName}ã€‘`,value:o.value.device.MachineId},n.value?{label:"æœ¬ç»„æ‰€æœ‰",value:"g-all"}:{},n.value?{label:"æœ¬æœåŠ¡å™¨æ‰€æœ‰",value:"s-all"}:{}].filter((e=>e.value)),c=[{label:`${s.value}ã€æœ€æ–°ç‰ˆæœ¬ã€‘`,value:s.value},{label:`${r.value}ã€æœåŠ¡å™¨ç‰ˆæœ¬ã€‘`,value:r.value}].filter((e=>e.value)),h=(0,u.Kh)({show:!0,type:i[0]||"",version:c[0]||"",types:i,versions:c,msg:[]});(0,t.wB)((()=>h.show),(e=>{e||setTimeout((()=>{l("update:modelValue",e)}),300)}));const m=()=>{const e={MachineId:o.value.device.MachineId,Version:h.version.value||h.version,GroupAll:"g-all"==h.type,All:"s-all"==h.type};(e.All||e.GroupAll)&&(e.MachineId=""),(0,ro.lJ)(e).then((()=>{})).catch((()=>{})),h.show=!1};return(0,t.sV)((()=>{(0,ro.rL)().then((e=>{h.msg=e.Msg}))})),{state:h,updater:o,handleUpdate:m}}};const uo=(0,y.A)(so,[["render",oo]]);var io=uo;const co=Symbol(),ho=()=>{const e=(0,u.KR)({device:{},show:!1});return(0,t.Gt)(co,e),{flow:e}},mo=()=>(0,t.WQ)(co);function po(e,l,a,o,r,s){const d=(0,t.g2)("el-table-column"),u=(0,t.g2)("el-table"),i=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(i,{title:`${o.flow.device.name}->${e.$t("status.messengerName")}`,class:"options-center",top:"1vh","destroy-on-close":"",modelValue:o.state.show,"onUpdate:modelValue":l[0]||(l[0]=e=>o.state.show=e),width:"480"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(u,{data:o.state.list,stripe:"",border:"",size:"small",width:"100%",height:"60vh"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{prop:"id",label:"id",width:"200"}),(0,t.bF)(d,{prop:"request",label:"request",sortable:""},{default:(0,t.k6)((e=>[(0,t.Lk)("span",null,(0,n.v_)(e.row.request)+"ms / "+(0,n.v_)(e.row.requestMax)+"ms",1)])),_:1}),(0,t.bF)(d,{prop:"response",label:"response",sortable:""},{default:(0,t.k6)((e=>[(0,t.Lk)("span",null,(0,n.v_)(e.row.response)+"ms / "+(0,n.v_)(e.row.responseMax)+"ms",1)])),_:1})])),_:1},8,["data"])])])),_:1},8,["title","modelValue"])}var go=a(84921),wo={props:["modelValue"],emits:["update:modelValue"],setup(e,{emit:l}){const{t:a}=(0,Hn.s9)(),n=mo(),o=(0,u.Kh)({show:!0,timer:0,list:[]});(0,t.wB)((()=>o.show),(e=>{e||setTimeout((()=>{l("update:modelValue",e)}),300)}));const r=()=>{clearTimeout(o.timer),(0,go.iN)(n.value.device.id).then((e=>{o.list=Object.keys(e).map((l=>({id:`${a(`status.messenger${l}`)}(${l})`,request:(BigInt(e[l].SendtBytes)&BigInt(4294967295)).toString(),requestMax:(BigInt(e[l].SendtBytes)>>BigInt(32)).toString(),response:(BigInt(e[l].ReceiveBytes)&BigInt(4294967295)).toString(),responseMax:(BigInt(e[l].ReceiveBytes)>>BigInt(32)).toString()}))),o.timer=setTimeout(r,3e3)})).catch((e=>{o.timer=setTimeout(r,3e3)}))};return(0,t.sV)((()=>{r()})),(0,t.hi)((()=>{clearTimeout(o.timer)})),{state:o,flow:n}}};const ko=(0,y.A)(wo,[["render",po]]);var vo=ko;const fo=e=>((0,t.Qi)("data-v-64280110"),e=e(),(0,t.jt)(),e),bo={class:"dropdown"},Co=fo((()=>(0,t.Lk)("span",null,"æ“ä½œ",-1)));function Fo(e,l,a,n,o,r){const s=(0,t.g2)("ArrowDown"),d=(0,t.g2)("el-icon"),u=(0,t.g2)("SwitchButton"),i=(0,t.g2)("el-dropdown-item"),c=(0,t.g2)("Delete"),h=(0,t.g2)("Flag"),m=(0,t.g2)("HelpFilled"),p=(0,t.g2)("Platform"),g=(0,t.g2)("Paperclip"),w=(0,t.g2)("CircleCheck"),k=(0,t.g2)("VideoPlay"),v=(0,t.g2)("Orange"),f=(0,t.g2)("Lock"),b=(0,t.g2)("el-dropdown-menu"),C=(0,t.g2)("el-dropdown"),F=(0,t.g2)("el-table-column");return(0,t.uX)(),(0,t.Wv)(F,{label:"æ“ä½œ",fixed:"right",width:"75"},{default:(0,t.k6)((a=>[(0,t.bF)(C,{size:"small"},{dropdown:(0,t.k6)((()=>[(0,t.bF)(b,null,{default:(0,t.k6)((()=>[a.row.showReboot&&n.hasReboot?((0,t.uX)(),(0,t.Wv)(i,{key:0,onClick:e=>n.handleExit(a.row.MachineId,a.row.MachineName)},{default:(0,t.k6)((()=>[(0,t.bF)(d,null,{default:(0,t.k6)((()=>[(0,t.bF)(u)])),_:1}),(0,t.eW)(" é‡å¯")])),_:2},1032,["onClick"])):(0,t.Q3)("",!0),a.row.showDel&&n.hasRemove?((0,t.uX)(),(0,t.Wv)(i,{key:1,onClick:e=>n.handleDel(a.row.MachineId,a.row.MachineName)},{default:(0,t.k6)((()=>[(0,t.bF)(d,null,{default:(0,t.k6)((()=>[(0,t.bF)(c)])),_:1}),(0,t.eW)(" åˆ é™¤")])),_:2},1032,["onClick"])):(0,t.Q3)("",!0),n.handleShowAccess(a.row,n.accessList[a.row.MachineId]||"0")?((0,t.uX)(),(0,t.Wv)(i,{key:2,onClick:e=>n.handleAccess(a.row)},{default:(0,t.k6)((()=>[(0,t.bF)(d,null,{default:(0,t.k6)((()=>[(0,t.bF)(h)])),_:1}),(0,t.eW)(" æƒé™")])),_:2},1032,["onClick"])):(0,t.Q3)("",!0),a.row.isSelf&&n.hasApiPassword?((0,t.uX)(),(0,t.Wv)(i,{key:3,onClick:e=>n.handleApiPassword(a.row)},{default:(0,t.k6)((()=>[(0,t.bF)(d,null,{default:(0,t.k6)((()=>[(0,t.bF)(m)])),_:1}),(0,t.eW)(" ç®¡ç†æŽ¥å£")])),_:2},1032,["onClick"])):n.hasApiPasswordOther?((0,t.uX)(),(0,t.Wv)(i,{key:4,onClick:e=>n.handleApiPassword(a.row)},{default:(0,t.k6)((()=>[(0,t.bF)(d,null,{default:(0,t.k6)((()=>[(0,t.bF)(m)])),_:1}),(0,t.eW)(" ç®¡ç†æŽ¥å£")])),_:2},1032,["onClick"])):(0,t.Q3)("",!0),(0,t.bF)(i,{onClick:e=>n.handleStopwatch(a.row.MachineId,a.row.MachineName)},{default:(0,t.k6)((()=>[(0,t.bF)(d,null,{default:(0,t.k6)((()=>[(0,t.bF)(p)])),_:1}),(0,t.eW)("å®ƒçš„ä¿¡æ ‡")])),_:2},1032,["onClick"]),(0,t.bF)(i,{onClick:l[0]||(l[0]=l=>n.handleStopwatch("",e.$t("status.messenger")))},{default:(0,t.k6)((()=>[(0,t.bF)(d,null,{default:(0,t.k6)((()=>[(0,t.bF)(p)])),_:1}),(0,t.eW)("æœåŠ¡å™¨ä¿¡æ ‡")])),_:1}),(0,t.bF)(i,{onClick:e=>n.handleRoutes(a.row.MachineId,a.row.MachineName)},{default:(0,t.k6)((()=>[(0,t.bF)(d,null,{default:(0,t.k6)((()=>[(0,t.bF)(g)])),_:1}),(0,t.eW)("ç½‘å¡è·¯ç”±")])),_:2},1032,["onClick"]),a.row.isSelf&&n.hasFirewallSelf?((0,t.uX)(),(0,t.Wv)(i,{key:5,onClick:e=>n.handleFirewall(a.row.MachineId,a.row.MachineName)},{default:(0,t.k6)((()=>[(0,t.bF)(d,null,{default:(0,t.k6)((()=>[(0,t.bF)(w)])),_:1}),(0,t.eW)("é˜²ç«å¢™")])),_:2},1032,["onClick"])):n.hasFirewallOther?((0,t.uX)(),(0,t.Wv)(i,{key:6,onClick:e=>n.handleFirewall(a.row.MachineId,a.row.MachineName)},{default:(0,t.k6)((()=>[(0,t.bF)(d,null,{default:(0,t.k6)((()=>[(0,t.bF)(w)])),_:1}),(0,t.eW)("é˜²ç«å¢™")])),_:2},1032,["onClick"])):(0,t.Q3)("",!0),a.row.isSelf&&n.hasWakeupSelf?((0,t.uX)(),(0,t.Wv)(i,{key:7,onClick:e=>n.handleWakeup(a.row.MachineId,a.row.MachineName)},{default:(0,t.k6)((()=>[(0,t.bF)(d,null,{default:(0,t.k6)((()=>[(0,t.bF)(k)])),_:1}),(0,t.eW)("å”¤é†’")])),_:2},1032,["onClick"])):n.hasWakeupOther?((0,t.uX)(),(0,t.Wv)(i,{key:8,onClick:e=>n.handleWakeup(a.row.MachineId,a.row.MachineName)},{default:(0,t.k6)((()=>[(0,t.bF)(d,null,{default:(0,t.k6)((()=>[(0,t.bF)(k)])),_:1}),(0,t.eW)("å”¤é†’")])),_:2},1032,["onClick"])):(0,t.Q3)("",!0),n.hasTransport?((0,t.uX)(),(0,t.Wv)(i,{key:9,onClick:e=>n.handleTransport(a.row.MachineId,a.row.MachineName)},{default:(0,t.k6)((()=>[(0,t.bF)(d,null,{default:(0,t.k6)((()=>[(0,t.bF)(v)])),_:1}),(0,t.eW)("æ‰“æ´žåè®®")])),_:2},1032,["onClick"])):(0,t.Q3)("",!0),a.row.isSelf&&n.hasActionSelf?((0,t.uX)(),(0,t.Wv)(i,{key:10,onClick:e=>n.handleAction(a.row.MachineId,a.row.MachineName)},{default:(0,t.k6)((()=>[(0,t.bF)(d,null,{default:(0,t.k6)((()=>[(0,t.bF)(f)])),_:1}),(0,t.eW)("éªŒè¯å‚æ•°")])),_:2},1032,["onClick"])):n.hasActionOther?((0,t.uX)(),(0,t.Wv)(i,{key:11,onClick:e=>n.handleAction(a.row.MachineId,a.row.MachineName)},{default:(0,t.k6)((()=>[(0,t.bF)(d,null,{default:(0,t.k6)((()=>[(0,t.bF)(f)])),_:1}),(0,t.eW)("éªŒè¯å‚æ•°")])),_:2},1032,["onClick"])):(0,t.Q3)("",!0)])),_:2},1024)])),default:(0,t.k6)((()=>[(0,t.Lk)("div",bo,[Co,(0,t.bF)(d,{class:"el-icon--right"},{default:(0,t.k6)((()=>[(0,t.bF)(s)])),_:1})])])),_:2},1024)])),_:1})}var Vo=a(12933);const yo=Symbol(),_o=()=>{const e=(0,u.KR)({device:{id:"",name:""},showRoutes:!1,showFirewall:!1,showWakeup:!1,showTransport:!1,showAction:!1});return(0,t.Gt)(yo,e),{oper:e}},Eo=()=>(0,t.WQ)(yo);var Lo={emits:["refresh","access"],components:{Delete:F.epd,SwitchButton:F.L$q,ArrowDown:F.yd$,Flag:F.lNU,HelpFilled:F.adD,Platform:F.ODD,Paperclip:F.xv8,CircleCheck:F.rW7,VideoPlay:F.IOc,Orange:F.tLG,Lock:F.c_I},setup(e,{emit:l}){const a=(0,d.B)(),n=(0,te.q)(),o=(0,t.EW)((()=>a.value.config.Client.AccessBits)),r=(0,t.EW)((()=>a.value.hasAccess("Access"))),s=(0,t.EW)((()=>n.value.list)),u=(0,t.EW)((()=>a.value.hasAccess("Reboot"))),c=(0,t.EW)((()=>a.value.hasAccess("Remove"))),h=(0,t.EW)((()=>a.value.hasAccess("SetApiPassword"))),m=(0,t.EW)((()=>a.value.hasAccess("SetApiPasswordOther"))),p=(0,t.EW)((()=>a.value.hasAccess("FirewallSelf"))),g=(0,t.EW)((()=>a.value.hasAccess("FirewallOther"))),w=(0,t.EW)((()=>a.value.hasAccess("WakeupSelf"))),k=(0,t.EW)((()=>a.value.hasAccess("WakeupOther"))),v=(0,t.EW)((()=>a.value.hasAccess("Transport"))),f=(0,t.EW)((()=>a.value.hasAccess("Action"))),b=(0,t.EW)((()=>a.value.hasAccess("ActionOther"))),C=mo(),F=Eo(),V=(e,a)=>{Vo.s.confirm(`ç¡®è®¤åˆ é™¤[${a}]?`,"æç¤º",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}).then((()=>{(0,Q.Se)(e).then((()=>{l("refresh")}))})).catch((()=>{}))},y=(e,a)=>{Vo.s.confirm(`ç¡®è®¤å…³é—­[${a}]?`,"æç¤º",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}).then((()=>{(0,ro.NS)(e).then((()=>{l("refresh")}))})).catch((()=>{}))},_=(e,l)=>{let a=Math.max(o.value.length,l.length),t=o.value.padEnd(a,"0").split(""),n=l.padEnd(a,"0").split("");return e.showAccess&&r.value&&t.map(((e,l)=>"1"==n[l]&&"1"==e||"0"==n[l])).filter((e=>e)).length>0},E=e=>{l("access",e)},L=e=>{Vo.s.prompt("è¾“å…¥æ–°çš„ç®¡ç†æŽ¥å£å¯†ç ",`é‡ç½®ã€${e.MachineName}ã€‘çš„æŽ¥å£å¯†ç `,{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",inputPattern:/^[0-9a-zA-Z]{1,32}$/,inputErrorMessage:"æ•°å­—å­—æ¯1-32ä½"}).then((({value:l})=>{(0,Z.gv)({machineId:e.MachineId,password:l}).then((()=>{i.nk.success("æ“ä½œæˆåŠŸï¼Œé‡å¯åŽç”Ÿæ•ˆ~")})).catch((()=>{i.nk.error("æ“ä½œå¤±è´¥~")}))})).catch((()=>{}))},I=(e,l)=>{C.value.device.id=e,C.value.device.name=l,C.value.show=!0},P=(e,l)=>{F.value.device.id=e,F.value.device.name=l,F.value.showRoutes=!0},S=(e,l)=>{F.value.device.id=e,F.value.device.name=l,F.value.showFirewall=!0},T=(e,l)=>{F.value.device.id=e,F.value.device.name=l,F.value.showWakeup=!0},M=(e,l)=>{F.value.device.id=e,F.value.device.name=l,F.value.showTransport=!0},W=(e,l)=>{F.value.device.id=e,F.value.device.name=l,F.value.showAction=!0};return{accessList:s,handleDel:V,handleExit:y,hasReboot:u,hasRemove:c,hasAccess:r,handleShowAccess:_,handleAccess:E,hasApiPassword:h,hasApiPasswordOther:m,handleApiPassword:L,handleStopwatch:I,handleRoutes:P,hasFirewallSelf:p,hasFirewallOther:g,handleFirewall:S,hasWakeupSelf:w,hasWakeupOther:k,handleWakeup:T,hasTransport:v,handleTransport:M,hasActionSelf:f,hasActionOther:b,handleAction:W}}};const Io=(0,y.A)(Lo,[["render",Fo],["__scopeId","data-v-64280110"]]);var Po=Io;function So(e,l,a,o,r,s){const d=(0,t.g2)("el-table-column"),u=(0,t.g2)("el-table"),i=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(i,{modelValue:o.state.show,"onUpdate:modelValue":l[0]||(l[0]=e=>o.state.show=e),"append-to":".app-wrap",title:`[${o.state.machineName}]ä¸Šçš„è·¯ç”±`,top:"1vh"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(u,{data:o.state.data,size:"small",border:"",height:"500"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{property:"Ip",label:"IP"}),(0,t.bF)(d,{property:"Id",label:"ç›®æ ‡"},{default:(0,t.k6)((e=>[(0,t.Lk)("span",null,(0,n.v_)(o.state.names[e.row.Id]),1)])),_:1})])),_:1},8,["data"])])])),_:1},8,["modelValue","title"])}var To={props:["modelValue"],emits:["update:modelValue"],setup(e,{emit:l}){const a=Eo(),n=(0,u.Kh)({show:!0,machineId:a.value.device.id,machineName:a.value.device.name,data:[],names:{},timer:0});return(0,t.wB)((()=>n.show),(e=>{e||setTimeout((()=>{l("update:modelValue",e),l("change")}),300)})),(0,t.sV)((()=>{(0,Q.NT)().then((e=>{n.names=e.reduce(((e,l)=>(e[l.MachineId]=l.MachineName,e)),{})})).catch((()=>{})),(0,he.bP)(n.machineId).then((e=>{n.data=Object.keys(e).map((l=>({Ip:l,Id:e[l]})))})).catch((()=>{}))})),(0,t.hi)((()=>{})),{state:n}}};const Mo=(0,y.A)(To,[["render",So]]);var Wo=Mo;function Ao(e,l,a,n,o,r){const s=(0,t.g2)("Firewall"),d=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(d,{modelValue:n.state.show,"onUpdate:modelValue":l[0]||(l[0]=e=>n.state.show=e),"append-to":".app-wrap",title:`[${n.state.machineName}]ä¸Šçš„é˜²ç«å¢™`,top:"1vh",width:"98%"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(s,{machineId:n.state.machineId},null,8,["machineId"])])])),_:1},8,["modelValue","title"])}var Xo=a(34673),Ro={props:["modelValue"],emits:["update:modelValue"],components:{Firewall:Xo.A},setup(e,{emit:l}){const a=Eo(),n=(0,u.Kh)({show:!0,machineId:a.value.device.id,machineName:a.value.device.name});return(0,t.wB)((()=>n.show),(e=>{e||setTimeout((()=>{l("update:modelValue",e),l("change")}),300)})),{state:n}}};const xo=(0,y.A)(Ro,[["render",Ao]]);var No=xo;function Uo(e,l,a,n,o,r){const s=(0,t.g2)("Wakeup"),d=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(d,{modelValue:n.state.show,"onUpdate:modelValue":l[0]||(l[0]=e=>n.state.show=e),"append-to":".app-wrap",title:`[${n.state.machineName}]ä¸Šçš„å”¤é†’`,top:"1vh",width:"98%"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(s,{machineId:n.state.machineId},null,8,["machineId"])])])),_:1},8,["modelValue","title"])}var $o=a(27353),Bo={props:["modelValue"],emits:["update:modelValue"],components:{Wakeup:$o.A},setup(e,{emit:l}){const a=Eo(),n=(0,u.Kh)({show:!0,machineId:a.value.device.id,machineName:a.value.device.name});return(0,t.wB)((()=>n.show),(e=>{e||setTimeout((()=>{l("update:modelValue",e),l("change")}),300)})),{state:n}}};const Do=(0,y.A)(Bo,[["render",Uo]]);var zo=Do;function Oo(e,l,a,n,o,r){const s=(0,t.g2)("Transport"),d=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(d,{modelValue:n.state.show,"onUpdate:modelValue":l[0]||(l[0]=e=>n.state.show=e),"append-to":".app-wrap",title:`[${n.state.machineName}]ä¸Šçš„æ‰“æ´žåè®®`,top:"1vh",width:"98%"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(s,{machineId:n.state.machineId},null,8,["machineId"])])])),_:1},8,["modelValue","title"])}var Ko=a(10978),Qo={props:["modelValue"],emits:["update:modelValue"],components:{Transport:Ko.A},setup(e,{emit:l}){const a=Eo(),n=(0,u.Kh)({show:!0,machineId:a.value.device.id,machineName:a.value.device.name});return(0,t.wB)((()=>n.show),(e=>{e||setTimeout((()=>{l("update:modelValue",e),l("change")}),300)})),{state:n}}};const jo=(0,y.A)(Qo,[["render",Oo]]);var Go=jo;function qo(e,l,a,n,o,r){const s=(0,t.g2)("Action"),d=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(d,{modelValue:n.state.show,"onUpdate:modelValue":l[0]||(l[0]=e=>n.state.show=e),"append-to":".app-wrap",title:`[${n.state.machineName}]ä¸Šçš„éªŒè¯å‚æ•°`,top:"1vh",width:"98%"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(s,{machineId:n.state.machineId},null,8,["machineId"])])])),_:1},8,["modelValue","title"])}var Ho=a(23035),Jo={props:["modelValue"],emits:["update:modelValue"],components:{Action:Ho.A},setup(e,{emit:l}){const a=Eo(),n=(0,u.Kh)({show:!0,machineId:a.value.device.id,machineName:a.value.device.name});return(0,t.wB)((()=>n.show),(e=>{e||setTimeout((()=>{l("update:modelValue",e),l("change")}),300)})),{state:n}}};const Zo=(0,y.A)(Jo,[["render",qo]]);var Yo=Zo,er={components:{Sort:E,Device:D,DeviceEdit:q,AccessEdit:ae,Tunnel:Ua,TunnelEdit:Ha,ConnectionsEdit:Yn,Tuntap:ue,TuntapEdit:pl,TuntapLease:Xl,Socks5:ea,Socks5Edit:Ea,Forward:bt,ForwardEdit:xt,SForwardEdit:En,UpdaterConfirm:io,Stopwatch:vo,Oper:Po,OperRoutes:Wo,OperFirewall:No,OperWakeup:zo,OperTransport:Go,OperAction:Yo},setup(e){const l=(0,d.B)(),a=(0,u.Kh)({height:(0,t.EW)((()=>l.value.height-90))}),{devices:n,machineId:o,_getSignList:r,_getSignList1:s,handleDeviceEdit:c,handleAccessEdit:h,handlePageChange:m,handlePageSizeChange:p,handleDel:w,clearDevicesTimeout:k,setSort:v}=(0,H.r)(),{tuntap:b,_getTuntapInfo:F,handleTuntapEdit:V,handleTuntapRefresh:y,clearTuntapTimeout:_,getTuntapMachines:E,sortTuntapIP:L}=(0,C.O)(),{socks5:I,_getSocks5Info:P,handleSocks5Edit:S,handleSocks5Refresh:T,clearSocks5Timeout:M,getSocks5Machines:W,sortSocks5:A}=f(),{tunnel:X,_getTunnelInfo:R,getTunnelOperating:x,getRelayOperating:N,handleTunnelEdit:U,handleTunnelRefresh:$,clearTunnelTimeout:B,sortTunnel:D}=(0,Ra.y)(),{forward:z,_getForwardCountInfo:O,handleForwardEdit:K,clearForwardTimeout:Q,handleForwardRefresh:j}=g(),{sforward:G,_getSForwardCountInfo:q,handleSForwardEdit:J,clearSForwardTimeout:Z,handleSForwardRefresh:Y}=wt(),{connections:ee,forwardConnections:le,_getForwardConnections:ae,tuntapConnections:ne,_getTuntapConnections:oe,socks5Connections:re,_getSocks5Connections:se,handleTunnelConnections:de,clearConnectionsTimeout:ue}=(0,jl.L2)(),{updater:ie,_getUpdater:ce,_subscribeUpdater:he,clearUpdaterTimeout:me}=(0,eo.d)(),{flow:pe}=ho(),{_getAccessInfo:ge,clearAccessTimeout:we,handleAccesssRefresh:ke}=(0,te.Y)(),{oper:ve}=_o(),fe=e=>{n.page.Request.Prop=e.prop,n.page.Request.Asc="ascending"==e.order;let l=new Promise(((e,l)=>{e()}));if("tunnel"==e.prop){const e=D(n.page.Request.Asc);e.length>0&&(l=v(e))}else if("tuntap"==e.prop){const e=L(n.page.Request.Asc);e.length>0&&(l=v(e))}else if("socks5"==e.prop){const e=A(n.page.Request.Asc);e.length>0&&(l=v(e))}l.then((()=>{m()})).catch((()=>{}))},be=e=>{n.page.Request.Name=e||"",n.page.Request.Name?n.page.Request.Ids=E(n.page.Request.Name).concat(W(n.page.Request.Name)).reduce(((e,l)=>(-1==e.indexOf(l)&&e.push(l),e)),[]):n.page.Request.Ids=[],m(),$(),y(),T(),j(),Y(),ke(),i.nk.success({message:"åˆ·æ–°æˆåŠŸ",grouping:!0})},Ce=()=>{m(),$(),y(),T(),ke(),i.nk.success({message:"åˆ·æ–°æˆåŠŸ",grouping:!0})};return(0,t.sV)((()=>{m(),$(),y(),T(),j(),Y(),ke(),r(),s(),F(),P(),R(),x(),N(),ae(),oe(),se(),O(),q(),ce(),he(),ge()})),(0,t.hi)((()=>{k(),ue(),_(),M(),B(),Q(),Z(),me(),we()})),{state:a,globalData:l,devices:n,machineId:o,handleSortChange:fe,handleDeviceEdit:c,handleAccessEdit:h,handlePageRefresh:be,handlePageSearch:Ce,handlePageChange:m,handlePageSizeChange:p,handleDel:w,tuntap:b,handleTuntapEdit:V,handleTuntapRefresh:y,socks5:I,handleSocks5Edit:S,handleSocks5Refresh:T,tunnel:X,connections:ee,handleTunnelEdit:U,handleTunnelRefresh:$,handleTunnelConnections:de,forward:z,handleForwardEdit:K,sforward:G,handleSForwardEdit:J,updater:ie,flow:pe,oper:ve}}};const lr=(0,y.A)(er,[["render",s],["__scopeId","data-v-7071de6f"]]);var ar=lr},10978:function(e,l,a){a.d(l,{A:function(){return v}});var t=a(56768),n=a(24232);const o={class:"flex"},r=(0,t.Lk)("span",{class:"flex-1"},null,-1);function s(e,l,a,s,d,u){const i=(0,t.g2)("el-table-column"),c=(0,t.g2)("el-option"),h=(0,t.g2)("el-select"),m=(0,t.g2)("el-switch"),p=(0,t.g2)("Sync"),g=(0,t.g2)("el-input-number"),w=(0,t.g2)("el-table");return(0,t.uX)(),(0,t.Wv)(w,{stripe:"",data:s.state.list,border:"",size:"small",width:"100%",height:`${s.state.height}px`},{default:(0,t.k6)((()=>[(0,t.bF)(i,{prop:"Name",label:e.$t("status.tunnelName"),width:"120"},null,8,["label"]),(0,t.bF)(i,{prop:"Label",label:e.$t("status.tunnelLabel")},null,8,["label"]),(0,t.bF)(i,{prop:"ProtocolType",label:e.$t("status.tunnelProtocol"),width:"60"},null,8,["label"]),(0,t.bF)(i,{prop:"BufferSize",label:e.$t("status.tunnelBuffer"),width:"100"},{default:(0,t.k6)((e=>[(0,t.bF)(h,{modelValue:e.row.BufferSize,"onUpdate:modelValue":l=>e.row.BufferSize=l,placeholder:"Select",size:"small",onChange:s.handleSave},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(s.state.bufferSize,((e,l)=>((0,t.uX)(),(0,t.Wv)(c,{key:l,label:e,value:l},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])),_:1},8,["label"]),(0,t.bF)(i,{property:"Reverse",label:e.$t("status.tunnelReverse"),width:"64"},{default:(0,t.k6)((l=>[(0,t.bF)(m,{disabled:l.row.DisableReverse,modelValue:l.row.Reverse,"onUpdate:modelValue":e=>l.row.Reverse=e,onChange:s.handleSave,"inline-prompt":"","active-text":e.$t("status.tunnelYes"),"inactive-text":e.$t("status.tunnelNo")},null,8,["disabled","modelValue","onUpdate:modelValue","onChange","active-text","inactive-text"])])),_:1},8,["label"]),(0,t.bF)(i,{property:"SSL",label:e.$t("status.tunnelSSL"),width:"60"},{default:(0,t.k6)((l=>[(0,t.bF)(m,{disabled:l.row.DisableSSL,modelValue:l.row.SSL,"onUpdate:modelValue":e=>l.row.SSL=e,onChange:s.handleSave,"inline-prompt":"","active-text":e.$t("status.tunnelYes"),"inactive-text":e.$t("status.tunnelNo")},null,8,["disabled","modelValue","onUpdate:modelValue","onChange","active-text","inactive-text"])])),_:1},8,["label"]),(0,t.bF)(i,{property:"Disabled",label:e.$t("status.tunnelDisanbled"),width:"64"},{default:(0,t.k6)((l=>[(0,t.bF)(m,{modelValue:l.row.Disabled,"onUpdate:modelValue":e=>l.row.Disabled=e,onChange:s.handleSave,"inline-prompt":"","active-text":e.$t("status.tunnelYes"),"inactive-text":e.$t("status.tunnelNo"),style:{"--el-switch-on-color":"red","--el-switch-off-color":"#ddd"}},null,8,["modelValue","onUpdate:modelValue","onChange","active-text","inactive-text"])])),_:1},8,["label"]),(0,t.bF)(i,{prop:"Order",label:e.$t("status.tunnelSort"),width:"104",fixed:"right"},{header:(0,t.k6)((()=>[(0,t.Lk)("div",o,[(0,t.Lk)("strong",null,(0,n.v_)(e.$t("status.tunnelSort")),1),r,s.state.isSelf?((0,t.uX)(),(0,t.Wv)(p,{key:0,name:"TunnelTransports"})):(0,t.Q3)("",!0)])])),default:(0,t.k6)((e=>[(0,t.Lk)("div",null,[(0,t.bF)(g,{modelValue:e.row.Order,"onUpdate:modelValue":l=>e.row.Order=l,min:1,max:255,onChange:s.handleOrderChange,size:"small"},null,8,["modelValue","onUpdate:modelValue","onChange"])])])),_:1},8,["label"])])),_:1},8,["data","height"])}var d=a(90083),u=a(53830),i=a(51219),c=a(90144),h=a(57477),m=a(35931),p=a(62118),g={props:["machineId","height"],components:{Delete:h.epd,Plus:h.FWt,Top:h.EjV,Bottom:h.i5o,Sync:p.A},setup(e){const{t:l}=(0,m.s9)(),a=(0,u.B)(),n=(0,c.Kh)({list:[],height:(0,t.EW)((()=>e.height)),bufferSize:a.value.bufferSize,machineid:e.machineId||a.value.config.Client.Id,isSelf:(0,t.EW)((()=>n.machineid===a.value.config.Client.Id))}),o=()=>{(0,d.xT)(n.machineid).then((e=>{n.list=e.sort(((e,l)=>e.Order-l.Order))}))},r=()=>{s(n.list)},s=()=>{n.list=n.list.slice().sort(((e,l)=>e.Order-l.Order)),(0,d.$M)({machineid:n.machineid,data:n.list}).then((()=>{i.nk.success(l("common.oper"))})).catch((e=>{console.log(e),i.nk.error(l("common.operFail"))}))};return(0,t.sV)((()=>{o()})),{state:n,handleOrderChange:r,handleSave:s}}},w=a(71241);const k=(0,w.A)(g,[["render",s]]);var v=k}}]);