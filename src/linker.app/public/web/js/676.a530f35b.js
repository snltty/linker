"use strict";(self["webpackChunklinker_web"]=self["webpackChunklinker_web"]||[]).push([[676],{3363:function(e,t,n){n.d(t,{EQ:function(){return o},QI:function(){return a},ZK:function(){return s},gv:function(){return c}});var i=n(4);const a=e=>(0,i.zG)("access/GetAccesss",e),s=e=>(0,i.zG)("access/SetAccess",e),o=()=>(0,i.zG)("access/refresh"),c=e=>(0,i.zG)("access/SetApiPassword",e)},5241:function(e,t,n){n.d(t,{AE:function(){return f},Gn:function(){return v},Iu:function(){return g},Jd:function(){return l},Nj:function(){return p},PR:function(){return c},Yh:function(){return r},_:function(){return d},ac:function(){return u},bP:function(){return a},en:function(){return o},w0:function(){return h},zi:function(){return s}});var i=n(4);const a=e=>(0,i.zG)("tuntap/routes",e),s=(e="0")=>(0,i.zG)("tuntap/get",e),o=e=>(0,i.zG)("tuntap/run",e),c=e=>(0,i.zG)("tuntap/stop",e),u=e=>(0,i.zG)("tuntap/update",e),r=()=>(0,i.zG)("tuntap/refresh"),l=()=>(0,i.zG)("tuntap/SubscribePing"),d=e=>(0,i.zG)("tuntap/SubscribeForwardTest",e),h=e=>(0,i.zG)("tuntap/CalcNetwork",e),p=()=>(0,i.zG)("tuntap/GetNetwork"),f=e=>(0,i.zG)("tuntap/AddNetwork",e),v=e=>(0,i.zG)("tuntap/getid",e),g=e=>(0,i.zG)("tuntap/setid",e)},6057:function(e,t,n){n.d(t,{Y:function(){return c}});var i=n(3363),a=n(144),s=n(6768);const o=Symbol(),c=()=>{const e=(0,a.KR)({list:{},timer:0,hashcode:0});(0,s.Gt)(o,e);const t=()=>{(0,i.EQ)()},n=()=>new Promise(((t,n)=>{(0,i.QI)(e.value.hashcode.toString()).then((n=>{if(e.value.hashcode=n.HashCode,n.List)return e.value.list=n.List,void t(!0);t(!1)})).catch((()=>{t(!1)}))})),c=(t,n)=>{Object.assign(n,{hook_accesss:e.value.list[t.MachineId]||""})};return{access:e,accessDataFn:n,accessProcessFn:c,accessRefreshFn:t}}},4373:function(e,t,n){n.d(t,{Y:function(){return r},r:function(){return u}});var i=n(9299),a=n(3830),s=n(6768),o=n(144);const c=Symbol(),u=()=>{const e=(0,a.B)(),t=(0,s.EW)((()=>e.value.config.Client.Id)),n=(0,o.Kh)({timer:0,timer1:0,page:{Request:{Page:1,Size:+(localStorage.getItem("ps")||"10"),Name:"",Ids:[],Prop:"",Asc:!0},Count:0,List:[]},showDeviceEdit:!1,showAccessEdit:!1,deviceInfo:null});(0,s.Gt)(c,n);const u={},r=(e,t,n,i)=>{u[e]={dataFn:t,processFn:n,refreshFn:i,changed:!0,refresh:!0}},l=e=>{u[e]&&(u[e].refresh=!0,u[e].changed=!0)},d=()=>{const e=async()=>{clearTimeout(n.timer1);for(let e in u){const t=u[e];t.refresh&&(t.refresh=!1,t.refreshFn(n.page.List))}for(let e in u){const t=u[e];if(t.changed){t.changed=!1;for(let e=0;e<n.page.List.length;e++){const i={};t.processFn(n.page.List[e],i),Object.assign(n.page.List[e],i)}}}for(let e in u){const t=u[e];t.changed=await t.dataFn(n.page.List)}n.timer1=setTimeout(e,1e3)};e()};d();const h=()=>{p().then((()=>{d(),f()}))},p=()=>new Promise(((a,s)=>{(0,i.nD)(n.page.Request).then((i=>{n.page.Request=i.Request,n.page.Count=i.Count;for(let n in i.List)Object.assign(i.List[n],{showDel:t.value!=i.List[n].MachineId&&0==i.List[n].Connected,showAccess:t.value!=i.List[n].MachineId&&i.List[n].Connected,showReboot:i.List[n].Connected,isSelf:t.value==i.List[n].MachineId}),i.List[n].isSelf&&(e.value.self=i.List[n]);n.page.List=i.List;for(let e in u)u[e].changed=!0;a()})).catch((e=>{a()}))})),f=()=>{clearTimeout(n.timer),(0,i.nD)(n.page.Request).then((i=>{for(let a in i.List){const s=n.page.List.filter((e=>e.MachineId==i.List[a].MachineId))[0];s&&(Object.assign(s,{Connected:i.List[a].Connected,Version:i.List[a].Version,LastSignIn:i.List[a].LastSignIn,Args:i.List[a].Args,showDel:t.value!=i.List[a].MachineId&&0==i.List[a].Connected,showAccess:t.value!=i.List[a].MachineId&&i.List[a].Connected,showReboot:i.List[a].Connected,isSelf:t.value==i.List[a].MachineId}),s.isSelf&&(e.value.self=s))}n.timer=setTimeout(f,5e3)})).catch((e=>{n.timer=setTimeout(f,5e3)}))},v=e=>{e&&(n.page.Request.Page=e),p()},g=e=>{e&&(n.page.Request.Size=e,localStorage.setItem("ps",e)),p()},m=()=>{clearTimeout(n.timer),clearTimeout(n.timer1),n.timer=0,n.timer1=0},k=e=>(0,i.VN)(e);return{devices:n,deviceAddHook:r,deviceRefreshHook:l,deviceStartProcess:h,handlePageChange:v,handlePageSizeChange:g,deviceClearTimeout:m,setSort:k}},r=()=>(0,s.WQ)(c)},8651:function(e,t,n){n.d(t,{L:function(){return c},Z:function(){return u}});var i=n(144),a=n(6768),s=n(83);const o=Symbol(),c=()=>{const e=(0,i.KR)({speedCache:{},showEdit:!1,device:{},transactionId:"",timer:0,list:{},hashcode:0,_updateRealTime:!1,updateRealTime:t=>{e.value.hashcode=0,e.value._updateRealTime=t}});(0,a.Gt)(o,e);const t=t=>{const i={},a=e.value.speedCache;for(let e in t)for(let s in t[e]){const o=t[e][s];i[s]=i[s]||{},i[s][e]=o;const c=`${s}-${e}`,u=a[c]||{SendBytes:0,ReceiveBytes:0};o.SendBytesText=n(o.SendBytes-u.SendBytes,"/s"),o.ReceiveBytesText=n(o.ReceiveBytes-u.ReceiveBytes,"/s"),o.SendBufferRemainingText=n(o.SendBufferRemaining,""),o.RecvBufferRemainingText=n(o.RecvBufferRemaining||0,""),u.SendBytes=o.SendBytes,u.ReceiveBytes=o.ReceiveBytes,a[c]=u}return i},n=(e,t="")=>{let n=0;while(e>=1024)e/=1024,n++;return`${e.toFixed(2)}${["B","KB","MB","GB","TB"][n]}${t}`},c=()=>new Promise(((n,i)=>{(0,s.Uu)(e.value.hashcode.toString()).then((i=>{if(0==e.value._updateRealTime&&(e.value.hashcode=i.HashCode),i.List)return e.value.list=t(i.List),void n(!0);n(!1)})).catch((()=>{n(!1)}))})),u=()=>{},r=(t,n)=>{Object.assign(n,{hook_connection:e.value.list[t.MachineId]})};return{connections:e,connectionDataFn:c,connectionProcessFn:r,connectionRefreshFn:u}},u=()=>(0,a.WQ)(o)},5234:function(e,t,n){n.d(t,{O:function(){return c},W:function(){return u}});n(3375),n(9225),n(3972),n(9209),n(5714),n(7561),n(6197);var i=n(144),a=n(6768),s=n(5241);const o=Symbol(),c=()=>{const e=(0,i.KR)({timer:0,showEdit:!1,current:null,list:{},hashcode:0,showLease:!1,device:{id:"",name:""},showRoutes:!1,showFirewall:!1,showWakeup:!1});(0,a.Gt)(o,e);const t=/iphone|samsung|vivo|oppo|google|huawei|xiaomi|ios|android|windows|ubuntu|openwrt|armbian|archlinux|fedora|centos|rocky|alpine|debian|linux|docker/g,n=()=>new Promise(((n,i)=>{(0,s.zi)(e.value.hashcode.toString()).then((i=>{if((0,s.Jd)(),e.value.hashcode=i.HashCode,i.List){for(let e in i.List){const n=i.List[e].SystemInfo.toLowerCase(),a=[...new Set(n.match(t))];Object.assign(i.List[e],{running:2==i.List[e].Status,loading:1==i.List[e].Status,systems:a})}return e.value.list=i.List,void n(!0)}n(!1)})).catch((e=>{n(!1)}))})),c=()=>{(0,s.Yh)()},u=(t,n)=>{Object.assign(n,{hook_tuntap:e.value.list[t.MachineId]})},r=t=>Object.values(e.value.list).filter((e=>e.IP.indexOf(t)>=0||e.Lans.filter((e=>e.IP.indexOf(t)>=0)).length>0)).map((e=>e.MachineId)),l=t=>{const n=Object.values(e.value.list).filter((e=>e.IP)).sort(((e,t)=>{const n=e.IP.split(".").map((e=>Number(e))),i=t.IP.split(".").map((e=>Number(e)));for(let a=0;a<n.length;a++)if(n[a]!=i[a])return n[a]-i[a];return 0}));return n.map((e=>e.MachineId))};return{tuntap:e,tuntapDataFn:n,tuntapProcessFn:u,tuntapRefreshFn:c,getTuntapMachines:r,sortTuntapIP:l}},u=()=>(0,a.WQ)(o)},7454:function(e,t,n){n.d(t,{A:function(){return v}});var i=n(6768),a=n(4232);const s=["onClick","title"],o={key:0,class:"self gateway"};function c(e,t,n,c,u,r){const l=(0,i.g2)("StarFilled"),d=(0,i.g2)("el-icon"),h=(0,i.g2)("AccessBoolean");return(0,i.uX)(),(0,i.Wv)(h,{value:"RenameSelf,RenameOther"},{default:(0,i.k6)((({values:e})=>[(0,i.Lk)("div",null,[(0,i.Lk)("a",{href:"javascript:;",onClick:t=>c.handleEdit(e),title:c.item.IP,class:"a-line"},[(0,i.Lk)("strong",{class:(0,a.C4)(["gateway",{green:c.item.Connected}])},(0,a.v_)(c.item.MachineName||"null"),3)],8,s),c.item.isSelf?((0,i.uX)(),(0,i.CE)("strong",o,[(0,i.eW)("("),(0,i.bF)(d,{size:"16"},{default:(0,i.k6)((()=>[(0,i.bF)(l)])),_:1}),(0,i.eW)(")")])):(0,i.Q3)("",!0)])])),_:1})}var u=n(3830),r=n(7477),l=n(1219),d=n(4373),h={props:["item","config"],components:{StarFilled:r.BQ2},setup(e){const t=(0,d.Y)(),n=(0,u.B)(),a=(0,i.EW)((()=>n.value.config.Client.Id)),s=n=>{if(e.config){if(a.value===e.item.MachineId){if(!n.RenameSelf)return void l.nk.success("æ— æƒé™")}else if(!n.RenameOther)return void l.nk.success("æ— æƒé™");t.deviceInfo=e.item,t.showDeviceEdit=!0}};return{item:(0,i.EW)((()=>e.item)),handleEdit:s}}},p=n(1241);const f=(0,p.A)(h,[["render",c],["__scopeId","data-v-0e0ffccb"]]);var v=f},4575:function(e,t,n){n.d(t,{A:function(){return p}});var i=n(6768),a=n(4232);const s=["title"],o={key:1,class:"connect-point default",title:"æœªè¿žæŽ¥"};function c(e,t,n,c,u,r){const l=(0,i.gN)("loading");return(0,i.uX)(),(0,i.CE)("div",{class:"connect-point",onClick:t[0]||(t[0]=(...e)=>c.handleShow&&c.handleShow(...e))},[c.state.className?(0,i.bo)(((0,i.uX)(),(0,i.CE)("span",{key:0,class:(0,a.C4)(`connect-point ${c.state.className}`),title:c.state.title},null,10,s)),[[l,c.state.connecting]]):(0,i.bo)(((0,i.uX)(),(0,i.CE)("span",o,null,512)),[[l,c.state.connecting]])])}var u=n(144),r=n(8651),l={props:["row","transactionId"],setup(e){const t=(0,r.Z)(),n=(0,i.EW)((()=>e.row.hook_connection&&e.row.hook_connection[e.transactionId]||{})),a=(0,u.Kh)({transactionId:e.transactionId,connecting:(0,i.EW)((()=>e.row.hook_operating[e.transactionId])),className:(0,i.EW)((()=>["p2p","relay","node"][n.value.Type])),title:(0,i.EW)((()=>["æ‰“æ´žç›´è¿ž","ä¸­ç»§è¿žæŽ¥","èŠ‚ç‚¹è¿žæŽ¥"][n.value.Type]))}),s=()=>{t.value.device=e.row,t.value.transactionId=e.transactionId,t.value.showEdit=!0};return{state:a,handleShow:s}}},d=n(1241);const h=(0,d.A)(l,[["render",c],["__scopeId","data-v-1c7a0bd2"]]);var p=h},109:function(e,t,n){n.d(t,{A:function(){return X}});var i=n(6768),a=n(4232);const s={class:"flex"},o={class:"flex-1"},c=["onClick"],u=["title"],r={key:1,class:"red",title:"IPå­˜åœ¨å†²çªï¼Œè¯·ä½¿ç”¨æ–°IP"},l={key:2,class:"disable",title:"IPä¸ç”Ÿæ•ˆï¼Œå¯èƒ½æ˜¯è®¾å¤‡ä¸åœ¨çº¿"},d=["title"],h={key:4,class:"app-nat",title:"è™šæ‹Ÿç½‘å¡IP\r\nåº”ç”¨å±‚DNAT"},p={key:5,class:"green gateway",title:"è™šæ‹Ÿç½‘å¡IP\r\nç³»ç»ŸNAT"},f={key:6},v={key:1,class:"disable",title:"IPä¸ç”Ÿæ•ˆï¼Œå¯èƒ½æ˜¯è®¾å¤‡ä¸åœ¨çº¿"},g={key:0},m={key:0,class:"flex disable",title:"IPä¸ç”Ÿæ•ˆï¼Œå¯èƒ½æ˜¯è®¾å¤‡ä¸åœ¨çº¿"},k={key:1,class:"flex disable",title:"å·²ç¦ç”¨"},I={key:2,class:"flex yellow",title:"ä¸Žå…¶å®ƒè®¾å¤‡å¡«å†™IPã€æˆ–æœ¬æœºå±€åŸŸç½‘IPæœ‰å†²çªã€æˆ–ä¸Žæœ¬æœºå¤–ç½‘IPä¸€è‡´"},_={key:3,class:"flex green",title:"æ­£å¸¸ä½¿ç”¨"},C={key:0,class:"any green"},L={key:0,class:"delay green"},w={class:"delay yellow"};function y(e,t,n,y,S,P){const E=(0,i.g2)("ConnectionShow"),b=(0,i.g2)("Loading"),R=(0,i.g2)("el-icon"),T=(0,i.g2)("el-switch"),F=(0,i.g2)("Share"),A=(0,i.g2)("AccessBoolean");return(0,i.uX)(),(0,i.Wv)(A,{value:"TuntapChangeSelf,TuntapChangeOther,TuntapStatusSelf,TuntapStatusOther"},{default:(0,i.k6)((({values:e})=>[(0,i.Lk)("div",null,[(0,i.Lk)("div",s,[(0,i.Lk)("div",o,[(0,i.bF)(E,{row:y.item,transactionId:"tuntap"},null,8,["row"]),(0,i.Lk)("a",{href:"javascript:;",class:"a-line",onClick:t=>y.handleTuntapIP(y.item.hook_tuntap,e),title:"è™šæ‹Ÿç½‘å¡IP"},[y.item.Connected?((0,i.uX)(),(0,i.CE)(i.FK,{key:0},[y.item.hook_tuntap.SetupError?((0,i.uX)(),(0,i.CE)("strong",{key:0,class:"red",title:`setup ${y.item.hook_tuntap.SetupError}`},(0,a.v_)(y.item.hook_tuntap.IP),9,u)):y.item.hook_tuntap.Exists?((0,i.uX)(),(0,i.CE)("strong",r,(0,a.v_)(y.item.hook_tuntap.IP),1)):0==y.item.hook_tuntap.Available?((0,i.uX)(),(0,i.CE)("strong",l,(0,a.v_)(y.item.hook_tuntap.IP),1)):y.item.hook_tuntap.NatError?((0,i.uX)(),(0,i.CE)("strong",{key:3,class:"yellow",title:`nat ${y.item.hook_tuntap.NatError}`},(0,a.v_)(y.item.hook_tuntap.IP),9,d)):y.item.hook_tuntap.AppNat&&y.item.hook_tuntap.running?((0,i.uX)(),(0,i.CE)("strong",h,(0,a.v_)(y.item.hook_tuntap.IP),1)):y.item.hook_tuntap.running?((0,i.uX)(),(0,i.CE)("strong",p,(0,a.v_)(y.item.hook_tuntap.IP),1)):((0,i.uX)(),(0,i.CE)("strong",f,(0,a.v_)(y.item.hook_tuntap.IP),1))],64)):((0,i.uX)(),(0,i.CE)("strong",v,(0,a.v_)(y.item.hook_tuntap.IP),1))],8,c)]),y.item.hook_tuntap.loading?((0,i.uX)(),(0,i.CE)("div",g,[(0,i.bF)(R,{size:"14",class:"loading"},{default:(0,i.k6)((()=>[(0,i.bF)(b)])),_:1})])):((0,i.uX)(),(0,i.Wv)(T,{key:1,"model-value":y.item.Connected&&y.item.hook_tuntap.running,loading:y.item.hook_tuntap.loading,disabled:"",onClick:t=>y.handleTuntap(y.item.hook_tuntap,e),size:"small","inline-prompt":"","active-text":"ðŸ˜€","inactive-text":"ðŸ˜£"},null,8,["model-value","loading","onClick"]))]),(0,i.Lk)("div",null,[(0,i.Lk)("div",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(y.item.hook_tuntap.Lans,((e,t)=>((0,i.uX)(),(0,i.CE)(i.FK,{key:t},[0==y.item.hook_tuntap.Available?((0,i.uX)(),(0,i.CE)("div",m,(0,a.v_)(e.IP)+" / "+(0,a.v_)(e.PrefixLength),1)):e.Disabled?((0,i.uX)(),(0,i.CE)("div",k,(0,a.v_)(e.IP)+" / "+(0,a.v_)(e.PrefixLength),1)):e.Exists?((0,i.uX)(),(0,i.CE)("div",I,(0,a.v_)(e.IP)+" / "+(0,a.v_)(e.PrefixLength),1)):((0,i.uX)(),(0,i.CE)("div",_,(0,a.v_)(e.IP)+" / "+(0,a.v_)(e.PrefixLength),1))],64)))),128))]),y.item.hook_tuntap.Any?((0,i.uX)(),(0,i.CE)("div",C,[(0,i.bF)(R,null,{default:(0,i.k6)((()=>[(0,i.bF)(F)])),_:1})])):(0,i.Q3)("",!0),y.showDelay?((0,i.uX)(),(0,i.CE)(i.FK,{key:1},[y.item.hook_tuntap.Delay>=0&&y.item.hook_tuntap.Delay<=100?((0,i.uX)(),(0,i.CE)("div",L,(0,a.v_)(y.item.hook_tuntap.Delay)+"ms",1)):(0,i.Q3)("",!0),(0,i.Lk)("template",null,[(0,i.Lk)("div",w,(0,a.v_)(y.item.hook_tuntap.Delay)+"ms",1)])],64)):(0,i.Q3)("",!0)])])])),_:1})}var S=n(5241),P=n(1219),E=n(5234),b=n(7477),R=n(3830),T=n(4575),F={props:["item","config"],components:{Loading:b.Rhj,Share:b.SYj,ConnectionShow:T.A},setup(e){const t=(0,E.W)(),n=(0,R.B)(),a=(0,i.EW)((()=>n.value.config.Client.Id)),s=(0,i.EW)((()=>2==(2&(n.value.config.Running.Tuntap||{Switch:0}).Switch))),o=(t,n)=>{if(!e.config)return;if(a.value===t.MachineId){if(!n.TuntapStatusSelf)return void P.nk.success("æ— æƒé™")}else if(!n.TuntapStatusOther)return void P.nk.success("æ— æƒé™");const i=e.item.Connected&&t.running?(0,S.PR)(t.MachineId):(0,S.en)(t.MachineId);t.loading=!0,i.then((()=>{P.nk.success("æ“ä½œæˆåŠŸï¼")})).catch((e=>{console.log(e),P.nk.error("æ“ä½œå¤±è´¥ï¼")}))},c=(n,i)=>{if(e.config||a.value==n.MachineId){if(a.value===n.MachineId){if(!i.TuntapChangeSelf)return void P.nk.success("æ— æƒé™")}else if(!i.TuntapChangeOther)return void P.nk.success("æ— æƒé™");n.device=e.item,t.value.current=n,t.value.showEdit=!0}else P.nk.success("æ— æƒé™")},u=()=>{(0,S.Yh)()};return{item:(0,i.EW)((()=>e.item)),tuntap:t,showDelay:s,handleTuntap:o,handleTuntapIP:c,handleTuntapRefresh:u}}},A=n(1241);const B=(0,A.A)(F,[["render",y],["__scopeId","data-v-13c79acc"]]);var X=B}}]);