"use strict";(self["webpackChunklinker_web"]=self["webpackChunklinker_web"]||[]).push([[761],{3363:function(e,t,a){a.d(t,{EQ:function(){return o},QI:function(){return s},ZK:function(){return n},gv:function(){return r}});var l=a(4);const s=e=>(0,l.zG)("access/GetAccesss",e),n=e=>(0,l.zG)("access/SetAccess",e),o=()=>(0,l.zG)("access/refresh"),r=e=>(0,l.zG)("access/SetApiPassword",e)},4921:function(e,t,a){a.d(t,{B8:function(){return i},Hb:function(){return c},Qj:function(){return s},a6:function(){return d},iN:function(){return u},id:function(){return p},mb:function(){return o},xy:function(){return r},zq:function(){return n}});var l=a(4);const s=(e="")=>(0,l.zG)("flow/GetFlows",e),n=(e="")=>(0,l.zG)("flow/GetMessengerFlows",e),o=e=>(0,l.zG)("flow/GetSForwardFlows",e),r=e=>(0,l.zG)("flow/GetRelayFlows",e),i=()=>(0,l.zG)("flow/GetCitys"),u=(e="")=>(0,l.zG)("flow/GetStopwatch",e),c=e=>(0,l.zG)("flow/GetForwardFlows",e),d=e=>(0,l.zG)("flow/GetSocks5Flows",e),p=e=>(0,l.zG)("flow/GetTunnelFlows",e)},83:function(e,t,a){a.d(t,{$M:function(){return c},G7:function(){return o},KW:function(){return i},Zu:function(){return d},eh:function(){return n},r7:function(){return s},xN:function(){return r},xT:function(){return u}});var l=a(4);const s=(e="0")=>(0,l.zG)("tunnel/get",e),n=()=>(0,l.zG)("tunnel/refresh"),o=()=>(0,l.zG)("tunnel/Operating"),r=e=>(0,l.zG)("tunnel/connect",e),i=e=>(0,l.zG)("tunnel/SetRouteLevel",e),u=e=>(0,l.zG)("tunnel/GetTransports",e),c=e=>(0,l.zG)("tunnel/SetTransports",e),d=e=>(0,l.zG)("tunnel/GetNetwork",e)},920:function(e,t,a){a.d(t,{BJ:function(){return i},NS:function(){return o},UB:function(){return p},aP:function(){return d},lJ:function(){return n},mK:function(){return s},rD:function(){return r},rL:function(){return u},y2:function(){return c}});var l=a(4);const s=(e="0")=>(0,l.zG)("updater/get",e),n=e=>(0,l.zG)("updater/confirm",e),o=e=>(0,l.zG)("updater/exit",e),r=e=>(0,l.zG)("updater/SetSync2Server",e),i=()=>(0,l.zG)("updater/getserver"),u=()=>(0,l.zG)("updater/getmsg"),c=e=>(0,l.zG)("updater/confirmserver",e),d=()=>(0,l.zG)("updater/exitserver"),p=()=>(0,l.zG)("updater/Subscribe")},6057:function(e,t,a){a.d(t,{Y:function(){return r},q:function(){return i}});var l=a(3363),s=a(144),n=a(6768);const o=Symbol(),r=()=>{const e=(0,s.KR)({list:{},timer:0,hashcode:0});(0,n.Gt)(o,e);const t=()=>{(0,l.EQ)()},a=()=>{clearTimeout(e.value.timer),(0,l.QI)(e.value.hashcode.toString()).then((t=>{e.value.hashcode=t.HashCode,t.List&&(e.value.list=t.List),e.value.timer=setTimeout(a,1e3)})).catch((()=>{e.value.timer=setTimeout(a,1e3)}))},r=()=>{clearTimeout(e.value.timer)};return{access:e,_getAccessInfo:a,clearAccessTimeout:r,handleAccesssRefresh:t}},i=()=>(0,n.WQ)(o)},6046:function(e,t,a){a.d(t,{Y:function(){return o},q:function(){return r}});var l=a(144),s=a(6768);const n=Symbol(),o=()=>{const e=(0,l.KR)({count:!1,map:!1,allmap:!1,overallSendtSpeed:"0000.00KB",overallReceiveSpeed:"0000.00KB",overallOnline:"0/0",serverOnline:"",machineId:"",device:{id:"",name:""}});return(0,s.Gt)(n,e),{flow:e}},r=()=>(0,s.WQ)(n)},5304:function(e,t,a){a.d(t,{T:function(){return u},d:function(){return i}});var l=a(920),s=a(3830),n=a(144),o=a(6768);const r=Symbol(),i=()=>{const e=(0,s.B)(),t=(0,n.KR)({timer:0,list:{},hashcode:0,current:{Version:"",Msg:[],DateTime:"",Status:0,Length:0,Current:0},subscribeTimer:0,device:{},show:!1});(0,o.Gt)(r,t);const a=()=>{clearTimeout(t.value.timer),(0,l.mK)(t.value.hashcode.toString()).then((l=>{if(t.value.hashcode=l.HashCode,l.List){const a=Object.values(l.List).filter((e=>!!e.Version))[0];a&&(Object.assign(t.value.current,{Version:a.Version,Status:a.Status,Length:a.Length,Current:a.Current}),e.value.updater=t.value.current),t.value.list=l.List}t.value.timer=setTimeout(a,800)})).catch((()=>{t.value.timer=setTimeout(a,800)}))},i=()=>{(0,l.UB)().then((()=>{t.value.subscribeTimer=setTimeout(i,5e3)})).catch((()=>{t.value.subscribeTimer=setTimeout(i,5e3)}))},u=()=>{clearTimeout(t.value.timer),clearTimeout(t.value.subscribeTimer)};return{updater:t,_getUpdater:a,_subscribeUpdater:i,clearUpdaterTimeout:u}},u=()=>(0,o.WQ)(r)},7586:function(e,t,a){a.d(t,{A:function(){return g}});var l=a(6768),s=a(4232);const n=e=>((0,l.Qi)("data-v-0a8a507e"),e=e(),(0,l.jt)(),e),o=n((()=>(0,l.Lk)("span",{class:"red"},"满权限(顶级管理权)",-1)));function r(e,t,a,n,r,i){const u=(0,l.g2)("el-checkbox"),c=(0,l.g2)("el-col"),d=(0,l.g2)("el-row"),p=(0,l.g2)("el-checkbox-group");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(d,null,{default:(0,l.k6)((()=>[(0,l.bF)(c,{span:8},{default:(0,l.k6)((()=>[(0,l.bF)(u,{modelValue:n.state.checkAll,"onUpdate:modelValue":t[0]||(t[0]=e=>n.state.checkAll=e),onChange:n.handleCheckAllChange,label:"全选",indeterminate:n.state.isIndeterminate},null,8,["modelValue","onChange","indeterminate"])])),_:1}),n.globalData.config.Client.FullAccess?((0,l.uX)(),(0,l.Wv)(c,{key:0,span:8},{default:(0,l.k6)((()=>[(0,l.bF)(u,{modelValue:n.state.full,"onUpdate:modelValue":t[1]||(t[1]=e=>n.state.full=e)},{default:(0,l.k6)((()=>[o])),_:1},8,["modelValue"])])),_:1})):(0,l.Q3)("",!0)])),_:1}),(0,l.Lk)("div",{class:"access-wrap scrollbar",style:(0,s.Tr)({height:`${n.state.height}rem`})},[(0,l.bF)(p,{modelValue:n.state.checkList,"onUpdate:modelValue":t[2]||(t[2]=e=>n.state.checkList=e),onChange:n.handleCheckedChange},{default:(0,l.k6)((()=>[(0,l.bF)(d,null,{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.access,((e,t)=>((0,l.uX)(),(0,l.Wv)(c,{key:t,xs:12,sm:8},{default:(0,l.k6)((()=>[(0,l.bF)(u,{value:e.Value,label:e.Text},null,8,["value","label"])])),_:2},1024)))),128))])),_:1})])),_:1},8,["modelValue","onChange"])],4)],64)}a(4114);var i=a(144),u=a(3830),c=a(6057),d={props:["machineid","height"],setup(e){const t=(0,u.B)(),a=(0,c.q)(),s=(0,l.EW)((()=>{const e=t.value.config.Client.Accesss;return Object.keys(e).reduce(((a,l,s)=>{if(t.value.hasAccess(l)){const t=e[l];t.Key=l,a.push(t)}return a}),[])})),n=(0,i.Kh)({height:e.height||50,checkList:[t.value.config.Client.Accesss.Api.Value,t.value.config.Client.Accesss.Web.Value,t.value.config.Client.Accesss.NetManager.Value,t.value.config.Client.Accesss.FullManager.Value,t.value.config.Client.Accesss.Transport.Value,t.value.config.Client.Accesss.RenameSelf.Value,t.value.config.Client.Accesss.UpdateSelf.Value,t.value.config.Client.Accesss.TuntapStatusSelf.Value,t.value.config.Client.Accesss.TuntapChangeSelf.Value,t.value.config.Client.Accesss.ForwardShowSelf.Value,t.value.config.Client.Accesss.ForwardSelf.Value,t.value.config.Client.Accesss.TunnelChangeSelf.Value,t.value.config.Client.Accesss.TunnelRemove.Value,t.value.config.Client.Accesss.Action.Value,t.value.config.Client.Accesss.Socks5StatusSelf.Value,t.value.config.Client.Accesss.Socks5ChangeSelf.Value,t.value.config.Client.Accesss.FirewallSelf.Value,t.value.config.Client.Accesss.WakeupSelf.Value],checkAll:!1,full:!1,isIndeterminate:!1}),o=()=>{const e=n.checkList.reduce(((e,t)=>(e[t]="1",e)),[]);for(let t=0;t<e.length;t++)e[t]=e[t]||"0";return[e.join(""),n.full]},r=e=>{const t=e.length;n.checkAll=t===s.value.length,n.isIndeterminate=t>0&&t<s.value.length},d=e=>{n.checkAll=e,n.checkList=e?s.value.map((e=>e.Value)):[],n.isIndeterminate=!1};return(0,l.sV)((()=>{if(a&&a.value.list[e.machineid]){const t=a.value.list[e.machineid];n.checkList=s.value.reduce(((e,a)=>("1"==t[a.Value]&&e.push(a.Value),e)),[])}r(n.checkList)})),{globalData:t,state:n,access:s,getValue:o,handleCheckAllChange:d,handleCheckedChange:r}}},p=a(1241);const f=(0,p.A)(d,[["render",r],["__scopeId","data-v-0a8a507e"]]);var g=f},1257:function(e,t,a){a.d(t,{A:function(){return de}});var l=a(6768),s=a(4232);function n(e,t,a,n,o,r){const i=(0,l.g2)("el-table-column"),u=(0,l.g2)("el-button"),c=(0,l.g2)("el-table"),d=(0,l.g2)("el-dialog"),p=(0,l.g2)("ServerFlowMessenger"),f=(0,l.g2)("ServerFlowSForward"),g=(0,l.g2)("ServerFlowForward"),m=(0,l.g2)("ServerFlowSocks5"),h=(0,l.g2)("ServerFlowTunnel"),v=(0,l.g2)("ServerFlowRelay"),w=(0,l.g2)("OnlineMap"),y=(0,l.g2)("OnlineAllMap");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(d,{title:n.state.time,"destroy-on-close":"",modelValue:n.flow.count,"onUpdate:modelValue":t[0]||(t[0]=e=>n.flow.count=e),width:"640"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.bF)(c,{data:n.state.list,border:"",size:"small",width:"100%"},{default:(0,l.k6)((()=>[(0,l.bF)(i,{prop:"text",label:e.$t("status.flowType")},null,8,["label"]),(0,l.bF)(i,{prop:"sendtBytes",label:e.$t("status.flowUpload"),sortable:""},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.sendtBytesText),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"sendtSpeed",label:e.$t("status.flowUpload"),sortable:""},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.sendtSpeedText),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"receiveBytes",label:e.$t("status.flowDownload"),sortable:""},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.receiveBytesText),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"receiveSpeed",label:e.$t("status.flowDownload"),sortable:""},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.receiveSpeedText),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"oper",label:e.$t("status.flowOper"),width:"70"},{default:(0,l.k6)((t=>[t.row.detail?((0,l.uX)(),(0,l.Wv)(u,{key:0,size:"small",onClick:e=>n.handleShowDetail(t.row.id)},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)(e.$t("status.flowDetail")),1)])),_:2},1032,["onClick"])):(0,l.Q3)("",!0)])),_:1},8,["label"])])),_:1},8,["data"])])])),_:1},8,["title","modelValue"]),n.state.details.Messenger?((0,l.uX)(),(0,l.Wv)(p,{key:0,config:n.config,machineId:n.flow.machineId,modelValue:n.state.details.Messenger,"onUpdate:modelValue":t[1]||(t[1]=e=>n.state.details.Messenger=e)},null,8,["config","machineId","modelValue"])):(0,l.Q3)("",!0),n.state.details.SForward?((0,l.uX)(),(0,l.Wv)(f,{key:1,config:n.config,machineId:n.flow.machineId,modelValue:n.state.details.SForward,"onUpdate:modelValue":t[2]||(t[2]=e=>n.state.details.SForward=e)},null,8,["config","machineId","modelValue"])):(0,l.Q3)("",!0),n.state.details.Forward?((0,l.uX)(),(0,l.Wv)(g,{key:2,config:n.config,machineId:n.flow.machineId,modelValue:n.state.details.Forward,"onUpdate:modelValue":t[3]||(t[3]=e=>n.state.details.Forward=e)},null,8,["config","machineId","modelValue"])):(0,l.Q3)("",!0),n.state.details.Socks5?((0,l.uX)(),(0,l.Wv)(m,{key:3,config:n.config,machineId:n.flow.machineId,modelValue:n.state.details.Socks5,"onUpdate:modelValue":t[4]||(t[4]=e=>n.state.details.Socks5=e)},null,8,["config","machineId","modelValue"])):(0,l.Q3)("",!0),n.state.details.Tunnel?((0,l.uX)(),(0,l.Wv)(h,{key:4,config:n.config,machineId:n.flow.machineId,modelValue:n.state.details.Tunnel,"onUpdate:modelValue":t[5]||(t[5]=e=>n.state.details.Tunnel=e)},null,8,["config","machineId","modelValue"])):(0,l.Q3)("",!0),n.state.details.Relay?((0,l.uX)(),(0,l.Wv)(v,{key:5,config:n.config,modelValue:n.state.details.Relay,"onUpdate:modelValue":t[6]||(t[6]=e=>n.state.details.Relay=e)},null,8,["config","modelValue"])):(0,l.Q3)("",!0),n.flow.map?((0,l.uX)(),(0,l.Wv)(w,{key:6,config:n.config,modelValue:n.flow.map,"onUpdate:modelValue":t[7]||(t[7]=e=>n.flow.map=e)},null,8,["config","modelValue"])):(0,l.Q3)("",!0),n.flow.allmap?((0,l.uX)(),(0,l.Wv)(y,{key:7,config:n.config,modelValue:n.flow.allmap,"onUpdate:modelValue":t[8]||(t[8]=e=>n.flow.allmap=e)},null,8,["config","modelValue"])):(0,l.Q3)("",!0)],64)}a(4114);var o=a(4921),r=a(144);function i(e,t,a,n,o,r){const i=(0,l.g2)("el-table-column"),u=(0,l.g2)("el-table"),c=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.Wv)(c,{title:e.$t("status.flowMessenger"),class:"options-center",top:"1vh","destroy-on-close":"",modelValue:n.state.show,"onUpdate:modelValue":t[0]||(t[0]=e=>n.state.show=e),width:"680"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.bF)(u,{data:n.state.list,stripe:"",border:"",size:"small",width:"100%",height:"60vh"},{default:(0,l.k6)((()=>[(0,l.bF)(i,{prop:"id",label:"id",width:"200"}),(0,l.bF)(i,{prop:"sendtBytes",label:e.$t("status.flowUpload"),sortable:""},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.sendtBytesText),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"sendtSpeed",label:e.$t("status.flowUpload"),sortable:""},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.sendtSpeedText)+"/s",1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"receiveBytes",label:e.$t("status.flowDownload"),sortable:""},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.receiveBytesText),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"receiveSpeed",label:e.$t("status.flowDownload"),sortable:""},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.receiveSpeedText)+"/s",1)])),_:1},8,["label"])])),_:1},8,["data"])])])),_:1},8,["title","modelValue"])}var u=a(5931),c={props:["modelValue","config","machineId"],emits:["update:modelValue"],setup(e,{emit:t}){const{t:a}=(0,u.s9)(),s=(0,r.Kh)({show:!0,timer:0,list:[],old:null});(0,l.wB)((()=>s.show),(e=>{e||setTimeout((()=>{t("update:modelValue",e)}),300)}));const n=()=>{clearTimeout(s.timer),(0,o.zq)(e.machineId).then((e=>{const t=s.old||e,l=[];for(let s in e){const n=e[s],o=t[s],r=`[${s}]${a(`status.messenger${s}`)||"unknown"}`;l.push({id:r,sendtBytes:n.SendtBytes,sendtBytesText:i(n.SendtBytes),sendtSpeed:n.SendtBytes-o.SendtBytes,sendtSpeedText:i(n.SendtBytes-o.SendtBytes),receiveBytes:n.ReceiveBytes,receiveBytesText:i(n.ReceiveBytes),receiveSpeed:n.ReceiveBytes-o.ReceiveBytes,receiveSpeedText:i(n.ReceiveBytes-o.ReceiveBytes)})}s.list=l.filter((e=>!!e.id)),s.old=e,s.timer=setTimeout(n,1e3)})).catch((e=>{s.timer=setTimeout(n,1e3)}))},i=e=>{let t=0;while(e>=1024)e/=1024,t++;return`${e.toFixed(2)}${["B","KB","MB","GB","TB"][t]}`};return(0,l.sV)((()=>{n()})),(0,l.hi)((()=>{clearTimeout(s.timer)})),{config:e.config,state:s}}},d=a(1241);const p=(0,d.A)(c,[["render",i],["__scopeId","data-v-5b253342"]]);var f=p;const g={class:"head"},m={class:"page t-c"},h={class:"page-wrap"};function v(e,t,a,n,o,r){const i=(0,l.g2)("el-input"),u=(0,l.g2)("el-table-column"),c=(0,l.g2)("el-table"),d=(0,l.g2)("el-pagination"),p=(0,l.g2)("el-dialog"),f=(0,l.gN)("trim");return(0,l.uX)(),(0,l.Wv)(p,{title:e.$t("status.flowServerForward"),class:"options-center",top:"1vh","destroy-on-close":"",modelValue:n.state.show,"onUpdate:modelValue":t[1]||(t[1]=e=>n.state.show=e),width:"680"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.Lk)("div",g,[(0,l.bo)((0,l.bF)(i,{modelValue:n.state.page.Key,"onUpdate:modelValue":t[0]||(t[0]=e=>n.state.page.Key=e),placeholder:e.$t("status.flowSearchDomainPort")},null,8,["modelValue","placeholder"]),[[f]])]),(0,l.bF)(c,{data:n.state.list,stripe:"",border:"",size:"small",width:"100%",height:"60vh",onSortChange:n.handleSort},{default:(0,l.k6)((()=>[(0,l.bF)(u,{prop:"Key",label:e.$t("status.flowSearchDomainPort"),width:"200"},null,8,["label"]),(0,l.bF)(u,{prop:"SendtBytes",label:e.$t("status.flowUpload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.SendtBytesText),1)])),_:1},8,["label"]),(0,l.bF)(u,{prop:"DiffSendtBytes",label:e.$t("status.flowUpload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.DiffSendtBytesText)+"/s",1)])),_:1},8,["label"]),(0,l.bF)(u,{prop:"ReceiveBytes",label:e.$t("status.flowDownload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.ReceiveBytesText),1)])),_:1},8,["label"]),(0,l.bF)(u,{prop:"DiffReceiveBytes",label:e.$t("status.flowDownload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.DiffReceiveBytesText)+"/s",1)])),_:1},8,["label"])])),_:1},8,["data","onSortChange"]),(0,l.Lk)("div",m,[(0,l.Lk)("div",h,[(0,l.bF)(d,{small:"",background:"",layout:"total,prev,pager, next",total:n.state.page.Count,"page-size":n.state.page.PageSize,"current-page":n.state.page.Page,onCurrentChange:n.handlePageChange},null,8,["total","page-size","current-page","onCurrentChange"])])])])])),_:1},8,["title","modelValue"])}var w={props:["modelValue","config","machineId"],emits:["update:modelValue"],setup(e,{emit:t}){const a=(0,r.Kh)({show:!0,timer:0,list:[],page:{Key:"",Page:1,PageSize:15,Count:0,Order:1,OrderType:0}});(0,l.wB)((()=>a.show),(e=>{e||setTimeout((()=>{t("update:modelValue",e)}),300)}));const s=()=>{clearTimeout(a.timer),(0,o.mb)({Key:a.page.Key,Page:a.page.Page,PageSize:a.page.PageSize,Order:a.page.Order,OrderType:a.page.OrderType,MachineId:e.machineId}).then((e=>{try{a.page.Page=e.Page,a.page.PageSize=e.PageSize,a.page.Count=e.Count;const t=[];for(let a=0;a<e.Data.length;a++){const l=e.Data[a];Object.assign(l,{SendtBytesText:n(l.SendtBytes),ReceiveBytesText:n(l.ReceiveBytes),DiffSendtBytesText:n(l.DiffSendtBytes),DiffReceiveBytesText:n(l.DiffReceiveBytes)}),t.push(l)}a.list=t}catch(t){console.log(t)}a.timer=setTimeout(s,1e3)})).catch((e=>{a.timer=setTimeout(s,1e3)}))},n=e=>{let t=0;while(e>=1024)e/=1024,t++;return`${e.toFixed(2)}${["B","KB","MB","GB","TB"][t]}`},i=e=>{e&&(a.page.Page=e)},u=e=>{const t={ascending:1,descending:0}[e.order],l={SendtBytes:1,DiffSendtBytes:2,ReceiveBytes:3,DiffReceiveBytes:4}[e.prop];a.page.Order=l,a.page.OrderType=t};return(0,l.sV)((()=>{s()})),(0,l.hi)((()=>{clearTimeout(a.timer)})),{config:e.config,state:a,handlePageChange:i,handleSort:u}}};const y=(0,d.A)(w,[["render",v],["__scopeId","data-v-7a85ea80"]]);var b=y;const S={class:"page t-c"},k={class:"page-wrap"};function B(e,t,a,n,o,r){const i=(0,l.g2)("el-table-column"),u=(0,l.g2)("el-table"),c=(0,l.g2)("el-pagination"),d=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.Wv)(d,{title:e.$t("status.flowForward"),class:"options-center",top:"1vh","destroy-on-close":"",modelValue:n.state.show,"onUpdate:modelValue":t[0]||(t[0]=e=>n.state.show=e),width:"90%"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.bF)(u,{data:n.state.list,stripe:"",border:"",size:"small",width:"100%",height:"60vh",onSortChange:n.handleSort},{default:(0,l.k6)((()=>[(0,l.bF)(i,{prop:"Key",label:e.$t("status.flowMachineName"),width:"100"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(n.state.names[e.row.Key]||"unknow"),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"Target",label:e.$t("status.flowTarget"),width:"120"},null,8,["label"]),(0,l.bF)(i,{prop:"SendtBytes",label:e.$t("status.flowUpload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.SendtBytesText),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"DiffSendtBytes",label:e.$t("status.flowUpload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.DiffSendtBytesText)+"/s",1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"ReceiveBytes",label:e.$t("status.flowDownload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.ReceiveBytesText),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"DiffReceiveBytes",label:e.$t("status.flowDownload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.DiffReceiveBytesText)+"/s",1)])),_:1},8,["label"])])),_:1},8,["data","onSortChange"]),(0,l.Lk)("div",S,[(0,l.Lk)("div",k,[(0,l.bF)(c,{small:"",background:"",layout:"total,prev,pager, next",total:n.state.page.Count,"page-size":n.state.page.PageSize,"current-page":n.state.page.Page,onCurrentChange:n.handlePageChange},null,8,["total","page-size","current-page","onCurrentChange"])])])])])),_:1},8,["title","modelValue"])}var T=a(9299),V={props:["modelValue","config","machineId"],emits:["update:modelValue"],setup(e,{emit:t}){const a=(0,r.Kh)({show:!0,timer:0,names:{},list:[],page:{Page:1,PageSize:15,Count:0,Order:1,OrderType:0}});(0,l.wB)((()=>a.show),(e=>{e||setTimeout((()=>{t("update:modelValue",e)}),300)}));const s=()=>{clearTimeout(a.timer),(0,o.Hb)({Page:a.page.Page,PageSize:a.page.PageSize,Order:a.page.Order,OrderType:a.page.OrderType,MachineId:e.machineId}).then((e=>{try{a.page.Page=e.Page,a.page.PageSize=e.PageSize,a.page.Count=e.Count;const t=[];for(let a=0;a<e.Data.length;a++){const l=e.Data[a];Object.assign(l,{SendtBytesText:n(l.SendtBytes),ReceiveBytesText:n(l.ReceiveBytes),DiffSendtBytesText:n(l.DiffSendtBytes),DiffReceiveBytesText:n(l.DiffReceiveBytes)}),t.push(l)}a.list=t}catch(t){console.log(t)}a.timer=setTimeout(s,1e3)})).catch((e=>{a.timer=setTimeout(s,1e3)}))},n=e=>{let t=0;while(e>=1024)e/=1024,t++;return`${e.toFixed(2)}${["B","KB","MB","GB","TB"][t]}`},i=e=>{e&&(a.page.Page=e)},u=e=>{const t={ascending:1,descending:0}[e.order],l={SendtBytes:1,DiffSendtBytes:2,ReceiveBytes:3,DiffReceiveBytes:4}[e.prop];a.page.Order=l,a.page.OrderType=t},c=()=>{(0,T.NT)().then((e=>{a.names=e.reduce(((e,t,a)=>(e[t.MachineId]=t.MachineName,e)),{})}))};return(0,l.sV)((()=>{s(),c()})),(0,l.hi)((()=>{clearTimeout(a.timer)})),{config:e.config,state:a,handlePageChange:i,handleSort:u}}};const F=(0,d.A)(V,[["render",B],["__scopeId","data-v-0f2107fe"]]);var _=F;const C={class:"page t-c"},x={class:"page-wrap"};function I(e,t,a,n,o,r){const i=(0,l.g2)("el-table-column"),u=(0,l.g2)("el-table"),c=(0,l.g2)("el-pagination"),d=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.Wv)(d,{title:e.$t("status.flowSocks5"),class:"options-center",top:"1vh","destroy-on-close":"",modelValue:n.state.show,"onUpdate:modelValue":t[0]||(t[0]=e=>n.state.show=e),width:"90%"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.bF)(u,{data:n.state.list,stripe:"",border:"",size:"small",width:"100%",height:"60vh",onSortChange:n.handleSort},{default:(0,l.k6)((()=>[(0,l.bF)(i,{prop:"Key",label:e.$t("status.flowMachineName"),width:"100"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(n.state.names[e.row.Key]||"unknow"),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"Target",label:e.$t("status.flowTarget"),width:"120"},null,8,["label"]),(0,l.bF)(i,{prop:"SendtBytes",label:e.$t("status.flowUpload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.SendtBytesText),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"DiffSendtBytes",label:e.$t("status.flowUpload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.DiffSendtBytesText)+"/s",1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"ReceiveBytes",label:e.$t("status.flowDownload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.ReceiveBytesText),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"DiffReceiveBytes",label:e.$t("status.flowDownload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.DiffReceiveBytesText)+"/s",1)])),_:1},8,["label"])])),_:1},8,["data","onSortChange"]),(0,l.Lk)("div",C,[(0,l.Lk)("div",x,[(0,l.bF)(c,{small:"",background:"",layout:"total,prev,pager, next",total:n.state.page.Count,"page-size":n.state.page.PageSize,"current-page":n.state.page.Page,onCurrentChange:n.handlePageChange},null,8,["total","page-size","current-page","onCurrentChange"])])])])])),_:1},8,["title","modelValue"])}var z={props:["modelValue","config","machineId"],emits:["update:modelValue"],setup(e,{emit:t}){const a=(0,r.Kh)({show:!0,timer:0,names:{},list:[],page:{Page:1,PageSize:15,Count:0,Order:1,OrderType:0}});(0,l.wB)((()=>a.show),(e=>{e||setTimeout((()=>{t("update:modelValue",e)}),300)}));const s=()=>{clearTimeout(a.timer),(0,o.a6)({Page:a.page.Page,PageSize:a.page.PageSize,Order:a.page.Order,OrderType:a.page.OrderType,MachineId:e.machineId}).then((e=>{try{a.page.Page=e.Page,a.page.PageSize=e.PageSize,a.page.Count=e.Count;const t=[];for(let a=0;a<e.Data.length;a++){const l=e.Data[a];Object.assign(l,{SendtBytesText:n(l.SendtBytes),ReceiveBytesText:n(l.ReceiveBytes),DiffSendtBytesText:n(l.DiffSendtBytes),DiffReceiveBytesText:n(l.DiffReceiveBytes)}),t.push(l)}a.list=t}catch(t){console.log(t)}a.timer=setTimeout(s,1e3)})).catch((e=>{a.timer=setTimeout(s,1e3)}))},n=e=>{let t=0;while(e>=1024)e/=1024,t++;return`${e.toFixed(2)}${["B","KB","MB","GB","TB"][t]}`},i=e=>{e&&(a.page.Page=e)},u=e=>{const t={ascending:1,descending:0}[e.order],l={SendtBytes:1,DiffSendtBytes:2,ReceiveBytes:3,DiffReceiveBytes:4}[e.prop];a.page.Order=l,a.page.OrderType=t},c=()=>{(0,T.NT)().then((e=>{a.names=e.reduce(((e,t,a)=>(e[t.MachineId]=t.MachineName,e)),{})}))};return(0,l.sV)((()=>{s(),c()})),(0,l.hi)((()=>{clearTimeout(a.timer)})),{config:e.config,state:a,handlePageChange:i,handleSort:u}}};const $=(0,d.A)(z,[["render",I],["__scopeId","data-v-55d6858b"]]);var R=$;const P={class:"page t-c"},D={class:"page-wrap"};function A(e,t,a,n,o,r){const i=(0,l.g2)("el-table-column"),u=(0,l.g2)("el-table"),c=(0,l.g2)("el-pagination"),d=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.Wv)(d,{title:e.$t("status.flowTunnel"),class:"options-center",top:"1vh","destroy-on-close":"",modelValue:n.state.show,"onUpdate:modelValue":t[0]||(t[0]=e=>n.state.show=e),width:"90%"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.bF)(u,{data:n.state.list,stripe:"",border:"",size:"small",width:"100%",height:"60vh",onSortChange:n.handleSort},{default:(0,l.k6)((()=>[(0,l.bF)(i,{prop:"Key",label:e.$t("status.flowMachineName"),width:"100"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(n.state.names[e.row.Key]||"unknow"),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"TransitionId",label:e.$t("status.flowTransitionId")},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(n.state.transitions[e.row.TransitionId]||"unknow"),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"Direction",label:e.$t("status.flowDirection")},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(n.state.dirs[e.row.Direction]||"unknow"),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"Type",label:e.$t("status.flowType")},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(n.state.types[e.row.Type]||"unknow"),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"Mode",label:e.$t("status.flowMode")},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(n.state.modes[e.row.Mode]||"unknow"),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"ReceiveBytes",label:e.$t("status.flowNum"),width:"80"},null,8,["label"])])),_:1},8,["data","onSortChange"]),(0,l.Lk)("div",P,[(0,l.Lk)("div",D,[(0,l.bF)(c,{small:"",background:"",layout:"total,prev,pager, next",total:n.state.page.Count,"page-size":n.state.page.PageSize,"current-page":n.state.page.Page,onCurrentChange:n.handlePageChange},null,8,["total","page-size","current-page","onCurrentChange"])])])])])),_:1},8,["title","modelValue"])}var M={props:["modelValue","config","machineId"],emits:["update:modelValue"],setup(e,{emit:t}){const a=(0,r.Kh)({show:!0,timer:0,names:{},list:[],page:{Page:1,PageSize:15,Count:0,Order:1,OrderType:0},transitions:{socks5:"代理",forward:"端口转发",tuntap:"虚拟网卡"},dirs:["正向","反向"],types:["打洞","中继","节点"],modes:["客户端","服务端"]});(0,l.wB)((()=>a.show),(e=>{e||setTimeout((()=>{t("update:modelValue",e)}),300)}));const s=()=>{clearTimeout(a.timer),(0,o.id)({Page:a.page.Page,PageSize:a.page.PageSize,Order:a.page.Order,OrderType:a.page.OrderType,MachineId:e.machineId}).then((e=>{try{a.page.Page=e.Page,a.page.PageSize=e.PageSize,a.page.Count=e.Count;const t=[];for(let a=0;a<e.Data.length;a++){const l=e.Data[a];Object.assign(l,{SendtBytesText:l.SendtBytes,ReceiveBytesText:l.ReceiveBytes,DiffSendtBytesText:l.DiffSendtBytes,DiffReceiveBytesText:l.DiffReceiveBytes}),t.push(l)}a.list=t}catch(t){console.log(t)}a.timer=setTimeout(s,1e3)})).catch((e=>{a.timer=setTimeout(s,1e3)}))},n=e=>{e&&(a.page.Page=e)},i=e=>{const t={ascending:1,descending:0}[e.order],l={SendtBytes:1,DiffSendtBytes:2,ReceiveBytes:3,DiffReceiveBytes:4}[e.prop];a.page.Order=l,a.page.OrderType=t},u=()=>{(0,T.NT)().then((e=>{a.names=e.reduce(((e,t,a)=>(e[t.MachineId]=t.MachineName,e)),{})}))};return(0,l.sV)((()=>{s(),u()})),(0,l.hi)((()=>{clearTimeout(a.timer)})),{config:e.config,state:a,handlePageChange:n,handleSort:i}}};const O=(0,d.A)(M,[["render",A],["__scopeId","data-v-b5a30d1e"]]);var G=O;const U={class:"head"},K={class:"page t-c"},W={class:"page-wrap"};function N(e,t,a,n,o,r){const i=(0,l.g2)("el-input"),u=(0,l.g2)("el-table-column"),c=(0,l.g2)("el-table"),d=(0,l.g2)("el-pagination"),p=(0,l.g2)("el-dialog"),f=(0,l.gN)("trim");return(0,l.uX)(),(0,l.Wv)(p,{title:e.$t("status.flowRelay"),class:"options-center",top:"1vh","destroy-on-close":"",modelValue:n.state.show,"onUpdate:modelValue":t[1]||(t[1]=e=>n.state.show=e),width:"680"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.Lk)("div",U,[(0,l.bo)((0,l.bF)(i,{modelValue:n.state.page.Key,"onUpdate:modelValue":t[0]||(t[0]=e=>n.state.page.Key=e),placeholder:"名字搜索"},null,8,["modelValue"]),[[f]])]),(0,l.bF)(c,{data:n.state.list,stripe:"",border:"",size:"small",width:"100%",height:"60vh",onSortChange:n.handleSort},{default:(0,l.k6)((()=>[(0,l.bF)(u,{prop:"FromName",label:e.$t("status.flowRelaySource"),width:"120"},null,8,["label"]),(0,l.bF)(u,{prop:"ToName",label:e.$t("status.flowRelayTarget"),width:"120"},null,8,["label"]),(0,l.bF)(u,{prop:"SendtBytes",label:e.$t("status.flowUpload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.SendtBytesText),1)])),_:1},8,["label"]),(0,l.bF)(u,{prop:"DiffSendtBytes",label:e.$t("status.flowUpload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.DiffSendtBytesText)+"/s",1)])),_:1},8,["label"]),(0,l.bF)(u,{prop:"ReceiveBytes",label:e.$t("status.flowDownload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.ReceiveBytesText),1)])),_:1},8,["label"]),(0,l.bF)(u,{prop:"DiffReceiveBytes",label:e.$t("status.flowDownload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.DiffReceiveBytesText)+"/s",1)])),_:1},8,["label"])])),_:1},8,["data","onSortChange"]),(0,l.Lk)("div",K,[(0,l.Lk)("div",W,[(0,l.bF)(d,{small:"",background:"",layout:"total,prev,pager, next",total:n.state.page.Count,"page-size":n.state.page.PageSize,"current-page":n.state.page.Page,onCurrentChange:n.handlePageChange},null,8,["total","page-size","current-page","onCurrentChange"])])])])])),_:1},8,["title","modelValue"])}var X={props:["modelValue","config"],emits:["update:modelValue"],setup(e,{emit:t}){const a=(0,r.Kh)({show:!0,timer:0,list:[],page:{Key:"",Page:1,PageSize:15,Count:0,Order:1,OrderType:0}});(0,l.wB)((()=>a.show),(e=>{e||setTimeout((()=>{t("update:modelValue",e)}),300)}));const s=()=>{clearTimeout(a.timer),(0,o.xy)({Key:a.page.Key,Page:a.page.Page,PageSize:a.page.PageSize,Order:a.page.Order,OrderType:a.page.OrderType}).then((e=>{try{a.page.Page=e.Page,a.page.PageSize=e.PageSize,a.page.Count=e.Count;const t=[];for(let a=0;a<e.Data.length;a++){const l=e.Data[a];Object.assign(l,{SendtBytesText:n(l.SendtBytes),ReceiveBytesText:n(l.ReceiveBytes),DiffSendtBytesText:n(l.DiffSendtBytes),DiffReceiveBytesText:n(l.DiffReceiveBytes)}),t.push(l)}a.list=t}catch(t){console.log(t)}a.timer=setTimeout(s,1e3)})).catch((e=>{a.timer=setTimeout(s,1e3)}))},n=e=>{let t=0;while(e>=1024)e/=1024,t++;return`${e.toFixed(2)}${["B","KB","MB","GB","TB"][t]}`},i=e=>{e&&(a.page.Page=e)},u=e=>{const t={ascending:1,descending:0}[e.order],l={SendtBytes:1,DiffSendtBytes:2,ReceiveBytes:3,DiffReceiveBytes:4}[e.prop];a.page.Order=l,a.page.OrderType=t};return(0,l.sV)((()=>{s()})),(0,l.hi)((()=>{clearTimeout(a.timer)})),{config:e.config,state:a,handlePageChange:i,handleSort:u}}};const E=(0,d.A)(X,[["render",N],["__scopeId","data-v-1098928d"]]);var Q=E,j=a(3830);const q=e=>((0,l.Qi)("data-v-128e55db"),e=e(),(0,l.jt)(),e),Y=q((()=>(0,l.Lk)("div",{class:"map-wrap",id:"map"},null,-1)));function H(e,t,a,s,n,o){const r=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.Wv)(r,{class:"options-center",title:e.$t("status.flowOnline"),"destroy-on-close":"",modelValue:s.state.show,"onUpdate:modelValue":t[0]||(t[0]=e=>s.state.show=e),width:"77rem",top:"2vh"},{default:(0,l.k6)((()=>[Y])),_:1},8,["title","modelValue"])}var Z=a(83),J={props:["modelValue"],emits:["update:modelValue"],setup(e,{emit:t}){const{t:a}=(0,u.s9)(),s=(0,r.Kh)({show:!0});(0,l.wB)((()=>s.show),(e=>{e||setTimeout((()=>{t("update:modelValue",e)}),300)}));const n=(e,t)=>{const l=L.map("map").setView([38,105],4);L.tileLayer("https://webrd01.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}",{attribution:"linker",maxZoom:10}).addTo(l);for(let n=0;n<t.length;n++)try{const s=t[n];if(!e[s.MachineId])continue;const o=e[s.MachineId].Net;if(0==o.Lat||0==o.Lon)continue;const r=new L.Icon({iconSize:[18,28],iconAnchor:[9,28],shadowAnchor:[0,0],popupAnchor:[0,-27],shadowSize:[0,0],iconUrl:s.Online?"/marker-green.png":"/marker-grey.png",shadowUrl:"/marker-shadow.png"}),i=`\n                        <div class="marker-content" >\n                            <h3 class="marker-title" style="font-size:1.6rem">${s.MachineName}</h3>\n                            <div class="marker-text" style="font-size:1.3rem">${a("status.flowArea")} : ${o.CountryCode}、${o.City}</div>\n                            <div class="marker-text" style="font-size:1.3rem">${a("status.flowNet")} : ${o.Isp}</div>\n                        </div>\n                    `;new L.marker(new L.latLng([o.Lat+Math.random()/5,o.Lon+Math.random()/5]),{icon:r}).bindPopup(i,{}).on("mouseover",(function(e){this.openPopup()})).on("mouseout",(function(e){this.closePopup()})).addTo(l)}catch(s){console.log(s)}};return(0,l.sV)((()=>{(0,l.dY)((()=>{(0,Z.r7)().then((e=>{(0,T.NT)().then((t=>{n(e.List,t)})).catch((()=>{}))})).catch((()=>{}))}))})),{state:s}}};const ee=(0,d.A)(J,[["render",H],["__scopeId","data-v-128e55db"]]);var te=ee;const ae=e=>((0,l.Qi)("data-v-46898e22"),e=e(),(0,l.jt)(),e),le=ae((()=>(0,l.Lk)("div",{class:"map-wrap",id:"map"},null,-1)));function se(e,t,a,s,n,o){const r=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.Wv)(r,{class:"options-center",title:e.$t("status.flowOnline"),"destroy-on-close":"",modelValue:s.state.show,"onUpdate:modelValue":t[0]||(t[0]=e=>s.state.show=e),width:"77rem",top:"2vh"},{default:(0,l.k6)((()=>[le])),_:1},8,["title","modelValue"])}var ne={props:["modelValue"],emits:["update:modelValue"],setup(e,{emit:t}){const{t:a}=(0,u.s9)(),s=(0,r.Kh)({show:!0});(0,l.wB)((()=>s.show),(e=>{e||setTimeout((()=>{t("update:modelValue",e)}),300)}));const n=e=>{const t=L.map("map").setView([38,105],4);L.tileLayer("https://webrd01.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}",{attribution:"linker",maxZoom:10}).addTo(t);for(let a=0;a<e.length;a++){const l=e[a],s=new L.Icon({iconSize:[18,28],iconAnchor:[9,28],shadowAnchor:[0,0],popupAnchor:[0,-27],shadowSize:[0,0],iconUrl:"/marker-green.png",shadowUrl:"/marker-shadow.png"}),n=`\n                    <div class="marker-content" >\n                        <h3 class="marker-title" style="font-size:1.6rem">${l.City} ${l.Count}</h3>\n                    </div>\n                `;new L.marker(new L.latLng([l.Lat,l.Lon]),{icon:s}).bindPopup(n,{}).on("mouseover",(function(e){this.openPopup()})).on("mouseout",(function(e){this.closePopup()})).addTo(t)}};return(0,l.sV)((()=>{(0,l.dY)((()=>{(0,o.B8)().then((e=>{n(e)})).catch((()=>{}))}))})),{state:s}}};const oe=(0,d.A)(ne,[["render",se],["__scopeId","data-v-46898e22"]]);var re=oe,ie=a(6046),ue={props:["config","title"],components:{ServerFlowMessenger:f,ServerFlowSForward:b,ServerFlowForward:_,ServerFlowSocks5:R,ServerFlowTunnel:G,ServerFlowRelay:Q,OnlineMap:te,OnlineAllMap:re},setup(e,{emit:t}){const a=(0,ie.q)(),{t:s}=(0,u.s9)(),n=(0,j.B)(),i=(0,l.EW)((()=>n.value.hasAccess("SForwardFlow"))),c=(0,l.EW)((()=>n.value.hasAccess("RelayFlow"))),d=(0,l.EW)((()=>n.value.hasAccess("SigninFlow"))),p=(0,l.EW)((()=>n.value.hasAccess("ForwardFlow"))),f=(0,l.EW)((()=>n.value.hasAccess("Socks5Flow"))),g=(0,l.EW)((()=>n.value.hasAccess("TunnelFlow"))),m=(0,r.Kh)({timer:0,time:"",list:[],old:null,details:{Messenger:!1,SForward:!1,Forward:!1,Socks5:!1,Tunnel:!1,Relay:!1}}),h=e=>{m.details[e]=!0},v={External:{text:s("status.flowWanPort"),detail:!1,format:!0,suffix:"/s"},RelayReport:{text:s("status.flowRelayNode"),detail:!1,format:!0,suffix:"/s"},Relay:{text:s("status.flowRelay"),detail:c.value,format:!0,suffix:"/s"},Messenger:{text:s("status.flowMessenger"),detail:d.value,format:!0,suffix:"/s"},SForward:{text:s("status.flowServerForward"),detail:i.value,format:!0,suffix:"/s"},flow:{text:"",detail:!1},Forward:{text:s("status.flowForward"),detail:p.value,format:!0,suffix:"/s"},Socks5:{text:s("status.flowSocks5"),detail:f.value,format:!0,suffix:"/s"},Tunnel:{text:s("status.flowTunnel"),detail:g.value}},w=()=>{clearTimeout(m.timer),(0,o.Qj)(a.value.machineId).then((t=>{const l=m.old||t;if(t.Items["_"]&&(a.value.overallOnline=`${t.Items["_"].SendtBytes}/${t.Items["_"].ReceiveBytes}`,delete t.Items["_"]),t.Items["flow"]&&t.Items["flow"].ReceiveBytes>0){const e=(BigInt(t.Items["flow"].ReceiveBytes)>>BigInt(32)).toString(),l=(BigInt(t.Items["flow"].ReceiveBytes)&BigInt(4294967295)).toString(),s=t.Items["flow"].SendtBytes;a.value.serverOnline=`、${e}/${l}/${s}`,delete t.Items["flow"]}let s=0,n=0,o=0,r=0;for(let e in l.Items)s+=l.Items[e].ReceiveBytes,n+=l.Items[e].SendtBytes;for(let e in t.Items)o+=t.Items[e].ReceiveBytes,r+=t.Items[e].SendtBytes;a.value.overallSendtSpeed=y(r-n,!0,"/s"),a.value.overallReceiveSpeed=y(o-s,!0,"/s"),m.time=`[${e.title}]${t.Start}`;const i=[];for(let e in t.Items){const a=t.Items[e],s=l.Items[e],n=v[`${e}`]||{text:`Unknow${e}`,detail:!1};n.text&&i.push({id:e,text:n.text,detail:n.detail,sendtBytes:a.SendtBytes,sendtBytesText:y(a.SendtBytes,n.format,""),sendtSpeed:a.SendtBytes-s.SendtBytes,sendtSpeedText:y(a.SendtBytes-s.SendtBytes,n.format,n.suffix),receiveBytes:a.ReceiveBytes,receiveBytesText:y(a.ReceiveBytes,n.format,""),receiveSpeed:a.ReceiveBytes-s.ReceiveBytes,receiveSpeedText:y(a.ReceiveBytes-s.ReceiveBytes,n.format,n.suffix)})}m.list=i.filter((e=>!!e.id)),m.old=t,m.timer=setTimeout(w,1e3)})).catch((e=>{m.timer=setTimeout(w,1e3)}))},y=(e,t,a)=>{if(void 0===t)return e;let l=0;while(e>=1024)e/=1024,l++;return`${e.toFixed(2)}${["B","KB","MB","GB","TB"][l]}${a}`};return(0,l.sV)((()=>{w()})),(0,l.hi)((()=>{clearTimeout(m.timer)})),{config:e.config,state:m,flow:a,handleShowDetail:h}}};const ce=(0,d.A)(ue,[["render",n],["__scopeId","data-v-187fc3f2"]]);var de=ce},2322:function(e,t,a){a.d(t,{A:function(){return y}});var l=a(6768),s=a(4232);const n={class:"t-c"},o={class:"t-c w-100 mgt-1"};function r(e,t,a,r,i,u){const c=(0,l.g2)("Share"),d=(0,l.g2)("el-icon"),p=(0,l.g2)("el-button"),f=(0,l.g2)("el-transfer"),g=(0,l.g2)("el-dialog"),m=(0,l.g2)("AccessBoolean");return(0,l.uX)(),(0,l.Wv)(m,{value:"Sync"},{default:(0,l.k6)((({values:a})=>[(0,l.Lk)("div",null,[(0,l.RG)(e.$slots,"default",{},(()=>[(0,l.bF)(p,{class:"btn",size:"small",onClick:e=>r.handleShowSync(a)},{default:(0,l.k6)((()=>[(0,l.bF)(d,null,{default:(0,l.k6)((()=>[(0,l.bF)(c)])),_:1})])),_:2},1032,["onClick"])])),(0,l.bF)(g,{class:"options-center",title:e.$t("server.sync"),"destroy-on-close":"",modelValue:r.state.showNames,"onUpdate:modelValue":t[2]||(t[2]=e=>r.state.showNames=e),width:"54rem",top:"2vh"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.Lk)("div",n,(0,s.v_)(`${e.$t("server.sync")}【${e.$t(`server.async${r.state.name}`)}】${e.$t("server.asyncText")}`),1),(0,l.bF)(f,{class:"src-tranfer mgt-1",modelValue:r.state.srcIdValues,"onUpdate:modelValue":t[0]||(t[0]=e=>r.state.srcIdValues=e),filterable:"","filter-method":r.srcFilterMethod,data:r.state.srcIds,titles:[e.$t("firewall.unselect"),e.$t("firewall.selected")],props:{key:"MachineId",label:"MachineName"}},null,8,["modelValue","filter-method","data","titles"]),(0,l.Lk)("div",o,[(0,l.bF)(p,{onClick:t[1]||(t[1]=e=>r.state.showNames=!1)},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)(e.$t("common.cancel")),1)])),_:1}),(0,l.bF)(p,{type:"primary",onClick:r.handleConfirm},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)(e.$t("common.confirm")),1)])),_:1},8,["onClick"])])])])),_:1},8,["title","modelValue"])])])),_:3})}var i=a(9299),u=a(4);const c=e=>(0,u.zG)("sync/Sync",e);var d=a(3830),p=a(7477),f=a(1219),g=a(144),m=a(5931),h={props:["name"],components:{Share:p.SYj},setup(e){const{t:t}=(0,m.s9)(),a=((0,d.B)(),(0,g.Kh)({name:e.name,loading:!1,showNames:!1,srcIdValues:[],srcIds:[]})),l=()=>{c({names:[e.name],ids:a.srcIdValues}).then((e=>{f.nk.success(t("common.oper")),a.showNames=!1}))},s=e=>{e.Sync?(a.showNames=!0,n()):f.nk.success(t("common.access"))},n=()=>{a.loading=!0,(0,i.NT)().then((e=>{a.loading=!1,a.srcIds=e})).catch((e=>{a.loading=!1}))},o=(e,t)=>t.MachineName.toLowerCase().includes(e.toLowerCase());return{state:a,handleShowSync:s,srcFilterMethod:o,handleConfirm:l}}},v=a(1241);const w=(0,v.A)(h,[["render",r]]);var y=w},749:function(e,t,a){a.d(t,{A:function(){return y}});var l=a(6768),s=a(4232);const n=["onClick","title"],o={key:0,class:"progress"},r={key:1,class:"progress"};function i(e,t,a,i,u,c){const d=(0,l.g2)("Loading"),p=(0,l.g2)("el-icon"),f=(0,l.g2)("Download"),g=(0,l.g2)("CircleCheck"),m=(0,l.g2)("SwitchButton"),h=(0,l.g2)("AccessShow"),v=(0,l.g2)("AccessBoolean");return(0,l.uX)(),(0,l.Wv)(v,{value:"UpdateSelf,UpdateOther"},{default:(0,l.k6)((({values:e})=>[(0,l.Lk)("a",{href:"javascript:;",class:(0,s.C4)(["download",i.updaterColor]),onClick:t=>i.handleUpdate(e),title:i.updaterText},[(0,l.Lk)("span",null,[(0,l.Lk)("span",null,(0,s.v_)(i.item.Version),1),i.updater.list[i.item.MachineId]?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[1==i.updater.list[i.item.MachineId].Status?((0,l.uX)(),(0,l.Wv)(p,{key:0,size:"14",class:"loading"},{default:(0,l.k6)((()=>[(0,l.bF)(d)])),_:1})):2==i.updater.list[i.item.MachineId].Status?((0,l.uX)(),(0,l.Wv)(p,{key:1,size:"14"},{default:(0,l.k6)((()=>[(0,l.bF)(f)])),_:1})):3==i.updater.list[i.item.MachineId].Status||5==i.updater.list[i.item.MachineId].Status?((0,l.uX)(),(0,l.CE)(l.FK,{key:2},[(0,l.bF)(p,{size:"14",class:"loading"},{default:(0,l.k6)((()=>[(0,l.bF)(d)])),_:1}),0==i.updater.list[i.item.MachineId].Length?((0,l.uX)(),(0,l.CE)("span",o,"0%")):((0,l.uX)(),(0,l.CE)("span",r,(0,s.v_)(parseInt(i.updater.list[i.item.MachineId].Current/i.updater.list[i.item.MachineId].Length*100))+"%",1))],64)):6==i.updater.list[i.item.MachineId].Status?((0,l.uX)(),(0,l.Wv)(p,{key:3,size:"14",class:"yellow"},{default:(0,l.k6)((()=>[(0,l.bF)(g)])),_:1})):(0,l.Q3)("",!0)],64)):((0,l.uX)(),(0,l.Wv)(p,{key:1,size:"14"},{default:(0,l.k6)((()=>[(0,l.bF)(f)])),_:1}))])],10,n),(0,l.bF)(h,{value:"Reboot"},{default:(0,l.k6)((()=>[(0,l.Lk)("a",{href:"javascript:;",class:"download",title:"重启",onClick:t[0]||(t[0]=e=>i.handleExit(i.item.MachineId,i.item.MachineName))},[(0,l.bF)(p,null,{default:(0,l.k6)((()=>[(0,l.bF)(m)])),_:1})])])),_:1})])),_:1})}var u=a(3830),c=a(1219),d=a(2933),p=a(920),f=a(7477),g=a(5304),m=a(5931),h={props:["item","config"],components:{Download:f.f5X,Loading:f.Rhj,CircleCheck:f.rW7,SwitchButton:f.L$q},setup(e){const{t:t}=(0,m.s9)(),a=(0,u.B)(),s=(0,g.T)(),n=(0,l.EW)((()=>a.value.signin.Version)),o=(0,l.EW)((()=>s.value.current.Version)),r=(0,l.EW)((()=>s.value.list[e.item.MachineId]?s.value.list[e.item.MachineId].Status<=2?e.item.Version!=n.value?`与服务器版本(${n.value})不一致，建议更新`:o.value!=e.item.Version?`不是最新版本(${o.value})，建议更新`:"是最新版本，但我无法阻止你喜欢更新":{3:"正在下载",4:"已下载",5:"正在解压",6:"已解压，请重启"}[s.value.list[e.item.MachineId].Status]:"未检测到更新")),i=(0,l.EW)((()=>e.item.Version!=n.value?"red":s.value.list[e.item.MachineId]&&o.value!=e.item.Version?"yellow":"green")),f=t=>{if(s.value.device=e.item,!e.config)return;if(!t.UpdateSelf)return void c.nk.error("无权限");if(e.item.MachineId!=a.value.self.MachineId&&!t.UpdateOther)return void c.nk.error("无权限");const l=s.value.list[e.item.MachineId];l?[0,1,3,5].indexOf(l.Status)>=0?c.nk.error("操作中，请稍后!"):6!=l.Status?s.value.show=2==l.Status:d.s.confirm("确定关闭程序吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{(0,p.NS)(e.item.MachineId)})).catch((()=>{})):c.nk.error("未检测到更新")},h=(e,a)=>{d.s.confirm(t("home.closeSure",[a]),t("common.tips"),{confirmButtonText:t("common.confirm"),cancelButtonText:t("common.cancel"),type:"warning"}).then((()=>{(0,p.NS)(e)})).catch((()=>{}))};return{item:(0,l.EW)((()=>e.item)),updater:s,updaterText:r,updaterColor:i,handleUpdate:f,handleExit:h}}},v=a(1241);const w=(0,v.A)(h,[["render",i],["__scopeId","data-v-11604354"]]);var y=w}}]);