"use strict";(self["webpackChunklinker_web"]=self["webpackChunklinker_web"]||[]).push([[646],{920:function(e,l,a){a.d(l,{BJ:function(){return d},NS:function(){return s},UB:function(){return m},aP:function(){return c},lJ:function(){return o},mK:function(){return r},rD:function(){return n},rL:function(){return u},y2:function(){return i}});var t=a(4);const r=(e="0")=>(0,t.zG)("updater/get",e),o=e=>(0,t.zG)("updater/confirm",e),s=e=>(0,t.zG)("updater/exit",e),n=e=>(0,t.zG)("updater/SetSync2Server",e),d=()=>(0,t.zG)("updater/getserver"),u=()=>(0,t.zG)("updater/getmsg"),i=e=>(0,t.zG)("updater/confirmserver",e),c=()=>(0,t.zG)("updater/exitserver"),m=()=>(0,t.zG)("updater/Subscribe")},2322:function(e,l,a){a.d(l,{A:function(){return f}});var t=a(6768),r=a(4232);const o={class:"t-c"},s={class:"t-c w-100 mgt-1"};function n(e,l,a,n,d,u){const i=(0,t.g2)("Share"),c=(0,t.g2)("el-icon"),m=(0,t.g2)("el-button"),p=(0,t.g2)("el-transfer"),b=(0,t.g2)("el-dialog"),h=(0,t.g2)("AccessBoolean");return(0,t.uX)(),(0,t.Wv)(h,{value:"Sync"},{default:(0,t.k6)((({values:a})=>[(0,t.Lk)("div",null,[(0,t.RG)(e.$slots,"default",{},(()=>[(0,t.bF)(m,{class:"btn",size:"small",onClick:e=>n.handleShowSync(a)},{default:(0,t.k6)((()=>[(0,t.bF)(c,null,{default:(0,t.k6)((()=>[(0,t.bF)(i)])),_:1})])),_:2},1032,["onClick"])])),(0,t.bF)(b,{class:"options-center",title:e.$t("server.sync"),"destroy-on-close":"",modelValue:n.state.showNames,"onUpdate:modelValue":l[2]||(l[2]=e=>n.state.showNames=e),width:"54rem",top:"2vh"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.Lk)("div",o,(0,r.v_)(`${e.$t("server.sync")}【${e.$t(`server.async${n.state.name}`)}】${e.$t("server.asyncText")}`),1),(0,t.bF)(p,{class:"src-tranfer mgt-1",modelValue:n.state.srcIdValues,"onUpdate:modelValue":l[0]||(l[0]=e=>n.state.srcIdValues=e),filterable:"","filter-method":n.srcFilterMethod,data:n.state.srcIds,titles:[e.$t("firewall.unselect"),e.$t("firewall.selected")],props:{key:"MachineId",label:"MachineName"}},null,8,["modelValue","filter-method","data","titles"]),(0,t.Lk)("div",s,[(0,t.bF)(m,{onClick:l[1]||(l[1]=e=>n.state.showNames=!1)},{default:(0,t.k6)((()=>[(0,t.eW)((0,r.v_)(e.$t("common.cancel")),1)])),_:1}),(0,t.bF)(m,{type:"primary",onClick:n.handleConfirm},{default:(0,t.k6)((()=>[(0,t.eW)((0,r.v_)(e.$t("common.confirm")),1)])),_:1},8,["onClick"])])])])),_:1},8,["title","modelValue"])])])),_:3})}var d=a(9299),u=a(4);const i=e=>(0,u.zG)("sync/Sync",e);var c=a(3830),m=a(7477),p=a(1219),b=a(144),h=a(5931),v={props:["name"],components:{Share:m.SYj},setup(e){const{t:l}=(0,h.s9)(),a=((0,c.B)(),(0,b.Kh)({name:e.name,loading:!1,showNames:!1,srcIdValues:[],srcIds:[]})),t=()=>{i({names:[e.name],ids:a.srcIdValues}).then((e=>{p.nk.success(l("common.oper")),a.showNames=!1}))},r=e=>{e.Sync?(a.showNames=!0,o()):p.nk.success(l("common.access"))},o=()=>{a.loading=!0,(0,d.NT)().then((e=>{a.loading=!1,a.srcIds=e})).catch((e=>{a.loading=!1}))},s=(e,l)=>l.MachineName.toLowerCase().includes(e.toLowerCase());return{state:a,handleShowSync:r,srcFilterMethod:s,handleConfirm:t}}},k=a(1241);const w=(0,k.A)(v,[["render",n]]);var f=w},7986:function(e,l,a){a.r(l),a.d(l,{default:function(){return kl}});var t=a(6768);const r={class:"servers-wrap scrollbar"};function o(e,l,a,o,s,n){const d=(0,t.g2)("Config"),u=(0,t.g2)("AccessShow");return(0,t.uX)(),(0,t.CE)("div",r,[(0,t.bF)(u,{value:"Config"},{default:(0,t.k6)((()=>[(0,t.bF)(d)])),_:1})])}var s=a(4232);const n={class:"flex"},d=(0,t.Lk)("span",{class:"mgl-1"},null,-1),u={class:"mgl-1"},i={class:"flex"},c={class:"flex"},m=(0,t.Lk)("span",{class:"mgl-1"},null,-1),p={class:"flex"},b={class:"flex"},h=(0,t.Lk)("span",{class:"mgl-1"},null,-1),v={class:"mgl-1"},k={class:"t-c"};function w(e,l,a,r,o,w){const f=(0,t.g2)("el-input"),g=(0,t.g2)("Sync"),F=(0,t.g2)("PcShow"),y=(0,t.g2)("el-form-item"),V=(0,t.g2)("RelayServers"),_=(0,t.g2)("SForwardServers"),S=(0,t.g2)("Updater"),x=(0,t.g2)("el-form"),C=(0,t.g2)("el-button"),L=(0,t.g2)("el-card"),$=(0,t.gN)("trim");return(0,t.uX)(),(0,t.CE)("div",{class:"signin-wrap",style:(0,s.Tr)({height:`${r.state.height}px`})},[(0,t.bF)(L,{shadow:"never"},{header:(0,t.k6)((()=>[(0,t.eW)((0,s.v_)(e.$t("server.messenger")),1)])),footer:(0,t.k6)((()=>[(0,t.Lk)("div",k,[(0,t.bF)(C,{type:"success",onClick:r.handleSave},{default:(0,t.k6)((()=>[(0,t.eW)((0,s.v_)(e.$t("common.confirm")),1)])),_:1},8,["onClick"])])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(x,{"label-width":"auto","label-position":r.state.position},{default:(0,t.k6)((()=>[(0,t.bF)(y,{label:e.$t("server.messengerAddr")},{default:(0,t.k6)((()=>[(0,t.Lk)("div",n,[(0,t.bo)((0,t.bF)(f,{class:(0,s.C4)({success:r.state.list.Host==r.state.signinHost}),style:{width:"20rem"},modelValue:r.state.list.Host,"onUpdate:modelValue":l[0]||(l[0]=e=>r.state.list.Host=e),onBlur:r.handleSave},null,8,["class","modelValue","onBlur"]),[[$]]),d,(0,t.bF)(g,{name:"SignInServer"}),(0,t.bF)(F,null,{default:(0,t.k6)((()=>[(0,t.Lk)("span",u,(0,s.v_)(e.$t("server.messengerText")),1)])),_:1})])])),_:1},8,["label"]),(0,t.bF)(y,{label:`${e.$t("server.messengerAddr")}1`},{default:(0,t.k6)((()=>[(0,t.Lk)("div",i,[(0,t.bo)((0,t.bF)(f,{class:(0,s.C4)({success:r.state.list.Host1==r.state.signinHost}),style:{width:"20rem"},modelValue:r.state.list.Host1,"onUpdate:modelValue":l[1]||(l[1]=e=>r.state.list.Host1=e),onBlur:r.handleSave},null,8,["class","modelValue","onBlur"]),[[$]])])])),_:1},8,["label"]),(0,t.bF)(y),(0,t.bF)(y,{label:e.$t("server.messengerSuperKey")},{default:(0,t.k6)((()=>[(0,t.Lk)("div",c,[(0,t.bo)((0,t.bF)(f,{class:(0,s.C4)({success:r.state.super,error:0==r.state.super}),style:{width:"20rem"},type:"password","show-password":"",maxlength:"36",modelValue:r.state.list.SuperKey,"onUpdate:modelValue":l[2]||(l[2]=e=>r.state.list.SuperKey=e),onBlur:r.handleSave},null,8,["class","modelValue","onBlur"]),[[$]]),m,(0,t.bF)(g,{name:"SignInSuperKey"})])])),_:1},8,["label"]),(0,t.bF)(y,{label:e.$t("server.messengerSuperPassword")},{default:(0,t.k6)((()=>[(0,t.Lk)("div",p,[(0,t.bo)((0,t.bF)(f,{class:(0,s.C4)({success:r.state.super,error:0==r.state.super}),style:{width:"20rem"},type:"password","show-password":"",maxlength:"36",modelValue:r.state.list.SuperPassword,"onUpdate:modelValue":l[3]||(l[3]=e=>r.state.list.SuperPassword=e),onBlur:r.handleSave},null,8,["class","modelValue","onBlur"]),[[$]])])])),_:1},8,["label"]),(0,t.bF)(y),(0,t.bF)(y,{label:e.$t("server.messengerUserId")},{default:(0,t.k6)((()=>[(0,t.Lk)("div",b,[(0,t.bo)((0,t.bF)(f,{style:{width:"20rem"},type:"password","show-password":"",maxlength:"36",modelValue:r.state.list.UserId,"onUpdate:modelValue":l[4]||(l[4]=e=>r.state.list.UserId=e),onBlur:r.handleSave},null,8,["modelValue","onBlur"]),[[$]]),h,(0,t.bF)(g,{name:"SignInUserId"}),(0,t.bF)(F,null,{default:(0,t.k6)((()=>[(0,t.Lk)("span",v,(0,s.v_)(e.$t("server.messengerUserIdText")),1)])),_:1})])])),_:1},8,["label"]),(0,t.bF)(y),(0,t.bF)(V,{class:"mgt-2"}),(0,t.bF)(_,{class:"mgt-2"}),(0,t.bF)(S)])),_:1},8,["label-position"])])])),_:1})],4)}var f=a(9299),g=a(3830),F=a(1219),y=a(144);const V={class:"flex"};function _(e,l,a,r,o,n){const d=(0,t.g2)("el-checkbox"),u=(0,t.g2)("Sync"),i=(0,t.g2)("el-form-item");return(0,t.uX)(),(0,t.Wv)(i,{label:e.$t("server.updater")},{default:(0,t.k6)((()=>[(0,t.Lk)("div",V,[(0,t.bF)(d,{modelValue:r.state.sync2Server,"onUpdate:modelValue":l[0]||(l[0]=e=>r.state.sync2Server=e),onChange:r.handleSync2ServerChange},{default:(0,t.k6)((()=>[(0,t.eW)((0,s.v_)(e.$t("server.updaterSync2Server")),1)])),_:1},8,["modelValue","onChange"]),(0,t.bF)(u,{class:"mgl-1",name:"UpdaterSecretKey"})])])),_:1},8,["label"])}var S=a(920),x=a(5931),C=a(2322),L={components:{Sync:C.A},setup(e){const{t:l}=(0,x.s9)(),a=(0,g.B)(),t=(0,y.Kh)({sync2Server:a.value.config.Client.Updater.Sync2Server}),r=()=>{(0,S.rD)(t.sync2Server).then((()=>{F.nk.success(l("common.oper"))})).catch((e=>{console.log(e),F.nk.error(l("common.operFail"))}))};return{globalData:a,state:t,handleSync2ServerChange:r}}},$=a(1241);const M=(0,$.A)(L,[["render",_]]);var T=M;const U={class:"flex"},B={class:"mgr-1"},W={class:"flex"};function E(e,l,a,r,o,n){const d=(0,t.g2)("el-checkbox"),u=(0,t.g2)("Sync"),i=(0,t.g2)("WhiteList"),c=(0,t.g2)("Nodes"),m=(0,t.g2)("Status"),p=(0,t.g2)("el-form-item");return(0,t.uX)(),(0,t.Wv)(p,{label:e.$t("server.relay")},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.Lk)("div",U,[(0,t.Lk)("div",B,[(0,t.bF)(d,{class:"mgr-1",modelValue:r.state.list.Disabled,"onUpdate:modelValue":l[0]||(l[0]=e=>r.state.list.Disabled=e),label:e.$t("server.relayDisable"),onChange:r.handleSave},null,8,["modelValue","label","onChange"]),(0,t.bF)(d,{modelValue:r.state.list.SSL,"onUpdate:modelValue":l[1]||(l[1]=e=>r.state.list.SSL=e),label:e.$t("server.relaySSL"),onChange:r.handleSave},null,8,["modelValue","label","onChange"])]),(0,t.bF)(u,{class:"mgl-1",name:"RelaySecretKey"})]),(0,t.Lk)("div",W,[(0,t.Lk)("a",{href:"javascript:;",onClick:l[2]||(l[2]=e=>r.state.showModes=!0),class:(0,s.C4)(["mgr-1 delay a-line",{red:0==r.state.nodes.length,green:r.state.nodes.length>0}])},(0,s.v_)(e.$t("server.relayNodes"))+" : "+(0,s.v_)(r.state.nodes.length),3),(0,t.bF)(i,{type:"Relay"}),r.state.showModes?((0,t.uX)(),(0,t.Wv)(c,{key:0,modelValue:r.state.showModes,"onUpdate:modelValue":l[3]||(l[3]=e=>r.state.showModes=e),data:r.state.nodes},null,8,["modelValue","data"])):(0,t.Q3)("",!0),(0,t.bF)(m,{type:"Relay"})])])])),_:1},8,["label"])}var P=a(9232),N=a(5130);const I=e=>((0,t.Qi)("data-v-92ae2ca2"),e=e(),(0,t.jt)(),e),A={class:"flex"},R=["href","title"],X=I((()=>(0,t.Lk)("span",{class:"flex-1"},null,-1))),G={href:"javascript:;"},D={key:0},K={key:1},z={class:"flex"},Q=I((()=>(0,t.Lk)("span",{class:"flex-1"},null,-1))),j=["onClick"],O={key:4,href:"javascript:;",class:"a-line a-edit"},H={key:0},J={key:1},Z=["onClick"],q=["onClick"],Y={class:"t-c"},ee={class:"t-c w-100 mgt-1"};function le(e,l,a,r,o,n){const d=(0,t.g2)("el-checkbox"),u=(0,t.g2)("Refresh"),i=(0,t.g2)("el-icon"),c=(0,t.g2)("el-table-column"),m=(0,t.g2)("Edit"),p=(0,t.g2)("el-table"),b=(0,t.g2)("el-dialog"),h=(0,t.g2)("EditNode"),v=(0,t.g2)("Ids"),k=(0,t.g2)("el-button");return(0,t.uX)(),(0,t.CE)("div",null,[(0,t.bF)(b,{modelValue:r.state.show,"onUpdate:modelValue":l[0]||(l[0]=e=>r.state.show=e),title:e.$t("server.relayTitle"),width:"98%",top:"2vh"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(p,{data:r.state.nodes,size:"small",border:"",height:"500",stripe:""},{default:(0,t.k6)((()=>[(0,t.bF)(c,{property:"Name",label:e.$t("server.relayName")},{default:(0,t.k6)((l=>[(0,t.Lk)("div",null,[(0,t.Lk)("p",A,[(0,t.Lk)("a",{href:l.row.Url,class:(0,s.C4)(["a-line",{green:l.row.Public}]),target:"_blank",title:l.row.Public?e.$t("server.relayPublic"):""},[(0,t.Lk)("strong",null,(0,s.v_)(l.row.Name),1)],10,R),X,(0,t.Lk)("a",G,[1==(1&l.row.AllowProtocol)?((0,t.uX)(),(0,t.CE)("span",D,"tcp")):(0,t.Q3)("",!0),2==(2&l.row.AllowProtocol)?((0,t.uX)(),(0,t.CE)("span",K,",udp")):(0,t.Q3)("",!0)])]),(0,t.Lk)("p",z,[r.state.super?((0,t.uX)(),(0,t.Wv)(d,{key:0,class:"mgr-p6",modelValue:l.row.Sync2Server,"onUpdate:modelValue":e=>l.row.Sync2Server=e,disabled:"",size:"small",onClick:e=>r.handleSync2Server(l.row)},{default:(0,t.k6)((()=>[(0,t.eW)((0,s.v_)(e.$t("server.relaySync2Server")),1)])),_:2},1032,["modelValue","onUpdate:modelValue","onClick"])):(0,t.Q3)("",!0),1==(1&l.row.AllowProtocol)?((0,t.uX)(),(0,t.CE)(t.FK,{key:1},[r.state.syncData.Key==l.row.Id&&1==r.state.syncData.Value?((0,t.uX)(),(0,t.Wv)(d,{key:0,class:"mgr-p6",size:"small",disabled:"",checked:""},{default:(0,t.k6)((()=>[(0,t.eW)((0,s.v_)(e.$t("server.relayDefault"))+"TCP",1)])),_:1})):((0,t.uX)(),(0,t.Wv)(d,{key:1,class:"mgr-p6",size:"small",disabled:"",onClick:(0,N.D$)((e=>r.handleShowSync(l.row.Id,1)),["stop"])},{default:(0,t.k6)((()=>[(0,t.eW)((0,s.v_)(e.$t("server.relayDefault"))+"TCP",1)])),_:2},1032,["onClick"]))],64)):(0,t.Q3)("",!0),2==(2&l.row.AllowProtocol)?((0,t.uX)(),(0,t.CE)(t.FK,{key:2},[r.state.syncData.Key==l.row.Id&&2==r.state.syncData.Value?((0,t.uX)(),(0,t.Wv)(d,{key:0,class:"mgr-p6",size:"small",disabled:"",checked:""},{default:(0,t.k6)((()=>[(0,t.eW)((0,s.v_)(e.$t("server.relayDefault"))+"UDP",1)])),_:1})):((0,t.uX)(),(0,t.Wv)(d,{key:1,class:"mgr-p6",size:"small",disabled:"",onClick:(0,N.D$)((e=>r.handleShowSync(l.row.Id,2)),["stop"])},{default:(0,t.k6)((()=>[(0,t.eW)((0,s.v_)(e.$t("server.relayDefault"))+"UDP",1)])),_:2},1032,["onClick"]))],64)):(0,t.Q3)("",!0),Q,r.state.super?((0,t.uX)(),(0,t.CE)("a",{key:3,href:"javascript:;",class:"a-line a-edit",onClick:e=>r.handleUpdate(l.row.Id)},[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(u)])),_:1}),(0,t.eW)((0,s.v_)(l.row.Version),1)],8,j)):((0,t.uX)(),(0,t.CE)("a",O,[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(u)])),_:1}),(0,t.eW)((0,s.v_)(l.row.Version),1)]))])])])),_:1},8,["label"]),(0,t.bF)(c,{property:"MaxGbTotal",label:e.$t("server.relayFlow"),width:"100"},{default:(0,t.k6)((e=>[0==e.row.MaxGbTotal?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[(0,t.eW)("--")],64)):((0,t.uX)(),(0,t.CE)(t.FK,{key:1},[(0,t.Lk)("p",null,(0,s.v_)(e.row.MaxGbTotal)+"GB",1),(0,t.Lk)("p",null,[(0,t.Lk)("strong",null,(0,s.v_)((e.row.MaxGbTotalLastBytes/1024/1024/1024).toFixed(2))+"GB",1)])],64))])),_:1},8,["label"]),(0,t.bF)(c,{property:"MaxBandwidth",label:e.$t("server.relaySpeed"),width:"80"},{default:(0,t.k6)((e=>[(0,t.Lk)("p",null,[0==e.row.MaxBandwidth?((0,t.uX)(),(0,t.CE)("span",H,"--")):((0,t.uX)(),(0,t.CE)("span",J,(0,s.v_)(e.row.MaxBandwidth)+"Mbps",1))]),(0,t.Lk)("p",null,(0,s.v_)(e.row.Delay)+"ms",1)])),_:1},8,["label"]),(0,t.bF)(c,{property:"MaxBandwidthTotal",label:e.$t("server.relaySpeed1"),width:"100"},{default:(0,t.k6)((e=>[(0,t.Lk)("p",null,[0==e.row.MaxBandwidthTotal?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[(0,t.eW)("--")],64)):((0,t.uX)(),(0,t.CE)(t.FK,{key:1},[(0,t.eW)((0,s.v_)(e.row.MaxBandwidthTotal)+"Mbps",1)],64))]),(0,t.Lk)("p",null,[(0,t.Lk)("strong",null,(0,s.v_)(e.row.BandwidthRatio)+"mbps",1)])])),_:1},8,["label"]),(0,t.bF)(c,{property:"ConnectionRatio",label:e.$t("server.relayConnection"),width:"80"},{default:(0,t.k6)((e=>[(0,t.Lk)("p",null,(0,s.v_)(e.row.MaxConnection),1),(0,t.Lk)("p",null,[(0,t.Lk)("strong",null,(0,s.v_)(e.row.ConnectionRatio),1)])])),_:1},8,["label"]),r.state.super?((0,t.uX)(),(0,t.Wv)(c,{key:0,property:"Public",label:e.$t("server.relayOper"),width:"60"},{default:(0,t.k6)((l=>[(0,t.Lk)("p",null,[(0,t.Lk)("a",{href:"javascript:;",class:"a-line",onClick:e=>r.handleExit(l.row.Id)},[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(u)])),_:1}),(0,t.eW)((0,s.v_)(e.$t("server.relayExit")),1)],8,Z)]),(0,t.Lk)("p",null,[(0,t.Lk)("a",{href:"javascript:;",class:"a-line",onClick:e=>r.handleEdit(l.row)},[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(m)])),_:1}),(0,t.eW)((0,s.v_)(e.$t("server.relayEdit")),1)],8,q)])])),_:1},8,["label"])):(0,t.Q3)("",!0)])),_:1},8,["data"])])])),_:1},8,["modelValue","title"]),r.state.showEdit?((0,t.uX)(),(0,t.Wv)(h,{key:0,modelValue:r.state.showEdit,"onUpdate:modelValue":l[1]||(l[1]=e=>r.state.showEdit=e),data:r.state.current},null,8,["modelValue","data"])):(0,t.Q3)("",!0),(0,t.bF)(b,{class:"options-center",title:e.$t("server.relaySetDefault"),"destroy-on-close":"",modelValue:r.state.showSync,"onUpdate:modelValue":l[3]||(l[3]=e=>r.state.showSync=e),width:"54rem",top:"2vh"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.Lk)("div",Y,(0,s.v_)(e.$t("server.relaySetDefaultText")),1),(0,t.bF)(v,{ref:"domIds"},null,512),(0,t.Lk)("div",ee,[(0,t.bF)(k,{onClick:l[2]||(l[2]=e=>r.state.showSync=!1)},{default:(0,t.k6)((()=>[(0,t.eW)((0,s.v_)(e.$t("common.cancel")),1)])),_:1}),(0,t.bF)(k,{type:"primary",onClick:r.handleSync},{default:(0,t.k6)((()=>[(0,t.eW)((0,s.v_)(e.$t("common.confirm")),1)])),_:1},8,["onClick"])])])])),_:1},8,["title","modelValue"])])}var ae=a(2933);function te(e,l,a,r,o,s){const n=(0,t.g2)("el-transfer");return(0,t.uX)(),(0,t.CE)("div",null,[(0,t.bF)(n,{class:"src-tranfer mgt-1",modelValue:r.state.srcIdValues,"onUpdate:modelValue":l[0]||(l[0]=e=>r.state.srcIdValues=e),filterable:"","filter-method":r.srcFilterMethod,data:r.state.srcIds,titles:[e.$t("firewall.unselect"),e.$t("firewall.selected")],props:{key:"MachineId",label:"MachineName"}},null,8,["modelValue","filter-method","data","titles"])])}var re={setup(){const e=(0,y.Kh)({srcIdValues:[],srcIds:[]}),l=()=>{e.loading=!0,(0,f.NT)().then((l=>{e.loading=!1,e.srcIds=l})).catch((l=>{e.loading=!1}))},a=(e,l)=>l.MachineName.toLowerCase().includes(e.toLowerCase()),r=()=>e.srcIdValues;return(0,t.sV)((()=>{l()})),{state:e,srcFilterMethod:a,getIds:r}}};const oe=(0,$.A)(re,[["render",te]]);var se=oe;const ne={class:"t-c w-100"};function de(e,l,a,r,o,n){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-form-item"),i=(0,t.g2)("el-input-number"),c=(0,t.g2)("Refresh"),m=(0,t.g2)("el-icon"),p=(0,t.g2)("el-button"),b=(0,t.g2)("el-switch"),h=(0,t.g2)("el-checkbox"),v=(0,t.g2)("el-form"),k=(0,t.g2)("el-dialog"),w=(0,t.gN)("trim");return(0,t.uX)(),(0,t.Wv)(k,{class:"options-center",title:e.$t("server.relayTitle"),"destroy-on-close":"",modelValue:r.state.show,"onUpdate:modelValue":l[12]||(l[12]=e=>r.state.show=e),width:"30rem",top:"2vh"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(v,{ref:"ruleFormRef",model:r.state.ruleForm,rules:r.state.rules,"label-width":"auto"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{label:e.$t("server.relayName"),prop:"Name"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(d,{minlength:"1",maxlength:"32","show-word-limit":"",modelValue:r.state.ruleForm.Name,"onUpdate:modelValue":l[0]||(l[0]=e=>r.state.ruleForm.Name=e)},null,8,["modelValue"]),[[w]])])),_:1},8,["label"]),(0,t.bF)(u,{label:e.$t("server.relayConnection"),prop:"MaxConnection"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{modelValue:r.state.ruleForm.MaxConnection,"onUpdate:modelValue":l[1]||(l[1]=e=>r.state.ruleForm.MaxConnection=e),min:0,max:65535},null,8,["modelValue"])])),_:1},8,["label"]),(0,t.bF)(u,{label:e.$t("server.relaySpeed"),prop:"MaxBandwidth"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{modelValue:r.state.ruleForm.MaxBandwidth,"onUpdate:modelValue":l[2]||(l[2]=e=>r.state.ruleForm.MaxBandwidth=e),min:0},null,8,["modelValue"]),(0,t.eW)("Mbps ")])),_:1},8,["label"]),(0,t.bF)(u,{label:e.$t("server.relaySpeed1"),prop:"MaxBandwidthTotal"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{modelValue:r.state.ruleForm.MaxBandwidthTotal,"onUpdate:modelValue":l[3]||(l[3]=e=>r.state.ruleForm.MaxBandwidthTotal=e),min:0},null,8,["modelValue"]),(0,t.eW)("Mbps ")])),_:1},8,["label"]),(0,t.bF)(u,{label:e.$t("server.relayFlow"),prop:"MaxGbTotal"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{modelValue:r.state.ruleForm.MaxGbTotal,"onUpdate:modelValue":l[4]||(l[4]=e=>r.state.ruleForm.MaxGbTotal=e),min:0},null,8,["modelValue"]),(0,t.eW)("GB "),(0,t.bF)(p,{size:"small",onClick:r.handleRefresh},{default:(0,t.k6)((()=>[(0,t.bF)(m,null,{default:(0,t.k6)((()=>[(0,t.bF)(c)])),_:1})])),_:1},8,["onClick"])])),_:1},8,["label"]),(0,t.bF)(u,{label:e.$t("server.relayFlowLast"),prop:"MaxGbTotalLastBytes"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{modelValue:r.state.ruleForm.MaxGbTotalLastBytes,"onUpdate:modelValue":l[5]||(l[5]=e=>r.state.ruleForm.MaxGbTotalLastBytes=e),min:0},null,8,["modelValue"]),(0,t.eW)("byte ")])),_:1},8,["label"]),(0,t.bF)(u,{label:e.$t("server.relayUrl"),prop:"Url"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(d,{modelValue:r.state.ruleForm.Url,"onUpdate:modelValue":l[6]||(l[6]=e=>r.state.ruleForm.Url=e)},null,8,["modelValue"]),[[w]])])),_:1},8,["label"]),(0,t.bF)(u,{label:e.$t("server.relayPublic"),prop:"Public"},{default:(0,t.k6)((()=>[(0,t.bF)(b,{modelValue:r.state.ruleForm.Public,"onUpdate:modelValue":l[7]||(l[7]=e=>r.state.ruleForm.Public=e),size:"small"},null,8,["modelValue"])])),_:1},8,["label"]),(0,t.bF)(u,{label:e.$t("server.relaySync2Server"),prop:"Sync2Server"},{default:(0,t.k6)((()=>[(0,t.bF)(b,{modelValue:r.state.ruleForm.Sync2Server,"onUpdate:modelValue":l[8]||(l[8]=e=>r.state.ruleForm.Sync2Server=e),size:"small"},null,8,["modelValue"])])),_:1},8,["label"]),(0,t.bF)(u,{label:e.$t("server.relayAllow"),prop:"Allow"},{default:(0,t.k6)((()=>[(0,t.bF)(h,{modelValue:r.state.ruleForm.AllowTcp,"onUpdate:modelValue":l[9]||(l[9]=e=>r.state.ruleForm.AllowTcp=e)},{default:(0,t.k6)((()=>[(0,t.eW)("TCP")])),_:1},8,["modelValue"]),(0,t.bF)(h,{modelValue:r.state.ruleForm.AllowUdp,"onUpdate:modelValue":l[10]||(l[10]=e=>r.state.ruleForm.AllowUdp=e)},{default:(0,t.k6)((()=>[(0,t.eW)("UDP")])),_:1},8,["modelValue"])])),_:1},8,["label"]),(0,t.bF)(u),(0,t.bF)(u,{label:"",prop:"Btns"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",ne,[(0,t.bF)(p,{onClick:l[11]||(l[11]=e=>r.state.show=!1)},{default:(0,t.k6)((()=>[(0,t.eW)((0,s.v_)(e.$t("common.cancel")),1)])),_:1}),(0,t.bF)(p,{type:"primary",onClick:r.handleSave},{default:(0,t.k6)((()=>[(0,t.eW)((0,s.v_)(e.$t("common.confirm")),1)])),_:1},8,["onClick"])])])),_:1})])),_:1},8,["model","rules"])])])),_:1},8,["title","modelValue"])}var ue=a(7477),ie={props:["data","modelValue"],emits:["update:modelValue","success"],components:{Refresh:ue.C42},setup(e,{emit:l}){const{t:a}=(0,x.s9)(),r=(0,y.Kh)({show:!0,ruleForm:{Id:e.data.Id,Name:e.data.Name,MaxConnection:e.data.MaxConnection,MaxBandwidth:e.data.MaxBandwidth,MaxBandwidthTotal:e.data.MaxBandwidthTotal,MaxGbTotal:e.data.MaxGbTotal,MaxGbTotalLastBytes:e.data.MaxGbTotalLastBytes,Public:e.data.Public,Url:e.data.Url,AllowTcp:1==(1&e.data.AllowProtocol),AllowUdp:2==(2&e.data.AllowProtocol),Sync2Server:e.data.Sync2Server||!1},rules:{}});(0,t.wB)((()=>r.show),(e=>{e||setTimeout((()=>{l("update:modelValue",e)}),300)}));const o=()=>{r.ruleForm.MaxGbTotalLastBytes=1024*r.ruleForm.MaxGbTotal*1024*1024},s=(0,y.KR)(null),n=()=>{s.value.validate((e=>{if(!e)return;const t=JSON.parse(JSON.stringify(r.ruleForm));t.AllowProtocol=(t.AllowTcp?1:0)|(t.AllowUdp?2:0),(0,P.WF)(t).then((e=>{e?(F.nk.success(a("common.oper")),r.show=!1,l("success")):F.nk.error(a("common.operFail"))})).catch((()=>{F.nk.error(a("common.operFail"))}))}))};return{state:r,ruleFormRef:s,handleRefresh:o,handleSave:n}}};const ce=(0,$.A)(ie,[["render",de],["__scopeId","data-v-26eb3ac8"]]);var me=ce,pe={props:["modelValue","data"],emits:["update:modelValue","success"],components:{Ids:se,EditNode:me,Edit:ue.ffu,ArrowDown:ue.yd$,Refresh:ue.C42},setup(e,{emit:l}){const{t:a}=(0,x.s9)(),r=(0,g.B)(),o=(0,y.Kh)({show:!0,nodes:(0,t.EW)((()=>e.data)),showEdit:!1,current:{},showSync:!1,syncData:{Key:"",Value:0},super:(0,t.EW)((()=>r.value.signin.Super))});(0,t.wB)((()=>o.show),(e=>{e||setTimeout((()=>{l("update:modelValue",e)}),300)}));const s=e=>{o.current=e,o.showEdit=!0},n=(0,y.KR)(null),d=(e,l)=>{o.syncData.Key=e,o.syncData.Value=l,o.showSync=!0},u=()=>{(0,P.ZJ)({Ids:n.value.getIds(),Data:o.syncData}).then((e=>{o.showSync=!1,F.nk.success(a("common.oper"))})).catch((()=>{F.nk.error(a("common.operFail"))}))},i=e=>{e.Sync2Server=!e.Sync2Server,e.AllowTcp=1==(1&e.AllowProtocol),e.AllowUdp=2==(2&e.AllowProtocol),(0,P.WF)(e).then((e=>{F.nk.success(a("common.oper"))})).catch((()=>{F.nk.error(a("common.operFail"))}))},c=e=>{ae.s.confirm(a("server.relayExit"),a("common.confirm"),{confirmButtonText:a("common.confirm"),cancelButtonText:a("common.cancel"),type:"warning"}).then((()=>{(0,P.mB)(e).then((e=>{F.nk.success(a("common.oper"))})).catch((()=>{F.nk.error(a("common.operFail"))}))})).catch((()=>{F.nk.error(a("common.operFail"))}))},m=e=>{ae.s.confirm(`${a("server.relayUpdate")} ${r.value.signin.Version}`,a("server.relayUpdate"),{confirmButtonText:a("common.confirm"),cancelButtonText:a("common.cancel"),type:"warning"}).then((()=>{(0,P.dL)({Key:e,Value:r.value.signin.Version}).then((e=>{F.nk.success(a("common.oper"))})).catch((()=>{F.nk.error(a("common.operFail"))}))})).catch((()=>{F.nk.error(a("common.operFail"))}))};return(0,t.sV)((()=>{(0,P.Ud)().then((e=>{o.syncData.Key=e.Key||"",o.syncData.Value=e.Value||0}))})),(0,t.hi)((()=>{clearTimeout(o.timer)})),{globalData:r,state:o,handleEdit:s,domIds:n,handleShowSync:d,handleSync:u,handleExit:c,handleUpdate:m,handleSync2Server:i}}};const be=(0,$.A)(pe,[["render",le],["__scopeId","data-v-92ae2ca2"]]);var he=be;function ve(e,l,a,r,o,n){const d=(0,t.g2)("Manager");return(0,t.uX)(),(0,t.CE)(t.FK,null,[r.state.super?((0,t.uX)(),(0,t.CE)("a",{key:0,onClick:l[0]||(l[0]=e=>r.state.showManager=!0),href:"javascript:;",class:"mgr-1 a-line"},(0,s.v_)(e.$t("server.wlist")),1)):(0,t.Q3)("",!0),r.state.showManager?((0,t.uX)(),(0,t.Wv)(d,{key:1,modelValue:r.state.showManager,"onUpdate:modelValue":l[1]||(l[1]=e=>r.state.showManager=e),type:r.state.type,prefix:r.state.prefix},null,8,["modelValue","type","prefix"])):(0,t.Q3)("",!0)],64)}const ke={class:"group-wrap"},we={class:"head"},fe={class:"search flex"},ge={class:"t-c"},Fe={class:"page"};function ye(e,l,a,r,o,n){const d=(0,t.g2)("el-input"),u=(0,t.g2)("Search"),i=(0,t.g2)("el-icon"),c=(0,t.g2)("el-button"),m=(0,t.g2)("Plus"),p=(0,t.g2)("el-table-column"),b=(0,t.g2)("EditPen"),h=(0,t.g2)("Delete"),v=(0,t.g2)("el-popconfirm"),k=(0,t.g2)("el-table"),w=(0,t.g2)("el-pagination"),f=(0,t.g2)("el-dialog"),g=(0,t.g2)("Add"),F=(0,t.gN)("trim");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(f,{class:"options-center",title:e.$t("server.wlist"),"destroy-on-close":"",modelValue:r.state.show,"onUpdate:modelValue":l[3]||(l[3]=e=>r.state.show=e),width:"77rem",top:"2vh"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",ke,[(0,t.Lk)("div",we,[(0,t.Lk)("div",fe,[(0,t.Lk)("div",null,[(0,t.Lk)("span",null,(0,s.v_)(e.$t("server.wlistName")),1),(0,t.eW)(),(0,t.bo)((0,t.bF)(d,{modelValue:r.state.page.Name,"onUpdate:modelValue":l[0]||(l[0]=e=>r.state.page.Name=e),style:{width:"8rem"},size:"small",clearable:"",onChange:r.handleSearch},null,8,["modelValue","onChange"]),[[F]])]),(0,t.Lk)("div",null,[(0,t.Lk)("span",null,(0,s.v_)(e.$t("server.wlistRemark")),1),(0,t.eW)(),(0,t.bo)((0,t.bF)(d,{modelValue:r.state.page.Remark,"onUpdate:modelValue":l[1]||(l[1]=e=>r.state.page.Remark=e),style:{width:"8rem"},size:"small",clearable:"",onChange:r.handleSearch},null,8,["modelValue","onChange"]),[[F]])]),(0,t.Lk)("div",null,[(0,t.bF)(c,{size:"small",onClick:l[2]||(l[2]=e=>r.handleSearch())},{default:(0,t.k6)((()=>[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(u)])),_:1})])),_:1})]),(0,t.Lk)("div",null,[(0,t.bF)(c,{size:"small",type:"success",onClick:r.handleAdd},{default:(0,t.k6)((()=>[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(m)])),_:1})])),_:1},8,["onClick"])])])]),(0,t.bF)(k,{stripe:"",data:r.state.list.List,border:"",size:"small",width:"100%"},{default:(0,t.k6)((()=>[(0,t.bF)(p,{prop:"Name",label:e.$t("server.wlistName")},null,8,["label"]),(0,t.bF)(p,{prop:"Nodes",label:e.$t("server.wlistNodes")},{default:(0,t.k6)((e=>[(0,t.Lk)("span",null,(0,s.v_)(e.row.Nodes.filter((e=>e.indexOf(r.state.prefix)<0)).map((e=>r.state.nodes[e])).join(",")),1)])),_:1},8,["label"]),r.state.prefix?((0,t.uX)(),(0,t.Wv)(p,{key:0,prop:"Nodes1",label:e.$t(`server.wlistNodes${r.state.page.Type}`)},{default:(0,t.k6)((e=>[(0,t.Lk)("span",null,(0,s.v_)(e.row.Nodes.filter((e=>e.indexOf(r.state.prefix)>=0)).map((e=>e.replace(r.state.prefix,""))).join(",")),1)])),_:1},8,["label"])):(0,t.Q3)("",!0),(0,t.bF)(p,{prop:"Bandwidth",label:"Mbps",width:"80"}),(0,t.bF)(p,{prop:"Remark",label:e.$t("server.wlistRemark")},null,8,["label"]),(0,t.bF)(p,{prop:"UseTime",label:`${e.$t("server.wlistUseTime")}`,width:"140"},null,8,["label"]),(0,t.bF)(p,{prop:"EndTime",label:`${e.$t("server.wlistEndTime")}`,width:"140"},null,8,["label"]),(0,t.bF)(p,{prop:"AddTime",label:`${e.$t("server.wlistAddTime")}`,width:"140"},null,8,["label"]),(0,t.bF)(p,{fixed:"right",prop:"Oper",label:e.$t("server.wlistOper"),width:"110"},{default:(0,t.k6)((l=>[(0,t.bF)(c,{size:"small",onClick:e=>r.handleEdit(l.row)},{default:(0,t.k6)((()=>[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(b)])),_:1})])),_:2},1032,["onClick"]),(0,t.bF)(v,{title:e.$t("server.wlistDelConfirm"),onConfirm:e=>r.handleDel(l.row)},{reference:(0,t.k6)((()=>[(0,t.bF)(c,{type:"danger",size:"small"},{default:(0,t.k6)((()=>[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(h)])),_:1})])),_:1})])),_:2},1032,["title","onConfirm"])])),_:1},8,["label"])])),_:1},8,["data"]),(0,t.Lk)("div",ge,[(0,t.Lk)("div",Fe,[(0,t.bF)(w,{small:"",background:"",layout:"prev, pager, next","page-size":r.state.page.Size,total:r.state.list.Count,"pager-count":5,"current-page":r.state.page.Page,onCurrentChange:r.handlePageChange},null,8,["page-size","total","current-page","onCurrentChange"])])])])])),_:1},8,["title","modelValue"]),r.state.showAdd?((0,t.uX)(),(0,t.Wv)(g,{key:0,modelValue:r.state.showAdd,"onUpdate:modelValue":l[4]||(l[4]=e=>r.state.showAdd=e),onSuccess:r.handleSearch},null,8,["modelValue","onSuccess"])):(0,t.Q3)("",!0)],64)}var Ve=a(2002),_e=a(5316),Se={props:["modelValue","type","prefix"],emits:["update:modelValue"],components:{Delete:ue.epd,Plus:ue.FWt,Search:ue.vji,EditPen:ue.EDh,Add:Ve.A,Warning:ue.N5l},setup(e,{emit:l}){const{t:a}=(0,x.s9)(),r=(0,t.WQ)("nodes"),o=(0,y.Kh)({nodes:(0,t.EW)((()=>[{Id:"*",Name:"*"}].concat(r.value).reduce(((e,l,a)=>(e[l.Id]=l.Name,e)),{}))),page:{Page:1,Size:10,Type:e.type,MachineId:"",Name:"",Remark:""},list:{Page:1,Size:15,Count:0,List:[]},show:!0,showAdd:!1,prefix:e.prefix});(0,t.wB)((()=>o.show),(e=>{e||setTimeout((()=>{l("update:modelValue",e)}),300)}));const s=(0,y.KR)({});(0,t.Gt)("edit",s);const n=()=>{s.value={Id:0,Name:"",Nodes:["*"],Remark:"",UserId:"",Type:e.type,prefix:e.prefix||""},o.showAdd=!0},d=l=>{l.prefix=e.prefix||"",s.value=l,o.showAdd=!0},u=()=>{(0,_e.ly)(o.page).then((e=>{o.list=e})).catch((()=>{}))},i=e=>{o.page.Page=e,u()},c=e=>{(0,_e.$A)(e.Id).then((e=>{u()})).catch((()=>{}))};return(0,t.sV)((()=>{u()})),{state:o,handleSearch:u,handlePageChange:i,handleDel:c,handleAdd:n,handleEdit:d}}};const xe=(0,$.A)(Se,[["render",ye],["__scopeId","data-v-38b67cdc"]]);var Ce=xe,Le={props:["type","prefix"],components:{Manager:Ce},setup(e){const l=(0,g.B)(),a=(0,y.Kh)({super:(0,t.EW)((()=>l.value.signin.Super)),showManager:!1,type:e.type,prefix:e.prefix});return{state:a}}};const $e=(0,$.A)(Le,[["render",ve]]);var Me=$e;const Te=["src"],Ue={key:1,class:"mgl-1"};function Be(e,l,a,r,o,n){return(0,t.uX)(),(0,t.CE)("div",null,[r.state.status.Enabled?((0,t.uX)(),(0,t.CE)("a",{key:0,onClick:l[0]||(l[0]=(...e)=>r.handleImport&&r.handleImport(...e)),href:"javascript:;",class:"a-line blue"},[(0,t.Lk)("img",{src:`./${r.state.status.Type}.png`,height:"20",style:{"vertical-align":"middle"}},null,8,Te),(0,t.Lk)("span",null,"使用"+(0,s.v_)(r.state.status.Type)+"订单",1)])):(0,t.Q3)("",!0),r.state.status.Info?((0,t.uX)(),(0,t.CE)("strong",Ue,(0,s.v_)(r.state.status.Info.Bandwidth)+"Mbps、"+(0,s.v_)(r.state.status.Info.UseTime.split(" ")[0])+"-"+(0,s.v_)(r.state.status.Info.EndTime.split(" ")[0]),1)):(0,t.Q3)("",!0)])}var We={props:["type"],setup(e){const l=(0,g.B)(),a=(0,y.Kh)({status:{}}),r=()=>{ae.s.prompt("","订单号",{confirmButtonText:"确认",cancelButtonText:"取消"}).then((({value:l})=>{l&&(0,_e.X4)({Key:e.type,Value:l}).then((e=>{"success"==e?F.nk.success(e):F.nk.error(e)}))})).catch((()=>{}))};return(0,t.sV)((()=>{(0,_e.eO)(e.type,l.value.config.Client.Id).then((e=>{a.status=e}))})),{state:a,handleImport:r}}};const Ee=(0,$.A)(We,[["render",Be]]);var Pe=Ee,Ne={components:{Sync:C.A,Nodes:he,WhiteList:Me,Status:Pe},setup(e){const{t:l}=(0,x.s9)(),a=(0,g.B)(),r=(0,y.Kh)({list:a.value.config.Client.Relay.Server,showModes:!1,nodes:[],timer:0}),o=()=>{(0,P.q)(r.list).then((()=>{F.nk.success(l("common.oper"))})).catch((e=>{console.log(e),F.nk.error(l("common.operFail"))}))},s=(0,y.KR)([]);(0,t.Gt)("nodes",s);const n=()=>{clearTimeout(r.timer),(0,P.W4)().then((e=>{r.nodes=e,s.value=e,r.timer=setTimeout(n,1e3)})).catch((()=>{r.timer=setTimeout(n,1e3)}))};return(0,t.sV)((()=>{n()})),(0,t.hi)((()=>{clearTimeout(r.timer)})),{globalData:a,state:r,handleSave:o}}};const Ie=(0,$.A)(Ne,[["render",E],["__scopeId","data-v-198d2be3"]]);var Ae=Ie;const Re={class:"flex"};function Xe(e,l,a,r,o,n){const d=(0,t.g2)("WhiteList"),u=(0,t.g2)("AccessShow"),i=(0,t.g2)("Nodes"),c=(0,t.g2)("el-form-item");return(0,t.uX)(),(0,t.Wv)(c,{label:e.$t("server.sforward")},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.Lk)("div",Re,[(0,t.Lk)("a",{href:"javascript:;",onClick:l[0]||(l[0]=e=>r.state.showModes=!0),class:(0,s.C4)(["mgr-1 delay a-line",{red:0==r.state.nodes.length,green:r.state.nodes.length>0}])},(0,s.v_)(e.$t("server.sforwardNodes"))+" : "+(0,s.v_)(r.state.nodes.length),3),(0,t.bF)(u,{value:"WhiteList"},{default:(0,t.k6)((()=>[r.state.super?((0,t.uX)(),(0,t.Wv)(d,{key:0,type:"SForward",prefix:"sfp->"})):(0,t.Q3)("",!0)])),_:1}),r.state.showModes?((0,t.uX)(),(0,t.Wv)(i,{key:0,modelValue:r.state.showModes,"onUpdate:modelValue":l[1]||(l[1]=e=>r.state.showModes=e),data:r.state.nodes},null,8,["modelValue","data"])):(0,t.Q3)("",!0)])])])),_:1},8,["label"])}const Ge=e=>((0,t.Qi)("data-v-09d3b4fe"),e=e(),(0,t.jt)(),e),De={class:"flex"},Ke=["href"],ze={class:"flex"},Qe=Ge((()=>(0,t.Lk)("span",{class:"flex-1"},null,-1))),je=["onClick"],Oe={key:2,href:"javascript:;",class:"a-line a-edit"},He={key:0},Je={key:1},Ze=["onClick"],qe=["onClick"];function Ye(e,l,a,r,o,n){const d=(0,t.g2)("el-checkbox"),u=(0,t.g2)("Refresh"),i=(0,t.g2)("el-icon"),c=(0,t.g2)("el-table-column"),m=(0,t.g2)("Edit"),p=(0,t.g2)("el-table"),b=(0,t.g2)("el-dialog"),h=(0,t.g2)("EditNode");return(0,t.uX)(),(0,t.CE)("div",null,[(0,t.bF)(b,{modelValue:r.state.show,"onUpdate:modelValue":l[0]||(l[0]=e=>r.state.show=e),title:e.$t("server.sforwardTitle"),width:"98%",top:"2vh"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(p,{data:r.state.nodes,size:"small",border:"",height:"500",stripe:""},{default:(0,t.k6)((()=>[(0,t.bF)(c,{property:"Name",label:e.$t("server.sforwardName")},{default:(0,t.k6)((l=>[(0,t.Lk)("div",null,[(0,t.Lk)("p",De,[(0,t.Lk)("a",{href:l.row.Url,class:(0,s.C4)(["a-line",{green:l.row.Public}]),target:"_blank"},[(0,t.Lk)("strong",null,(0,s.v_)(l.row.Name),1)],10,Ke),(0,t.Lk)("span",null,"("+(0,s.v_)(l.row.Domain||l.row.Address)+")",1)]),(0,t.Lk)("p",ze,[r.state.super?((0,t.uX)(),(0,t.Wv)(d,{key:0,class:"mgr-p6",modelValue:l.row.Sync2Server,"onUpdate:modelValue":e=>l.row.Sync2Server=e,disabled:"",size:"small",onClick:e=>r.handleSync2Server(l.row)},{default:(0,t.k6)((()=>[(0,t.eW)((0,s.v_)(e.$t("server.sforwardSync2Server")),1)])),_:2},1032,["modelValue","onUpdate:modelValue","onClick"])):(0,t.Q3)("",!0),Qe,r.state.super?((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:;",class:"a-line a-edit",onClick:e=>r.handleUpdate(l.row.Id)},[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(u)])),_:1}),(0,t.eW)((0,s.v_)(l.row.Version),1)],8,je)):((0,t.uX)(),(0,t.CE)("a",Oe,[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(u)])),_:1}),(0,t.eW)((0,s.v_)(l.row.Version),1)]))])])])),_:1},8,["label"]),(0,t.bF)(c,{property:"Port",label:e.$t("server.sforwardPort")},{default:(0,t.k6)((l=>[(0,t.Lk)("p",null,(0,s.v_)(e.$t("server.sforwardWebPort"))+" : "+(0,s.v_)(l.row.WebPort),1),(0,t.Lk)("p",null,(0,s.v_)(e.$t("server.sforwardPortRange"))+" : "+(0,s.v_)(l.row.PortRange[0])+" - "+(0,s.v_)(l.row.PortRange[1]),1)])),_:1},8,["label"]),(0,t.bF)(c,{property:"MaxGbTotal",label:e.$t("server.sforwardFlow"),width:"100"},{default:(0,t.k6)((e=>[0==e.row.MaxGbTotal?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[(0,t.eW)("--")],64)):((0,t.uX)(),(0,t.CE)(t.FK,{key:1},[(0,t.Lk)("p",null,(0,s.v_)(e.row.MaxGbTotal)+"GB",1),(0,t.Lk)("p",null,[(0,t.Lk)("strong",null,(0,s.v_)((e.row.MaxGbTotalLastBytes/1024/1024/1024).toFixed(2))+"GB",1)])],64))])),_:1},8,["label"]),(0,t.bF)(c,{property:"MaxBandwidth",label:e.$t("server.sforwardSpeed"),width:"80"},{default:(0,t.k6)((e=>[(0,t.Lk)("p",null,[0==e.row.MaxBandwidth?((0,t.uX)(),(0,t.CE)("span",He,"--")):((0,t.uX)(),(0,t.CE)("span",Je,(0,s.v_)(e.row.MaxBandwidth)+"Mbps",1))]),(0,t.Lk)("p",null,(0,s.v_)(e.row.Delay)+"ms",1)])),_:1},8,["label"]),(0,t.bF)(c,{property:"MaxBandwidthTotal",label:e.$t("server.sforwardSpeed1"),width:"100"},{default:(0,t.k6)((e=>[(0,t.Lk)("p",null,[0==e.row.MaxBandwidthTotal?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[(0,t.eW)("--")],64)):((0,t.uX)(),(0,t.CE)(t.FK,{key:1},[(0,t.eW)((0,s.v_)(e.row.MaxBandwidthTotal)+"Mbps",1)],64))]),(0,t.Lk)("p",null,[(0,t.Lk)("strong",null,(0,s.v_)(e.row.BandwidthRatio)+"mbps",1)])])),_:1},8,["label"]),r.state.super?((0,t.uX)(),(0,t.Wv)(c,{key:0,property:"Public",label:e.$t("server.sforwardOper"),width:"60"},{default:(0,t.k6)((l=>[(0,t.Lk)("p",null,[(0,t.Lk)("a",{href:"javascript:;",class:"a-line",onClick:e=>r.handleExit(l.row.Id)},[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(u)])),_:1}),(0,t.eW)((0,s.v_)(e.$t("server.sforwardExit")),1)],8,Ze)]),(0,t.Lk)("p",null,[(0,t.Lk)("a",{href:"javascript:;",class:"a-line",onClick:e=>r.handleEdit(l.row)},[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(m)])),_:1}),(0,t.eW)((0,s.v_)(e.$t("server.sforwardEdit")),1)],8,qe)])])),_:1},8,["label"])):(0,t.Q3)("",!0)])),_:1},8,["data"])])])),_:1},8,["modelValue","title"]),r.state.showEdit?((0,t.uX)(),(0,t.Wv)(h,{key:0,modelValue:r.state.showEdit,"onUpdate:modelValue":l[1]||(l[1]=e=>r.state.showEdit=e),data:r.state.current},null,8,["modelValue","data"])):(0,t.Q3)("",!0)])}var el=a(743);const ll={class:"t-c w-100"};function al(e,l,a,r,o,n){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-form-item"),i=(0,t.g2)("el-input-number"),c=(0,t.g2)("Refresh"),m=(0,t.g2)("el-icon"),p=(0,t.g2)("el-button"),b=(0,t.g2)("el-switch"),h=(0,t.g2)("el-form"),v=(0,t.g2)("el-dialog"),k=(0,t.gN)("trim");return(0,t.uX)(),(0,t.Wv)(v,{class:"options-center",title:e.$t("server.sforwardTitle"),"destroy-on-close":"",modelValue:r.state.show,"onUpdate:modelValue":l[13]||(l[13]=e=>r.state.show=e),width:"34rem",top:"2vh"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(h,{ref:"ruleFormRef",model:r.state.ruleForm,rules:r.state.rules,"label-width":"auto"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{label:e.$t("server.sforwardName"),prop:"Name"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(d,{minlength:"1",maxlength:"32","show-word-limit":"",modelValue:r.state.ruleForm.Name,"onUpdate:modelValue":l[0]||(l[0]=e=>r.state.ruleForm.Name=e)},null,8,["modelValue"]),[[k]])])),_:1},8,["label"]),(0,t.bF)(u,{label:e.$t("server.sforwardSpeed"),prop:"MaxBandwidth"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{modelValue:r.state.ruleForm.MaxBandwidth,"onUpdate:modelValue":l[1]||(l[1]=e=>r.state.ruleForm.MaxBandwidth=e),min:0},null,8,["modelValue"]),(0,t.eW)("Mbps ")])),_:1},8,["label"]),(0,t.bF)(u,{label:e.$t("server.sforwardSpeed1"),prop:"MaxBandwidthTotal"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{modelValue:r.state.ruleForm.MaxBandwidthTotal,"onUpdate:modelValue":l[2]||(l[2]=e=>r.state.ruleForm.MaxBandwidthTotal=e),min:0},null,8,["modelValue"]),(0,t.eW)("Mbps ")])),_:1},8,["label"]),(0,t.bF)(u,{label:e.$t("server.sforwardFlow"),prop:"MaxGbTotal"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{modelValue:r.state.ruleForm.MaxGbTotal,"onUpdate:modelValue":l[3]||(l[3]=e=>r.state.ruleForm.MaxGbTotal=e),min:0},null,8,["modelValue"]),(0,t.eW)("GB "),(0,t.bF)(p,{size:"small",onClick:r.handleRefresh},{default:(0,t.k6)((()=>[(0,t.bF)(m,null,{default:(0,t.k6)((()=>[(0,t.bF)(c)])),_:1})])),_:1},8,["onClick"])])),_:1},8,["label"]),(0,t.bF)(u,{label:e.$t("server.sforwardFlowLast"),prop:"MaxGbTotalLastBytes"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{modelValue:r.state.ruleForm.MaxGbTotalLastBytes,"onUpdate:modelValue":l[4]||(l[4]=e=>r.state.ruleForm.MaxGbTotalLastBytes=e),min:0},null,8,["modelValue"]),(0,t.eW)("byte ")])),_:1},8,["label"]),(0,t.bF)(u,{label:e.$t("server.sforwardDomain"),prop:"Domain"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(d,{modelValue:r.state.ruleForm.Domain,"onUpdate:modelValue":l[5]||(l[5]=e=>r.state.ruleForm.Domain=e)},null,8,["modelValue"]),[[k]])])),_:1},8,["label"]),(0,t.bF)(u,{label:e.$t("server.sforwardUrl"),prop:"Url"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(d,{modelValue:r.state.ruleForm.Url,"onUpdate:modelValue":l[6]||(l[6]=e=>r.state.ruleForm.Url=e)},null,8,["modelValue"]),[[k]])])),_:1},8,["label"]),(0,t.bF)(u,{label:e.$t("server.sforwardWebPort"),prop:"WebPort"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{modelValue:r.state.ruleForm.WebPort,"onUpdate:modelValue":l[7]||(l[7]=e=>r.state.ruleForm.WebPort=e),min:1024,max:65535},null,8,["modelValue"])])),_:1},8,["label"]),(0,t.bF)(u,{label:e.$t("server.sforwardPortStart"),prop:"start"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{modelValue:r.state.portRange.start,"onUpdate:modelValue":l[8]||(l[8]=e=>r.state.portRange.start=e),min:1024,max:65535},null,8,["modelValue"])])),_:1},8,["label"]),(0,t.bF)(u,{label:e.$t("server.sforwardPortEnd"),prop:"end"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{modelValue:r.state.portRange.end,"onUpdate:modelValue":l[9]||(l[9]=e=>r.state.portRange.end=e),min:1024,max:65535},null,8,["modelValue"])])),_:1},8,["label"]),(0,t.bF)(u,{label:e.$t("server.sforwardPublic"),prop:"Public"},{default:(0,t.k6)((()=>[(0,t.bF)(b,{modelValue:r.state.ruleForm.Public,"onUpdate:modelValue":l[10]||(l[10]=e=>r.state.ruleForm.Public=e),size:"small"},null,8,["modelValue"])])),_:1},8,["label"]),(0,t.bF)(u,{label:e.$t("server.sforwardSync2Server"),prop:"Sync2Server"},{default:(0,t.k6)((()=>[(0,t.bF)(b,{modelValue:r.state.ruleForm.Sync2Server,"onUpdate:modelValue":l[11]||(l[11]=e=>r.state.ruleForm.Sync2Server=e),size:"small"},null,8,["modelValue"])])),_:1},8,["label"]),(0,t.bF)(u),(0,t.bF)(u,{label:"",prop:"Btns"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",ll,[(0,t.bF)(p,{onClick:l[12]||(l[12]=e=>r.state.show=!1)},{default:(0,t.k6)((()=>[(0,t.eW)((0,s.v_)(e.$t("common.cancel")),1)])),_:1}),(0,t.bF)(p,{type:"primary",onClick:r.handleSave},{default:(0,t.k6)((()=>[(0,t.eW)((0,s.v_)(e.$t("common.confirm")),1)])),_:1},8,["onClick"])])])),_:1})])),_:1},8,["model","rules"])])])),_:1},8,["title","modelValue"])}var tl={props:["data","modelValue"],emits:["update:modelValue","success"],components:{Refresh:ue.C42},setup(e,{emit:l}){const{t:a}=(0,x.s9)(),r=(0,y.Kh)({show:!0,ruleForm:{Id:e.data.Id,Name:e.data.Name,MaxBandwidth:e.data.MaxBandwidth,MaxBandwidthTotal:e.data.MaxBandwidthTotal,MaxGbTotal:e.data.MaxGbTotal,MaxGbTotalLastBytes:e.data.MaxGbTotalLastBytes,Public:e.data.Public,Domain:e.data.Domain,Url:e.data.Url,Sync2Server:e.data.Sync2Server||!1,WebPort:e.data.WebPort||0,PortRange:e.data.PortRange||[1025,65535]},portRange:{start:e.data.PortRange[0],end:e.data.PortRange[1]},rules:{}});(0,t.wB)((()=>r.show),(e=>{e||setTimeout((()=>{l("update:modelValue",e)}),300)}));const o=()=>{r.ruleForm.MaxGbTotalLastBytes=1024*r.ruleForm.MaxGbTotal*1024*1024},s=(0,y.KR)(null),n=()=>{s.value.validate((e=>{if(!e)return;const t=JSON.parse(JSON.stringify(r.ruleForm));t.PortRange=[r.portRange.start,r.portRange.end],(0,el.ZP)(t).then((e=>{e?(F.nk.success(a("common.oper")),r.show=!1,l("success")):F.nk.error(a("common.operFail"))})).catch((()=>{F.nk.error(a("common.operFail"))}))}))};return{state:r,ruleFormRef:s,handleRefresh:o,handleSave:n}}};const rl=(0,$.A)(tl,[["render",al],["__scopeId","data-v-06530694"]]);var ol=rl,sl={props:["modelValue","data"],emits:["update:modelValue","success"],components:{EditNode:ol,Edit:ue.ffu,ArrowDown:ue.yd$,Refresh:ue.C42},setup(e,{emit:l}){const{t:a}=(0,x.s9)(),r=(0,g.B)(),o=(0,y.Kh)({show:!0,nodes:(0,t.EW)((()=>e.data)),showEdit:!1,current:{},super:(0,t.EW)((()=>r.value.signin.Super))});(0,t.wB)((()=>o.show),(e=>{e||setTimeout((()=>{l("update:modelValue",e)}),300)}));const s=e=>{o.current=e,o.showEdit=!0},n=e=>{e.Sync2Server=!e.Sync2Server,(0,el.ZP)(e).then((e=>{F.nk.success(a("common.oper"))})).catch((()=>{F.nk.error(a("common.operFail"))}))},d=e=>{ae.s.confirm(a("server.sforwardExit"),a("common.confirm"),{confirmButtonText:a("common.confirm"),cancelButtonText:a("common.cancel"),type:"warning"}).then((()=>{(0,el.fK)(e).then((e=>{F.nk.success(a("common.oper"))})).catch((()=>{F.nk.error(a("common.operFail"))}))})).catch((()=>{F.nk.error(a("common.operFail"))}))},u=e=>{ae.s.confirm(`${a("server.sforwardUpdate")} ${r.value.signin.Version}`,a("server.sforwardUpdate"),{confirmButtonText:a("common.confirm"),cancelButtonText:a("common.cancel"),type:"warning"}).then((()=>{(0,el.i7)({Key:e,Value:r.value.signin.Version}).then((e=>{F.nk.success(a("common.oper"))})).catch((()=>{F.nk.error(a("common.operFail"))}))})).catch((()=>{F.nk.error(a("common.operFail"))}))};return(0,t.hi)((()=>{clearTimeout(o.timer)})),{globalData:r,state:o,handleEdit:s,handleExit:d,handleUpdate:u,handleSync2Server:n}}};const nl=(0,$.A)(sl,[["render",Ye],["__scopeId","data-v-09d3b4fe"]]);var dl=nl,ul={components:{WhiteList:Me,Nodes:dl,Status:Pe},setup(e){const{t:l}=(0,x.s9)(),a=(0,g.B)(),r=(0,y.Kh)({super:(0,t.EW)((()=>a.value.signin.Super)),type:e.type,showModes:!1,timer:0,nodes:[]}),o=(0,y.KR)([]);(0,t.Gt)("nodes",o);const s=()=>{clearTimeout(r.timer),(0,el.ZT)().then((e=>{r.nodes=e,o.value=e,r.timer=setTimeout(s,1e3)})).catch((()=>{r.timer=setTimeout(s,1e3)}))};return(0,t.sV)((()=>{s()})),(0,t.hi)((()=>{clearTimeout(r.timer)})),{globalData:a,state:r}}};const il=(0,$.A)(ul,[["render",Xe]]);var cl=il,ml={components:{Updater:T,RelayServers:Ae,SForwardServers:cl,Sync:C.A,WhiteList:Me},setup(e){const{t:l}=(0,x.s9)(),a=(0,g.B)(),r=(0,y.Kh)({list:a.value.config.Client.Server,height:(0,t.EW)((()=>a.value.height-90)),position:(0,t.EW)((()=>a.value.isPhone?"top":"right")),super:(0,t.EW)((()=>a.value.signin.Super)),signinHost:(0,t.EW)((()=>a.value.signin.SignInHost))}),o=()=>{(0,f.jU)(r.list).then((()=>{F.nk.success(l("common.oper"))})).catch((e=>{console.log(e),F.nk.error(l("common.operFail"))})),s()},s=()=>{(0,f.wP)().then((e=>{})).catch((()=>{}))};return(0,t.sV)((()=>{s()})),{globalData:a,state:r,handleSave:o}}};const pl=(0,$.A)(ml,[["render",w]]);var bl=pl,hl={components:{Config:bl},setup(e){return{}}};const vl=(0,$.A)(hl,[["render",o],["__scopeId","data-v-6c813b26"]]);var kl=vl}}]);