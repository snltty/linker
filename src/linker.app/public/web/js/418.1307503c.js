"use strict";(self["webpackChunklinker_web"]=self["webpackChunklinker_web"]||[]).push([[418],{4921:function(e,t,a){a.d(t,{B8:function(){return i},Hb:function(){return d},Qj:function(){return s},a6:function(){return c},iN:function(){return u},id:function(){return p},mb:function(){return n},xy:function(){return r},zq:function(){return o}});var l=a(4);const s=(e="")=>(0,l.zG)("flow/GetFlows",e),o=(e="")=>(0,l.zG)("flow/GetMessengerFlows",e),n=e=>(0,l.zG)("flow/GetSForwardFlows",e),r=e=>(0,l.zG)("flow/GetRelayFlows",e),i=()=>(0,l.zG)("flow/GetCitys"),u=(e="")=>(0,l.zG)("flow/GetStopwatch",e),d=e=>(0,l.zG)("flow/GetForwardFlows",e),c=e=>(0,l.zG)("flow/GetSocks5Flows",e),p=e=>(0,l.zG)("flow/GetTunnelFlows",e)},83:function(e,t,a){a.d(t,{$M:function(){return d},G7:function(){return n},KW:function(){return i},Uu:function(){return p},Zu:function(){return c},eh:function(){return o},pH:function(){return f},r7:function(){return s},xN:function(){return r},xT:function(){return u}});var l=a(4);const s=(e="0")=>(0,l.zG)("tunnel/get",e),o=()=>(0,l.zG)("tunnel/refresh"),n=e=>(0,l.zG)("tunnel/Operating",e),r=e=>(0,l.zG)("tunnel/connect",e),i=e=>(0,l.zG)("tunnel/SetRouteLevel",e),u=e=>(0,l.zG)("tunnel/GetTransports",e),d=e=>(0,l.zG)("tunnel/SetTransports",e),c=e=>(0,l.zG)("tunnel/GetNetwork",e),p=e=>(0,l.zG)("channel/get",e),f=(e,t)=>(0,l.zG)("channel/remove",{machineid:e,transactionId:t})},920:function(e,t,a){a.d(t,{BJ:function(){return i},NS:function(){return n},UB:function(){return p},aP:function(){return c},lJ:function(){return o},mK:function(){return s},rD:function(){return r},rL:function(){return u},y2:function(){return d}});var l=a(4);const s=(e="0")=>(0,l.zG)("updater/get",e),o=e=>(0,l.zG)("updater/confirm",e),n=e=>(0,l.zG)("updater/exit",e),r=e=>(0,l.zG)("updater/SetSync2Server",e),i=()=>(0,l.zG)("updater/getserver"),u=()=>(0,l.zG)("updater/getmsg"),d=e=>(0,l.zG)("updater/confirmserver",e),c=()=>(0,l.zG)("updater/exitserver"),p=()=>(0,l.zG)("updater/Subscribe")},6046:function(e,t,a){a.d(t,{Y:function(){return n},q:function(){return r}});var l=a(144),s=a(6768);const o=Symbol(),n=()=>{const e=(0,l.KR)({count:!1,map:!1,allmap:!1,overallSendtSpeed:"0000.00KB",overallReceiveSpeed:"0000.00KB",overallOnline:"0/0",serverOnline:"",machineId:"",device:{id:"",name:""},showStopwatch:!1,show:!1});return(0,s.Gt)(o,e),{flow:e}},r=()=>(0,s.WQ)(o)},5304:function(e,t,a){a.d(t,{T:function(){return i},d:function(){return r}});var l=a(920),s=(a(3830),a(144)),o=a(6768);const n=Symbol(),r=()=>{const e=(0,s.KR)({timer:0,list:{},hashcode:0,subscribeTimer:0,device:{},show:!1});(0,o.Gt)(n,e);const t=()=>new Promise(((t,a)=>{(0,l.mK)(e.value.hashcode.toString()).then((a=>{if(e.value.hashcode=a.HashCode,a.List)return e.value.list=a.List,void t(!0);t(!1)})).catch((()=>{t(!1)}))})),a=()=>{},r=(t,a)=>{Object.assign(a,{hook_updater:e.value.list[t.MachineId]||{}})},i=()=>{(0,l.UB)().then((()=>{e.value.subscribeTimer=setTimeout(i,5e3)})).catch((()=>{e.value.subscribeTimer=setTimeout(i,5e3)}))},u=()=>{clearTimeout(e.value.subscribeTimer)};return{updater:e,updaterDataFn:t,updaterProcessFn:r,updaterRefreshFn:a,updaterSubscribe:i,updaterClearTimeout:u}},i=()=>(0,o.WQ)(n)},2646:function(e,t,a){a.d(t,{A:function(){return f}});var l=a(6768),s=a(4232);const o=e=>((0,l.Qi)("data-v-56fafd26"),e=e(),(0,l.jt)(),e),n=o((()=>(0,l.Lk)("span",{class:"red"},"满权限(顶级管理权)",-1)));function r(e,t,a,o,r,i){const u=(0,l.g2)("el-checkbox"),d=(0,l.g2)("el-col"),c=(0,l.g2)("el-row"),p=(0,l.g2)("el-checkbox-group");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(c,null,{default:(0,l.k6)((()=>[(0,l.bF)(d,{span:8},{default:(0,l.k6)((()=>[(0,l.bF)(u,{modelValue:o.state.checkAll,"onUpdate:modelValue":t[0]||(t[0]=e=>o.state.checkAll=e),onChange:o.handleCheckAllChange,label:"全选",indeterminate:o.state.isIndeterminate},null,8,["modelValue","onChange","indeterminate"])])),_:1}),o.globalData.config.Client.FullAccess?((0,l.uX)(),(0,l.Wv)(d,{key:0,span:8},{default:(0,l.k6)((()=>[(0,l.bF)(u,{modelValue:o.state.full,"onUpdate:modelValue":t[1]||(t[1]=e=>o.state.full=e)},{default:(0,l.k6)((()=>[n])),_:1},8,["modelValue"])])),_:1})):(0,l.Q3)("",!0)])),_:1}),(0,l.Lk)("div",{class:"access-wrap scrollbar",style:(0,s.Tr)({height:`${o.state.height}rem`})},[(0,l.bF)(p,{modelValue:o.state.checkList,"onUpdate:modelValue":t[2]||(t[2]=e=>o.state.checkList=e),onChange:o.handleCheckedChange},{default:(0,l.k6)((()=>[(0,l.bF)(c,null,{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(o.access,((e,t)=>((0,l.uX)(),(0,l.Wv)(d,{key:t,xs:12,sm:8},{default:(0,l.k6)((()=>[(0,l.bF)(u,{value:e.Value,label:e.Text},null,8,["value","label"])])),_:2},1024)))),128))])),_:1})])),_:1},8,["modelValue","onChange"])],4)],64)}a(4114);var i=a(144),u=a(3830),d={props:["accesss","height"],setup(e){const t=(0,u.B)(),a=(0,l.EW)((()=>{const e=t.value.config.Client.Accesss;return Object.keys(e).reduce(((a,l,s)=>{if(t.value.hasAccess(l)){const t=e[l];t.Key=l,a.push(t)}return a}),[])})),s=(0,i.Kh)({height:e.height||50,checkList:[t.value.config.Client.Accesss.Api.Value,t.value.config.Client.Accesss.Web.Value,t.value.config.Client.Accesss.NetManager.Value,t.value.config.Client.Accesss.FullManager.Value,t.value.config.Client.Accesss.Transport.Value,t.value.config.Client.Accesss.RenameSelf.Value,t.value.config.Client.Accesss.UpdateSelf.Value,t.value.config.Client.Accesss.TuntapStatusSelf.Value,t.value.config.Client.Accesss.TuntapChangeSelf.Value,t.value.config.Client.Accesss.ForwardShowSelf.Value,t.value.config.Client.Accesss.ForwardSelf.Value,t.value.config.Client.Accesss.TunnelChangeSelf.Value,t.value.config.Client.Accesss.TunnelRemove.Value,t.value.config.Client.Accesss.Action.Value,t.value.config.Client.Accesss.Socks5StatusSelf.Value,t.value.config.Client.Accesss.Socks5ChangeSelf.Value,t.value.config.Client.Accesss.FirewallSelf.Value,t.value.config.Client.Accesss.WakeupSelf.Value],checkAll:!1,full:!1,isIndeterminate:!1}),o=()=>{const e=s.checkList.reduce(((e,t)=>(e[t]="1",e)),[]);for(let t=0;t<e.length;t++)e[t]=e[t]||"0";return[e.join(""),s.full]},n=e=>{const t=e.length;s.checkAll=t===a.value.length,s.isIndeterminate=t>0&&t<a.value.length},r=e=>{s.checkAll=e,s.checkList=e?a.value.map((e=>e.Value)):[],s.isIndeterminate=!1};return(0,l.sV)((()=>{e.accesss&&(s.checkList=a.value.reduce(((t,a)=>("1"==e.accesss[a.Value]&&t.push(a.Value),t)),[])),n(s.checkList)})),{globalData:t,state:s,access:a,getValue:o,handleCheckAllChange:r,handleCheckedChange:n}}},c=a(1241);const p=(0,c.A)(d,[["render",r],["__scopeId","data-v-56fafd26"]]);var f=p},1257:function(e,t,a){a.d(t,{A:function(){return ce}});var l=a(6768),s=a(4232);function o(e,t,a,o,n,r){const i=(0,l.g2)("el-table-column"),u=(0,l.g2)("el-button"),d=(0,l.g2)("el-table"),c=(0,l.g2)("el-dialog"),p=(0,l.g2)("ServerFlowMessenger"),f=(0,l.g2)("ServerFlowSForward"),g=(0,l.g2)("ServerFlowForward"),m=(0,l.g2)("ServerFlowSocks5"),h=(0,l.g2)("ServerFlowTunnel"),v=(0,l.g2)("ServerFlowRelay"),w=(0,l.g2)("OnlineMap"),y=(0,l.g2)("OnlineAllMap");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(c,{title:o.state.time,"destroy-on-close":"",modelValue:o.flow.count,"onUpdate:modelValue":t[0]||(t[0]=e=>o.flow.count=e),width:"640"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.bF)(d,{data:o.state.list,border:"",size:"small",width:"100%"},{default:(0,l.k6)((()=>[(0,l.bF)(i,{prop:"text",label:e.$t("status.flowType")},null,8,["label"]),(0,l.bF)(i,{prop:"sendtBytes",label:e.$t("status.flowUpload"),sortable:""},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.sendtBytesText),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"sendtSpeed",label:e.$t("status.flowUpload"),sortable:""},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.sendtSpeedText),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"receiveBytes",label:e.$t("status.flowDownload"),sortable:""},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.receiveBytesText),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"receiveSpeed",label:e.$t("status.flowDownload"),sortable:""},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.receiveSpeedText),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"oper",label:e.$t("status.flowOper"),width:"70"},{default:(0,l.k6)((t=>[t.row.detail?((0,l.uX)(),(0,l.Wv)(u,{key:0,size:"small",onClick:e=>o.handleShowDetail(t.row.id)},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)(e.$t("status.flowDetail")),1)])),_:2},1032,["onClick"])):(0,l.Q3)("",!0)])),_:1},8,["label"])])),_:1},8,["data"])])])),_:1},8,["title","modelValue"]),o.state.details.Messenger?((0,l.uX)(),(0,l.Wv)(p,{key:0,config:o.config,machineId:o.flow.machineId,modelValue:o.state.details.Messenger,"onUpdate:modelValue":t[1]||(t[1]=e=>o.state.details.Messenger=e)},null,8,["config","machineId","modelValue"])):(0,l.Q3)("",!0),o.state.details.SForward?((0,l.uX)(),(0,l.Wv)(f,{key:1,config:o.config,machineId:o.flow.machineId,modelValue:o.state.details.SForward,"onUpdate:modelValue":t[2]||(t[2]=e=>o.state.details.SForward=e)},null,8,["config","machineId","modelValue"])):(0,l.Q3)("",!0),o.state.details.Forward?((0,l.uX)(),(0,l.Wv)(g,{key:2,config:o.config,machineId:o.flow.machineId,modelValue:o.state.details.Forward,"onUpdate:modelValue":t[3]||(t[3]=e=>o.state.details.Forward=e)},null,8,["config","machineId","modelValue"])):(0,l.Q3)("",!0),o.state.details.Socks5?((0,l.uX)(),(0,l.Wv)(m,{key:3,config:o.config,machineId:o.flow.machineId,modelValue:o.state.details.Socks5,"onUpdate:modelValue":t[4]||(t[4]=e=>o.state.details.Socks5=e)},null,8,["config","machineId","modelValue"])):(0,l.Q3)("",!0),o.state.details.Tunnel?((0,l.uX)(),(0,l.Wv)(h,{key:4,config:o.config,machineId:o.flow.machineId,modelValue:o.state.details.Tunnel,"onUpdate:modelValue":t[5]||(t[5]=e=>o.state.details.Tunnel=e)},null,8,["config","machineId","modelValue"])):(0,l.Q3)("",!0),o.state.details.Relay?((0,l.uX)(),(0,l.Wv)(v,{key:5,config:o.config,modelValue:o.state.details.Relay,"onUpdate:modelValue":t[6]||(t[6]=e=>o.state.details.Relay=e)},null,8,["config","modelValue"])):(0,l.Q3)("",!0),o.flow.map?((0,l.uX)(),(0,l.Wv)(w,{key:6,config:o.config,modelValue:o.flow.map,"onUpdate:modelValue":t[7]||(t[7]=e=>o.flow.map=e)},null,8,["config","modelValue"])):(0,l.Q3)("",!0),o.flow.allmap?((0,l.uX)(),(0,l.Wv)(y,{key:7,config:o.config,modelValue:o.flow.allmap,"onUpdate:modelValue":t[8]||(t[8]=e=>o.flow.allmap=e)},null,8,["config","modelValue"])):(0,l.Q3)("",!0)],64)}a(4114);var n=a(4921),r=a(144);function i(e,t,a,o,n,r){const i=(0,l.g2)("el-table-column"),u=(0,l.g2)("el-table"),d=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.Wv)(d,{title:e.$t("status.flowMessenger"),class:"options-center",top:"1vh","destroy-on-close":"",modelValue:o.state.show,"onUpdate:modelValue":t[0]||(t[0]=e=>o.state.show=e),width:"680"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.bF)(u,{data:o.state.list,stripe:"",border:"",size:"small",width:"100%",height:"60vh"},{default:(0,l.k6)((()=>[(0,l.bF)(i,{prop:"id",label:"id",width:"200"}),(0,l.bF)(i,{prop:"sendtBytes",label:e.$t("status.flowUpload"),sortable:""},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.sendtBytesText),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"sendtSpeed",label:e.$t("status.flowUpload"),sortable:""},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.sendtSpeedText)+"/s",1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"receiveBytes",label:e.$t("status.flowDownload"),sortable:""},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.receiveBytesText),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"receiveSpeed",label:e.$t("status.flowDownload"),sortable:""},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.receiveSpeedText)+"/s",1)])),_:1},8,["label"])])),_:1},8,["data"])])])),_:1},8,["title","modelValue"])}var u=a(5931),d={props:["modelValue","config","machineId"],emits:["update:modelValue"],setup(e,{emit:t}){const{t:a}=(0,u.s9)(),s=(0,r.Kh)({show:!0,timer:0,list:[],old:null});(0,l.wB)((()=>s.show),(e=>{e||setTimeout((()=>{t("update:modelValue",e)}),300)}));const o=()=>{clearTimeout(s.timer),(0,n.zq)(e.machineId).then((e=>{const t=s.old||e,l=[];for(let s in e){const o=e[s],n=t[s],r=`[${s}]${a(`status.messenger${s}`)||"unknown"}`;l.push({id:r,sendtBytes:o.SendtBytes,sendtBytesText:i(o.SendtBytes),sendtSpeed:o.SendtBytes-n.SendtBytes,sendtSpeedText:i(o.SendtBytes-n.SendtBytes),receiveBytes:o.ReceiveBytes,receiveBytesText:i(o.ReceiveBytes),receiveSpeed:o.ReceiveBytes-n.ReceiveBytes,receiveSpeedText:i(o.ReceiveBytes-n.ReceiveBytes)})}s.list=l.filter((e=>!!e.id)),s.old=e,s.timer=setTimeout(o,1e3)})).catch((e=>{s.timer=setTimeout(o,1e3)}))},i=e=>{let t=0;while(e>=1024)e/=1024,t++;return`${e.toFixed(2)}${["B","KB","MB","GB","TB"][t]}`};return(0,l.sV)((()=>{o()})),(0,l.hi)((()=>{clearTimeout(s.timer)})),{config:e.config,state:s}}},c=a(1241);const p=(0,c.A)(d,[["render",i],["__scopeId","data-v-5b253342"]]);var f=p;const g={class:"head"},m={class:"page t-c"},h={class:"page-wrap"};function v(e,t,a,o,n,r){const i=(0,l.g2)("el-input"),u=(0,l.g2)("el-table-column"),d=(0,l.g2)("el-table"),c=(0,l.g2)("el-pagination"),p=(0,l.g2)("el-dialog"),f=(0,l.gN)("trim");return(0,l.uX)(),(0,l.Wv)(p,{title:e.$t("status.flowServerForward"),class:"options-center",top:"1vh","destroy-on-close":"",modelValue:o.state.show,"onUpdate:modelValue":t[1]||(t[1]=e=>o.state.show=e),width:"680"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.Lk)("div",g,[(0,l.bo)((0,l.bF)(i,{modelValue:o.state.page.Key,"onUpdate:modelValue":t[0]||(t[0]=e=>o.state.page.Key=e),placeholder:e.$t("status.flowSearchDomainPort")},null,8,["modelValue","placeholder"]),[[f]])]),(0,l.bF)(d,{data:o.state.list,stripe:"",border:"",size:"small",width:"100%",height:"60vh",onSortChange:o.handleSort},{default:(0,l.k6)((()=>[(0,l.bF)(u,{prop:"Key",label:e.$t("status.flowSearchDomainPort"),width:"200"},null,8,["label"]),(0,l.bF)(u,{prop:"SendtBytes",label:e.$t("status.flowUpload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.SendtBytesText),1)])),_:1},8,["label"]),(0,l.bF)(u,{prop:"DiffSendtBytes",label:e.$t("status.flowUpload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.DiffSendtBytesText)+"/s",1)])),_:1},8,["label"]),(0,l.bF)(u,{prop:"ReceiveBytes",label:e.$t("status.flowDownload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.ReceiveBytesText),1)])),_:1},8,["label"]),(0,l.bF)(u,{prop:"DiffReceiveBytes",label:e.$t("status.flowDownload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.DiffReceiveBytesText)+"/s",1)])),_:1},8,["label"])])),_:1},8,["data","onSortChange"]),(0,l.Lk)("div",m,[(0,l.Lk)("div",h,[(0,l.bF)(c,{small:"",background:"",layout:"total,prev,pager, next",total:o.state.page.Count,"page-size":o.state.page.PageSize,"current-page":o.state.page.Page,onCurrentChange:o.handlePageChange},null,8,["total","page-size","current-page","onCurrentChange"])])])])])),_:1},8,["title","modelValue"])}var w={props:["modelValue","config","machineId"],emits:["update:modelValue"],setup(e,{emit:t}){const a=(0,r.Kh)({show:!0,timer:0,list:[],page:{Key:"",Page:1,PageSize:15,Count:0,Order:1,OrderType:0}});(0,l.wB)((()=>a.show),(e=>{e||setTimeout((()=>{t("update:modelValue",e)}),300)}));const s=()=>{clearTimeout(a.timer),(0,n.mb)({Key:a.page.Key,Page:a.page.Page,PageSize:a.page.PageSize,Order:a.page.Order,OrderType:a.page.OrderType,MachineId:e.machineId}).then((e=>{try{a.page.Page=e.Page,a.page.PageSize=e.PageSize,a.page.Count=e.Count;const t=[];for(let a=0;a<e.Data.length;a++){const l=e.Data[a];Object.assign(l,{SendtBytesText:o(l.SendtBytes),ReceiveBytesText:o(l.ReceiveBytes),DiffSendtBytesText:o(l.DiffSendtBytes),DiffReceiveBytesText:o(l.DiffReceiveBytes)}),t.push(l)}a.list=t}catch(t){console.log(t)}a.timer=setTimeout(s,1e3)})).catch((e=>{a.timer=setTimeout(s,1e3)}))},o=e=>{let t=0;while(e>=1024)e/=1024,t++;return`${e.toFixed(2)}${["B","KB","MB","GB","TB"][t]}`},i=e=>{e&&(a.page.Page=e)},u=e=>{const t={ascending:1,descending:0}[e.order],l={SendtBytes:1,DiffSendtBytes:2,ReceiveBytes:3,DiffReceiveBytes:4}[e.prop];a.page.Order=l,a.page.OrderType=t};return(0,l.sV)((()=>{s()})),(0,l.hi)((()=>{clearTimeout(a.timer)})),{config:e.config,state:a,handlePageChange:i,handleSort:u}}};const y=(0,c.A)(w,[["render",v],["__scopeId","data-v-7a85ea80"]]);var b=y;const k={class:"page t-c"},S={class:"page-wrap"};function B(e,t,a,o,n,r){const i=(0,l.g2)("el-table-column"),u=(0,l.g2)("el-table"),d=(0,l.g2)("el-pagination"),c=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.Wv)(c,{title:e.$t("status.flowForward"),class:"options-center",top:"1vh","destroy-on-close":"",modelValue:o.state.show,"onUpdate:modelValue":t[0]||(t[0]=e=>o.state.show=e),width:"90%"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.bF)(u,{data:o.state.list,stripe:"",border:"",size:"small",width:"100%",height:"60vh",onSortChange:o.handleSort},{default:(0,l.k6)((()=>[(0,l.bF)(i,{prop:"Key",label:e.$t("status.flowMachineName"),width:"100"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(o.state.names[e.row.Key]||"unknow"),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"Target",label:e.$t("status.flowTarget"),width:"120"},null,8,["label"]),(0,l.bF)(i,{prop:"SendtBytes",label:e.$t("status.flowUpload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.SendtBytesText),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"DiffSendtBytes",label:e.$t("status.flowUpload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.DiffSendtBytesText)+"/s",1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"ReceiveBytes",label:e.$t("status.flowDownload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.ReceiveBytesText),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"DiffReceiveBytes",label:e.$t("status.flowDownload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.DiffReceiveBytesText)+"/s",1)])),_:1},8,["label"])])),_:1},8,["data","onSortChange"]),(0,l.Lk)("div",k,[(0,l.Lk)("div",S,[(0,l.bF)(d,{small:"",background:"",layout:"total,prev,pager, next",total:o.state.page.Count,"page-size":o.state.page.PageSize,"current-page":o.state.page.Page,onCurrentChange:o.handlePageChange},null,8,["total","page-size","current-page","onCurrentChange"])])])])])),_:1},8,["title","modelValue"])}var T=a(9299),_={props:["modelValue","config","machineId"],emits:["update:modelValue"],setup(e,{emit:t}){const a=(0,r.Kh)({show:!0,timer:0,names:{},list:[],page:{Page:1,PageSize:15,Count:0,Order:1,OrderType:0}});(0,l.wB)((()=>a.show),(e=>{e||setTimeout((()=>{t("update:modelValue",e)}),300)}));const s=()=>{clearTimeout(a.timer),(0,n.Hb)({Page:a.page.Page,PageSize:a.page.PageSize,Order:a.page.Order,OrderType:a.page.OrderType,MachineId:e.machineId}).then((e=>{try{a.page.Page=e.Page,a.page.PageSize=e.PageSize,a.page.Count=e.Count;const t=[];for(let a=0;a<e.Data.length;a++){const l=e.Data[a];Object.assign(l,{SendtBytesText:o(l.SendtBytes),ReceiveBytesText:o(l.ReceiveBytes),DiffSendtBytesText:o(l.DiffSendtBytes),DiffReceiveBytesText:o(l.DiffReceiveBytes)}),t.push(l)}a.list=t}catch(t){console.log(t)}a.timer=setTimeout(s,1e3)})).catch((e=>{a.timer=setTimeout(s,1e3)}))},o=e=>{let t=0;while(e>=1024)e/=1024,t++;return`${e.toFixed(2)}${["B","KB","MB","GB","TB"][t]}`},i=e=>{e&&(a.page.Page=e)},u=e=>{const t={ascending:1,descending:0}[e.order],l={SendtBytes:1,DiffSendtBytes:2,ReceiveBytes:3,DiffReceiveBytes:4}[e.prop];a.page.Order=l,a.page.OrderType=t},d=()=>{(0,T.NT)().then((e=>{a.names=e.reduce(((e,t,a)=>(e[t.MachineId]=t.MachineName,e)),{})}))};return(0,l.sV)((()=>{s(),d()})),(0,l.hi)((()=>{clearTimeout(a.timer)})),{config:e.config,state:a,handlePageChange:i,handleSort:u}}};const F=(0,c.A)(_,[["render",B],["__scopeId","data-v-0f2107fe"]]);var V=F;const C={class:"page t-c"},x={class:"page-wrap"};function z(e,t,a,o,n,r){const i=(0,l.g2)("el-table-column"),u=(0,l.g2)("el-table"),d=(0,l.g2)("el-pagination"),c=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.Wv)(c,{title:e.$t("status.flowSocks5"),class:"options-center",top:"1vh","destroy-on-close":"",modelValue:o.state.show,"onUpdate:modelValue":t[0]||(t[0]=e=>o.state.show=e),width:"90%"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.bF)(u,{data:o.state.list,stripe:"",border:"",size:"small",width:"100%",height:"60vh",onSortChange:o.handleSort},{default:(0,l.k6)((()=>[(0,l.bF)(i,{prop:"Key",label:e.$t("status.flowMachineName"),width:"100"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(o.state.names[e.row.Key]||"unknow"),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"Target",label:e.$t("status.flowTarget"),width:"120"},null,8,["label"]),(0,l.bF)(i,{prop:"SendtBytes",label:e.$t("status.flowUpload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.SendtBytesText),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"DiffSendtBytes",label:e.$t("status.flowUpload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.DiffSendtBytesText)+"/s",1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"ReceiveBytes",label:e.$t("status.flowDownload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.ReceiveBytesText),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"DiffReceiveBytes",label:e.$t("status.flowDownload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.DiffReceiveBytesText)+"/s",1)])),_:1},8,["label"])])),_:1},8,["data","onSortChange"]),(0,l.Lk)("div",C,[(0,l.Lk)("div",x,[(0,l.bF)(d,{small:"",background:"",layout:"total,prev,pager, next",total:o.state.page.Count,"page-size":o.state.page.PageSize,"current-page":o.state.page.Page,onCurrentChange:o.handlePageChange},null,8,["total","page-size","current-page","onCurrentChange"])])])])])),_:1},8,["title","modelValue"])}var $={props:["modelValue","config","machineId"],emits:["update:modelValue"],setup(e,{emit:t}){const a=(0,r.Kh)({show:!0,timer:0,names:{},list:[],page:{Page:1,PageSize:15,Count:0,Order:1,OrderType:0}});(0,l.wB)((()=>a.show),(e=>{e||setTimeout((()=>{t("update:modelValue",e)}),300)}));const s=()=>{clearTimeout(a.timer),(0,n.a6)({Page:a.page.Page,PageSize:a.page.PageSize,Order:a.page.Order,OrderType:a.page.OrderType,MachineId:e.machineId}).then((e=>{try{a.page.Page=e.Page,a.page.PageSize=e.PageSize,a.page.Count=e.Count;const t=[];for(let a=0;a<e.Data.length;a++){const l=e.Data[a];Object.assign(l,{SendtBytesText:o(l.SendtBytes),ReceiveBytesText:o(l.ReceiveBytes),DiffSendtBytesText:o(l.DiffSendtBytes),DiffReceiveBytesText:o(l.DiffReceiveBytes)}),t.push(l)}a.list=t}catch(t){console.log(t)}a.timer=setTimeout(s,1e3)})).catch((e=>{a.timer=setTimeout(s,1e3)}))},o=e=>{let t=0;while(e>=1024)e/=1024,t++;return`${e.toFixed(2)}${["B","KB","MB","GB","TB"][t]}`},i=e=>{e&&(a.page.Page=e)},u=e=>{const t={ascending:1,descending:0}[e.order],l={SendtBytes:1,DiffSendtBytes:2,ReceiveBytes:3,DiffReceiveBytes:4}[e.prop];a.page.Order=l,a.page.OrderType=t},d=()=>{(0,T.NT)().then((e=>{a.names=e.reduce(((e,t,a)=>(e[t.MachineId]=t.MachineName,e)),{})}))};return(0,l.sV)((()=>{s(),d()})),(0,l.hi)((()=>{clearTimeout(a.timer)})),{config:e.config,state:a,handlePageChange:i,handleSort:u}}};const I=(0,c.A)($,[["render",z],["__scopeId","data-v-55d6858b"]]);var R=I;const P={class:"page t-c"},D={class:"page-wrap"};function A(e,t,a,o,n,r){const i=(0,l.g2)("el-table-column"),u=(0,l.g2)("el-table"),d=(0,l.g2)("el-pagination"),c=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.Wv)(c,{title:e.$t("status.flowTunnel"),class:"options-center",top:"1vh","destroy-on-close":"",modelValue:o.state.show,"onUpdate:modelValue":t[0]||(t[0]=e=>o.state.show=e),width:"90%"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.bF)(u,{data:o.state.list,stripe:"",border:"",size:"small",width:"100%",height:"60vh",onSortChange:o.handleSort},{default:(0,l.k6)((()=>[(0,l.bF)(i,{prop:"Key",label:e.$t("status.flowMachineName"),width:"100"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(o.state.names[e.row.Key]||"unknow"),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"TransitionId",label:e.$t("status.flowTransitionId")},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(o.state.transitions[e.row.TransitionId]||"unknow"),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"Direction",label:e.$t("status.flowDirection")},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(o.state.dirs[e.row.Direction]||"unknow"),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"Type",label:e.$t("status.flowType")},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(o.state.types[e.row.Type]||"unknow"),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"Mode",label:e.$t("status.flowMode")},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(o.state.modes[e.row.Mode]||"unknow"),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"ReceiveBytes",label:e.$t("status.flowNum"),width:"80"},null,8,["label"])])),_:1},8,["data","onSortChange"]),(0,l.Lk)("div",P,[(0,l.Lk)("div",D,[(0,l.bF)(d,{small:"",background:"",layout:"total,prev,pager, next",total:o.state.page.Count,"page-size":o.state.page.PageSize,"current-page":o.state.page.Page,onCurrentChange:o.handlePageChange},null,8,["total","page-size","current-page","onCurrentChange"])])])])])),_:1},8,["title","modelValue"])}var O={props:["modelValue","config","machineId"],emits:["update:modelValue"],setup(e,{emit:t}){const a=(0,r.Kh)({show:!0,timer:0,names:{},list:[],page:{Page:1,PageSize:15,Count:0,Order:1,OrderType:0},transitions:{socks5:"代理",forward:"端口转发",tuntap:"虚拟网卡"},dirs:["正向","反向"],types:["打洞","中继","节点"],modes:["客户端","服务端"]});(0,l.wB)((()=>a.show),(e=>{e||setTimeout((()=>{t("update:modelValue",e)}),300)}));const s=()=>{clearTimeout(a.timer),(0,n.id)({Page:a.page.Page,PageSize:a.page.PageSize,Order:a.page.Order,OrderType:a.page.OrderType,MachineId:e.machineId}).then((e=>{try{a.page.Page=e.Page,a.page.PageSize=e.PageSize,a.page.Count=e.Count;const t=[];for(let a=0;a<e.Data.length;a++){const l=e.Data[a];Object.assign(l,{SendtBytesText:l.SendtBytes,ReceiveBytesText:l.ReceiveBytes,DiffSendtBytesText:l.DiffSendtBytes,DiffReceiveBytesText:l.DiffReceiveBytes}),t.push(l)}a.list=t}catch(t){console.log(t)}a.timer=setTimeout(s,1e3)})).catch((e=>{a.timer=setTimeout(s,1e3)}))},o=e=>{e&&(a.page.Page=e)},i=e=>{const t={ascending:1,descending:0}[e.order],l={SendtBytes:1,DiffSendtBytes:2,ReceiveBytes:3,DiffReceiveBytes:4}[e.prop];a.page.Order=l,a.page.OrderType=t},u=()=>{(0,T.NT)().then((e=>{a.names=e.reduce(((e,t,a)=>(e[t.MachineId]=t.MachineName,e)),{})}))};return(0,l.sV)((()=>{s(),u()})),(0,l.hi)((()=>{clearTimeout(a.timer)})),{config:e.config,state:a,handlePageChange:o,handleSort:i}}};const M=(0,c.A)(O,[["render",A],["__scopeId","data-v-b5a30d1e"]]);var U=M;const G={class:"head"},K={class:"page t-c"},W={class:"page-wrap"};function N(e,t,a,o,n,r){const i=(0,l.g2)("el-input"),u=(0,l.g2)("el-table-column"),d=(0,l.g2)("el-table"),c=(0,l.g2)("el-pagination"),p=(0,l.g2)("el-dialog"),f=(0,l.gN)("trim");return(0,l.uX)(),(0,l.Wv)(p,{title:e.$t("status.flowRelay"),class:"options-center",top:"1vh","destroy-on-close":"",modelValue:o.state.show,"onUpdate:modelValue":t[1]||(t[1]=e=>o.state.show=e),width:"680"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.Lk)("div",G,[(0,l.bo)((0,l.bF)(i,{modelValue:o.state.page.Key,"onUpdate:modelValue":t[0]||(t[0]=e=>o.state.page.Key=e),placeholder:"名字搜索"},null,8,["modelValue"]),[[f]])]),(0,l.bF)(d,{data:o.state.list,stripe:"",border:"",size:"small",width:"100%",height:"60vh",onSortChange:o.handleSort},{default:(0,l.k6)((()=>[(0,l.bF)(u,{prop:"FromName",label:e.$t("status.flowRelaySource"),width:"120"},null,8,["label"]),(0,l.bF)(u,{prop:"ToName",label:e.$t("status.flowRelayTarget"),width:"120"},null,8,["label"]),(0,l.bF)(u,{prop:"SendtBytes",label:e.$t("status.flowUpload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.SendtBytesText),1)])),_:1},8,["label"]),(0,l.bF)(u,{prop:"DiffSendtBytes",label:e.$t("status.flowUpload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.DiffSendtBytesText)+"/s",1)])),_:1},8,["label"]),(0,l.bF)(u,{prop:"ReceiveBytes",label:e.$t("status.flowDownload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.ReceiveBytesText),1)])),_:1},8,["label"]),(0,l.bF)(u,{prop:"DiffReceiveBytes",label:e.$t("status.flowDownload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,s.v_)(e.row.DiffReceiveBytesText)+"/s",1)])),_:1},8,["label"])])),_:1},8,["data","onSortChange"]),(0,l.Lk)("div",K,[(0,l.Lk)("div",W,[(0,l.bF)(c,{small:"",background:"",layout:"total,prev,pager, next",total:o.state.page.Count,"page-size":o.state.page.PageSize,"current-page":o.state.page.Page,onCurrentChange:o.handlePageChange},null,8,["total","page-size","current-page","onCurrentChange"])])])])])),_:1},8,["title","modelValue"])}var X={props:["modelValue","config"],emits:["update:modelValue"],setup(e,{emit:t}){const a=(0,r.Kh)({show:!0,timer:0,list:[],page:{Key:"",Page:1,PageSize:15,Count:0,Order:1,OrderType:0}});(0,l.wB)((()=>a.show),(e=>{e||setTimeout((()=>{t("update:modelValue",e)}),300)}));const s=()=>{clearTimeout(a.timer),(0,n.xy)({Key:a.page.Key,Page:a.page.Page,PageSize:a.page.PageSize,Order:a.page.Order,OrderType:a.page.OrderType}).then((e=>{try{a.page.Page=e.Page,a.page.PageSize=e.PageSize,a.page.Count=e.Count;const t=[];for(let a=0;a<e.Data.length;a++){const l=e.Data[a];Object.assign(l,{SendtBytesText:o(l.SendtBytes),ReceiveBytesText:o(l.ReceiveBytes),DiffSendtBytesText:o(l.DiffSendtBytes),DiffReceiveBytesText:o(l.DiffReceiveBytes)}),t.push(l)}a.list=t}catch(t){console.log(t)}a.timer=setTimeout(s,1e3)})).catch((e=>{a.timer=setTimeout(s,1e3)}))},o=e=>{let t=0;while(e>=1024)e/=1024,t++;return`${e.toFixed(2)}${["B","KB","MB","GB","TB"][t]}`},i=e=>{e&&(a.page.Page=e)},u=e=>{const t={ascending:1,descending:0}[e.order],l={SendtBytes:1,DiffSendtBytes:2,ReceiveBytes:3,DiffReceiveBytes:4}[e.prop];a.page.Order=l,a.page.OrderType=t};return(0,l.sV)((()=>{s()})),(0,l.hi)((()=>{clearTimeout(a.timer)})),{config:e.config,state:a,handlePageChange:i,handleSort:u}}};const E=(0,c.A)(X,[["render",N],["__scopeId","data-v-1098928d"]]);var Q=E,j=a(3830);const q=e=>((0,l.Qi)("data-v-128e55db"),e=e(),(0,l.jt)(),e),H=q((()=>(0,l.Lk)("div",{class:"map-wrap",id:"map"},null,-1)));function Y(e,t,a,s,o,n){const r=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.Wv)(r,{class:"options-center",title:e.$t("status.flowOnline"),"destroy-on-close":"",modelValue:s.state.show,"onUpdate:modelValue":t[0]||(t[0]=e=>s.state.show=e),width:"77rem",top:"2vh"},{default:(0,l.k6)((()=>[H])),_:1},8,["title","modelValue"])}var Z=a(83),J={props:["modelValue"],emits:["update:modelValue"],setup(e,{emit:t}){const{t:a}=(0,u.s9)(),s=(0,r.Kh)({show:!0});(0,l.wB)((()=>s.show),(e=>{e||setTimeout((()=>{t("update:modelValue",e)}),300)}));const o=(e,t)=>{const l=L.map("map").setView([38,105],4);L.tileLayer("https://webrd01.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}",{attribution:"linker",maxZoom:10}).addTo(l);for(let o=0;o<t.length;o++)try{const s=t[o];if(!e[s.MachineId])continue;const n=e[s.MachineId].Net;if(0==n.Lat||0==n.Lon)continue;const r=new L.Icon({iconSize:[18,28],iconAnchor:[9,28],shadowAnchor:[0,0],popupAnchor:[0,-27],shadowSize:[0,0],iconUrl:s.Online?"/marker-green.png":"/marker-grey.png",shadowUrl:"/marker-shadow.png"}),i=`\n                        <div class="marker-content" >\n                            <h3 class="marker-title" style="font-size:1.6rem">${s.MachineName}</h3>\n                            <div class="marker-text" style="font-size:1.3rem">${a("status.flowArea")} : ${n.CountryCode}、${n.City}</div>\n                            <div class="marker-text" style="font-size:1.3rem">${a("status.flowNet")} : ${n.Isp}</div>\n                        </div>\n                    `;new L.marker(new L.latLng([n.Lat+Math.random()/5,n.Lon+Math.random()/5]),{icon:r}).bindPopup(i,{}).on("mouseover",(function(e){this.openPopup()})).on("mouseout",(function(e){this.closePopup()})).addTo(l)}catch(s){console.log(s)}};return(0,l.sV)((()=>{(0,l.dY)((()=>{(0,Z.r7)().then((e=>{(0,T.NT)().then((t=>{o(e.List,t)})).catch((()=>{}))})).catch((()=>{}))}))})),{state:s}}};const ee=(0,c.A)(J,[["render",Y],["__scopeId","data-v-128e55db"]]);var te=ee;const ae=e=>((0,l.Qi)("data-v-46898e22"),e=e(),(0,l.jt)(),e),le=ae((()=>(0,l.Lk)("div",{class:"map-wrap",id:"map"},null,-1)));function se(e,t,a,s,o,n){const r=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.Wv)(r,{class:"options-center",title:e.$t("status.flowOnline"),"destroy-on-close":"",modelValue:s.state.show,"onUpdate:modelValue":t[0]||(t[0]=e=>s.state.show=e),width:"77rem",top:"2vh"},{default:(0,l.k6)((()=>[le])),_:1},8,["title","modelValue"])}var oe={props:["modelValue"],emits:["update:modelValue"],setup(e,{emit:t}){const{t:a}=(0,u.s9)(),s=(0,r.Kh)({show:!0});(0,l.wB)((()=>s.show),(e=>{e||setTimeout((()=>{t("update:modelValue",e)}),300)}));const o=e=>{const t=L.map("map").setView([38,105],4);L.tileLayer("https://webrd01.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}",{attribution:"linker",maxZoom:10}).addTo(t);for(let a=0;a<e.length;a++){const l=e[a],s=new L.Icon({iconSize:[18,28],iconAnchor:[9,28],shadowAnchor:[0,0],popupAnchor:[0,-27],shadowSize:[0,0],iconUrl:"/marker-green.png",shadowUrl:"/marker-shadow.png"}),o=`\n                    <div class="marker-content" >\n                        <h3 class="marker-title" style="font-size:1.6rem">${l.City} ${l.Count}</h3>\n                    </div>\n                `;new L.marker(new L.latLng([l.Lat,l.Lon]),{icon:s}).bindPopup(o,{}).on("mouseover",(function(e){this.openPopup()})).on("mouseout",(function(e){this.closePopup()})).addTo(t)}};return(0,l.sV)((()=>{(0,l.dY)((()=>{(0,n.B8)().then((e=>{o(e)})).catch((()=>{}))}))})),{state:s}}};const ne=(0,c.A)(oe,[["render",se],["__scopeId","data-v-46898e22"]]);var re=ne,ie=a(6046),ue={props:["config","title"],components:{ServerFlowMessenger:f,ServerFlowSForward:b,ServerFlowForward:V,ServerFlowSocks5:R,ServerFlowTunnel:U,ServerFlowRelay:Q,OnlineMap:te,OnlineAllMap:re},setup(e,{emit:t}){const a=(0,ie.q)(),{t:s}=(0,u.s9)(),o=(0,j.B)(),i=(0,l.EW)((()=>o.value.hasAccess("SForwardFlow"))),d=(0,l.EW)((()=>o.value.hasAccess("RelayFlow"))),c=(0,l.EW)((()=>o.value.hasAccess("SigninFlow"))),p=(0,l.EW)((()=>o.value.hasAccess("ForwardFlow"))),f=(0,l.EW)((()=>o.value.hasAccess("Socks5Flow"))),g=(0,l.EW)((()=>o.value.hasAccess("TunnelFlow"))),m=(0,r.Kh)({timer:0,time:"",list:[],old:null,details:{Messenger:!1,SForward:!1,Forward:!1,Socks5:!1,Tunnel:!1,Relay:!1}}),h=e=>{m.details[e]=!0},v={External:{text:s("status.flowWanPort"),detail:!1,format:!0,suffix:"/s"},RelayReport:{text:s("status.flowRelayNode"),detail:!1,format:!0,suffix:"/s"},Relay:{text:s("status.flowRelay"),detail:d.value,format:!0,suffix:"/s"},Messenger:{text:s("status.flowMessenger"),detail:c.value,format:!0,suffix:"/s"},SForward:{text:s("status.flowServerForward"),detail:i.value,format:!0,suffix:"/s"},flow:{text:"",detail:!1},Forward:{text:s("status.flowForward"),detail:p.value,format:!0,suffix:"/s"},Socks5:{text:s("status.flowSocks5"),detail:f.value,format:!0,suffix:"/s"},Tunnel:{text:s("status.flowTunnel"),detail:g.value}},w=()=>{clearTimeout(m.timer),(0,n.Qj)(a.value.machineId).then((t=>{const l=m.old||t;if(t.Items["_"]&&(a.value.overallOnline=`${t.Items["_"].SendtBytes}/${t.Items["_"].ReceiveBytes}`,delete t.Items["_"]),t.Items["flow"]&&t.Items["flow"].ReceiveBytes>0){const e=(BigInt(t.Items["flow"].ReceiveBytes)>>BigInt(32)).toString(),l=(BigInt(t.Items["flow"].ReceiveBytes)&BigInt(4294967295)).toString(),s=t.Items["flow"].SendtBytes;a.value.serverOnline=`、${e}/${l}/${s}`,delete t.Items["flow"]}let s=0,o=0,n=0,r=0;for(let e in l.Items)s+=l.Items[e].ReceiveBytes,o+=l.Items[e].SendtBytes;for(let e in t.Items)n+=t.Items[e].ReceiveBytes,r+=t.Items[e].SendtBytes;a.value.overallSendtSpeed=y(r-o,!0,"/s"),a.value.overallReceiveSpeed=y(n-s,!0,"/s"),m.time=`[${e.title}]${t.Start}`;const i=[];for(let e in t.Items){const a=t.Items[e],s=l.Items[e],o=v[`${e}`]||{text:`Unknow${e}`,detail:!1};o.text&&i.push({id:e,text:o.text,detail:o.detail,sendtBytes:a.SendtBytes,sendtBytesText:y(a.SendtBytes,o.format,""),sendtSpeed:a.SendtBytes-s.SendtBytes,sendtSpeedText:y(a.SendtBytes-s.SendtBytes,o.format,o.suffix),receiveBytes:a.ReceiveBytes,receiveBytesText:y(a.ReceiveBytes,o.format,""),receiveSpeed:a.ReceiveBytes-s.ReceiveBytes,receiveSpeedText:y(a.ReceiveBytes-s.ReceiveBytes,o.format,o.suffix)})}m.list=i.filter((e=>!!e.id)),m.old=t,m.timer=setTimeout(w,1e3)})).catch((e=>{m.timer=setTimeout(w,1e3)}))},y=(e,t,a)=>{if(void 0===t)return e;let l=0;while(e>=1024)e/=1024,l++;return`${e.toFixed(2)}${["B","KB","MB","GB","TB"][l]}${a}`};return(0,l.sV)((()=>{w()})),(0,l.hi)((()=>{clearTimeout(m.timer)})),{config:e.config,state:m,flow:a,handleShowDetail:h}}};const de=(0,c.A)(ue,[["render",o],["__scopeId","data-v-187fc3f2"]]);var ce=de},2322:function(e,t,a){a.d(t,{A:function(){return y}});var l=a(6768),s=a(4232);const o={class:"t-c"},n={class:"t-c w-100 mgt-1"};function r(e,t,a,r,i,u){const d=(0,l.g2)("Share"),c=(0,l.g2)("el-icon"),p=(0,l.g2)("el-button"),f=(0,l.g2)("el-transfer"),g=(0,l.g2)("el-dialog"),m=(0,l.g2)("AccessBoolean");return(0,l.uX)(),(0,l.Wv)(m,{value:"Sync"},{default:(0,l.k6)((({values:a})=>[(0,l.Lk)("div",null,[(0,l.RG)(e.$slots,"default",{},(()=>[(0,l.bF)(p,{class:"btn",size:"small",onClick:e=>r.handleShowSync(a)},{default:(0,l.k6)((()=>[(0,l.bF)(c,null,{default:(0,l.k6)((()=>[(0,l.bF)(d)])),_:1})])),_:2},1032,["onClick"])])),(0,l.bF)(g,{class:"options-center",title:e.$t("server.sync"),"destroy-on-close":"",modelValue:r.state.showNames,"onUpdate:modelValue":t[2]||(t[2]=e=>r.state.showNames=e),width:"54rem",top:"2vh"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.Lk)("div",o,(0,s.v_)(`${e.$t("server.sync")}【${e.$t(`server.async${r.state.name}`)}】${e.$t("server.asyncText")}`),1),(0,l.bF)(f,{class:"src-tranfer mgt-1",modelValue:r.state.srcIdValues,"onUpdate:modelValue":t[0]||(t[0]=e=>r.state.srcIdValues=e),filterable:"","filter-method":r.srcFilterMethod,data:r.state.srcIds,titles:[e.$t("firewall.unselect"),e.$t("firewall.selected")],props:{key:"MachineId",label:"MachineName"}},null,8,["modelValue","filter-method","data","titles"]),(0,l.Lk)("div",n,[(0,l.bF)(p,{onClick:t[1]||(t[1]=e=>r.state.showNames=!1)},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)(e.$t("common.cancel")),1)])),_:1}),(0,l.bF)(p,{type:"primary",onClick:r.handleConfirm},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)(e.$t("common.confirm")),1)])),_:1},8,["onClick"])])])])),_:1},8,["title","modelValue"])])])),_:3})}var i=a(9299),u=a(4);const d=e=>(0,u.zG)("sync/Sync",e);var c=a(3830),p=a(7477),f=a(1219),g=a(144),m=a(5931),h={props:["name"],components:{Share:p.SYj},setup(e){const{t:t}=(0,m.s9)(),a=((0,c.B)(),(0,g.Kh)({name:e.name,loading:!1,showNames:!1,srcIdValues:[],srcIds:[]})),l=()=>{d({names:[e.name],ids:a.srcIdValues}).then((e=>{f.nk.success(t("common.oper")),a.showNames=!1}))},s=e=>{e.Sync?(a.showNames=!0,o()):f.nk.success(t("common.access"))},o=()=>{a.loading=!0,(0,i.NT)().then((e=>{a.loading=!1,a.srcIds=e})).catch((e=>{a.loading=!1}))},n=(e,t)=>t.MachineName.toLowerCase().includes(e.toLowerCase());return{state:a,handleShowSync:s,srcFilterMethod:n,handleConfirm:l}}},v=a(1241);const w=(0,v.A)(h,[["render",r]]);var y=w},4074:function(e,t,a){a.d(t,{A:function(){return y}});var l=a(6768),s=a(4232);const o=["onClick","title"],n={key:0,class:"progress"},r={key:1,class:"progress"};function i(e,t,a,i,u,d){const c=(0,l.g2)("Loading"),p=(0,l.g2)("el-icon"),f=(0,l.g2)("Download"),g=(0,l.g2)("CircleCheck"),m=(0,l.g2)("AccessBoolean");return(0,l.uX)(),(0,l.Wv)(m,{value:"UpdateSelf,UpdateOther"},{default:(0,l.k6)((({values:e})=>[(0,l.Lk)("a",{href:"javascript:;",class:(0,s.C4)(["download",i.updaterColor]),onClick:t=>i.handleUpdate(e),title:i.updaterText},[(0,l.Lk)("span",null,[(0,l.Lk)("span",null,(0,s.v_)(a.item.Version),1),a.item.hook_updater?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[1==a.item.hook_updater.Status?((0,l.uX)(),(0,l.Wv)(p,{key:0,size:"14",class:"loading"},{default:(0,l.k6)((()=>[(0,l.bF)(c)])),_:1})):2==a.item.hook_updater.Status?((0,l.uX)(),(0,l.Wv)(p,{key:1,size:"14"},{default:(0,l.k6)((()=>[(0,l.bF)(f)])),_:1})):3==a.item.hook_updater.Status||5==a.item.hook_updater.Status?((0,l.uX)(),(0,l.CE)(l.FK,{key:2},[(0,l.bF)(p,{size:"14",class:"loading"},{default:(0,l.k6)((()=>[(0,l.bF)(c)])),_:1}),0==a.item.hook_updater.Length?((0,l.uX)(),(0,l.CE)("span",n,"0%")):((0,l.uX)(),(0,l.CE)("span",r,(0,s.v_)(parseInt(a.item.hook_updater.Current/a.item.hook_updater.Length*100))+"%",1))],64)):6==a.item.hook_updater.Status?((0,l.uX)(),(0,l.Wv)(p,{key:3,size:"14",class:"yellow"},{default:(0,l.k6)((()=>[(0,l.bF)(g)])),_:1})):(0,l.Q3)("",!0)],64)):((0,l.uX)(),(0,l.Wv)(p,{key:1,size:"14"},{default:(0,l.k6)((()=>[(0,l.bF)(f)])),_:1}))])],10,o)])),_:1})}var u=a(3830),d=a(1219),c=a(2933),p=a(920),f=a(7477),g=a(5304),m=a(5931),h={props:["item","config"],components:{Download:f.f5X,Loading:f.Rhj,CircleCheck:f.rW7},setup(e){const{t:t}=(0,m.s9)(),a=(0,u.B)(),s=(0,g.T)(),o=(0,l.EW)((()=>a.value.signin.Version)),n=(0,l.EW)((()=>e.item.hook_updater?e.item.hook_updater.Status<=2?e.item.Version!=o.value?`与服务器版本(${o.value})不一致，建议更新`:e.item.hook_updater.Version!=e.item.Version?`不是最新版本(${e.item.hook_updater.Version})，建议更新`:"是最新版本，但我无法阻止你喜欢更新":{3:"正在下载",4:"已下载",5:"正在解压",6:"已解压，请重启"}[e.item.hook_updater.Status]:"未检测到更新")),r=(0,l.EW)((()=>e.item.Version!=o.value?"red":e.item.hook_updater&&e.item.hook_updater.Version!=e.item.Version?"yellow":"green")),i=t=>{s.value.device=e.item,e.config&&(t.UpdateSelf&&(e.item.MachineId==a.value.self.MachineId||t.UpdateOther)?e.item.hook_updater?[0,1,3,5].indexOf(e.item.hook_updater.Status)>=0?d.nk.error("操作中，请稍后!"):6!=e.item.hook_updater.Status?s.value.show=2==e.item.hook_updater.Status:c.s.confirm("确定关闭程序吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{(0,p.NS)(e.item.MachineId)})).catch((()=>{})):d.nk.error("未检测到更新"):d.nk.error("无权限"))};return{updater:s,updaterText:n,updaterColor:r,handleUpdate:i}}},v=a(1241);const w=(0,v.A)(h,[["render",i],["__scopeId","data-v-07801f4f"]]);var y=w}}]);